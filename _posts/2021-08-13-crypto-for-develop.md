---
title: 암호화 지식 (개발자를 위한 가이드)
date: 2024-11-16
toc: true
toc_sticky: true

categories:
  - dev
tags:
  - crypto
  - aes
  - rsa
  - ecc
  - ecb
  - cbc
  - pkcs_padding
  - security
---


현대 소프트웨어 개발에서 암호화는 필수적인 보안 요소입니다. 이 글에서는 개발자가 알아야 할 핵심 암호화 개념과 실제 구현 시 고려사항을 다룹니다.

## 암호화 알고리즘 선택 시 고려사항

암호화 구현 시 다음 요소들을 신중히 고려해야 합니다:

1. 대칭형 vs 비대칭형 암호화
2. 알고리즘 종류와 보안 강도
3. 운영 모드의 특성과 용도
4. 패딩 방식
5. 키 관리 전략
6. 성능과 보안의 균형

## 대칭형 vs 비대칭형 암호화

### 대칭형 암호화
- **정의**: 동일한 키로 암호화와 복호화를 수행
- **장점**: 
  - 빠른 처리 속도
  - 적은 컴퓨팅 리소스 요구
  - 대용량 데이터 처리에 적합
- **단점**:
  - 키 공유의 어려움
  - 많은 통신 상대와의 키 관리 복잡성

### 비대칭형 암호화
- **정의**: 공개키와 개인키를 사용하는 방식
- **장점**:
  - 안전한 키 교환
  - 디지털 서명 가능
  - 부인 방지 기능
- **단점**:
  - 느린 처리 속도
  - 높은 컴퓨팅 리소스 요구

## 주요 대칭형 블록 알고리즘

### DES (Data Encryption Standard)
- **블록 크기**: 64비트
- **키 길이**: 56비트
- **특징**: 
  - 역사적으로 중요한 알고리즘
  - 현재는 보안 강도 부족으로 새로운 시스템에는 권장되지 않음
  - 레거시 시스템 호환성을 위해 알아둘 필요 있음

### 3-DES (Triple DES)
- **키 길이**: 
  - 2-키 3-DES: 112비트
  - 3-키 3-DES: 168비트
- **특징**:
  - DES를 3회 적용하여 보안성 향상
  - DES 대비 약 3배 느린 처리 속도
  - 여전히 안전하나 점차 AES로 대체 중

### AES (Advanced Encryption Standard)
- **블록 크기**: 128비트
- **키 길이**: 128/192/256비트
- **특징**:
  - 현대 암호화의 표준
  - 뛰어난 성능과 보안성
  - 하드웨어 가속 지원으로 고성능
- **권장 사용 사례**:
  - 새로운 시스템 개발 시 기본 선택
  - 클라우드 서비스의 데이터 암호화
  - 금융 거래 보안

### SEED
- **블록 크기**: 128비트
- **키 길이**: 128비트
- **특징**:
  - 한국 표준 암호화 알고리즘
  - 국제 표준 인증
  - 국내 공공기관 시스템에서 널리 사용

## 주요 비대칭형(공개키) 알고리즘

### RSA (Rivest-Shamir-Adleman)
- **키 길이**: 2048/3072/4096비트 권장
- **특징**: 
  - 가장 널리 사용되는 비대칭 암호화 알고리즘
  - 소인수분해의 어려움을 기반으로 한 보안성
  - 디지털 서명과 암호화 모두 지원
- **장점**:
  - 구현이 상대적으로 단순
  - 높은 보안성
  - 폭넓은 라이브러리 지원
- **단점**:
  - 긴 키 길이 필요
  - 느린 처리 속도
- **주요 용도**:
  - SSL/TLS 인증서
  - 디지털 서명
  - 키 교환

### ECC (Elliptic Curve Cryptography)
- **키 길이**: 256/384/521비트
- **특징**:
  - 타원곡선의 이산대수 문제를 기반
  - RSA 대비 짧은 키 길이로 동등한 보안성 제공
- **장점**:
  - 짧은 키 길이
  - 빠른 처리 속도
  - 낮은 리소스 요구사항
- **단점**:
  - 구현의 복잡성
  - 특허 문제 (일부 알고리즘)
- **주요 용도**:
  - 모바일 기기의 암호화
  - IoT 디바이스
  - 블록체인/암호화폐

### DSA (Digital Signature Algorithm)
- **키 길이**: 2048/3072비트 권장
- **특징**:
  - 디지털 서명 전용 알고리즘
  - NIST FIPS 186 표준
- **장점**:
  - 서명 생성이 RSA보다 빠름
  - 미국 정부 표준
- **단점**:
  - 서명 검증이 RSA보다 느림
  - 암호화 기능 없음
- **주요 용도**:
  - 전자서명
  - 인증서 서명

### ElGamal
- **특징**:
  - 이산대수의 어려움을 기반
  - DSA의 기반이 되는 알고리즘
- **장점**:
  - 학술적 검증이 잘된 알고리즘
  - 확률적 암호화로 높은 보안성
- **단점**:
  - 암호문 크기가 평문의 2배
  - 처리 속도가 느림
- **주요 용도**:
  - PGP 등의 암호화 시스템
  - 하이브리드 암호 시스템

## 블록 암호화 운영 모드

### ECB (Electronic Codebook)
- **동작 방식**: 각 블록을 독립적으로 암호화
- **장점**: 
  - 단순한 구현
  - 병렬 처리 가능
- **단점**:
  - 패턴이 그대로 노출될 수 있음
  - 데이터 무결성 보장 없음
- **사용 권장 사례**:
  - 매우 짧은 데이터 (단일 블록)
  - 암호화 키 자체의 암호화

### CBC (Cipher Block Chaining)
- **동작 방식**: 이전 블록의 암호문과 현재 평문을 XOR
- **특징**:
  - IV(Initial Vector) 필요
  - 순차적 처리 필요
- **장점**:
  - 높은 보안성
  - 오류 전파 제한적
- **사용 권장 사례**:
  - 일반적인 데이터 암호화
  - 메시지 인증이 필요한 경우

### 기타 운영 모드
- **CFB (Cipher Feedback)**
  - 스트림 암호처럼 동작
  - 실시간 암호화에 적합
- **OFB (Output Feedback)**
  - 미리 키스트림 생성 가능
  - 노이즈가 많은 채널에 적합
- **CTR (Counter)**
  - 병렬 처리 가능
  - 랜덤 액세스 가능

## 패딩 (Padding) 방식

### NO_PADDING
- 패딩 없음
- 데이터가 블록 크기의 배수일 때만 사용 가능

### ZEROS_PADDING
- 남는 공간을 0으로 채움
- 구현이 단순하나 특정 상황에서 모호성 발생 가능

### PKCS7_PADDING (DEFAULT_PADDING)
- 가장 널리 사용되는 표준 패딩 방식
- 패딩 바이트 값이 패딩 길이와 동일
- 예시:
  ```
  블록 크기: 8바이트
  데이터: "HELLO"
  패딩 후: "HELLO\x03\x03\x03"
  ```

### ONE_AND_ZEROS_PADDING
- 첫 바이트는 0x80, 나머지는 0x00
- 패딩의 시작과 끝이 명확함

## 하이브리드 암호 시스템

실제 응용에서는 대칭형과 비대칭형 암호화를 결합하여 사용하는 경우가 많습니다.

### 동작 방식
1. 임의의 대칭키(세션키) 생성
2. 공개키로 세션키를 암호화하여 전송
3. 실제 데이터는 세션키로 대칭 암호화

### 장점
- 비대칭 암호화의 안전한 키 교환
- 대칭 암호화의 빠른 처리 속도
- 높은 확장성

### 대표적인 사용 예
- SSL/TLS 프로토콜
- PGP 암호화
- 보안 메시징 시스템

## 구현 시 주의사항

### 키 관리
- 안전한 키 생성 (충분한 엔트로피 확보)
- 키 순환 정책 수립
- 안전한 키 저장소 사용

### 비대칭 암호화 관련
- RSA: 최소 2048비트 키 길이 사용
- ECC: 검증된 곡선 사용 (예: P-256, P-384)
- 개인키 보호 강화
- OAEP 패딩 사용 (RSA)

### 대칭 암호화 관련
- 검증된 라이브러리 사용
- 적절한 IV 생성 (암호학적 난수 생성기 사용)
- 에러 처리 시 민감 정보 노출 방지

### 성능 최적화
- 하드웨어 가속 활용
- 적절한 키 캐싱
- 대용량 데이터의 경우 스트리밍 고려

## 알고리즘 선택 가이드

### 일반적인 데이터 암호화
- 추천: AES-256-GCM (대칭형)
- 대체: ChaCha20-Poly1305

### 키 교환
- 추천: ECDH with P-256/P-384
- 대체: RSA-2048/3072

### 디지털 서명
- 추천: ECDSA with P-256/P-384
- 대체: RSA-PSS 2048/3072

### IoT/제한된 환경
- 추천: ECC 기반 알고리즘
- 대체: 경량 대칭형 암호

## 결론

암호화 구현 시에는 보안성, 성능, 호환성을 종합적으로 고려해야 합니다. 현대 시스템에서는 대칭형 암호화의 경우 AES-256-GCM이, 비대칭형의 경우 RSA-2048 이상 또는 ECC가 일반적인 선택이지만, 특수한 요구사항이 있다면 다른 알고리즘이나 운영 모드를 고려할 수 있습니다. 항상 최신 보안 권고사항을 참고하고, 정기적인 보안 감사를 통해 시스템의 안전성을 확인하는 것이 중요합니다.