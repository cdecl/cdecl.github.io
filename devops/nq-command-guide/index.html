<!doctype html><html lang=en dir=auto data-theme=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>nq: 가볍고 단순한 커맨드 라인 잡 큐(Job Queue) 시스템 | cdeclog</title><meta name=keywords content="nq,cli,job-queue,linux"><meta name=description content="리눅스나 macOS 환경에서 무거운 백그라운드 데몬 없이 간단하게 명령어 실행을 순차적으로 처리하고 싶을 때가 있습니다. at이나 batch 같은 전통적인 유틸리티도 훌륭하지만, 파일 시스템을 기반으로 더 직관적이고 가볍게 동작하는 nq는 훌륭한 대안이 될 수 있습니다.
이 글에서는 nq의 기본 개념과 설치 방법, 그리고 실제 사용 사례를 통해 어떻게 명령어 큐를 관리하고 실행하는지 자세히 알아보겠습니다.
nq란 무엇인가?
nq는 &rsquo;the nice queue&rsquo;를 의미하는 것으로 보이며, 파일 시스템 기반의 간단한 커맨드 라인 큐 유틸리티입니다. 별도의 데몬 프로세스 없이, nq 명령어 자체가 백그라운드에서 순차적으로 작업을 처리합니다. 선행 작업이 끝나야 다음 작업이 시작되는 것을 보장해주므로, 여러 빌드 명령어나 다운로드 작업을 순서대로 실행할 때 매우 유용합니다."><meta name=author content="Byung Kyu KIM"><link rel=canonical href=https://cdecl.github.io/devops/nq-command-guide/><link crossorigin=anonymous href=/assets/css/stylesheet.d980bb9fb2cba61af0aead0606b5eb221d7e358748ac394b60233d95d626c563.css integrity="sha256-2YC7n7LLphrwrq0GBrXrIh1+NYdIrDlLYCM9ldYmxWM=" rel="preload stylesheet" as=style><link rel=icon href=https://cdecl.github.io/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://cdecl.github.io/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://cdecl.github.io/favicon-32x32.png><link rel=apple-touch-icon href=https://cdecl.github.io/apple-touch-icon.png><link rel=mask-icon href=https://cdecl.github.io/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://cdecl.github.io/devops/nq-command-guide/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51);color-scheme:dark}.list{background:var(--theme)}.toc{background:var(--entry)}}@media(prefers-color-scheme:light){.list::-webkit-scrollbar-thumb{border-color:var(--code-bg)}}</style></noscript><script>localStorage.getItem("pref-theme")==="dark"?document.querySelector("html").dataset.theme="dark":localStorage.getItem("pref-theme")==="light"?document.querySelector("html").dataset.theme="light":window.matchMedia("(prefers-color-scheme: dark)").matches?document.querySelector("html").dataset.theme="dark":document.querySelector("html").dataset.theme="light"</script><script async src="https://www.googletagmanager.com/gtag/js?id=G-VQQHHYPN7K"></script><script>var doNotTrack=!1,dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes";if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-VQQHHYPN7K")}</script><meta property="og:url" content="https://cdecl.github.io/devops/nq-command-guide/"><meta property="og:site_name" content="cdeclog"><meta property="og:title" content="nq: 가볍고 단순한 커맨드 라인 잡 큐(Job Queue) 시스템"><meta property="og:description" content="리눅스나 macOS 환경에서 무거운 백그라운드 데몬 없이 간단하게 명령어 실행을 순차적으로 처리하고 싶을 때가 있습니다. at이나 batch 같은 전통적인 유틸리티도 훌륭하지만, 파일 시스템을 기반으로 더 직관적이고 가볍게 동작하는 nq는 훌륭한 대안이 될 수 있습니다.
이 글에서는 nq의 기본 개념과 설치 방법, 그리고 실제 사용 사례를 통해 어떻게 명령어 큐를 관리하고 실행하는지 자세히 알아보겠습니다.
nq란 무엇인가? nq는 ’the nice queue’를 의미하는 것으로 보이며, 파일 시스템 기반의 간단한 커맨드 라인 큐 유틸리티입니다. 별도의 데몬 프로세스 없이, nq 명령어 자체가 백그라운드에서 순차적으로 작업을 처리합니다. 선행 작업이 끝나야 다음 작업이 시작되는 것을 보장해주므로, 여러 빌드 명령어나 다운로드 작업을 순서대로 실행할 때 매우 유용합니다."><meta property="og:locale" content="ko-kr"><meta property="og:type" content="article"><meta property="article:section" content="devops"><meta property="article:published_time" content="2025-11-16T00:00:00+09:00"><meta property="article:modified_time" content="2025-11-16T00:00:00+09:00"><meta property="article:tag" content="Nq"><meta property="article:tag" content="Cli"><meta property="article:tag" content="Job-Queue"><meta property="article:tag" content="Linux"><meta name=twitter:card content="summary"><meta name=twitter:title content="nq: 가볍고 단순한 커맨드 라인 잡 큐(Job Queue) 시스템"><meta name=twitter:description content="리눅스나 macOS 환경에서 무거운 백그라운드 데몬 없이 간단하게 명령어 실행을 순차적으로 처리하고 싶을 때가 있습니다. at이나 batch 같은 전통적인 유틸리티도 훌륭하지만, 파일 시스템을 기반으로 더 직관적이고 가볍게 동작하는 nq는 훌륭한 대안이 될 수 있습니다.
이 글에서는 nq의 기본 개념과 설치 방법, 그리고 실제 사용 사례를 통해 어떻게 명령어 큐를 관리하고 실행하는지 자세히 알아보겠습니다.
nq란 무엇인가?
nq는 &rsquo;the nice queue&rsquo;를 의미하는 것으로 보이며, 파일 시스템 기반의 간단한 커맨드 라인 큐 유틸리티입니다. 별도의 데몬 프로세스 없이, nq 명령어 자체가 백그라운드에서 순차적으로 작업을 처리합니다. 선행 작업이 끝나야 다음 작업이 시작되는 것을 보장해주므로, 여러 빌드 명령어나 다운로드 작업을 순서대로 실행할 때 매우 유용합니다."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Devops","item":"https://cdecl.github.io/devops/"},{"@type":"ListItem","position":2,"name":"nq: 가볍고 단순한 커맨드 라인 잡 큐(Job Queue) 시스템","item":"https://cdecl.github.io/devops/nq-command-guide/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"nq: 가볍고 단순한 커맨드 라인 잡 큐(Job Queue) 시스템","name":"nq: 가볍고 단순한 커맨드 라인 잡 큐(Job Queue) 시스템","description":"리눅스나 macOS 환경에서 무거운 백그라운드 데몬 없이 간단하게 명령어 실행을 순차적으로 처리하고 싶을 때가 있습니다. at이나 batch 같은 전통적인 유틸리티도 훌륭하지만, 파일 시스템을 기반으로 더 직관적이고 가볍게 동작하는 nq는 훌륭한 대안이 될 수 있습니다.\n이 글에서는 nq의 기본 개념과 설치 방법, 그리고 실제 사용 사례를 통해 어떻게 명령어 큐를 관리하고 실행하는지 자세히 알아보겠습니다.\nnq란 무엇인가? nq는 \u0026rsquo;the nice queue\u0026rsquo;를 의미하는 것으로 보이며, 파일 시스템 기반의 간단한 커맨드 라인 큐 유틸리티입니다. 별도의 데몬 프로세스 없이, nq 명령어 자체가 백그라운드에서 순차적으로 작업을 처리합니다. 선행 작업이 끝나야 다음 작업이 시작되는 것을 보장해주므로, 여러 빌드 명령어나 다운로드 작업을 순서대로 실행할 때 매우 유용합니다.\n","keywords":["nq","cli","job-queue","linux"],"articleBody":"리눅스나 macOS 환경에서 무거운 백그라운드 데몬 없이 간단하게 명령어 실행을 순차적으로 처리하고 싶을 때가 있습니다. at이나 batch 같은 전통적인 유틸리티도 훌륭하지만, 파일 시스템을 기반으로 더 직관적이고 가볍게 동작하는 nq는 훌륭한 대안이 될 수 있습니다.\n이 글에서는 nq의 기본 개념과 설치 방법, 그리고 실제 사용 사례를 통해 어떻게 명령어 큐를 관리하고 실행하는지 자세히 알아보겠습니다.\nnq란 무엇인가? nq는 ’the nice queue’를 의미하는 것으로 보이며, 파일 시스템 기반의 간단한 커맨드 라인 큐 유틸리티입니다. 별도의 데몬 프로세스 없이, nq 명령어 자체가 백그라운드에서 순차적으로 작업을 처리합니다. 선행 작업이 끝나야 다음 작업이 시작되는 것을 보장해주므로, 여러 빌드 명령어나 다운로드 작업을 순서대로 실행할 때 매우 유용합니다.\n주요 명령어는 다음과 같습니다.\nnq: 실행하고 싶은 명령어를 큐(Queue)에 추가하고, 백그라운드에서 실행을 시작합니다. nqtail: 큐에서 실행 중이거나 완료된 작업의 로그(표준 출력/에러)를 확인합니다. 설치 방법 nq는 C로 작성된 간단한 프로그램이므로, 소스 코드를 직접 컴파일하여 설치합니다.\n먼저 Git을 사용해 소스 코드를 클론합니다.\ngit clone https://github.com/leahneukirchen/nq.git cd nq make 명령어로 컴파일하고, make install로 시스템에 설치합니다. sudo 권한이 필요할 수 있습니다.\nmake sudo make install 기본적으로 /usr/local/bin에 nq와 nqtail이 설치됩니다.\nnq 기본 사용법 명령어(잡) 큐에 추가하고 실행하기 nq 사용법은 매우 간단합니다. 그냥 실행하고 싶은 명령어 앞에 nq를 붙여주기만 하면 됩니다.\n# Makefile 타겟을 순차적으로 실행 nq make clean nq make depends nq make all 이렇게 하면 nq는 make clean을 백그라운드에서 실행하고, 이 작업이 끝나면 make depends를, 그 다음 make all을 순차적으로 실행합니다. 각 명령어는 즉시 큐에 추가되고, nq는 이전 작업이 끝날 때까지 다음 작업을 기다렸다가 실행합니다.\n작업 로그 확인하기 (nqtail) 백그라운드에서 실행되는 작업의 출력은 nqtail 명령어로 확인할 수 있습니다.\n# 현재 실행 중인 작업의 로그를 실시간으로 출력 nqtail # 모든 작업의 로그를 한 번에 출력 nqtail -a # 작업당 한 줄로 요약해서 보여주기 nqtail -q 모든 작업이 끝나기를 기다리기 (nq -w) 스크립트 등에서 nq로 추가한 모든 작업이 완료될 때까지 기다려야 할 때가 있습니다. 이때는 -w 옵션을 사용합니다.\necho \"Starting downloads...\" nq wget https://example.com/file1.zip nq wget https://example.com/file2.zip # 위의 두 다운로드가 모두 끝날 때까지 대기 nq -w echo \"All downloads finished.\" 큐 관리 및 분리 주요 명령어 및 옵션 nq와 nqtail은 간단하지만 강력한 옵션들을 제공합니다.\nnq 옵션 nq [command] -q: 작업을 큐에 추가할 때 기본적으로 출력되는 작업 ID를 숨깁니다. 스크립트에서 출력을 깔끔하게 유지하고 싶을 때 유용합니다. nq -q sleep 5 -w [job_id…]: 모든 작업 또는 지정된 작업 ID들이 완료될 때까지 기다립니다. 스크립트 내에서 동기적으로 작업을 처리해야 할 때 필수적입니다. # 모든 작업이 끝날 때까지 대기 nq -w # 특정 작업들(예: 1, 3)이 끝날 때까지 대기 nq -w 1 3 -t: 큐에 처리 대기 중인 작업이 있는지 확인합니다. 작업이 남아있으면 종료 코드 0을, 큐가 비어있으면 0이 아닌 값을 반환합니다. if nq -t; then echo \"아직 처리할 작업이 남았습니다.\" fi nqtail 옵션 nqtail -a: 큐에 있는 모든 작업의 전체 로그를 출력합니다. -q: 각 작업을 한 줄로 요약하여 간략하게 상태를 보여줍니다. nq의 강력한 기능 중 하나는 여러 개의 큐를 손쉽게 분리하여 관리할 수 있다는 점입니다.\n큐 구분 방법 (NQDIR 환경 변수) nq는 NQDIR 환경 변수를 통해 작업 큐가 저장될 디렉토리를 결정합니다. 이 변수를 설정하지 않으면 현재 디렉토리를 큐로 사용합니다.\n예를 들어, 일반 작업과 다운로드 작업을 별도의 큐로 관리하고 싶다고 가정해 봅시다.\n일반 작업 (현재 디렉토리 큐)\nnq echo \"This is a default task.\" 다운로드 전용 큐 (/tmp/downloads) NQDIR 환경 변수를 설정하여 nq와 nqtail이 다른 디렉토리를 사용하도록 지정합니다.\n# NQDIR을 설정하여 다운로드 큐에 작업 추가 export NQDIR=/tmp/downloads nq wget https://example.com/big_file.iso # 다운로드 큐의 로그 확인 NQDIR=/tmp/downloads nqtail -q 이렇게 하면 현재 디렉토리의 큐와 다운로드용 /tmp/downloads 큐가 완전히 분리되어 서로 영향을 주지 않습니다.\n대기 중인 작업 확인 및 관리 nq는 파일 시스템을 기반으로 큐를 관리하므로, 일반적인 파일 시스템 명령어를 활용하여 대기 중인 작업을 확인하고 관리할 수 있습니다.\n대기 중인 작업 존재 여부 확인 (nq -t) 특정 큐에 대기 중인 작업이 있는지 빠르게 확인하려면 -t 옵션을 사용합니다. 이 옵션은 작업의 존재 여부만 알려주며, 개수를 직접 반환하지는 않습니다.\n# 현재 큐에 대기 중인 작업이 있으면 종료 코드 0을 반환 if nq -t; then echo \"Jobs are pending.\" else echo \"Queue is empty.\" fi 잔여 명령어 개수 확인 nq는 각 명령어를 큐 디렉토리 내의 파일로 저장합니다. 따라서 해당 디렉토리의 파일 개수를 세는 것으로 잔여 명령어의 개수를 파악할 수 있습니다. NQDIR 환경 변수가 설정되어 있지 않다면 현재 디렉토리를 사용합니다.\n# 현재 큐 디렉토리 (NQDIR이 설정되어 있지 않다면 현재 디렉토리) QUEUE_DIR=${NQDIR:-.} # 잔여 명령어 개수 확인 (nqtail -q를 통해 정확한 작업 개수 확인) NQDIR=\"$QUEUE_DIR\" nqtail -q | wc -l 참고: ls 명령으로 디렉토리 내 파일을 세는 것보다 nqtail -q의 출력 라인 수를 세는 것이 nq 작업 파일만을 정확히 세는 더 좋은 방법입니다.\n잔여 명령어 내용 확인 큐에 대기 중인 명령어의 실제 내용을 확인하려면, 해당 작업 파일을 직접 읽으면 됩니다. 작업 파일은 큐 디렉토리 내에 저장되며, 파일명은 일반적으로 ,TIMESTAMP.PID 형태를 따릅니다.\n# 현재 큐 디렉토리 (NQDIR이 설정되어 있지 않다면 현재 디렉토리) QUEUE_DIR=${NQDIR:-.} # 모든 대기 중인 명령어 파일의 내용 보기 for job_file in \"$QUEUE_DIR\"/,*; do if [ -f \"$job_file\" ]; then echo \"--- Job: $(basename \"$job_file\") ---\" cat \"$job_file\" echo \"\" fi done 주의: nq는 작업 파일을 생성할 때 파일명 앞에 쉼표(,)를 붙입니다. ls 명령으로 큐 디렉토리를 직접 확인하여 파일명을 파악할 수 있습니다.\n큐에 저장된 실제 작업 파일 목록을 보려면 ls 명령어를 사용하면 됩니다.\n# 다운로드 큐의 작업 파일 목록 보기 ls -F /tmp/downloads 또한, ls -F 명령어를 사용하면 현재 실행 중인 작업을 시각적으로 구분할 수 있습니다. nq는 실행 중인 작업의 로그 파일에 실행 권한(+x)을 부여하므로, ls -F 출력에서 해당 파일명 뒤에 별표(*)가 붙어 나타납니다. 이를 통해 어떤 작업이 현재 실행 중인지 한눈에 파악할 수 있습니다.\n결론 nq는 복잡한 설정이나 데몬 없이, 파일 시스템을 이용해 간단하고 효율적으로 커맨드 라인 작업을 순차 관리할 수 있는 강력한 도구입니다. 특히 NQDIR 환경 변수를 활용한 큐 분리 기능은 여러 종류의 작업을 체계적으로 관리해야 할 때 매우 유용합니다.\n단순한 스크립트 실행 예약부터 여러 개의 빌드 작업이나 파일 다운로드를 순서대로 처리하는 등, nq를 활용해 자신만의 작업 자동화 파이프라인을 구축해 보세요.\n","wordCount":"927","inLanguage":"en","datePublished":"2025-11-16T00:00:00+09:00","dateModified":"2025-11-16T00:00:00+09:00","author":{"@type":"Person","name":"Byung Kyu KIM"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://cdecl.github.io/devops/nq-command-guide/"},"publisher":{"@type":"Organization","name":"cdeclog","logo":{"@type":"ImageObject","url":"https://cdecl.github.io/favicon.ico"}}}</script></head><body id=top><header class=header><nav class=nav><div class=logo><a href=https://cdecl.github.io/ accesskey=h title="cdeclog (Alt + H)">cdeclog</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)" aria-label="Toggle theme">
<svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg>
<svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://cdecl.github.io/archives/ title=Archive><span>Archive</span></a></li><li><a href=https://cdecl.github.io/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li><li><a href=https://cdecl.github.io/tags/ title=Tags><span>Tags</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class="post-title entry-hint-parent">nq: 가볍고 단순한 커맨드 라인 잡 큐(Job Queue) 시스템</h1><div class=post-meta><span title='2025-11-16 00:00:00 +0900 KST'>November 16, 2025</span>&nbsp;·&nbsp;<span>Byung Kyu KIM</span></div></header><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><ul><li><a href=#nq%eb%9e%80-%eb%ac%b4%ec%97%87%ec%9d%b8%ea%b0%80 aria-label="nq란 무엇인가?">nq란 무엇인가?</a></li><li><a href=#%ec%84%a4%ec%b9%98-%eb%b0%a9%eb%b2%95 aria-label="설치 방법">설치 방법</a></li><li><a href=#nq-%ea%b8%b0%eb%b3%b8-%ec%82%ac%ec%9a%a9%eb%b2%95 aria-label="nq 기본 사용법">nq 기본 사용법</a><ul><li><a href=#%eb%aa%85%eb%a0%b9%ec%96%b4%ec%9e%a1-%ed%81%90%ec%97%90-%ec%b6%94%ea%b0%80%ed%95%98%ea%b3%a0-%ec%8b%a4%ed%96%89%ed%95%98%ea%b8%b0 aria-label="명령어(잡) 큐에 추가하고 실행하기">명령어(잡) 큐에 추가하고 실행하기</a></li><li><a href=#%ec%9e%91%ec%97%85-%eb%a1%9c%ea%b7%b8-%ed%99%95%ec%9d%b8%ed%95%98%ea%b8%b0-nqtail aria-label="작업 로그 확인하기 (nqtail)">작업 로그 확인하기 (nqtail)</a></li><li><a href=#%eb%aa%a8%eb%93%a0-%ec%9e%91%ec%97%85%ec%9d%b4-%eb%81%9d%eb%82%98%ea%b8%b0%eb%a5%bc-%ea%b8%b0%eb%8b%a4%eb%a6%ac%ea%b8%b0-nq--w aria-label="모든 작업이 끝나기를 기다리기 (nq -w)">모든 작업이 끝나기를 기다리기 (nq -w)</a></li></ul></li><li><a href=#%ed%81%90-%ea%b4%80%eb%a6%ac-%eb%b0%8f-%eb%b6%84%eb%a6%ac aria-label="큐 관리 및 분리">큐 관리 및 분리</a><ul><li><a href=#%ec%a3%bc%ec%9a%94-%eb%aa%85%eb%a0%b9%ec%96%b4-%eb%b0%8f-%ec%98%b5%ec%85%98 aria-label="주요 명령어 및 옵션">주요 명령어 및 옵션</a><ul><li><a href=#nq-%ec%98%b5%ec%85%98 aria-label="nq 옵션">nq 옵션</a></li><li><a href=#nqtail-%ec%98%b5%ec%85%98 aria-label="nqtail 옵션">nqtail 옵션</a></li></ul></li><li><a href=#%ed%81%90-%ea%b5%ac%eb%b6%84-%eb%b0%a9%eb%b2%95-nqdir-%ed%99%98%ea%b2%bd-%eb%b3%80%ec%88%98 aria-label="큐 구분 방법 (NQDIR 환경 변수)">큐 구분 방법 (NQDIR 환경 변수)</a></li><li><a href=#%eb%8c%80%ea%b8%b0-%ec%a4%91%ec%9d%b8-%ec%9e%91%ec%97%85-%ed%99%95%ec%9d%b8-%eb%b0%8f-%ea%b4%80%eb%a6%ac aria-label="대기 중인 작업 확인 및 관리">대기 중인 작업 확인 및 관리</a><ul><li><a href=#%eb%8c%80%ea%b8%b0-%ec%a4%91%ec%9d%b8-%ec%9e%91%ec%97%85-%ec%a1%b4%ec%9e%ac-%ec%97%ac%eb%b6%80-%ed%99%95%ec%9d%b8-nq--t aria-label="대기 중인 작업 존재 여부 확인 (nq -t)">대기 중인 작업 존재 여부 확인 (nq -t)</a></li><li><a href=#%ec%9e%94%ec%97%ac-%eb%aa%85%eb%a0%b9%ec%96%b4-%ea%b0%9c%ec%88%98-%ed%99%95%ec%9d%b8 aria-label="잔여 명령어 개수 확인">잔여 명령어 개수 확인</a></li><li><a href=#%ec%9e%94%ec%97%ac-%eb%aa%85%eb%a0%b9%ec%96%b4-%eb%82%b4%ec%9a%a9-%ed%99%95%ec%9d%b8 aria-label="잔여 명령어 내용 확인">잔여 명령어 내용 확인</a></li></ul></li></ul></li><li><a href=#%ea%b2%b0%eb%a1%a0 aria-label=결론>결론</a></li></ul></div></details></div><div class=post-content><p>리눅스나 macOS 환경에서 무거운 백그라운드 데몬 없이 간단하게 명령어 실행을 순차적으로 처리하고 싶을 때가 있습니다. <code>at</code>이나 <code>batch</code> 같은 전통적인 유틸리티도 훌륭하지만, 파일 시스템을 기반으로 더 직관적이고 가볍게 동작하는 <code>nq</code>는 훌륭한 대안이 될 수 있습니다.</p><p>이 글에서는 <code>nq</code>의 기본 개념과 설치 방법, 그리고 실제 사용 사례를 통해 어떻게 명령어 큐를 관리하고 실행하는지 자세히 알아보겠습니다.</p><h2 id=nq란-무엇인가><code>nq</code>란 무엇인가?<a hidden class=anchor aria-hidden=true href=#nq란-무엇인가>#</a></h2><p><code>nq</code>는 &rsquo;the nice queue&rsquo;를 의미하는 것으로 보이며, 파일 시스템 기반의 간단한 커맨드 라인 큐 유틸리티입니다. 별도의 데몬 프로세스 없이, <code>nq</code> 명령어 자체가 백그라운드에서 순차적으로 작업을 처리합니다. 선행 작업이 끝나야 다음 작업이 시작되는 것을 보장해주므로, 여러 빌드 명령어나 다운로드 작업을 순서대로 실행할 때 매우 유용합니다.</p><p>주요 명령어는 다음과 같습니다.</p><ul><li><strong><code>nq</code></strong>: 실행하고 싶은 명령어를 큐(Queue)에 추가하고, 백그라운드에서 실행을 시작합니다.</li><li><strong><code>nqtail</code></strong>: 큐에서 실행 중이거나 완료된 작업의 로그(표준 출력/에러)를 확인합니다.</li></ul><h2 id=설치-방법>설치 방법<a hidden class=anchor aria-hidden=true href=#설치-방법>#</a></h2><p><code>nq</code>는 C로 작성된 간단한 프로그램이므로, 소스 코드를 직접 컴파일하여 설치합니다.</p><ol><li><p>먼저 Git을 사용해 소스 코드를 클론합니다.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>git clone https://github.com/leahneukirchen/nq.git
</span></span><span style=display:flex><span>cd nq
</span></span></code></pre></div></li><li><p><code>make</code> 명령어로 컴파일하고, <code>make install</code>로 시스템에 설치합니다. <code>sudo</code> 권한이 필요할 수 있습니다.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>make
</span></span><span style=display:flex><span>sudo make install
</span></span></code></pre></div><p>기본적으로 <code>/usr/local/bin</code>에 <code>nq</code>와 <code>nqtail</code>이 설치됩니다.</p></li></ol><h2 id=nq-기본-사용법><code>nq</code> 기본 사용법<a hidden class=anchor aria-hidden=true href=#nq-기본-사용법>#</a></h2><h3 id=명령어잡-큐에-추가하고-실행하기>명령어(잡) 큐에 추가하고 실행하기<a hidden class=anchor aria-hidden=true href=#명령어잡-큐에-추가하고-실행하기>#</a></h3><p><code>nq</code> 사용법은 매우 간단합니다. 그냥 실행하고 싶은 명령어 앞에 <code>nq</code>를 붙여주기만 하면 됩니다.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># Makefile 타겟을 순차적으로 실행</span>
</span></span><span style=display:flex><span>nq make clean
</span></span><span style=display:flex><span>nq make depends
</span></span><span style=display:flex><span>nq make all
</span></span></code></pre></div><p>이렇게 하면 <code>nq</code>는 <code>make clean</code>을 백그라운드에서 실행하고, 이 작업이 끝나면 <code>make depends</code>를, 그 다음 <code>make all</code>을 순차적으로 실행합니다. 각 명령어는 즉시 큐에 추가되고, <code>nq</code>는 이전 작업이 끝날 때까지 다음 작업을 기다렸다가 실행합니다.</p><h3 id=작업-로그-확인하기-nqtail>작업 로그 확인하기 (<code>nqtail</code>)<a hidden class=anchor aria-hidden=true href=#작업-로그-확인하기-nqtail>#</a></h3><p>백그라운드에서 실행되는 작업의 출력은 <code>nqtail</code> 명령어로 확인할 수 있습니다.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># 현재 실행 중인 작업의 로그를 실시간으로 출력</span>
</span></span><span style=display:flex><span>nqtail
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 모든 작업의 로그를 한 번에 출력</span>
</span></span><span style=display:flex><span>nqtail -a
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 작업당 한 줄로 요약해서 보여주기</span>
</span></span><span style=display:flex><span>nqtail -q
</span></span></code></pre></div><h3 id=모든-작업이-끝나기를-기다리기-nq--w>모든 작업이 끝나기를 기다리기 (<code>nq -w</code>)<a hidden class=anchor aria-hidden=true href=#모든-작업이-끝나기를-기다리기-nq--w>#</a></h3><p>스크립트 등에서 <code>nq</code>로 추가한 모든 작업이 완료될 때까지 기다려야 할 때가 있습니다. 이때는 <code>-w</code> 옵션을 사용합니다.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>echo <span style=color:#e6db74>&#34;Starting downloads...&#34;</span>
</span></span><span style=display:flex><span>nq wget https://example.com/file1.zip
</span></span><span style=display:flex><span>nq wget https://example.com/file2.zip
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 위의 두 다운로드가 모두 끝날 때까지 대기</span>
</span></span><span style=display:flex><span>nq -w
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>echo <span style=color:#e6db74>&#34;All downloads finished.&#34;</span>
</span></span></code></pre></div><h2 id=큐-관리-및-분리>큐 관리 및 분리<a hidden class=anchor aria-hidden=true href=#큐-관리-및-분리>#</a></h2><h3 id=주요-명령어-및-옵션>주요 명령어 및 옵션<a hidden class=anchor aria-hidden=true href=#주요-명령어-및-옵션>#</a></h3><p><code>nq</code>와 <code>nqtail</code>은 간단하지만 강력한 옵션들을 제공합니다.</p><h4 id=nq-옵션><code>nq</code> 옵션<a hidden class=anchor aria-hidden=true href=#nq-옵션>#</a></h4><ul><li><code>nq [command]</code><ul><li><strong>-q</strong>: 작업을 큐에 추가할 때 기본적으로 출력되는 작업 ID를 숨깁니다. 스크립트에서 출력을 깔끔하게 유지하고 싶을 때 유용합니다.<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>nq -q sleep <span style=color:#ae81ff>5</span>
</span></span></code></pre></div></li><li><strong>-w [job_id&mldr;]</strong>: 모든 작업 또는 지정된 작업 ID들이 완료될 때까지 기다립니다. 스크립트 내에서 동기적으로 작업을 처리해야 할 때 필수적입니다.<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># 모든 작업이 끝날 때까지 대기</span>
</span></span><span style=display:flex><span>nq -w
</span></span><span style=display:flex><span><span style=color:#75715e># 특정 작업들(예: 1, 3)이 끝날 때까지 대기</span>
</span></span><span style=display:flex><span>nq -w <span style=color:#ae81ff>1</span> <span style=color:#ae81ff>3</span>
</span></span></code></pre></div></li><li><strong>-t</strong>: 큐에 처리 대기 중인 작업이 있는지 확인합니다. 작업이 남아있으면 종료 코드 0을, 큐가 비어있으면 0이 아닌 값을 반환합니다.<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#66d9ef>if</span> nq -t; <span style=color:#66d9ef>then</span>
</span></span><span style=display:flex><span>  echo <span style=color:#e6db74>&#34;아직 처리할 작업이 남았습니다.&#34;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>fi</span>
</span></span></code></pre></div></li></ul></li></ul><h4 id=nqtail-옵션><code>nqtail</code> 옵션<a hidden class=anchor aria-hidden=true href=#nqtail-옵션>#</a></h4><ul><li><code>nqtail</code><ul><li><strong>-a</strong>: 큐에 있는 모든 작업의 전체 로그를 출력합니다.</li><li><strong>-q</strong>: 각 작업을 한 줄로 요약하여 간략하게 상태를 보여줍니다.</li></ul></li></ul><p><code>nq</code>의 강력한 기능 중 하나는 여러 개의 큐를 손쉽게 분리하여 관리할 수 있다는 점입니다.</p><h3 id=큐-구분-방법-nqdir-환경-변수>큐 구분 방법 (<code>NQDIR</code> 환경 변수)<a hidden class=anchor aria-hidden=true href=#큐-구분-방법-nqdir-환경-변수>#</a></h3><p><code>nq</code>는 <code>NQDIR</code> 환경 변수를 통해 작업 큐가 저장될 디렉토리를 결정합니다. 이 변수를 설정하지 않으면 <strong>현재 디렉토리</strong>를 큐로 사용합니다.</p><p>예를 들어, 일반 작업과 다운로드 작업을 별도의 큐로 관리하고 싶다고 가정해 봅시다.</p><ol><li><p><strong>일반 작업 (현재 디렉토리 큐)</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>nq echo <span style=color:#e6db74>&#34;This is a default task.&#34;</span>
</span></span></code></pre></div></li><li><p><strong>다운로드 전용 큐 (<code>/tmp/downloads</code>)</strong>
<code>NQDIR</code> 환경 변수를 설정하여 <code>nq</code>와 <code>nqtail</code>이 다른 디렉토리를 사용하도록 지정합니다.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># NQDIR을 설정하여 다운로드 큐에 작업 추가</span>
</span></span><span style=display:flex><span>export NQDIR<span style=color:#f92672>=</span>/tmp/downloads
</span></span><span style=display:flex><span>nq wget https://example.com/big_file.iso
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 다운로드 큐의 로그 확인</span>
</span></span><span style=display:flex><span>NQDIR<span style=color:#f92672>=</span>/tmp/downloads nqtail -q
</span></span></code></pre></div><p>이렇게 하면 현재 디렉토리의 큐와 다운로드용 <code>/tmp/downloads</code> 큐가 완전히 분리되어 서로 영향을 주지 않습니다.</p></li></ol><h3 id=대기-중인-작업-확인-및-관리>대기 중인 작업 확인 및 관리<a hidden class=anchor aria-hidden=true href=#대기-중인-작업-확인-및-관리>#</a></h3><p><code>nq</code>는 파일 시스템을 기반으로 큐를 관리하므로, 일반적인 파일 시스템 명령어를 활용하여 대기 중인 작업을 확인하고 관리할 수 있습니다.</p><h4 id=대기-중인-작업-존재-여부-확인-nq--t>대기 중인 작업 존재 여부 확인 (<code>nq -t</code>)<a hidden class=anchor aria-hidden=true href=#대기-중인-작업-존재-여부-확인-nq--t>#</a></h4><p>특정 큐에 대기 중인 작업이 있는지 빠르게 확인하려면 <code>-t</code> 옵션을 사용합니다. 이 옵션은 작업의 <em>존재 여부</em>만 알려주며, 개수를 직접 반환하지는 않습니다.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># 현재 큐에 대기 중인 작업이 있으면 종료 코드 0을 반환</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>if</span> nq -t; <span style=color:#66d9ef>then</span>
</span></span><span style=display:flex><span>  echo <span style=color:#e6db74>&#34;Jobs are pending.&#34;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>else</span>
</span></span><span style=display:flex><span>  echo <span style=color:#e6db74>&#34;Queue is empty.&#34;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>fi</span>
</span></span></code></pre></div><h4 id=잔여-명령어-개수-확인>잔여 명령어 개수 확인<a hidden class=anchor aria-hidden=true href=#잔여-명령어-개수-확인>#</a></h4><p><code>nq</code>는 각 명령어를 큐 디렉토리 내의 파일로 저장합니다. 따라서 해당 디렉토리의 파일 개수를 세는 것으로 잔여 명령어의 개수를 파악할 수 있습니다. <code>NQDIR</code> 환경 변수가 설정되어 있지 않다면 현재 디렉토리를 사용합니다.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># 현재 큐 디렉토리 (NQDIR이 설정되어 있지 않다면 현재 디렉토리)</span>
</span></span><span style=display:flex><span>QUEUE_DIR<span style=color:#f92672>=</span><span style=color:#e6db74>${</span>NQDIR<span style=color:#66d9ef>:-</span>.<span style=color:#e6db74>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 잔여 명령어 개수 확인 (nqtail -q를 통해 정확한 작업 개수 확인)</span>
</span></span><span style=display:flex><span>NQDIR<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;</span>$QUEUE_DIR<span style=color:#e6db74>&#34;</span> nqtail -q | wc -l
</span></span></code></pre></div><p><em>참고: <code>ls</code> 명령으로 디렉토리 내 파일을 세는 것보다 <code>nqtail -q</code>의 출력 라인 수를 세는 것이 <code>nq</code> 작업 파일만을 정확히 세는 더 좋은 방법입니다.</em></p><h4 id=잔여-명령어-내용-확인>잔여 명령어 내용 확인<a hidden class=anchor aria-hidden=true href=#잔여-명령어-내용-확인>#</a></h4><p>큐에 대기 중인 명령어의 실제 내용을 확인하려면, 해당 작업 파일을 직접 읽으면 됩니다. 작업 파일은 큐 디렉토리 내에 저장되며, 파일명은 일반적으로 <code>,TIMESTAMP.PID</code> 형태를 따릅니다.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># 현재 큐 디렉토리 (NQDIR이 설정되어 있지 않다면 현재 디렉토리)</span>
</span></span><span style=display:flex><span>QUEUE_DIR<span style=color:#f92672>=</span><span style=color:#e6db74>${</span>NQDIR<span style=color:#66d9ef>:-</span>.<span style=color:#e6db74>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 모든 대기 중인 명령어 파일의 내용 보기</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>for</span> job_file in <span style=color:#e6db74>&#34;</span>$QUEUE_DIR<span style=color:#e6db74>&#34;</span>/,*; <span style=color:#66d9ef>do</span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>if</span> <span style=color:#f92672>[</span> -f <span style=color:#e6db74>&#34;</span>$job_file<span style=color:#e6db74>&#34;</span> <span style=color:#f92672>]</span>; <span style=color:#66d9ef>then</span>
</span></span><span style=display:flex><span>    echo <span style=color:#e6db74>&#34;--- Job: </span><span style=color:#66d9ef>$(</span>basename <span style=color:#e6db74>&#34;</span>$job_file<span style=color:#e6db74>&#34;</span><span style=color:#66d9ef>)</span><span style=color:#e6db74> ---&#34;</span>
</span></span><span style=display:flex><span>    cat <span style=color:#e6db74>&#34;</span>$job_file<span style=color:#e6db74>&#34;</span>
</span></span><span style=display:flex><span>    echo <span style=color:#e6db74>&#34;&#34;</span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>fi</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>done</span>
</span></span></code></pre></div><p><em>주의: <code>nq</code>는 작업 파일을 생성할 때 파일명 앞에 쉼표(<code>,</code>)를 붙입니다. <code>ls</code> 명령으로 큐 디렉토리를 직접 확인하여 파일명을 파악할 수 있습니다.</em></p><p>큐에 저장된 실제 작업 파일 목록을 보려면 <code>ls</code> 명령어를 사용하면 됩니다.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># 다운로드 큐의 작업 파일 목록 보기</span>
</span></span><span style=display:flex><span>ls -F /tmp/downloads
</span></span></code></pre></div><p>또한, <code>ls -F</code> 명령어를 사용하면 현재 실행 중인 작업을 시각적으로 구분할 수 있습니다. <code>nq</code>는 실행 중인 작업의 로그 파일에 실행 권한(<code>+x</code>)을 부여하므로, <code>ls -F</code> 출력에서 해당 파일명 뒤에 별표(<code>*</code>)가 붙어 나타납니다. 이를 통해 어떤 작업이 현재 실행 중인지 한눈에 파악할 수 있습니다.</p><h2 id=결론>결론<a hidden class=anchor aria-hidden=true href=#결론>#</a></h2><p><code>nq</code>는 복잡한 설정이나 데몬 없이, 파일 시스템을 이용해 간단하고 효율적으로 커맨드 라인 작업을 순차 관리할 수 있는 강력한 도구입니다. 특히 <code>NQDIR</code> 환경 변수를 활용한 큐 분리 기능은 여러 종류의 작업을 체계적으로 관리해야 할 때 매우 유용합니다.</p><p>단순한 스크립트 실행 예약부터 여러 개의 빌드 작업이나 파일 다운로드를 순서대로 처리하는 등, <code>nq</code>를 활용해 자신만의 작업 자동화 파이프라인을 구축해 보세요.</p></div><footer class=post-footer><ul class=post-tags><li><a href=https://cdecl.github.io/tags/nq/>Nq</a></li><li><a href=https://cdecl.github.io/tags/cli/>Cli</a></li><li><a href=https://cdecl.github.io/tags/job-queue/>Job-Queue</a></li><li><a href=https://cdecl.github.io/tags/linux/>Linux</a></li></ul></footer></article></main><footer class=footer><span>&copy; 2026 <a href=https://cdecl.github.io/>cdeclog</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
<a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentColor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");if(menu){const e=localStorage.getItem("menu-scroll-position");e&&(menu.scrollLeft=parseInt(e,10)),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}}document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{const e=document.querySelector("html");e.dataset.theme==="dark"?(e.dataset.theme="light",localStorage.setItem("pref-theme","light")):(e.dataset.theme="dark",localStorage.setItem("pref-theme","dark"))})</script></body></html>