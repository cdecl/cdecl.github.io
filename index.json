[{"content":"OpenCode는 터미널 기반의 오픈소스 AI 코딩 에이전트로, 개발 생산성 향상을 목표로 합니다. LSP(Language Server Pro\nOpenCode 핵심 기능 LSP (Language Server Protocol) LSP 서버란? LSP 자동 로드 OpenCode는 프로젝트를 열 때 .lsproj 파일이나 언어별 설정 파일을 자동으로 스캔하여 해당 프로젝트에 적합한 LSP 서버를 감지하고 설치 및 실행합니다. 예를 들어, TypeScript 프로젝트에서는 자동으로 TypeScript Language Server를 활성화합니다. 이 기능 덕분에 개발자는 별도의 수동 설정 없이 즉시 언어 서비스를 활용할 수 있으며, 에이전트는 LSP 서버와 통신하며 코드 분석, 편집, 리팩토링 등을 지원합니다.\n기타 주요 기능 AST 기반 검색: 코드의 문법적 구조를 표현하는 AST(Abstract Syntax Tree)를 분석하여 클래스, 함수, 변수 등을 정밀하게 탐색합니다. 이는 단순 텍스트 검색보다 훨씬 정확하고 강력한 코드 검색을 가능하게 합니다. /undo 및 /redo: 에이전트가 수정한 내용을 파일 또는 브랜치 단위로 쉽게 되돌리거나 재적용할 수 있습니다. 이를 통해 개발자는 실수에 대한 걱정 없이 에이전트의 변경 사항을 실험해볼 수 있습니다. 멀티 세션 관리: 여러 프로젝트를 각각 독립된 세션으로 동시에 관리할 수 있어, 다양한 프로젝트 간의 컨텍스트 스위칭이 매우 간편합니다. 다른 CLI 도구와의 비교 OpenCode는 프라이버시, 오픈소스, 그리고 75개 이상의 LLM(Large Language Model) 지원을 강점으로 내세웁니다. 특히 Claude Code와 비교했을 때 모델 선택의 유연성이 뛰어납니다.\n툴 모델 지원 강점 약점 OpenCode 75+ LSP/AST, /undo 초기 설정 Claude Code Claude 서브 에이전트 모델 고정 Codex CLI OpenAI 속도 툴 미완성 oh-my-opencode와 Sisyphus: AI 개발 팀의 구성 oh-my-opencode는 OpenCode의 확장 플러그인으로, 여러 전문 에이전트(하위 에이전트(SubAgent))로 구성된 팀을 오케스트레이션하여 복잡한 개발 작업을 수행합니다. 이 오케스트레이션의 중심에는 Sisyphus라는 메인 에이전트가 있습니다.\noh-my-opencode의 역할 oh-my-opencode는 전문화된 에이전트 팀을 백그라운드에서 병렬로 실행하고, 컨텍스트를 자동으로 관리합니다. AGENTS.md 파일 주입, 토큰 사용량 모니터링 및 압축 등을 통해 에이전트들이 효율적으로 협업할 수 있는 환경을 제공합니다. 또한, Claude Code와 호환되는 레이어를 제공하여 유연성을 높였습니다.\nSisyphus의 오케스트레이션 Sisyphus는 전체 작업의 계획을 수립하고, 각 작업에 적합한 하위 에이전트에게 태스크를 분배하며, 이들의 실행을 조율하는 오케스트레이터입니다. 마치 그리스 신화의 시시포스처럼, 주어진 작업이 완료될 때까지 \u0026ldquo;돌을 굴리는\u0026rdquo; 역할을 수행하며, TODO 리스트가 빌 때까지 멈추지 않고 작업을 지속합니다. oh-my-opencode.json 파일을 통해 사용할 모델을 지정할 수도 있습니다.\n모델 에이전트 연동 (Auth) oh-my-opencode는 auth 명령을 통해 다양한 LLM 제공업체(Claude, ChatGPT, Gemini 등)와의 연동을 지원합니다. 설치 후 다음 명령을 사용하여 각 제공업체의 인증을 구성할 수 있습니다.\nopencode auth login 이 과정을 통해 에이전트가 각 LLM 서비스에 안전하게 접근하고 작업을 수행할 수 있도록 설정됩니다.\nsubagent 협의 과정 oh-my-opencode는 Sisyphus 오케스트레이터의 지휘 아래, 7개 이상의 전문 에이전트 팀을 운영합니다. oh-my-opencode.json 파일을 통해 각 에이전트가 사용할 모델이나 권한을 세밀하게 설정할 수 있습니다.\n에이전트 역할 최적 모델 예 호출 예 @sisyphus 오케스트레이터, 작업 계획 및 분배 Claude 3 Opus 자동 (사용자 직접 호출 불필요) @oracle 아키텍처 설계 및 코드 디버깅 GPT-4 @oracle 버그 수정해줘 @librarian 문서 및 코드 리서치 Claude 3 Sonnet @librarian API 문서 찾아줘 @explore 코드베이스 탐색 및 이해 Grok Code @explore utils/ 디렉토리 분석해줘 @frontend-ui-ux-engineer UI/UX 프로토타이핑 및 개발 Gemini 1.5 Pro 자동 (UI 관련 태스크 시) @document-writer 기술 문서 및 주석 작성 Gemini 1.5 Flash 자동 @multimodal-looker 이미지, PDF 등 시각 자료 분석 Gemini 1.5 Flash @multimodal diagram.png 설명해줘 Sisyphus는 전체 작업의 계획을 수립하고, 각 작업에 적합한 하위 에이전트에게 태스크를 분배하며, 이들의 실행을 조율하는 오케스트레이터입니다. 하위 에이전트들은 백그라운드에서 병렬로 작업을 실행하고, Sisyphus는 이 결과를 통합하고 검토합니다. 만약 추가 작업(TODO)이 발생하면, 다시 적절한 에이전트에게 분배하여 작업이 완료될 때까지 이 과정을 반복합니다.\noh-my-opencode 기능: 명령어, 에이전트, 도구 슬래시 명령어 목록 기본 명령어에 더해 oh-my-opencode는 확장된 명령어들을 제공합니다. ~/.opencode/commands/*.md 파일을 통해 새로운 명령어를 추가하여 무한히 확장할 수 있습니다.\n명령어 기능 확장 여부 /init 프로젝트 분석 및 AGENTS.md 생성 기본 /undo 마지막 변경 사항 취소 기본 /redo 취소된 변경 사항 재적용 기본 /review 코드 리뷰 (LSP/ESLint 연동 강화) 확장 강화 /share 현재 세션 공유 링크 생성 기본 /model 사용 중인 AI 모델 변경 기본 /clear 대화 기록 지우기 기본 /tasks 백그라운드에서 실행 중인 태스크 목록 표시 확장 /ralph-loop \u0026ldquo;작업\u0026rdquo; 지정된 작업을 무한 반복 실행 (최대 100회, /cancel-ralph로 중지) oh-my /cancel-ralph ralph-loop로 실행 중인 작업 중지 oh-my /summarize-diff 변경된 내용 요약 커스텀 예 /suggest-tests 코드에 대한 테스트 케이스 제안 커스텀 예 도구 및 LSP 20개 이상의 내장 도구와 LSP 기능은 TUI 팔레트나 call_omo_agent 함수를 통해 호출할 수 있으며, 실시간 코드 분석과 조작을 지원합니다.\n카테고리 주요 도구 기능 LSP (11개) lsp_hover, lsp_definition, lsp_references, lsp_rename, lsp_diagnostics 호버 정보, 정의 이동, 참조 찾기, 이름 변경, 실시간 진단 AST-Grep (2개) search, replace 25개 이상 언어에 대한 구조적 코드 검색 및 치환 Session (4개) session_list, read, search, info 세션 목록 확인, 읽기, 검색 등 세션 관리 기타 코드 변경 모니터, context_window_monitor 실시간 파일 변경 추적 및 컨텍스트 관리 Hook 시스템 20개 이상의 Hook은 에이전트의 동작을 특정 상황에 맞춰 자동화하여 개발 워크플로우의 일관성과 코드 품질을 유지합니다.\ntodo-continuation-enforcer: TODO 리스트에 작업이 남아있으면 에이전트가 멈추지 않고 계속 실행하도록 강제합니다. comment-checker: 코드 내 불필요한 주석을 검사하고 제거합니다. session-recovery: 예기치 않게 세션이 종료되었을 때 복구를 돕습니다. 기타: notification, context-monitor 등 다양한 자동화 Hook이 있습니다. 8000개 ESLint 경고 수정 ulw @mention 호출: 특정 전문가 호출하기 @ 멘션은 oracle, librarian 등 특정 전문성을 가진 subagent를 직접 호출할 때 사용됩니다. 이는 자동화된 흐름에 더해, 사용자가 특정 작업을 명시적으로 지시하거나 우선순위를 부여하고 싶을 때 유용합니다.\n@oracle: 아키텍처 설계를 요청합니다. @librarian: 문서 검색을 지시합니다. 한 번 호출된 하위 에이전트의 컨텍스트는 세션 내에서 유지됩니다. Sisyphus는 이전에 호출된 에이전트를 기억하고, 필요에 따라 자동으로 재위임하여 작업의 연속성을 보장합니다. 따라서 매번 동일한 에이전트를 멘션할 필요는 없습니다.\n방식 사용 시기 특징 | @mention | 특정 전문성이 필요한 질문/작업 | 해당 전문가를 직접 호출하며, 자동화된 흐름을 보강하는 역할 |\n더 알아보기 (공식 링크 및 설치) OpenCode (Crush) 참고: OpenCode 프로젝트는 현재 아카이브되었으며, Crush라는 이름으로 개발이 계속되고 있습니다.\nGitHub: https://github.com/opencode-ai/opencode 설치 방법 Homebrew (macOS/Linux): brew install opencode Go Install: go install github.com/opencode-ai/opencode@latest 설치 스크립트: /bin/bash -c \u0026#34;$(curl -fsSL https://get.opencode.so)\u0026#34; oh-my-opencode GitHub: https://github.com/code-yeongyu/oh-my-opencode 설치 방법 bunx나 npx를 사용하는 것이 권장되지만, npm으로 직접 설치할 수도 있습니다.\nbunx (권장): bunx oh-my-opencode install npx (권장): npx oh-my-opencode install npm: npm i -g oh-my-opencode 설치 과정에서 Claude, ChatGPT, Gemini 등 사용하고자 하는 LLM 구독 관련 설정을 진행하게 됩니다.\n사용 팁 커스터마이징: 프로젝트 루트의 .opencode/ 디렉토리 내에 agents/, commands/, skills/, hooks/ 디렉토리를 생성하여 자신만의 에이전트, 명령어, 스킬, 훅을 추가할 수 있습니다. 모드 설정: opencode.json 파일의 modes 설정을 통해 특정 작업을 제한할 수 있습니다. 예를 들어, review 모드를 만들어 읽기 전용으로 에이전트를 실행하는 것이 가능합니다. ","permalink":"https://cdecl.github.io/devops/opencode-ai-agent/","summary":"\u003cp\u003eOpenCode는 터미널 기반의 오픈소스 AI 코딩 에이전트로, 개발 생산성 향상을 목표로 합니다. LSP(Language Server Pro\u003c/p\u003e\n\u003ch2 id=\"opencode-핵심-기능\"\u003eOpenCode 핵심 기능\u003c/h2\u003e\n\u003ch3 id=\"lsp-language-server-protocol\"\u003eLSP (Language Server Protocol)\u003c/h3\u003e\n\u003ch4 id=\"lsp-서버란\"\u003eLSP 서버란?\u003c/h4\u003e\n\u003ch4 id=\"lsp-자동-로드\"\u003eLSP 자동 로드\u003c/h4\u003e\n\u003cp\u003eOpenCode는 프로젝트를 열 때 \u003ccode\u003e.lsproj\u003c/code\u003e 파일이나 언어별 설정 파일을 자동으로 스캔하여 해당 프로젝트에 적합한 LSP 서버를 감지하고 설치 및 실행합니다. 예를 들어, TypeScript 프로젝트에서는 자동으로 TypeScript Language Server를 활성화합니다. 이 기능 덕분에 개발자는 별도의 수동 설정 없이 즉시 언어 서비스를 활용할 수 있으며, 에이전트는 LSP 서버와 통신하며 코드 분석, 편집, 리팩토링 등을 지원합니다.\u003c/p\u003e","title":"OpenCode: AI 코딩 에이전트 가이드"},{"content":"Git Worktree란 무엇이며 왜 필요한가? Stash와의 차이점부터 주요 명령어까지, 효율적인 브랜치 관리\n개요 개발을 하다 보면 현재 작업 중인 브랜치에서 아직 커밋하지 못한 변경 사항이 있는데, 긴급하게 다른 브랜치(예: 배포를 위한 핫픽스)로 전환해야 하는 상황을 자주 마주하게 됩니다. 보통은 git stash를 사용하거나 아직 완료되지 않은 코드를 임시 커밋(WIP)하고 브랜치를 전환하지만, 이러한 방식은 번거롭고 컨텍스트 전환에 비용이 듭니다.\nGit Worktree는 이런 문제를 우아하게 해결해주는 Git의 강력한 기능입니다. 이 글에서는 Git Worktree의 개념과 필요성, 그리고 git stash와의 차이점과 사용법에 대해 알아봅니다.\nGit Worktree란? 기본적으로 Git 저장소(Repository)를 clone하면 하나의 작업 디렉토리(Working Directory)가 생성되고, 이 디렉토리는 한 번에 하나의 브랜치만 체크아웃할 수 있습니다.\nGit Worktree는 하나의 로컬 저장소에 여러 개의 작업 디렉토리를 연결하여, 동시에 여러 브랜치를 체크아웃할 수 있게 해주는 기능입니다. 즉, 물리적으로 분리된 여러 폴더에서 서로 다른 브랜치를 띄워놓고 작업할 수 있습니다.\n핵심 개념 Main Working Tree: git clone 시 생성되는 기본 작업 공간. Linked Working Tree: git worktree add 명령어로 생성된 추가 작업 공간들. 모든 Worktree는 .git 디렉토리(저장소 데이터, 객체 데이터베이스)를 공유합니다. 따라서 디스크 공간을 효율적으로 사용하며, 한 Worktree에서의 커밋은 다른 Worktree에서도 즉시 반영됩니다. 현재 작업 디렉토리의 변경 사항(Untracked 파일 포함)을 건드리지 않고, 완전히 깨끗한 새 브랜치 환경을 즉시 얻을 수 있습니다. 왜 필요한가요? (활용 사례) Worktree가 유용한 대표적인 상황들은 다음과 같습니다.\n브랜치 전환의 번거로움 해소: 현재 기능 개발(feature-A) 중에 긴급한 버그 수정 요청(hotfix)이 들어왔을 때, 하던 작업을 정리할 필요 없이 새로운 Worktree를 만들어 즉시 수정 작업을 시작할 수 있습니다. 독립적인 테스트 및 빌드: 하나의 브랜치에서는 서버를 실행해두고, 다른 브랜치에서는 클라이언트 코드를 수정하거나 테스트 코드를 돌려볼 때 유용합니다. 의존성 패키지(node_modules 등)가 브랜치마다 달라서 충돌이 나는 경우, 폴더가 분리되어 있으므로 서로 영향을 주지 않습니다. IDE 및 빌드 환경 유지: 기존 브랜치에서 IDE 창을 열어두고 서버를 띄워둔 상태 그대로, 새 창에서 다른 작업을 할 수 있습니다. stash를 사용했다면 IDE가 파일을 다시 로딩하거나 빌드 캐시가 깨지는 등의 문제가 발생할 수 있지만, worktree는 독립된 환경을 보장합니다. 특히 Full-stack 개발처럼 프론트엔드와 백엔드를 동시에 수정해야 하거나, 여러 기능/핫픽스를 동시에 다뤄야 할 때 매우 유용합니다. git worktree add ../new-work \u0026lt;branch\u0026gt; 명령어로 간단히 시작할 수 있습니다.\nStash vs. Worktree 비슷한 상황에서 사용되는 git stash와 비교해보면 차이점이 명확합니다.\n기능 Git Stash Git Worktree Untracked 파일 -u 옵션 필요, 실수로 누락 시 오류 발생 가능 현재 디렉토리 그대로 유지, 새 작업 공간은 깨끗한 상태 병렬 작업 한번에 하나만 가능 (Push/Pop 반복으로 컨텍스트 손실) 여러 디렉토리에서 동시 작업 가능 (IDE 여러 개 실행 등) 리스크 Stash 목록 관리의 어려움 (무엇을 저장했는지 잊음) 최소화 (공유 .git으로 일관성 유지) 디스크 공간 거의 차지하지 않음 체크아웃된 파일만큼 추가 사용 정리하자면:\n단순하고 짧은 작업 전환에는 stash가 빠르고 간편합니다. 긴 호흡의 병렬 작업, Untracked 파일을 포함한 복잡한 상태 유지, 환경 격리가 필요할 때는 worktree가 압도적으로 유리합니다. 주요 명령어 사용법 1. Worktree 생성 (Add) 새로운 작업 디렉토리를 생성하고 특정 브랜치를 체크아웃합니다.\n# 기본 사용법: git worktree add \u0026lt;경로\u0026gt; \u0026lt;브랜치명\u0026gt; $ git worktree add ../project-hotfix hotfix/login-bug 이렇게 하면 상위 폴더의 project-hotfix라는 디렉토리에 hotfix/login-bug 브랜치가 체크아웃됩니다. 기존 저장소와는 별개로 완전히 독립된 파일 시스템 공간을 가집니다.\nTip: 기존 브랜치가 없다면 -b 옵션으로 새 브랜치를 생성하며 Worktree를 만들 수 있습니다.\n$ git worktree add -b feature/new-ui ../project-ui 2. Worktree 목록 확인 (List) 현재 연결된 모든 Worktree의 목록을 확인합니다.\n$ git worktree list 출력 예시:\n/Users/user/dev/project (main) /Users/user/dev/project-ui (feature/new-ui) 3. Worktree 삭제 (Remove) 작업이 끝난 Worktree는 디렉토리를 그냥 지우는 것보다 git 명령어로 정리하는 것이 깔끔합니다 (Git 내부의 메타데이터도 함께 정리됨).\n$ git worktree remove ../project-ui 4. 정리 (Prune) 만약 Worktree 디렉토리를 파일 탐색기나 rm 명령어로 강제 삭제했다면, Git은 해당 Worktree가 유효하지 않다고 판단하지만 목록에는 남아있을 수 있습니다. 이때 prune을 사용합니다.\n$ git worktree prune 유의사항 중복 체크아웃 불가: 하나의 브랜치는 동시에 여러 Worktree에서 체크아웃될 수 없습니다. 이미 main 브랜치가 열려있다면 다른 Worktree에서 main을 열 수 없습니다. 디렉토리 관리: Worktree 디렉토리는 보통 메인 프로젝트 폴더의 형제(sibling) 폴더로 두는 것이 관리에 용이합니다. 하위 폴더로 둘 경우 .gitignore 설정이 꼬일 수 있으므로 주의해야 합니다. Git Worktree는 멀티태스킹이 필수적인 현대 개발 환경에서 매우 강력한 도구입니다. 상황에 맞게 Stash와 Worktree를 적절히 섞어 사용한다면 개발 생산성을 크게 높일 수 있을 것입니다.\n","permalink":"https://cdecl.github.io/dev/git-worktree-guide/","summary":"\u003cp\u003eGit Worktree란 무엇이며 왜 필요한가? Stash와의 차이점부터 주요 명령어까지, 효율적인 브랜치 관리\u003c/p\u003e\n\u003ch2 id=\"개요\"\u003e개요\u003c/h2\u003e\n\u003cp\u003e개발을 하다 보면 현재 작업 중인 브랜치에서 아직 커밋하지 못한 변경 사항이 있는데, 긴급하게 다른 브랜치(예: 배포를 위한 핫픽스)로 전환해야 하는 상황을 자주 마주하게 됩니다. 보통은 \u003ccode\u003egit stash\u003c/code\u003e를 사용하거나 아직 완료되지 않은 코드를 임시 커밋(WIP)하고 브랜치를 전환하지만, 이러한 방식은 번거롭고 컨텍스트 전환에 비용이 듭니다.\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003eGit Worktree\u003c/strong\u003e는 이런 문제를 우아하게 해결해주는 Git의 강력한 기능입니다. 이 글에서는 Git Worktree의 개념과 필요성, 그리고 \u003ccode\u003egit stash\u003c/code\u003e와의 차이점과 사용법에 대해 알아봅니다.\u003c/p\u003e","title":"Git Worktree: 하나의 저장소, 여러 작업 공간"},{"content":"tmux는 터미널 멀티플렉서로, 하나의 터미널 창에서 여러 세션, 윈도우, 패널을 관리하여 생산성을 극대화하는 강력한 도구입니다. 이 글에서는 tmux의 기본 개념, 설치 방법, 주요 용어 및 필수 명령어에 대해 알아봅니다.\n개요 tmux는 \u0026lsquo;Terminal Multiplexer\u0026rsquo;의 약자로, 하나의 터미널 창(또는 원격 접속 세션) 내에서 여러 개의 독립적인 터미널 세션을 생성하고 관리할 수 있게 해주는 도구입니다. tmux를 사용하면 터미널 세션을 영구적으로 유지할 수 있어, 네트워크 연결이 끊어지더라도 실행 중이던 작업을 안전하게 보존하고 나중에 다시 접속하여 이어갈 수 있습니다.\n주요 장점은 다음과 같습니다.\n세션 유지: SSH 연결이 끊어져도 서버에서 실행 중인 작업을 계속 유지합니다. 창 및 패널 관리: 하나의 화면에서 여러 개의 창(window)과 패널(pane)을 분할하여 동시에 여러 작업을 모니터링하고 실행할 수 있습니다. 페어 프로그래밍: 여러 사용자가 동일한 세션에 접속하여 화면을 공유하고 함께 작업할 수 있습니다. 기술적 배경 tmux는 screen 명령어의 현대적인 대안으로 개발되었습니다. screen 역시 터미널 멀티플렉서의 기능을 제공하지만, tmux는 더 깔끔한 설정 파일(conf), 유연한 스크립팅 기능, 명확한 클라이언트-서버 모델 아키텍처를 제공하여 사용자 편의성과 확장성을 높였습니다.\n클라이언트-서버 구조 덕분에 세션 관리가 더 안정적이며, 다양한 플러그인 생태계를 통해 기능을 쉽게 확장할 수 있습니다. 예를 들어, 시스템 재부팅 후에도 세션을 그대로 복구해주는 플러그인 등을 활용할 수 있습니다.\n설치 tmux는 대부분의 Unix 기반 운영체제에서 패키지 매니저를 통해 쉽게 설치할 수 있습니다.\nmacOS (Homebrew 사용)\nbrew install tmux Debian / Ubuntu (apt 사용)\nsudo apt update sudo apt install tmux CentOS / RHEL / Fedora (yum 또는 dnf 사용)\nsudo yum install tmux # 또는 sudo dnf install tmux 설치가 완료되면 터미널에 tmux를 입력하여 시작할 수 있습니다.\n용어 및 구성요소 tmux의 구조를 이해하기 위해 세 가지 핵심 요소를 알아야 합니다.\n세션 (Session): tmux 서버에 의해 관리되는 가장 큰 단위입니다. 각 세션은 하나 이상의 창(window)을 가질 수 있으며, 독립적인 작업 환경을 구성합니다. 사용자는 여러 세션을 동시에 실행하고 필요에 따라 전환할 수 있습니다. 창 (Window): 세션 내에 있는 개별 탭과 유사합니다. 하나의 창은 전체 화면을 차지하며, 여러 개의 패널로 분할될 수 있습니다. 패널 (Pane): 창을 수직 또는 수평으로 분할한 작은 영역입니다. 각 패널은 독립적인 쉘 프롬프트를 가지므로, 여기서 명령어를 실행할 수 있습니다. 계층 구조는 다음과 같습니다.\nSession └── Window ├── Pane 1 ├── Pane 2 └── Pane 3 주요 명령어 tmux의 모든 명령어는 Prefix 키를 누른 후 입력합니다. 기본 Prefix는 Ctrl+b 입니다. 예를 들어 새 창을 만들려면 Ctrl+b를 누르고 손을 뗀 다음, c를 누릅니다.\n참고: 이 가이드에 소개된 키 바인딩은 tmux의 기본 설정입니다. ~/.tmux.conf 파일을 수정하여 자신만의 키 바인딩을 설정할 수 있으며, 특히 Oh My Tmux와 같은 프레임워크를 사용하면 키 설정이 크게 달라질 수 있습니다.\n세션 관리 명령어 설명 tmux new -s \u0026lt;세션이름\u0026gt; 새로운 이름의 세션을 시작합니다. tmux ls 현재 실행 중인 세션 목록을 봅니다. tmux a -t \u0026lt;세션이름\u0026gt; 지정된 이름의 세션에 접속합니다. Ctrl+b d 현재 접속된 세션에서 빠져나옵니다 (Detach). Ctrl+b $ 현재 세션의 이름을 변경합니다. 창 (Window) 관리 명령어 (Prefix +) 설명 c 새 창을 생성합니다. w 창 목록을 보여주고 선택하여 전환합니다. p 이전 창으로 이동합니다. n 다음 창으로 이동합니다. \u0026amp; 현재 창을 닫습니다. (확인 프롬프트 표시) , 현재 창의 이름을 변경합니다. 패널 (Pane) 관리 tmux의 패널 기능은 하나의 창을 여러 개의 작은 터미널 영역으로 분할하여 동시에 여러 작업을 수행할 때 매우 유용합니다. 예를 들어, 한 패널에서는 코드를 편집하고, 다른 패널에서는 테스트를 실행하거나 서버 로그를 모니터링할 수 있습니다.\n명령어 (Prefix +) 설명 % 현재 패널을 수직으로 분할합니다. (새로운 패널은 오른쪽에 생성) \u0026quot; 현재 패널을 수평으로 분할합니다. (새로운 패널은 아래쪽에 생성) o 다음 패널로 이동합니다 (순환). 방향키 활성 패널을 원하는 방향(상/하/좌/우)으로 이동합니다. (예: Prefix + Left Arrow는 왼쪽 패널로 이동) Ctrl + 방향키 (Prefix를 누른 상태에서) 패널의 크기를 조절합니다. { 현재 패널을 이전 패널과 바꿉니다. } 현재 패널을 다음 패널과 바꿉니다. x 현재 패널을 닫습니다. (확인 프롬프트 표시) z 현재 패널을 전체 화면으로 확대/축소합니다. 다시 누르면 원래 크기로 돌아갑니다. space 미리 정의된 레이아웃으로 패널 배치를 변경합니다. (다양한 레이아웃 순환) 고급 활용: 플러그인과 설정 tmux의 진정한 힘은 확장성에서 나옵니다. ~/.tmux.conf 파일을 수정하여 키 바인딩을 변경하거나 스타일을 커스터마이징할 수 있습니다.\n**TPM (Tmux Plugin Manager)**을 사용하면 플러그인을 쉽게 관리할 수 있습니다. 인기 있는 플러그인은 다음과 같습니다:\ntmux-resurrect: 시스템 재부팅 후에도 tmux 환경을 복원해줍니다. tmux-continuum: 백그라운드에서 주기적으로 환경을 자동 저장합니다. Oh My Tmux로 더 강력하게 .tmux.conf를 처음부터 설정하는 것은 다소 번거로울 수 있습니다. 이때 Oh My Tmux를 사용하면 매우 아름답고 기능이 풍부한 tmux 환경을 단 몇 분 만에 구성할 수 있습니다.\nOh My Tmux는 tmux의 설정을 미리 구성해놓은 프레임워크로, 다음과 같은 장점을 제공합니다:\n세련된 디자인: Powerline 스타일의 상태 표시줄, 시스템 정보(CPU, 메모리) 표시 등 시각적으로 뛰어난 UI. 직관적인 키 바인딩: Ctrl+a를 새로운 Prefix로 사용하며 (기존 Ctrl+b도 지원), 다양한 추가 단축키 제공. 마우스 지원: 마우스 클릭으로 패널 선택, 창 이동, 크기 조절 등이 가능. 쉬운 확장: .tmux.conf.local 파일을 수정하여 개인 설정을 쉽게 덮어쓸 수 있습니다. 설치 방법 터미널에서 다음 명령어를 실행하여 설치합니다.\ncd git clone https://github.com/gpakosz/.tmux.git ln -s -f .tmux/.tmux.conf cp .tmux/.tmux.conf.local . 이제 tmux를 실행하면 화려하게 변신한 화면을 볼 수 있습니다.\n주요 키 바인딩 변경 및 추가 Oh My Tmux는 기본 Prefix를 Ctrl+a로 설정하지만, Ctrl+b도 계속 사용할 수 있습니다. 가장 큰 변화는 패널 관리와 관련된 부분입니다.\n패널 분할, 이동 및 크기 조절 (Oh My Tmux)\n명령어 (Prefix: Ctrl+a) 설명 _ 현재 패널을 수직으로 분할합니다. - 현재 패널을 수평으로 분할합니다. Alt + 방향키 Prefix 없이 패널 간 이동 Ctrl+a + h 또는 j 또는 k 또는 l Vim 방향키를 사용해 패널 간 이동 Shift + 방향키 Prefix 없이 패널 크기 조절 Ctrl+a + H 또는 J 또는 K 또는 L 패널 크기를 Vim 방향키로 조절 z 현재 패널을 전체 화면으로 확대/축소 \u0026lt; 또는 \u0026gt; 현재 패널을 이전/다음 패널과 위치를 바꿉니다. 이 외에도 세션 관리를 위한 fzf 연동(Ctrl+a + S), 스크롤 모드 진입(Ctrl+a + [), 설정 파일 편집(Ctrl+a + e) 등 유용한 기능이 많습니다.\n나만의 설정 추가하기 Oh My Tmux의 기본 설정을 변경하고 싶다면 ~/.tmux.conf.local 파일을 수정하면 됩니다. 예를 들어, 기본 쉘을 zsh로 변경하거나, 새로운 키 바인딩을 추가할 수 있습니다.\n# ~/.tmux.conf.local # zsh을 기본 쉘로 설정 set-option -g default-shell /bin/zsh # 새로운 키 바인딩 추가 (예: Ctrl+a + t로 htop 실행) bind t new-window -n \u0026#34;htop\u0026#34; \u0026#34;htop\u0026#34; Oh My Tmux를 사용하면 복잡한 설정 없이도 강력하고 아름다운 tmux 환경을 즉시 사용할 수 있어 생산성을 크게 높일 수 있습니다.\nCheat Sheet 자주 사용하는 핵심 단축키 요약입니다.\n동작 tmux (Ctrl+b) Oh My Tmux (Ctrl+a) 세션 생성 tmux new -s \u0026lt;이름\u0026gt; tmux new -s \u0026lt;이름\u0026gt; 세션 종료 (Detach) d d 세션 목록 tmux ls tmux ls 세션 접속 tmux a -t \u0026lt;이름\u0026gt; tmux a -t \u0026lt;이름\u0026gt; 창 생성 c c 창 이동 n (다음), p (이전), w (목록 선택) n, p, w 패널 수직 분할 % _ 패널 수평 분할 \u0026quot; - 패널 이동 방향키 h j k l 또는 Alt+방향키 패널 크기 조절 Ctrl + 방향키 H J K L 또는 Shift+방향키 패널 스왑 { (이전), } (다음) \u0026lt; (이전), \u0026gt; (다음) 패널 닫기 x x 패널 줌 z z 스크롤 모드 [ (나갈 땐 q) [ (나갈 땐 q) tmux는 터미널 작업의 효율성을 크게 향상시키는 강력한 도구입니다. 이 가이드에서 다룬 기본 명령어만 익혀도 터미널 환경을 훨씬 더 쾌적하게 만들 수 있습니다. 더 나아가 .tmux.conf 설정 파일을 통해 자신만의 단축키와 스타일을 만들어 사용하는 것을 추천합니다.\n","permalink":"https://cdecl.github.io/devops/tmux-guide/","summary":"\u003cp\u003etmux는 터미널 멀티플렉서로, 하나의 터미널 창에서 여러 세션, 윈도우, 패널을 관리하여 생산성을 극대화하는 강력한 도구입니다. 이 글에서는 tmux의 기본 개념, 설치 방법, 주요 용어 및 필수 명령어에 대해 알아봅니다.\u003c/p\u003e\n\u003ch2 id=\"개요\"\u003e개요\u003c/h2\u003e\n\u003cp\u003e\u003ccode\u003etmux\u003c/code\u003e는 \u0026lsquo;Terminal Multiplexer\u0026rsquo;의 약자로, 하나의 터미널 창(또는 원격 접속 세션) 내에서 여러 개의 독립적인 터미널 세션을 생성하고 관리할 수 있게 해주는 도구입니다. \u003ccode\u003etmux\u003c/code\u003e를 사용하면 터미널 세션을 영구적으로 유지할 수 있어, 네트워크 연결이 끊어지더라도 실행 중이던 작업을 안전하게 보존하고 나중에 다시 접속하여 이어갈 수 있습니다.\u003c/p\u003e","title":"tmux 시작하기: 기본 개념, 필수 명령어"},{"content":"애플리케이션 개발에서 API 키, DB 접속 정보 등 민감한 정보를 안전하게 관리하는 것은 매우 중요합니다. 많은 팀이 HashiCorp Vault나 클라우드 제공업체의 전용 Secret Manager를 사용하지만, 더 직관적이고 쉬운 솔루션을 찾는 경우도 많습니다.\nBitwarden Secrets Manager는 바로 이 지점을 파고드는 제품입니다. 개발자 친화적인 워크플로우와 쉬운 사용성으로, 애플리케이션의 비밀 정보를 중앙에서 안전하게 관리할 수 있도록 설계되었습니다.\n이 글에서는 Bitwarden Secrets Manager의 전용 CLI 도구인 bws를 사용하여 비밀 정보를 관리하는 방법을 소개합니다.\nBitwarden Secrets Manager 핵심 개념 bws CLI를 사용하기 전에, Secrets Manager의 네 가지 핵심 개념을 이해해야 합니다.\nSecrets (비밀): DATABASE_URL, API_KEY와 같이 애플리케이션에서 사용하는 키-값 형태의 민감한 데이터입니다. Projects (프로젝트): 연관된 비밀들을 그룹화하는 컨테이너입니다. 예를 들어, \u0026ldquo;My Awesome App - Production\u0026rdquo; 프로젝트에는 해당 앱의 운영 환경에 필요한 모든 비밀이 포함됩니다. Machine Accounts (머신 계정): 자동화된 스크립트나 CI/CD 파이프라인, 애플리케이션 등 사람이 아닌 주체가 비밀에 접근할 때 사용하는 비-인간(non-human) 계정입니다. Access Tokens (접근 토큰): 머신 계정이 자신에게 할당된 프로젝트의 비밀에 접근하고 해독할 때 사용하는 일종의 \u0026ldquo;비밀번호\u0026quot;입니다. bws CLI 설치 Bitwarden Secrets Manager CLI(bws)는 GitHub 릴리즈 페이지에서 직접 다운로드하여 설치합니다.\n공식 GitHub 릴리즈 페이지 로 이동합니다.\n자신의 운영체제(macOS, Linux, Windows)에 맞는 최신 버전의 bws 실행 파일을 다운로드합니다.\n다운로드한 파일의 압축을 풀고, 터미널 어디에서든 실행할 수 있도록 시스템의 PATH에 등록된 디렉토리(예: /usr/local/bin 또는 C:\\Windows\\System32)로 파일을 옮깁니다.\n# 예시 (macOS/Linux) mv ./bws /usr/local/bin/ 기본 사용법: 인증 및 구성 bws는 사용자 계정으로 로그인하는 bw (Bitwarden Password Manager CLI)와 달리, 머신 계정의 **접근 토큰(Access Token)**을 사용하여 인증합니다.\nBWS_ACCESS_TOKEN 획득 방법 BWS_ACCESS_TOKEN은 Bitwarden Secrets Manager 웹 볼트에서 생성할 수 있습니다. 이 토큰은 머신 계정이 Secrets Manager에 접근할 수 있는 권한을 부여하므로, 매우 민감한 정보로 취급해야 합니다.\nBitwarden Secrets Manager 웹 볼트 접속: 조직의 Secrets Manager 웹 인터페이스에 로그인합니다. 머신 계정 생성: 좌측 메뉴에서 \u0026ldquo;Machine Accounts\u0026quot;로 이동하여 새로운 머신 계정을 생성합니다. 이때, 해당 머신 계정에 Secrets Manager의 어떤 \u0026ldquo;Projects\u0026quot;에 접근할 권한을 부여할지 설정해야 합니다. 접근 토큰(Access Token) 생성: 생성된 머신 계정을 클릭하면 \u0026ldquo;Access Tokens\u0026rdquo; 섹션이 나타납니다. 여기서 \u0026ldquo;Create Access Token\u0026rdquo; 버튼을 클릭하여 새로운 토큰을 생성합니다. 생성된 토큰은 단 한 번만 표시되므로, 안전한 곳에 즉시 복사하여 보관해야 합니다. 토큰은 0.uKV... 와 같은 형식으로 시작합니다. 1. 인증 (Authentication) 가장 일반적인 방법은 접근 토큰을 환경 변수로 설정하는 것입니다.\nexport BWS_ACCESS_TOKEN=\u0026#34;0.uKV...oA.d7....==\u0026#34; 이렇게 하면 bws 명령을 실행할 때마다 토큰을 입력할 필요가 없습니다. CI/CD 환경에서는 이 환경 변수를 Secrets로 주입하는 것이 표준적인 방법입니다.\n2. 구성 파일 (~/.config/bws/config) bws는 JSON 형식의 구성 파일을 사용하여 서버 URL이나 여러 프로필을 관리할 수 있습니다.\n기본 경로: ~/.config/bws/config 관리 방법: bws config set 명령어를 사용하면 파일이 자동으로 생성되거나 업데이트됩니다. 예시: 자체 호스팅 서버 구성\nbws config set --api-url https://your.api.url --identity-url https://your.identity.url 위 명령을 실행하면 ~/.config/bws/config 파일에 다음과 같은 내용이 기록됩니다.\n{ \u0026#34;default\u0026#34;: { \u0026#34;api_url\u0026#34;: \u0026#34;https://your.api.url\u0026#34;, \u0026#34;identity_url\u0026#34;: \u0026#34;https://your.identity.url\u0026#34; } } 참고: 보안을 위해, Access Token은 이 구성 파일에 직접 저장하는 것보다 BWS_ACCESS_TOKEN 환경 변수를 통해 관리하는 것이 강력히 권장됩니다.\n핵심 명령어: 비밀 정보 관리 1. 프로젝트 및 비밀 목록 조회 (list) 프로젝트 목록 보기: 자신(머신 계정)이 접근할 수 있는 모든 프로젝트를 나열합니다.\nbws project list 특정 프로젝트의 비밀 목록 보기:\n# 모든 접근 가능한 비밀 목록을 조회 (JSON 형식) bws secret list 이 명령어는 머신 계정이 접근 가능한 모든 프로젝트의 모든 비밀을 JSON 형태로 출력합니다.\n참고: 특정 프로젝트의 비밀만 보려면 bws project list로 프로젝트 ID를 확인한 뒤, 그 ID를 사용하여 jq로 bws secret list의 결과를 필터링할 수 있습니다.\n# 예시: \u0026#34;My Awesome App\u0026#34; 프로젝트의 비밀만 필터링 PROJECT_ID=$(bws project list | jq -r \u0026#39;.[] | select(.name == \u0026#34;My Awesome App\u0026#34;) | .id\u0026#39;) bws secret list | jq --arg PROJECT_ID \u0026#34;$PROJECT_ID\u0026#34; \u0026#39;[.[] | select(.projectId == $PROJECT_ID)]\u0026#39; 2. 비밀 정보 조회 (get) 비밀의 ID를 사용하여 특정 비밀의 값을 가져옵니다.\n# 특정 비밀 ID를 사용하여 직접 조회 (예시 ID 사용) bws secret get 00000000-0000-0000-0000-000000000000 결과는 기본적으로 JSON 형식으로 반환됩니다.\n참고: 비밀의 ID를 모르는 경우, bws secret list와 jq를 조합하여 찾을 수 있습니다.\n# 예시: \u0026#34;My Awesome App\u0026#34; 프로젝트의 \u0026#34;DATABASE_URL\u0026#34; 비밀 ID 찾기 PROJECT_ID=$(bws project list | jq -r \u0026#39;.[] | select(.name == \u0026#34;My Awesome App\u0026#34;) | .id\u0026#39;) SECRET_ID=$(bws secret list | jq -r --arg PROJECT_ID \u0026#34;$PROJECT_ID\u0026#34; \u0026#39;.[] | select(.projectId == $PROJECT_ID and .key == \u0026#34;DATABASE_URL\u0026#34;) | .id\u0026#39;) echo \u0026#34;Found SECRET_ID: $SECRET_ID\u0026#34; bws secret get $SECRET_ID 3. 비밀 정보 저장 (create) 새로운 비밀을 생성합니다. 어떤 프로젝트에 속할지를 지정해야 합니다.\n# \u0026#34;My Awesome App\u0026#34; 프로젝트에 API_KEY 비밀 생성 bws secret create API_KEY \u0026#34;sk_live_12345...\u0026#34; $PROJECT_ID --notes \u0026#34;Stripe Live API Key\u0026#34; 주의사항: bws secret create 실행 시 404 오류가 발생하는 경우\nbws secret create 명령 실행 시 404 Not Found 오류가 발생한다면 다음 세 가지를 확인해야 합니다.\n올바른 Project ID 사용 확인: create 명령어의 마지막 인자는 반드시 Project ID여야 합니다. 웹 UI에서 값을 복사할 때, 형태가 비슷한 \u0026ldquo;Secret ID\u0026quot;나 \u0026ldquo;Organization ID\u0026quot;를 실수로 사용하는 경우가 많으니, Project ID가 맞는지 다시 한번 확인해야 합니다.\n머신 계정의 프로젝트 접근 권한 확인: 현재 사용 중인 BWS_ACCESS_TOKEN에 연결된 머신 계정이 대상 프로젝트에 접근할 수 있는 권한을 가지고 있는지 확인해야 합니다. Secrets Manager 웹 볼트의 \u0026ldquo;Machine Accounts\u0026rdquo; 메뉴에서 권한을 할당할 수 있습니다.\n접근 가능한 리소스가 없는 경우 (알려진 이슈): 머신 계정이 접근할 수 있는 Secret이나 Project가 하나도 없는 상태에서 bws secret list 같은 명령이 404 오류를 반환하는 이슈가 보고된 바 있습니다. 만약 완전히 비어있는 상태에서 create 명령도 실패한다면, 웹 볼트에서 먼저 수동으로 Secret을 하나 생성하여 이 상태를 벗어나는 것이 해결책이 될 수 있습니다.\n활용 사례: 대화형 비밀 관리 스크립트 bws CLI와 jq, 그리고 셸 스크립트의 select 문법을 조합하면, 특정 프로젝트의 비밀을 손쉽게 관리할 수 있는 대화형(interactive) 도구를 만들 수 있습니다.\n아래 스크립트(manage-secrets.sh)는 실행 시 프로젝트를 선택하고, 해당 프로젝트 내의 비밀에 대한 생성, 조회, 수정, 삭제 등의 작업을 수행합니다.\n#!/bin/bash # BWS_ACCESS_TOKEN이 설정되어 있는지 확인 if [ -z \u0026#34;$BWS_ACCESS_TOKEN\u0026#34; ]; then echo \u0026#34;Error: BWS_ACCESS_TOKEN environment variable is not set.\u0026#34; exit 1 fi # 1. 프로젝트 선택 echo \u0026#34;Accessible project list:\u0026#34; # `bws project list`로 프로젝트 목록을 가져와 `jq`로 이름만 추출 projects=($(bws project list | jq -r \u0026#39;.[].name\u0026#39;)) if [ ${#projects[@]} -eq 0 ]; then echo \u0026#34;No accessible projects found.\u0026#34; exit 1 fi echo \u0026#34;Select the project to work on:\u0026#34; select project_name in \u0026#34;${projects[@]}\u0026#34; \u0026#34;Exit\u0026#34;; do # 종료 if [ \u0026#34;$project_name\u0026#34; == \u0026#34;Exit\u0026#34; ]; then exit 0 elif [ -n \u0026#34;$project_name\u0026#34; ]; then break else echo \u0026#34;Invalid selection.\u0026#34; fi done # 선택된 프로젝트의 ID를 가져옴 PROJECT_ID=$(bws project list | jq -r \u0026#34;.[] | select(.name == \\\u0026#34;$project_name\\\u0026#34;) | .id\u0026#34;) echo \u0026#34;Selected project: $project_name (ID: $PROJECT_ID)\u0026#34; echo \u0026#34;-------------------------------------\u0026#34; # 2. 메인 메뉴 PS3=\u0026#34;Select an operation to perform: \u0026#34; options=(\u0026#34;List Secrets\u0026#34; \u0026#34;Get Specific Secret\u0026#34; \u0026#34;Create New Secret\u0026#34; \u0026#34;Edit Secret Value\u0026#34; \u0026#34;Delete Secret\u0026#34; \u0026#34;Exit\u0026#34;) select opt in \u0026#34;${options[@]}\u0026#34;; do case $opt in \u0026#34;List Secrets\u0026#34;) # 비밀 목록 조회 echo \u0026#34;Secrets list for [$project_name] project:\u0026#34; bws secret list | jq --arg pid \u0026#34;$PROJECT_ID\u0026#34; \u0026#39;.[] | select(.projectId == $pid)\u0026#39; ;; \u0026#34;Get Specific Secret\u0026#34;) # 특정 비밀 조회 read -p \u0026#34;Enter KEY of the secret to retrieve: \u0026#34; secret_key SECRET_ID=$(bws secret list | jq -r --arg pid \u0026#34;$PROJECT_ID\u0026#34; --arg key \u0026#34;$secret_key\u0026#34; \u0026#39;.[] | select(.projectId == $pid and .key == $key) | .id\u0026#39;) if [ -z \u0026#34;$SECRET_ID\u0026#34; ]; then echo \u0026#34;Error: Secret with that KEY not found.\u0026#34; else bws secret get \u0026#34;$SECRET_ID\u0026#34; | jq \u0026#39;.value\u0026#39; fi ;; \u0026#34;Create New Secret\u0026#34;) # 새로운 비밀 생성 read -p \u0026#34;Enter KEY for the new secret: \u0026#34; new_key read -p \u0026#34;Input type for VALUE (1: Direct Input, 2: From File Path): \u0026#34; input_type if [ \u0026#34;$input_type\u0026#34; == \u0026#34;2\u0026#34; ]; then read -p \u0026#34;Enter file path for the VALUE: \u0026#34; file_path if [ -f \u0026#34;$file_path\u0026#34; ]; then new_value=$(cat \u0026#34;$file_path\u0026#34;) else echo \u0026#34;Error: File not found.\u0026#34; continue fi else read -sp \u0026#34;Enter VALUE for the new secret: \u0026#34; new_value echo fi bws secret create \u0026#34;$new_key\u0026#34; \u0026#34;$new_value\u0026#34; \u0026#34;$PROJECT_ID\u0026#34; echo \u0026#34;\u0026#39;$new_key\u0026#39; secret has been created.\u0026#34; ;; \u0026#34;Edit Secret Value\u0026#34;) # 비밀 값 수정 read -p \u0026#34;Enter KEY of the secret to edit: \u0026#34; secret_key SECRET_ID=$(bws secret list | jq -r --arg pid \u0026#34;$PROJECT_ID\u0026#34; --arg key \u0026#34;$secret_key\u0026#34; \u0026#39;.[] | select(.projectId == $pid and .key == $key) | .id\u0026#39;) if [ -z \u0026#34;$SECRET_ID\u0026#34; ]; then echo \u0026#34;Error: Secret with that KEY not found.\u0026#34; else read -p \u0026#34;Input type for new VALUE (1: Direct Input, 2: From File Path): \u0026#34; input_type if [ \u0026#34;$input_type\u0026#34; == \u0026#34;2\u0026#34; ]; then read -p \u0026#34;Enter file path for the new VALUE: \u0026#34; file_path if [ -f \u0026#34;$file_path\u0026#34; ]; then new_value=$(cat \u0026#34;$file_path\u0026#34;) else echo \u0026#34;Error: File not found.\u0026#34; continue fi else read -sp \u0026#34;Enter new VALUE: \u0026#34; new_value echo fi bws secret edit --value \u0026#34;$new_value\u0026#34; \u0026#34;$SECRET_ID\u0026#34; echo \u0026#34;Value of \u0026#39;$secret_key\u0026#39; secret has been updated.\u0026#34; fi ;; \u0026#34;Delete Secret\u0026#34;) # 비밀 삭제 read -p \u0026#34;Enter KEY of the secret to delete: \u0026#34; secret_key SECRET_ID=$(bws secret list | jq -r --arg pid \u0026#34;$PROJECT_ID\u0026#34; --arg key \u0026#34;$secret_key\u0026#34; \u0026#39;.[] | select(.projectId == $pid and .key == $key) | .id\u0026#39;) if [ -z \u0026#34;$SECRET_ID\u0026#34; ]; then echo \u0026#34;Error: Secret with that KEY not found.\u0026#34; else bws secret delete \u0026#34;$SECRET_ID\u0026#34; echo \u0026#34;\u0026#39;$secret_key\u0026#39; secret has been deleted.\u0026#34; fi ;; \u0026#34;Exit\u0026#34;) # 종료 break ;; *) echo \u0026#34;Invalid selection.\u0026#34;;; esac # 각 작업 후 다시 메인 메뉴를 보여주기 위함 REPLY= echo \u0026#34;-------------------------------------\u0026#34; done 스크립트 설명 프로젝트 선택:\nbws project list로 접근 가능한 모든 프로젝트 목록을 JSON으로 받아옵니다. jq -r '.[].name'을 통해 각 프로젝트의 이름만 추출하여 projects 배열에 저장합니다. select 문을 사용하여 사용자에게 프로젝트 목록을 보여주고, 선택된 프로젝트의 이름(project_name)을 받아옵니다. 다시 bws project list와 jq를 사용하여 선택된 이름에 해당하는 PROJECT_ID를 조회합니다. 메인 메뉴 및 작업 수행:\n사용자가 수행할 작업을 선택할 수 있도록 select 문으로 메뉴를 제공합니다. 목록 조회: bws secret list의 전체 결과에서 선택된 PROJECT_ID와 일치하는 비밀들만 jq로 필터링하여 보여줍니다. 특정 비밀 조회: 사용자로부터 KEY를 입력받아, 해당하는 비밀의 ID를 jq로 찾은 뒤 bws secret get을 호출합니다. 생성/수정: VALUE를 입력받을 때, 직접 입력(Direct Input) 또는 **파일 경로(From File Path)**를 선택할 수 있도록 하여, 여러 줄로 된 비밀 값(예: 인증서, 비공개 키)도 쉽게 처리할 수 있습니다. 삭제: 삭제할 비밀의 KEY를 입력받아, 해당하는 ID를 찾아 bws secret delete를 실행합니다. 이 스크립트를 약간만 수정하면, 특정 프레임워크에 맞는 설정 파일을 동적으로 생성하거나, 여러 비밀을 한 번에 업데이트하는 등 다양한 자동화 작업을 수행할 수 있습니다.\n결론 Bitwarden Secrets Manager와 bws CLI는 복잡성을 줄이고 개발자 경험에 집중한 현대적인 비밀 관리 솔루션입니다. 개인/팀용 Password Manager와 완벽히 분리된 M2M(Machine-to-Machine) 워크플로우를 제공하므로, 더 이상 애플리케이션 비밀 관리를 위해 Password Manager를 \u0026ldquo;응용\u0026quot;할 필요가 없습니다.\n보안과 자동화, 두 마리 토끼를 모두 잡고 싶다면 Bitwarden Secrets Manager는 매우 훌륭한 선택지가 될 것입니다.\n","permalink":"https://cdecl.github.io/devops/bitwarden-cli/","summary":"\u003cp\u003e애플리케이션 개발에서 API 키, DB 접속 정보 등 민감한 정보를 안전하게 관리하는 것은 매우 중요합니다. 많은 팀이 HashiCorp Vault나 클라우드 제공업체의 전용 Secret Manager를 사용하지만, 더 직관적이고 쉬운 솔루션을 찾는 경우도 많습니다.\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003eBitwarden Secrets Manager\u003c/strong\u003e는 바로 이 지점을 파고드는 제품입니다. 개발자 친화적인 워크플로우와 쉬운 사용성으로, 애플리케이션의 비밀 정보를 중앙에서 안전하게 관리할 수 있도록 설계되었습니다.\u003c/p\u003e\n\u003cp\u003e이 글에서는 Bitwarden Secrets Manager의 전용 CLI 도구인 \u003ccode\u003ebws\u003c/code\u003e를 사용하여 비밀 정보를 관리하는 방법을 소개합니다.\u003c/p\u003e\n\u003ch2 id=\"bitwarden-secrets-manager-핵심-개념\"\u003eBitwarden Secrets Manager 핵심 개념\u003c/h2\u003e\n\u003cp\u003e\u003ccode\u003ebws\u003c/code\u003e CLI를 사용하기 전에, Secrets Manager의 네 가지 핵심 개념을 이해해야 합니다.\u003c/p\u003e","title":"Bitwarden Secrets Manager 시작하기 (bws CLI 가이드)"},{"content":"Git은 강력하지만, 복잡한 상황에서는 개발자를 당황하게 만드는 경우가 많습니다. \u0026ldquo;앗, 방금 뭘 한 거지?\u0026rdquo; 싶은 순간은 누구에게나 찾아옵니다. 이 글에서는 checkout, stash, branch 등 핵심 명령어를 중심으로, 실제 현업에서 자주 겪는 20가지 트러블 슈팅 사례와 해결 방안을 구체적으로 정리했습니다.\nPart 1: checkout 관련 문제 - \u0026ldquo;코드가 뒤섞였어요!\u0026rdquo; checkout은 브랜치를 바꾸거나 특정 버전으로 돌아갈 때 사용하지만, 이 과정에서 많은 실수가 발생합니다.\n사례 1: 다른 브랜치로 이동하려는데, 작업하던 내용이 있어서 막힐 때 문제 상황: feature/new-login 브랜치에서 작업하던 중, 급하게 hotfix/bug-report 브랜치로 이동해야 합니다. git checkout hotfix/bug-report를 입력하니 \u0026ldquo;error: Your local changes to the following files would be overwritten by checkout\u0026hellip;\u0026rdquo; 메시지가 나옵니다. 해결 방안: 아직 커밋하기 애매한 작업 내용을 임시 저장 공간(stash)에 저장합니다. # 현재 작업 내용을 스택에 임시 저장 git stash \u0026gt; `git stash`: 현재 작업 디렉터리의 변경된 파일(Tracked files)을 임시로 스택에 저장합니다. `push`, `pop`, `apply`, `list` 등의 하위 명령어를 통해 관리할 수 있습니다. # 원하는 브랜치로 이동하여 작업 수행 git checkout hotfix/bug-report # ... 핫픽스 작업 ... git commit -m \u0026#34;Fix: Critical bug\u0026#34; git push origin hotfix/bug-report # 원래 브랜치로 복귀 git checkout feature/new-login # 임시 저장했던 작업 내용 다시 적용 git stash pop 사례 2: 실수로 파일을 삭제했는데, 커밋은 아직 안 했을 때 (rm a.txt) 문제 상황: git rm이 아닌 rm 명령어로 파일을 삭제했습니다. git status에 \u0026ldquo;deleted: a.txt\u0026quot;로 표시됩니다. 해결 방안: checkout을 사용해 현재 브랜치(HEAD)의 마지막 커밋 상태에서 해당 파일을 복원합니다. # a.txt 파일을 마지막 커밋 상태로 복원 git checkout HEAD -- a.txt ```bash \u0026gt; `git checkout \u0026lt;commit\u0026gt; -- \u0026lt;file\u0026gt;`: 특정 커밋 상태의 특정 파일을 현재 작업 디렉터리로 복원합니다. `--`는 브랜치/커밋과 파일 경로를 명확하게 구분하는 역할을 합니다. # -- 를 사용하면 브랜치 이름과 파일 이름을 명확히 구분할 수 있어 안전합니다. 사례 3: 브랜치를 옮기지 않고 다른 브랜치의 파일 내용만 보고 싶을 때 문제 상황: 현재 브랜치는 feature인데, main 브랜치의 config.yml 파일 내용과 비교하고 싶습니다. 브랜치를 통째로 옮기기엔 부담스럽습니다. 해결 방안: git show 또는 git checkout을 특정 파일에 대해서만 실행합니다. # 1. git show 사용 (단순 조회) git show main:path/to/config.yml \u0026gt; `git show \u0026lt;branch\u0026gt;:\u0026lt;path/to/file\u0026gt;`: 브랜치를 변경하지 않고, 다른 브랜치에 있는 파일의 내용을 터미널에 출력합니다. # 2. git checkout 사용 (현재 작업 디렉터리로 가져오기) git checkout main -- path/to/config.yml # 위 명령은 `main` 브랜치의 `config.yml`을 현재 디렉터리로 가져와 덮어씁니다. # 주의: 현재 작업 디렉터리의 내용이 변경됩니다. 사례 4: \u0026ldquo;Detached HEAD\u0026rdquo; 상태가 되었을 때 문제 상황: git checkout \u0026lt;commit-hash\u0026gt; 나 git checkout origin/main 처럼 브랜치가 아닌 포인터를 직접 체크아웃하면 \u0026ldquo;You are in \u0026lsquo;detached HEAD\u0026rsquo; state.\u0026rdquo; 라는 메시지가 나옵니다. 이 상태에서 작업하고 커밋하면 해당 커밋은 어떤 브랜치에도 속하지 않게 되어 나중에 잃어버릴 수 있습니다. 해결 방안: 현재 \u0026ldquo;Detached HEAD\u0026rdquo; 상태에서 새로운 브랜치를 만들어 작업을 이어갑니다. # 현재 위치에서 \u0026#39;temp-work\u0026#39; 라는 새 브랜치를 생성 git checkout -b temp-work \u0026gt; `git checkout -b \u0026lt;new-branch\u0026gt;`: 현재 위치(커밋)에서 새로운 브랜치를 생성하고, 즉시 해당 브랜치로 전환합니다. # 이제 \u0026#39;temp-work\u0026#39; 브랜치에서 안전하게 커밋을 이어갈 수 있습니다. git add . git commit -m \u0026#34;Add new feature from detached state\u0026#34; 사례 5: 과거의 특정 파일 버전 하나만 현재 브랜치로 가져오고 싶을 때 문제 상황: config.js 파일의 과거 버전이 필요합니다. 3개의 커밋 전(HEAD~3) 버전의 config.js만 현재 작업 내용에 덮어쓰고 싶습니다. 해결 방안: git checkout에 커밋 해시와 파일 경로를 지정합니다. # 3개 커밋 전 버전의 \u0026#39;config.js\u0026#39;를 현재 디렉터리로 가져옴 git checkout HEAD~3 -- src/config.js git checkout \u0026lt;commit\u0026gt; -- \u0026lt;file\u0026gt;: 특정 커밋에 해당하는 파일의 버전으로 현재 작업 디렉터리의 파일을 덮어씁니다.\nPart 2: stash 관련 문제 - \u0026ldquo;작업 내용이 사라졌어요!\u0026rdquo; stash는 매우 유용한 임시 저장 기능이지만, 여러 개가 쌓이면 혼란스러워집니다.\n사례 6: Stash 이름 없이 저장해서 뭐가 뭔지 모를 때 문제 상황: 여러 번 git stash를 실행했더니 stash@{0}, stash@{1} \u0026hellip; 목록만 있고, 어떤 내용이 저장되었는지 기억나지 않습니다.\n해결 방안 1: git stash list로 목록을 보고, git stash show로 각 내용을 확인합니다.\ngit stash list # stash@{0}: WIP on feature/login: ... # stash@{1}: WIP on feature/login: ... # stash@{1}의 변경 내용 요약 보기 git stash show stash@{1} # stash@{1}의 변경 내용 상세 보기 (diff) git stash show -p stash@{1} git stash list: 현재 저장된 모든 stash 목록을 최신 순으로 보여줍니다.\n해결 방안 2: 처음부터 git stash push -m \u0026quot;메시지\u0026quot; 로 저장합니다. (git stash save는 더 이상 권장되지 않습니다.)\ngit stash push -m \u0026#34;Finish login UI, before API integration\u0026#34; 사례 7: Untracked 파일(새로 만든 파일)은 stash에 포함되지 않았을 때 문제 상황: 새로 만든 파일(new-component.js)과 기존 파일 수정을 함께 git stash했는데, 브랜치를 옮겼다 돌아와 stash pop하니 새로 만든 파일이 사라졌습니다. 해결 방안: stash 시 -u 또는 --include-untracked 옵션을 사용합니다. # Untracked 파일까지 포함하여 stash git stash -u 사례 8: 다른 브랜치에서 작업한 내용을 현재 브랜치에 적용하고 싶을 때 문제 상황: feature/A에서 작업하던 내용을 커밋 없이 stash하고, feature/B로 넘어왔습니다. feature/A의 작업 내용 일부가 feature/B에서도 필요합니다. 해결 방안: git stash branch를 사용해 stash로부터 새로운 브랜치를 생성합니다. # 현재 `feature/B` 브랜치에서... # 가장 최근의 stash (stash@{0}) 내용으로 \u0026#39;temp-branch\u0026#39; 생성 git stash branch temp-branch stash@{0} # 이제 \u0026#39;temp-branch\u0026#39;는 \u0026#39;feature/A\u0026#39;에서 작업하던 내용을 커밋할 수 있는 상태가 됩니다. # 여기서 필요한 내용을 커밋한 뒤, \u0026#39;feature/B\u0026#39;에서 `cherry-pick` 등으로 가져올 수 있습니다. 사례 9: stash pop 실행 시 충돌(Conflict)이 발생했을 때 문제 상황: stash를 한 이후, 현재 브랜치에서 stash에 저장된 내용과 동일한 라인을 수정했습니다. git stash pop을 하니 충돌이 발생합니다.\n해결 방안: 일반적인 merge 충돌과 동일하게 해결합니다.\n충돌이 발생한 파일을 열어 \u0026lt;\u0026lt;\u0026lt;\u0026lt;\u0026lt;, =====, \u0026gt;\u0026gt;\u0026gt;\u0026gt;\u0026gt; 마커를 확인하고 코드를 올바르게 수정합니다. 수정한 파일을 git add 합니다. git stash drop을 실행하여 적용된 stash를 스택에서 제거합니다. (pop은 충돌 시 자동으로 drop되지 않습니다.) # 1. 코드 수정 후 git add . # 2. 변경 사항 커밋 (필요 시) git commit -m \u0026#34;Resolve stash conflict\u0026#34; # 3. 적용된 stash 제거 git stash drop 사례 10: 실수로 stash clear를 실행하여 모든 stash가 사라졌을 때 문제 상황: 중요한 내용이 stash에 있었는데, git stash clear로 모두 삭제해버렸습니다. 해결 방안: Git이 아직 가비지 컬렉션(GC)을 실행하지 않았다면, fsck로 복구할 수 있습니다. # Git 데이터베이스에서 유효성을 검사하며 \u0026#34;dangling\u0026#34; 객체를 찾음 git fsck --no-reflogs # ... 수많은 해시값 출력 ... # 위에서 찾은 \u0026#34;dangling commit\u0026#34; 해시들을 하나씩 확인하여 stash 내용을 찾음 git show \u0026lt;dangling-commit-hash\u0026gt; # 원하는 stash를 찾았다면, 해당 커밋에서 브랜치를 만들어 복구 git branch recovered-stash \u0026lt;dangling-commit-hash\u0026gt; 이 방법은 복잡하고 항상 성공하는 것은 아니므로, 중요한 작업은 stash보다는 커밋으로 남기는 습관이 좋습니다. Part 3: branch 및 병합 관련 문제 - \u0026ldquo;브랜치가 꼬였어요!\u0026rdquo; 브랜치 전략은 협업의 핵심이며, 가장 많은 문제가 발생하는 곳이기도 합니다.\n사례 11: main 브랜치에 직접 커밋해버렸을 때 문제 상황: feature 브랜치에서 작업해야 할 내용을 실수로 main 브랜치에 커밋했습니다. 아직 push는 하지 않았습니다. 해결 방안: main 브랜치를 이전 커밋으로 되돌리고, 새 브랜치를 만들어 해당 커밋을 가져옵니다. # 1. 현재 `main` 브랜치에서... # 올바른 `feature` 브랜치를 생성 git branch feature/my-work # 2. `main` 브랜치를 이전 상태로 되돌림 (실수로 한 커밋 제거) # origin/main, 즉 원격 저장소의 상태로 강제 리셋 git reset --hard origin/main # 3. 이제 새 브랜치로 이동하여 작업을 이어감 git checkout feature/my-work 사례 12: 실수로 push까지 해버린 커밋을 되돌리고 싶을 때 문제 상황: main에 잘못 커밋하고 push까지 해버렸습니다. 다른 팀원들이 pull 받기 전에 빨리 조치해야 합니다. 해결 방안: revert를 사용하여 \u0026ldquo;잘못된 커밋을 되돌리는 새로운 커밋\u0026quot;을 만듭니다. # `main` 브랜치에서... # 되돌리고 싶은 마지막 커밋을 타겟으로 `revert` 실행 git revert HEAD # revert 커밋 메시지 저장 후, 변경 사항을 push git push origin main reset --hard 후 push -f를 하는 것은 팀원들의 히스토리를 엉망으로 만들 수 있으므로, 공유된 브랜치에서는 절대적으로 피해야 합니다. revert가 안전한 대안입니다. 사례 13: 브랜치 이름을 변경하고 싶을 때 (로컬 \u0026amp; 원격) 문제 상황: 브랜치 이름에 오타가 있거나, 컨벤션을 따르지 않아 변경하고 싶습니다. (예: feture/login -\u0026gt; feature/login) 해결 방안: # 1. 현재 브랜치 이름 변경 git branch -m feature/login # 2. 원격의 옛날 브랜치 삭제 git push origin --delete feture/login # 3. 새로 바꾼 이름의 브랜치를 원격에 push git push origin -u feature/login 사례 14: 다른 브랜치의 특정 커밋 하나만 현재 브랜치로 가져오고 싶을 때 문제 상황: hotfix 브랜치에서 수정한 버그 픽스 커밋(a1b2c3d)이 현재 개발 중인 feature 브랜치에도 즉시 필요합니다. 해결 방안: cherry-pick을 사용합니다. # `feature` 브랜치에서... git cherry-pick a1b2c3d 사례 15: 너무 자잘하게 나눠진 커밋들을 하나로 합치고 싶을 때 (Push 전) 문제 상황: \u0026ldquo;Fix typo\u0026rdquo;, \u0026ldquo;Add comment\u0026rdquo;, \u0026ldquo;Refactor\u0026rdquo; 등 의미 없는 커밋이 너무 많아 PR 올리기 전에 정리하고 싶습니다. 해결 방안: rebase -i (interactive rebase)를 사용합니다. # 합치고 싶은 커밋의 *이전* 커밋 해시를 지정 (예: 최근 3개) git rebase -i HEAD~3 위 명령을 실행하면 편집기가 열리고, 커밋 목록이 나옵니다. 맨 위 커밋은 pick으로 두고, 나머지 커밋 앞의 pick을 s 또는 squash로 변경합니다. 저장하고 닫으면, 커밋 메시지를 새로 작성하는 창이 열립니다. 하나의 깔끔한 메시지로 정리합니다. Part 4: 기타 고급 트러블 슈팅 사례 16: 실수로 git add 한 파일을 다시 내리고 싶을 때 문제 상황: 커밋하고 싶지 않은 파일(secret.key)을 실수로 Staging Area에 추가(add)했습니다. 해결 방안: git reset을 사용합니다. # 특정 파일만 Staging Area에서 내림 git reset HEAD secret.key # 모든 파일을 Staging Area에서 내림 git reset 사례 17: 마지막 커밋 메시지에 오타가 있을 때 문제 상황: 방금 커밋했는데, 메시지에 오타가 있습니다. 아직 push는 안했습니다. 해결 방안: commit --amend를 사용합니다. git commit --amend # 편집기가 열리면 메시지를 수정하고 저장 주의: push 한 커밋에는 절대 사용하면 안 됩니다. 사례 18: 브랜치를 삭제했는데, 다시 복구해야 할 때 문제 상황: git branch -D my-feature로 브랜치를 강제 삭제했는데, 아직 main에 병합되지 않은 중요한 커밋이 있었습니다. 해결 방안: reflog를 사용하여 Git의 모든 참조 변경 기록을 확인합니다. git reflog # ... # a1b2c3d HEAD@{5}: checkout: moving from my-feature to main # ... # 삭제된 브랜치의 마지막 커밋 해시(a1b2c3d)를 찾았다면, # 해당 커밋에서 브랜치를 다시 생성 git checkout -b recovered-feature a1b2c3d 사례 19: 현재 작업 내용 전체를 특정 과거 커밋 시점으로 되돌리고 싶을 때 문제 상황: 최근 몇 개의 커밋이 완전히 잘못된 방향으로 진행되어, a1b2c3d 커밋 시점으로 모든 것을 되돌리고 싶습니다. 로컬에서의 변경 사항이므로 히스토리가 깨져도 상관없습니다. 해결 방안: reset --hard를 사용합니다. (경고: 복구 불가능한 데이터 손실을 유발할 수 있습니다!) # 모든 변경사항, 커밋을 버리고 \u0026#39;a1b2c3d\u0026#39; 상태로 돌아감 git reset --hard a1b2c3d 사례 20: pull을 받았더니 관련 없는 커밋 히스토리가 잔뜩 병합될 때 문제 상황: main 브랜치에서 feature 브랜치를 따서 작업 후, feature 브랜치에서 git pull origin main을 실행했습니다. 의도와 달리 수많은 main의 커밋들이 Merge branch 'main' into feature 라는 메시지와 함께 들어왔습니다. 해결 방안: pull 시 rebase 옵션을 사용하거나, git config로 기본값으로 설정합니다. Rebase는 main의 변경사항을 내 브랜치의 \u0026ldquo;베이스\u0026quot;로 다시 설정하여, 내 커밋들을 그 위에 차곡차곡 쌓아줍니다. 히스토리가 훨씬 깔끔해집니다. # 1. 일회성으로 rebase pull 실행 git pull origin main --rebase # 2. 향후 모든 pull을 rebase로 실행하도록 설정 git config --global pull.rebase true 사례 21: 특정 커밋을 찾기 위해 로그를 효율적으로 검색하고 싶을 때 문제 상황: 프로젝트 히스토리가 길어져서 특정 기능이 언제 추가되었는지, 특정 파일이 언제 마지막으로 수정되었는지 찾기 어렵습니다.\n해결 방안: git log의 다양한 옵션을 활용하여 히스토리를 필터링합니다.\n# 한 줄로 로그를 깔끔하게 보기 git log --oneline --graph git log --oneline: 각 커밋을 한 줄로 요약하여 보여줍니다. --graph 옵션을 함께 사용하면 브랜치의 분기 및 병합 히스토리를 시각적으로 파악하기 좋습니다.\n# 특정 파일의 변경 이력만 보기 git log -p -- src/components/Button.js # 특정 기간 동안의 커밋만 보기 git log --since=\u0026#34;2 weeks ago\u0026#34; # 특정 작성자의 커밋만 보기 git log --author=\u0026#34;cdecl\u0026#34; # 커밋 메시지에서 특정 키워드로 검색하기 git log --grep=\u0026#34;keyword\u0026#34; # 코드 변경 내용(diff)에서 특정 문자열이 추가/삭제된 커밋 검색 git log -S\u0026#34;UserService\u0026#34; # 코드 변경 내용(diff)에서 정규식으로 특정 패턴을 검색 git log -G\u0026#34;Login(Service|Manager)\u0026#34; # 두 커밋 사이의 모든 커밋 보기 git log a1b2c3d..f4e5d6c git log --grep은 커밋 메시지를 검색하지만, git log -S는 실제 코드 변경 내용(diff)에서 특정 문자열의 증감(추가/삭제)이 발생한 커밋을 찾아줍니다. git log -G는 -S와 유사하게 코드 변경 내용에서 정규표현식으로 특정 패턴을 검색할 때 사용합니다. 이 옵션들과 함께 -p를 사용하면 해당 커밋의 전체 diff를 함께 볼 수 있어 변경 내용을 상세히 파악하는 데 매우 유용합니다.\n사례 22: 모든 변경 사항 취소하기 (Tracked + Untracked) 문제 상황: 작업하던 모든 변경 사항을 취소하고 현재 HEAD 상태로 깨끗하게 되돌리고 싶습니다. 이미 수정한 파일(tracked)과 새로 만든 파일(untracked)을 모두 삭제하고 싶습니다.\n해결 방안: 다음 명령들을 조합하여 사용합니다.\n# 1. Tracked 파일 모두 복원 (Working Directory + Staging Area 초기화) git reset --hard HEAD # 2. Untracked 파일 모두 삭제 git clean -fd git reset --hard HEAD: Working Directory와 Staging Area를 마지막 커밋 상태로 되돌립니다. tracked 파일의 모든 변경 사항을 취소합니다. untracked 파일은 삭제하지 않습니다.\ngit clean -fd: 추적하지 않는 파일(-f)과 디렉터리(-d)를 모두 삭제합니다. 주의: 영구적으로 삭제되므로 복구할 수 없습니다!\nVSCode \u0026ldquo;Discard All Changes\u0026quot;와의 차이: VSCode의 \u0026ldquo;Discard All Changes\u0026rdquo; 버튼은 git restore와 git clean -fd를 사용합니다. 이 방식은 git reset --hard와 달리 Staging Area의 파일을 처리하지 않습니다. 따라서 명령줄에서 직접 모든 변경 사항을 취소할 때는 git reset --hard HEAD \u0026amp;\u0026amp; git clean -fd를 사용하는 것이 더 확실합니다.\n참고: 특정 파일만 취소하려면:\n# 특정 파일만 취소 (untracked 파일에 대해서는 동작하지 않음) git restore \u0026lt;file\u0026gt; # 또는 git checkout HEAD -- \u0026lt;file\u0026gt; 팁: 삭제하기 전에 변경 사항을 저장하고 싶다면:\n# untracked 파일까지 포함하여 저장 git stash push -u # 나중에 복원 git stash pop Git 트러블 슈팅의 핵심은 \u0026ldquo;무엇을 하려 했는가\u0026quot;와 \u0026ldquo;실제로 무슨 일이 일어났는가\u0026quot;의 차이를 이해하는 것입니다. 이 글에서 소개된 사례들을 통해, 예상치 못한 상황에 더 자신감 있게 대처할 수 있기를 바랍니다.\n","permalink":"https://cdecl.github.io/dev/git-troubleshooting-examples/","summary":"\u003cp\u003eGit은 강력하지만, 복잡한 상황에서는 개발자를 당황하게 만드는 경우가 많습니다. \u0026ldquo;앗, 방금 뭘 한 거지?\u0026rdquo; 싶은 순간은 누구에게나 찾아옵니다. 이 글에서는 \u003ccode\u003echeckout\u003c/code\u003e, \u003ccode\u003estash\u003c/code\u003e, \u003ccode\u003ebranch\u003c/code\u003e 등 핵심 명령어를 중심으로, 실제 현업에서 자주 겪는 20가지 트러블 슈팅 사례와 해결 방안을 구체적으로 정리했습니다.\u003c/p\u003e\n\u003chr\u003e\n\u003ch2 id=\"part-1-checkout-관련-문제---코드가-뒤섞였어요\"\u003ePart 1: \u003ccode\u003echeckout\u003c/code\u003e 관련 문제 - \u0026ldquo;코드가 뒤섞였어요!\u0026rdquo;\u003c/h2\u003e\n\u003cp\u003e\u003ccode\u003echeckout\u003c/code\u003e은 브랜치를 바꾸거나 특정 버전으로 돌아갈 때 사용하지만, 이 과정에서 많은 실수가 발생합니다.\u003c/p\u003e\n\u003ch4 id=\"사례-1-다른-브랜치로-이동하려는데-작업하던-내용이-있어서-막힐-때\"\u003e사례 1: 다른 브랜치로 이동하려는데, 작업하던 내용이 있어서 막힐 때\u003c/h4\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003e문제 상황:\u003c/strong\u003e \u003ccode\u003efeature/new-login\u003c/code\u003e 브랜치에서 작업하던 중, 급하게 \u003ccode\u003ehotfix/bug-report\u003c/code\u003e 브랜치로 이동해야 합니다. \u003ccode\u003egit checkout hotfix/bug-report\u003c/code\u003e를 입력하니 \u0026ldquo;error: Your local changes to the following files would be overwritten by checkout\u0026hellip;\u0026rdquo; 메시지가 나옵니다.\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e해결 방안:\u003c/strong\u003e 아직 커밋하기 애매한 작업 내용을 임시 저장 공간(\u003ccode\u003estash\u003c/code\u003e)에 저장합니다.\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# 현재 작업 내용을 스택에 임시 저장\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003egit stash\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u0026gt; \u003cspan style=\"color:#e6db74\"\u003e`\u003c/span\u003egit stash\u003cspan style=\"color:#e6db74\"\u003e`\u003c/span\u003e: 현재 작업 디렉터리의 변경된 파일\u003cspan style=\"color:#f92672\"\u003e(\u003c/span\u003eTracked files\u003cspan style=\"color:#f92672\"\u003e)\u003c/span\u003e을 임시로 스택에 저장합니다. \u003cspan style=\"color:#e6db74\"\u003e`\u003c/span\u003epush\u003cspan style=\"color:#e6db74\"\u003e`\u003c/span\u003e, \u003cspan style=\"color:#e6db74\"\u003e`\u003c/span\u003epop\u003cspan style=\"color:#e6db74\"\u003e`\u003c/span\u003e, \u003cspan style=\"color:#e6db74\"\u003e`\u003c/span\u003eapply\u003cspan style=\"color:#e6db74\"\u003e`\u003c/span\u003e, \u003cspan style=\"color:#e6db74\"\u003e`\u003c/span\u003elist\u003cspan style=\"color:#e6db74\"\u003e`\u003c/span\u003e 등의 하위 명령어를 통해 관리할 수 있습니다.\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# 원하는 브랜치로 이동하여 작업 수행\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003egit checkout hotfix/bug-report\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# ... 핫픽스 작업 ...\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003egit commit -m \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;Fix: Critical bug\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003egit push origin hotfix/bug-report\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# 원래 브랜치로 복귀\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003egit checkout feature/new-login\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# 임시 저장했던 작업 내용 다시 적용\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003egit stash pop\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch4 id=\"사례-2-실수로-파일을-삭제했는데-커밋은-아직-안-했을-때-rm-atxt\"\u003e사례 2: 실수로 파일을 삭제했는데, 커밋은 아직 안 했을 때 (\u003ccode\u003erm a.txt\u003c/code\u003e)\u003c/h4\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003e문제 상황:\u003c/strong\u003e \u003ccode\u003egit rm\u003c/code\u003e이 아닌 \u003ccode\u003erm\u003c/code\u003e 명령어로 파일을 삭제했습니다. \u003ccode\u003egit status\u003c/code\u003e에 \u0026ldquo;deleted: a.txt\u0026quot;로 표시됩니다.\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e해결 방안:\u003c/strong\u003e \u003ccode\u003echeckout\u003c/code\u003e을 사용해 현재 브랜치(HEAD)의 마지막 커밋 상태에서 해당 파일을 복원합니다.\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# a.txt 파일을 마지막 커밋 상태로 복원\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003egit checkout HEAD -- a.txt\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003e```\u003c/span\u003ebash\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u0026gt; \u003cspan style=\"color:#e6db74\"\u003e`\u003c/span\u003egit checkout \u0026lt;commit\u0026gt; -- \u0026lt;file\u0026gt;\u003cspan style=\"color:#e6db74\"\u003e`\u003c/span\u003e: 특정 커밋 상태의 특정 파일을 현재 작업 디렉터리로 복원합니다. \u003cspan style=\"color:#e6db74\"\u003e`\u003c/span\u003e--\u003cspan style=\"color:#e6db74\"\u003e`\u003c/span\u003e는 브랜치/커밋과 파일 경로를 명확하게 구분하는 역할을 합니다.\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# -- 를 사용하면 브랜치 이름과 파일 이름을 명확히 구분할 수 있어 안전합니다.\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch4 id=\"사례-3-브랜치를-옮기지-않고-다른-브랜치의-파일-내용만-보고-싶을-때\"\u003e사례 3: 브랜치를 옮기지 않고 다른 브랜치의 파일 내용만 보고 싶을 때\u003c/h4\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003e문제 상황:\u003c/strong\u003e 현재 브랜치는 \u003ccode\u003efeature\u003c/code\u003e인데, \u003ccode\u003emain\u003c/code\u003e 브랜치의 \u003ccode\u003econfig.yml\u003c/code\u003e 파일 내용과 비교하고 싶습니다. 브랜치를 통째로 옮기기엔 부담스럽습니다.\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e해결 방안:\u003c/strong\u003e \u003ccode\u003egit show\u003c/code\u003e 또는 \u003ccode\u003egit checkout\u003c/code\u003e을 특정 파일에 대해서만 실행합니다.\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# 1. git show 사용 (단순 조회)\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003egit show main:path/to/config.yml\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u0026gt; \u003cspan style=\"color:#e6db74\"\u003e`\u003c/span\u003egit show \u0026lt;branch\u0026gt;:\u0026lt;path/to/file\u0026gt;\u003cspan style=\"color:#e6db74\"\u003e`\u003c/span\u003e: 브랜치를 변경하지 않고, 다른 브랜치에 있는 파일의 내용을 터미널에 출력합니다.\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# 2. git checkout 사용 (현재 작업 디렉터리로 가져오기)\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003egit checkout main -- path/to/config.yml\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# 위 명령은 `main` 브랜치의 `config.yml`을 현재 디렉터리로 가져와 덮어씁니다.\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# 주의: 현재 작업 디렉터리의 내용이 변경됩니다.\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch4 id=\"사례-4-detached-head-상태가-되었을-때\"\u003e사례 4: \u0026ldquo;Detached HEAD\u0026rdquo; 상태가 되었을 때\u003c/h4\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003e문제 상황:\u003c/strong\u003e \u003ccode\u003egit checkout \u0026lt;commit-hash\u0026gt;\u003c/code\u003e 나 \u003ccode\u003egit checkout origin/main\u003c/code\u003e 처럼 브랜치가 아닌 포인터를 직접 체크아웃하면 \u0026ldquo;You are in \u0026lsquo;detached HEAD\u0026rsquo; state.\u0026rdquo; 라는 메시지가 나옵니다. 이 상태에서 작업하고 커밋하면 해당 커밋은 어떤 브랜치에도 속하지 않게 되어 나중에 잃어버릴 수 있습니다.\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e해결 방안:\u003c/strong\u003e 현재 \u0026ldquo;Detached HEAD\u0026rdquo; 상태에서 새로운 브랜치를 만들어 작업을 이어갑니다.\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# 현재 위치에서 \u0026#39;temp-work\u0026#39; 라는 새 브랜치를 생성\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003egit checkout -b temp-work\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u0026gt; \u003cspan style=\"color:#e6db74\"\u003e`\u003c/span\u003egit checkout -b \u0026lt;new-branch\u0026gt;\u003cspan style=\"color:#e6db74\"\u003e`\u003c/span\u003e: 현재 위치\u003cspan style=\"color:#f92672\"\u003e(\u003c/span\u003e커밋\u003cspan style=\"color:#f92672\"\u003e)\u003c/span\u003e에서 새로운 브랜치를 생성하고, 즉시 해당 브랜치로 전환합니다.\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# 이제 \u0026#39;temp-work\u0026#39; 브랜치에서 안전하게 커밋을 이어갈 수 있습니다.\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003egit add .\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003egit commit -m \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;Add new feature from detached state\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch4 id=\"사례-5-과거의-특정-파일-버전-하나만-현재-브랜치로-가져오고-싶을-때\"\u003e사례 5: 과거의 특정 파일 버전 하나만 현재 브랜치로 가져오고 싶을 때\u003c/h4\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003e문제 상황:\u003c/strong\u003e \u003ccode\u003econfig.js\u003c/code\u003e 파일의 과거 버전이 필요합니다. 3개의 커밋 전(\u003ccode\u003eHEAD~3\u003c/code\u003e) 버전의 \u003ccode\u003econfig.js\u003c/code\u003e만 현재 작업 내용에 덮어쓰고 싶습니다.\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e해결 방안:\u003c/strong\u003e \u003ccode\u003egit checkout\u003c/code\u003e에 커밋 해시와 파일 경로를 지정합니다.\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# 3개 커밋 전 버전의 \u0026#39;config.js\u0026#39;를 현재 디렉터리로 가져옴\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003egit checkout HEAD~3 -- src/config.js\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cblockquote\u003e\n\u003cp\u003e\u003ccode\u003egit checkout \u0026lt;commit\u0026gt; -- \u0026lt;file\u0026gt;\u003c/code\u003e: 특정 커밋에 해당하는 파일의 버전으로 현재 작업 디렉터리의 파일을 덮어씁니다.\u003c/p\u003e","title":"사례로 보는 Git 트러블 슈팅"},{"content":"Supabase는 편리한 기능과 자동화된 API 덕분에 많은 개발자에게 사랑받고 있지만, 간혹 대시보드에 나타나는 \u0026ldquo;RLS Disabled\u0026rdquo; 경고는 백엔드 개발자들을 혼란에 빠뜨리곤 합니다. \u0026ldquo;나는 백엔드에서만 안전하게 통신하는데, 이게 왜 문제지?\u0026ldquo;라고 생각했다면 이 글이 명쾌한 해답을 드릴 것입니다. 이 글에서는 RLS와 anon 키의 관계를 명확히 이해하고, 백엔드 중심 프로젝트에서 RLS를 어떻게 활용해야 하는지에 대한 모범 사례를 제시합니다.\n1. 문제 상황: \u0026ldquo;RLS Disabled in Public\u0026rdquo; 경고의 의미 Supabase 대시보드에서 public.users 또는 public.notes와 같은 테이블에 대해 RLS Disabled 경고를 마주하는 것은 생각보다 흔한 일입니다. 이 경고의 진짜 의미는 무엇일까요?\n원인: Supabase는 public 스키마에 생성된 테이블을 PostgREST를 통해 외부에서 접근 가능한 API URL로 자동 노출합니다. 진단: 경고의 핵심은 \u0026ldquo;외부로 향하는 API 문은 열려 있는데, 정작 테이블 자체에는 아무런 보안 정책(RLS)이 없어 누구나 데이터를 열람하거나 조작할 수 있는 위험한 상태\u0026quot;라는 뜻입니다. 백엔드 서버에서만 DB에 접근한다고 해서 이 경고를 무시해서는 안 됩니다. 우리가 사용하지 않는 \u0026lsquo;앞문\u0026rsquo;이 활짝 열려있는 것과 같기 때문입니다.\n2. 핵심 개념: 용어 정리 이 문제를 제대로 이해하려면 세 가지 핵심 개념을 알아야 합니다.\n① anon 키 (Anonymous Key) 정체: 프론트엔드(클라이언트) 환경에서 데이터베이스에 직접 접속하기 위해 설계된 공개용 키입니다. 위험성: 이름처럼 익명 사용자를 위한 키이므로, 웹사이트의 소스 코드나 브라우저의 네트워크 탭을 통해 누구나 쉽게 획득할 수 있습니다. 만약 RLS가 비활성화되어 있다면, 이 anon 키 하나만으로 해커는 당신의 모든 데이터를 조회, 수정, 삭제할 수 있습니다. ② RLS (Row Level Security) 정체: PostgreSQL 데이터베이스의 각 행(Row) 단위로 정교한 접근 권한을 제어하는 강력한 보안 엔진입니다. 역할: \u0026ldquo;이 요청을 보낸 사용자가 이 데이터 행의 주인인가?\u0026rdquo; 혹은 \u0026ldquo;이 사용자가 이 데이터를 읽거나 쓸 자격이 있는가?\u0026ldquo;를 데이터베이스 수준에서 직접 검사하여 인가되지 않은 접근을 원천 차단합니다. ③ service_role 키 (Service Role Key) 정체: 백엔드 서버 환경에서 사용하는 관리자용 마스터 키입니다. 절대로 외부에 노출되어서는 안 됩니다. 특징: 이 키의 가장 중요한 특징은 **RLS를 우회(Bypass)**한다는 점입니다. 즉, RLS 정책이 아무리 촘촘하게 설정되어 있어도 service_role 키를 사용한 요청은 모든 데이터에 제약 없이 접근할 수 있습니다. 3. RLS, 왜 필요한가? (백엔드 개발자의 오해) 백엔드 개발자들 사이에서 가장 흔한 질문은 다음과 같습니다.\nQ: \u0026ldquo;저는 백엔드 서버에서 service_role 키나 DB connection string으로만 안전하게 통신하는데, 굳이 RLS를 켤 필요가 있나요?\u0026rdquo;\nA: 네, 반드시 켜야 합니다.\n백엔드와 DB 사이의 통신 채널이 안전한 것과 별개로, Supabase는 기본적으로 anon 키를 통한 **\u0026lsquo;사용하지 않는 정문\u0026rsquo;**을 열어두고 있습니다. RLS를 활성화하는 것은 바로 이 정문을 잠그고, 오직 우리가 통제하는 백엔드라는 \u0026lsquo;뒷문\u0026rsquo;으로만 출입하도록 강제하는 행위입니다.\n4. 백엔드 중심 운영을 위한 RLS 보안 전략 (Best Practice) anon 키를 사용할 계획이 없는 백엔드 중심 프로젝트라면, 보안 설정은 매우 간단하고 명확합니다.\n단계 1: RLS 활성화 (앞문 잠그기) 가장 먼저 할 일은 사용하지 않을 anon 키의 접근 경로를 원천 차단하는 것입니다. 별도의 정책(Policy)을 만들 필요조차 없습니다. RLS만 활성화하면, 기본적으로 \u0026lsquo;DENY ALL\u0026rsquo;(모든 요청 거부) 정책이 적용되어 모든 익명 요청이 자동으로 차단됩니다.\n-- RLS를 활성화할 대상 테이블 지정 ALTER TABLE public.users ENABLE ROW LEVEL SECURITY; ALTER TABLE public.notes ENABLE ROW LEVEL SECURITY; -- 테이블에 강제로 RLS 적용 (이미 활성화된 경우에도 확인차 실행) ALTER TABLE public.users FORCE ROW LEVEL SECURITY; ALTER TABLE public.notes FORCE ROW LEVEL SECURITY; 이 두 줄의 SQL만으로 anon 키를 사용한 모든 API 요청은 실패하게 됩니다.\n단계 2: 백엔드는 기존 방식 그대로 운영 백엔드 서버에서는 기존처럼 service_role 키 또는 데이터베이스 비밀 연결 문자열을 그대로 사용하면 됩니다. 이 키들은 RLS를 우회하므로, RLS 활성화 여부와 관계없이 기존 백엔드 로직과 성능에 아무런 영향도 주지 않습니다.\n단계 3: 심층 방어 (Defense in Depth) RLS를 켜두면 얘기치 못한 상황에서 최후의 방어선 역할을 합니다. 예를 들어, 백엔드 서버가 해킹당하거나 코드 로직에 실수가 생겨 의도치 않은 데이터 변경이 발생하려 할 때, 데이터베이스 수준에 설정된 RLS가 2차적인 방어벽이 되어줄 수 있습니다.\n5. 프론트엔드 운영을 위한 RLS 정책 수립 (anon 키 활용) 백엔드만 사용하는 경우와 달리, 프론트엔드에서 Supabase를 직접 호출하려면 anon 키에 대한 접근을 허용해야 합니다. 이는 RLS를 끄는 것이 아니라, 어떤 조건에서 anon 키의 요청을 허용할지에 대한 구체적인 정책(Policy)을 정의하는 것을 의미합니다.\n5.1. RLS 정책의 기본 구조: USING과 WITH CHECK RLS 정책은 크게 USING 절과 WITH CHECK 절로 구성됩니다.\nUSING (읽기 접근 제어): SELECT 쿼리가 실행될 때 적용됩니다. 이 조건이 true를 반환하는 행(Row)만 사용자에게 보입니다. WITH CHECK (쓰기 접근 제어): INSERT 또는 UPDATE 쿼리가 실행될 때 적용됩니다. 이 조건이 true를 반환해야만 데이터의 삽입 또는 수정이 허용됩니다. DELETE는 USING 절의 규칙을 따릅니다. 5.2. 정책 예시 1: 인증된 사용자는 자신의 데이터만 관리 가장 흔한 시나리오입니다. 예를 들어 profiles 테이블이 있고, 사용자는 자신의 프로필만 보고 수정할 수 있어야 합니다.\n-- 이 정책은 \u0026#39;profiles\u0026#39; 테이블에 적용됩니다. CREATE POLICY \u0026#34;Users can manage their own profile.\u0026#34; -- 어떤 작업에 대해? SELECT, INSERT, UPDATE, DELETE 모두 ON public.profiles FOR ALL -- 누가 접근할 때? 인증된 모든 사용자 (anon 역할 아님) TO authenticated -- 읽기 조건: 행의 id가 현재 로그인한 사용자의 id와 같아야 함 USING ( auth.uid() = id ) -- 쓰기 조건: 삽입/수정하려는 행의 id가 현재 로그인한 사용자의 id와 같아야 함 WITH CHECK ( auth.uid() = id ); auth.uid()는 Supabase가 제공하는 헬퍼 함수로, 요청을 보낸 사용자의 고유 ID(UUID)를 반환합니다. 이 정책 덕분에 사용자는 anon 키로 API를 호출하더라도 데이터베이스 수준에서 자신의 데이터에만 안전하게 접근할 수 있습니다.\n5.3. 정책 예시 2: 공개 데이터와 개인 데이터 혼합 블로그 게시물을 생각해보겠습니다. 모든 게시물(posts)은 누구나 읽을 수 있지만, 작성은 인증된 사용자만 가능하고, 수정/삭제는 작성자 본인만 가능해야 합니다.\n-- 1. 모든 사용자가 게시물을 읽을 수 있도록 허용하는 정책 (SELECT) CREATE POLICY \u0026#34;Public can read all posts.\u0026#34; ON public.posts FOR SELECT TO public USING ( true ); -- \u0026#39;true\u0026#39;는 항상 참이므로 모든 행을 볼 수 있음 -- 2. 인증된 사용자만 게시물을 작성할 수 있도록 허용하는 정책 (INSERT) CREATE POLICY \u0026#34;Authenticated users can create posts.\u0026#34; ON public.posts FOR INSERT TO authenticated WITH CHECK ( true ); -- 인증만 되었다면 누구나 작성 가능 -- 3. 작성자 본인만 게시물을 수정할 수 있도록 허용하는 정책 (UPDATE) CREATE POLICY \u0026#34;Owners can update their own posts.\u0026#34; ON public.posts FOR UPDATE TO authenticated USING ( auth.uid() = user_id ) -- 수정할 행을 찾는 조건 WITH CHECK ( auth.uid() = user_id ); -- 수정할 내용이 제약조건을 만족하는지 확인 -- 4. 작성자 본인만 게시물을 삭제할 수 있도록 허용하는 정책 (DELETE) CREATE POLICY \u0026#34;Owners can delete their own posts.\u0026#34; ON public.posts FOR DELETE TO authenticated USING ( auth.uid() = user_id ); -- 삭제할 행을 찾는 조건 이처럼 작업(SELECT, INSERT, UPDATE, DELETE)과 역할(public, authenticated)에 따라 여러 정책을 조합하여 매우 세분화된 규칙을 만들 수 있습니다.\n6. 좋은 RLS 정책을 설계하는 기준 효과적이고 안전한 RLS 정책을 만들려면 다음 기준을 따르는 것이 좋습니다. 이는 anon 키에 부여할 권한을 어떻게 잘게 나눌 것인가에 대한 기준, 즉 \u0026lsquo;anon 키 분해 기준\u0026rsquo;이 됩니다.\n기본적으로 거부 (Default Deny) 가장 중요한 원칙입니다. ALTER TABLE ... ENABLE ROW LEVEL SECURITY;를 실행하는 순간 모든 접근이 차단됩니다. 그 상태에서 꼭 필요한 권한만 정책을 통해 하나씩 허용해야 합니다.\n최소 권한의 원칙 (Principle of Least Privilege) 사용자에게 꼭 필요한 최소한의 권한만 부여합니다. 예를 들어, 단순히 게시물을 읽기만 하면 되는 익명 사용자(public)에게 UPDATE나 DELETE 권한을 줄 이유가 없습니다.\n역할과 행동에 따라 정책 분리 위의 게시물 예시처럼, 하나의 큰 정책을 만드는 대신 SELECT용, INSERT용, UPDATE용 정책을 명확하게 분리하는 것이 좋습니다. 이렇게 하면 정책을 이해하고 디버깅하기 쉬워집니다.\nUSING과 WITH CHECK를 명확히 이해하고 사용\n조회(View) 권한은 USING으로 제어합니다. 생성/수정(Mutation) 권한은 WITH CHECK로 제어하여 데이터 무결성을 보장해야 합니다. CHECK 조건을 누락하면 사용자가 다른 사람의 user_id로 데이터를 삽입하는 등의 문제가 발생할 수 있습니다. 7. 새로운 요약 및 결론 Supabase의 RLS는 단순히 anon 키를 차단하는 수단이 아니라, 프론트엔드와 직접 통신할 때 어떤 데이터를, 누구에게, 어떻게 허용할지를 정의하는 강력한 규칙 엔진입니다.\n구분 프론트엔드 (Client-Side) 백엔드 (Server-Side) 인증 수단 anon 키 (공개) service_role 키 (비밀) RLS 영향 강제 적용 (보안의 핵심) 우회 (성능/로직에 영향 없음) 보안 주체 데이터베이스(RLS) + 프론트 로직 백엔드 애플리케이션 로직 RLS 목적 세분화된 데이터 접근 규칙 정의 anon 키를 통한 비인가 접근 전면 차단 최종 결론: RLS는 백엔드만 사용하든, 프론트엔드와 함께 사용하든 반드시 활성화해야 하는 필수 보안 기능입니다. 백엔드 중심이라면 모든 접근을 차단하는 방화벽으로, 프론트엔드 중심이라면 데이터 접근 규칙을 정의하는 설계도로서 RLS를 적극 활용해야 합니다.\n","permalink":"https://cdecl.github.io/devops/supabase-rls-anon-key-security-guide/","summary":"\u003cp\u003eSupabase는 편리한 기능과 자동화된 API 덕분에 많은 개발자에게 사랑받고 있지만, 간혹 대시보드에 나타나는 \u0026ldquo;RLS Disabled\u0026rdquo; 경고는 백엔드 개발자들을 혼란에 빠뜨리곤 합니다. \u0026ldquo;나는 백엔드에서만 안전하게 통신하는데, 이게 왜 문제지?\u0026ldquo;라고 생각했다면 이 글이 명쾌한 해답을 드릴 것입니다. 이 글에서는 RLS와 anon 키의 관계를 명확히 이해하고, 백엔드 중심 프로젝트에서 RLS를 어떻게 활용해야 하는지에 대한 모범 사례를 제시합니다.\u003c/p\u003e\n\u003ch2 id=\"1-문제-상황-rls-disabled-in-public-경고의-의미\"\u003e1. 문제 상황: \u0026ldquo;RLS Disabled in Public\u0026rdquo; 경고의 의미\u003c/h2\u003e\n\u003cp\u003eSupabase 대시보드에서 \u003ccode\u003epublic.users\u003c/code\u003e 또는 \u003ccode\u003epublic.notes\u003c/code\u003e와 같은 테이블에 대해 \u003cstrong\u003eRLS Disabled\u003c/strong\u003e 경고를 마주하는 것은 생각보다 흔한 일입니다. 이 경고의 진짜 의미는 무엇일까요?\u003c/p\u003e","title":"Supabase RLS와 anon 키: RLS Disabled in Public, 백엔드 개발자를 위한 보안 가이드"},{"content":"Python 기반의 웹 프레임워크인 Flask나 FastAPI를 개발한 후, 이를 실제 서비스로 배포하는 방법은 여러 가지가 있습니다. (AWS EC2, Docker, Heroku 등) 그 중에서도 Vercel은 복잡한 서버 관리 없이 가장 간편하고 빠르게 배포할 수 있는 플랫폼 중 하나입니다. 이번 글에서는 Vercel을 사용하여 Python 웹 애플리케이션을 배포하는 전반적인 과정과 주요 개념들을 정리해 보겠습니다.\n1. Vercel 서비스 개요 및 기능 Vercel은 개발자가 만든 웹 애플리케이션을 쉽고 빠르게 배포할 수 있도록 돕는 클라우드 플랫폼입니다. 초기에는 Next.js와 같은 프론트엔드 프레임워크 배포에 최적화된 서비스로 시작했으나, 현재는 Serverless Functions 기능을 통해 Python, Node.js, Go 등의 백엔드 언어도 지원합니다.\n주요 특징 및 할 수 있는 것들 Serverless Architecture: 별도의 서버(VM)를 프로비저닝하거나 관리할 필요가 없습니다. 요청이 들어올 때만 코드가 실행되는 서버리스 환경을 제공합니다. Zero Configuration: 복잡한 설정 없이 Git 푸시만으로 빌드 및 배포가 자동화됩니다. Global CDN (Edge Network): 전 세계에 분산된 엣지 네트워크를 통해 콘텐츠를 캐싱하고 빠르게 제공합니다. Automated CI/CD: Github/Gitlab 등과 연동되어 코드 변경 사항이 발생하면(Push, PR) 자동으로 새로운 버전을 배포하고 URL을 생성합니다. Preview Deployment: 프로덕션 배포 전, PR(Pull Request) 단계에서 미리 변경 사항을 확인해 볼 수 있는 프리뷰 URL을 제공합니다. 2. Vercel과 Github 소스 저장소의 관계 Vercel은 **Git 중심(Git-centric)**의 배포 워크플로우를 가집니다. 즉, 코드를 Github(또는 Gitlab, Bitbucket)에 올리는 행위 자체가 배포의 시작점이 됩니다.\n배포를 위해 필요한 사항 Github Repository: 배포할 Flask/FastAPI 프로젝트가 Github 리포지토리에 올라가 있어야 합니다. requirements.txt: Python 의존성 패키지 목록이 프로젝트 루트에 었어야 Vercel이 빌드 시 자동으로 라이브러리를 설치합니다. WSGI/ASGI 진입점: Flask는 app 객체, FastAPI는 app 객체가 정의된 파일이 명확해야 합니다. vercel.json (선택 사항): Python 프로젝트의 경우, Vercel에게 어떤 파일이 실행 파일인지 알려주기 위해 설정 파일이 필요할 수 있습니다. (최근에는 자동 감지 기능이 좋아졌으나, 명시적인 설정을 권장합니다.) /* vercel.json 예시 */ { \u0026#34;builds\u0026#34;: [ { \u0026#34;src\u0026#34;: \u0026#34;api/index.py\u0026#34;, \u0026#34;use\u0026#34;: \u0026#34;@vercel/python\u0026#34; } ], \u0026#34;routes\u0026#34;: [ { \u0026#34;src\u0026#34;: \u0026#34;/(.*)\u0026#34;, \u0026#34;dest\u0026#34;: \u0026#34;api/index.py\u0026#34; } ] } 3. Vercel 배포 소스 선택 및 배포 과정 Vercel에 프로젝트를 연결하고 배포하는 과정은 매우 직관적입니다.\n3.1 Github의 Vercel 어플리케이션 설치 및 권한 부여 Vercel 회원가입 후 \u0026lsquo;New Project\u0026rsquo;를 생성할 때 Github 계정을 연동하게 됩니다. 이때 Vercel Github App을 설치하게 되는데, 보안을 위해 **모든 리포지토리(All repositories)**에 접근 권한을 줄지, 아니면 **특정 리포지토리(Only select repositories)**만 허용할지 선택할 수 있습니다. 필요한 리포지토리만 선택하여 권한을 부여하는 것이 좋습니다.\n3.2 Vercel의 소스 선택 및 Import Vercel 대시보드에서 Add New \u0026gt; Project를 클릭합니다. 연동된 Github 계정의 리포지토리 목록이 나타납니다. 배포하려는 Python 프로젝트 옆의 Import 버튼을 누릅니다. Configure Project 화면에서 다음을 설정합니다. Project Name: URL에 사용될 프로젝트 이름입니다. Root Directory: 프로젝트가 하위 폴더에 있다면 지정합니다. (보통은 ./) Environment Variables: DB 접속 정보나 API 키 등 환경 변수를 여기서 설정합니다. Deploy 버튼을 클릭하면 Vercel이 코드를 가져와 빌드 및 배포를 시작합니다. 4. Deployment 관리: 버전 확인 및 재배포 Vercel에서 Deployment는 불변(Immutable)의 스냅샷입니다. 코드가 변경될 때마다 새로운 URL을 가진 새로운 배포가 생성되므로, 언제든지 특정 시점의 코드로 되돌리거나 비교할 수 있습니다.\n4.1 Git 리비전 및 소스 확인 Vercel 대시보드의 Deployments 탭에서는 모든 배포 이력을 리스트 형태로 볼 수 있습니다.\nCommit 연결: 각 배포 항목에는 연동된 Github의 커밋 메시지와 브랜치명(main 등)이 표시됩니다. Git 아이콘 클릭: 커밋 ID나 메시지를 클릭하면 Github의 해당 커밋 페이지로 바로 이동하여, 정확히 어떤 코드가 배포되어 있는지 확인할 수 있습니다. Source 탭: Vercel 대시보드 내에서도 배포된 파일들의 소스 코드를 직접 열람할 수 있는 기능을 제공합니다. 4.2 최신 소스 반영 (업데이트) Vercel은 Git-centric 워크플로우를 따르므로, 소스를 업데이트하는 가장 정석적인 방법은 Git Push입니다.\n로컬에서 코드를 수정하고 커밋합니다. git push origin main 명령어로 원격 저장소에 푸시합니다. Vercel이 이를 감지하고 자동으로 Building -\u0026gt; Deploying 과정을 시작합니다. 배포가 완료되면 상태가 Ready로 바뀌고, 라이브 사이트에 변경 사항이 즉시 적용됩니다. 4.3 재배포(Redeploy) 및 롤백 코드는 그대로인데 환경 변수만 바꿨거나, 일시적인 오류로 빌드가 실패했을 때는 어떻게 해야 할까요?\nRedeploy (재배포):\n이미 지나난 커밋이나 실패한 배포를 다시 빌드하고 싶다면, 해당 Deployment의 점 3개 메뉴(\u0026hellip;)를 누르고 Redeploy를 선택합니다. Redeploy without cache: 의존성 패키지 설치부터 완전히 새로 시작하고 싶다면 이 옵션을 체크하면 됩니다. (환경 변수 변경 적용 시 유용) Instant Rollback (즉시 롤백):\n새로 배포한 버전에 치명적인 버그가 발견되었다면? 빌드를 기다릴 필요 없이 즉시 이전 버전으로 되돌릴 수 있습니다. 과거에 성공했던(Stable) Deployment 항목에서 메뉴를 열고 Instant Rollback을 클릭합니다. 도메인이 가리키는 대상만 즉시 변경되므로 초 단위로 복구가 가능합니다. 5. 환경 변수(Environment Variables) 및 .env 관리 API Key, Database URL 등 민감한 정보는 절대로 코드에 직접 작성하거나 Git 저장소에 올려서는 안 됩니다. Vercel은 이러한 환경 변수를 안전하게 관리할 수 있는 메커니즘을 제공합니다.\n5.1 로컬 개발 환경 (.env) 로컬에서 개발할 때는 프로젝트 루트에 .env 파일을 생성하여 변수를 관리합니다.\npython-dotenv 설치: pip install python-dotenv .env 파일 작성: DATABASE_URL=postgresql://user:password@localhost:5432/mydb API_KEY=my_secret_key 코드에서 사용: import os from dotenv import load_dotenv load_dotenv() # .env 파일 로드 db_url = os.getenv(\u0026#34;DATABASE_URL\u0026#34;) .gitignore 설정: .env 파일이 Git에 올라가지 않도록 .gitignore에 반드시 추가합니다. 5.2 Vercel 프로덕션 환경 변수 설정 배포된 환경에서는 파일이 아닌 Vercel 대시보드를 통해 변수를 주입합니다.\nVercel 프로젝트 대시보드의 Settings \u0026gt; Environment Variables 로 이동합니다. Key와 Value를 입력하고 추가합니다. Environments 선택: Production, Preview, Development 중 어디에 적용할지 선택할 수 있습니다. 설정 후에는 Redeploy를 해야 변경된 변수가 적용됩니다. 5.3 Vercel CLI로 환경 변수 동기화 Vercel에 설정된 환경 변수를 로컬 개발 환경으로 가져올 수도 있습니다.\n# Vercel에 로그인 및 프로젝트 연결 vercel login vercel link # Development 환경 변수를 .env.local 파일로 다운로드 vercel env pull .env 이렇게 하면 팀원들과 비밀키를 메신저로 주고받을 필요 없이 안전하게 동기화할 수 있습니다.\n5.4 Vercel 시스템 환경 변수 및 확인 방법 Vercel은 사용자가 정의한 변수 외에도 배포 환경에 대한 정보를 담은 **시스템 환경 변수(System Environment Variables)**를 자동으로 주입합니다.\nVERCEL_ENV: 현재 환경 (production, preview, development) VERCEL_URL: 배포된 URL (프로토콜 제외) VERCEL_REGION: 배포된 리전 (예: icn1) CI: CI 환경 여부 (boolean) 환경 변수 확인 예제 코드 (FastAPI)\nfrom fastapi import FastAPI import os app = FastAPI() @app.get(\u0026#34;/debug-env\u0026#34;) def read_env(): return { \u0026#34;ver_env\u0026#34;: os.getenv(\u0026#34;VERCEL_ENV\u0026#34;), \u0026#34;ver_url\u0026#34;: os.getenv(\u0026#34;VERCEL_URL\u0026#34;), \u0026#34;db_url_exists\u0026#34;: os.getenv(\u0026#34;DATABASE_URL\u0026#34;) is not None # 보안상 전체 값 노출보다는 존재 여부만 확인하는 것이 좋습니다. } 위와 같이 간단한 엔드포인트를 만들어 배포 후 접속해보면 변수가 제대로 주입되었는지 확인할 수 있습니다.\n6. DBMS 연결하기 (Supabase 활용) Vercel은 훌륭한 컴퓨팅 환경(Serverless Functions)을 제공하지만, 영구적인 데이터를 저장하는 데이터베이스는 직접 호스팅하지 않는 경우가 많습니다. (최근 Vercel Storage가 출시되었으나, 관계형 DB로는 Supabase나 Neon과 같은 외부 서비스를 많이 사용합니다.)\nSupabase 연결 절차 Supabase 프로젝트 생성: Supabase에서 새 프로젝트를 생성하고 PostgreSQL 데이터베이스를 할당받습니다. Connection String 확인: 프로젝트 설정에서 postgresql://... 로 시작하는 접속 정보를 복사합니다. Vercel 환경변수 설정: Vercel 프로젝트 설정의 Environment Variables 메뉴로 이동합니다. DATABASE_URL 등의 키(Key) 이름으로 복사한 접속 정보를 값(Value)으로 등록합니다. Python 코드 적용: Python 코드(SQLAlchemy 등)에서 os.environ.get(\u0026quot;DATABASE_URL\u0026quot;)을 사용하여 DB에 접속하도록 코드를 작성합니다. Tip: Vercel은 \u0026lsquo;Integrations\u0026rsquo; 마켓플레이스를 통해 Supabase를 클릭 몇 번으로 연동하고 환경변수를 자동으로 주입해주는 기능도 제공합니다.\nSupabase 연결 시 URL 파라미터 트러블슈팅 Vercel과 같은 Serverless 환경에서 Supabase에 연결할 때, 단순 문자열 복사만으로는 연결 에러가 발생할 수 있습니다. 다음 체크리스트를 확인하세요.\nURL 파라미터 정리 (Sanitize Database URL)\n문제 원인: Connection String의 ? 뒤에 붙는 쿼리 파라미터들은 데이터베이스 드라이버(Driver)가 해석합니다. 하지만 supa=value는 PostgreSQL 표준 파라미터가 아닌, Supabase 플랫폼 내부 관리용(Connection Pooling 등) 커스텀 파라미터입니다. 드라이버 반응: asyncpg나 SQLAlchemy 같은 표준 드라이버는 자신이 알지 못하는 supa 파라미터를 만나면 처리를 못하고 \u0026quot;Unknown connection parameter\u0026quot; 또는 \u0026quot;Invalid argument\u0026quot; 에러를 내뱉으며 연결을 거부합니다. 해결 방법: URL을 코드에 사용하기 전에 코드를 통해 supa 등 불필요한 파라미터를 반드시 제거(Sanitize)해야 합니다. 단, pgbouncer=true나 prepared_statement_cache_size=0 같은 드라이버 호환성 파라미터는 남겨두어야 합니다. 테이블 생성 시점 변경 (Move Table Creation to Startup)\n일반적인 서버 환경과 달리, Vercel(Serverless)에서는 코드를 import하는 시점에 DB 연결을 시도하거나 테이블을 생성(Base.metadata.create_all)하면 콜드 스타트 시간 지연이나 타임아웃 오류가 발생할 수 있습니다. 반드시 애플리케이션 시작 이벤트(@app.on_event(\u0026quot;startup\u0026quot;) 또는 lifespan) 내에서 테이블 생성 로직이 실행되도록 변경해야 합니다. 예시: @app.on_event(\u0026#34;startup\u0026#34;) async def on_startup(): # 여기서 DB 연결 및 테이블 생성 async with engine.begin() as conn: await conn.run_sync(Base.metadata.create_all) 7. 서비스 Expose, 도메인, SSL 배포가 완료되면 어떻게 외부에서 접속할 수 있을까요?\n기본 도메인 제공 배포 성공 시 Vercel은 기본적으로 프로젝트명.vercel.app 형태의 도메인을 무료로 제공합니다. (예: my-flask-app.vercel.app) 이 주소를 통해 즉시 서비스에 접속할 수 있습니다.\n※ 프로젝트명이 중복되는 경우: 만약 이미 다른 사용자가 해당 프로젝트명(서브도메인)을 선점했다면, Vercel은 자동으로 프로젝트명 뒤에 임의의 단어나 계정명을 붙여 중복되지 않는 URL을 생성합니다. (예: my-flask-app-gamma.vercel.app 또는 my-flask-app-cdecl.vercel.app) 원한다면 설정에서 도메인 주소를 변경할 수도 있습니다.\n커스텀 도메인 (Custom Domain) 본인이 소유한 도메인(예: example.com)을 연결할 수 있습니다.\nVercel 대시보드의 Settings \u0026gt; Domains에서 도메인을 추가합니다. 도메인 등록 업체(가비아, GoDaddy, AWS Route53 등)의 DNS 설정에서 Vercel이 안내하는 A 레코드 또는 CNAME 레코드를 입력하면 연결됩니다. SSL/HTTPS 자동 적용 Vercel의 가장 큰 장점 중 하나는 SSL 인증서를 자동으로 발급하고 갱신해준다는 점입니다. .vercel.app 기본 도메인은 물론, 연결한 커스텀 도메인에 대해서도 Let\u0026rsquo;s Encrypt 기반의 HTTPS 인증서가 자동으로 적용되어 보안 접속이 가능해집니다. 별도의 인증서 구매나 서버 설정이 필요 없습니다.\n8. 현재 기준 무료 플랜(Hobby) 및 가격 체계 Vercel은 개인 개발자를 위한 매우 혜자로운 무료 플랜을 제공합니다. (2025년 12월 기준)\nHobby Plan (무료) 대상: 개인적, 비상업적(Non-commercial) 용도의 프로젝트 Bandwidth: 월 100GB Serverless Function Execution: 월 100GB-hours (메모리 * 실행시간) Build Minutes: 월 6,000분 Domain: 개수 제한 없이 커스텀 도메인 연결 가능 제한 사항: Serverless Function의 실행 시간이 기본적으로 짧게 제한될 수 있으며(보통 10초~60초), 상업적 용도로 사용하는 것은 약관상 금지되어 있습니다. Pro Plan (유료) 대상: 팀 단위 협업이나 상업적 서비스 가격: 사용자당 월 $20 (기본) 추가 기능: 더 높은 대역폭 및 리소스 제한, 향상된 지원, 팀 협업 기능, 비밀번호 보호 등 보안 기능 제공. 개인 포트폴리오나 토이 프로젝트, 간단한 블로그 등을 운영하기에는 Hobby 플랜만으로도 차고 넘치는 기능을 제공합니다.\n","permalink":"https://cdecl.github.io/devops/python-web-framework-vercel-deploy/","summary":"\u003cp\u003ePython 기반의 웹 프레임워크인 \u003cstrong\u003eFlask\u003c/strong\u003e나 \u003cstrong\u003eFastAPI\u003c/strong\u003e를 개발한 후, 이를 실제 서비스로 배포하는 방법은 여러 가지가 있습니다. (AWS EC2, Docker, Heroku 등)\n그 중에서도 \u003cstrong\u003eVercel\u003c/strong\u003e은 복잡한 서버 관리 없이 가장 간편하고 빠르게 배포할 수 있는 플랫폼 중 하나입니다. 이번 글에서는 Vercel을 사용하여 Python 웹 애플리케이션을 배포하는 전반적인 과정과 주요 개념들을 정리해 보겠습니다.\u003c/p\u003e\n\u003ch2 id=\"1-vercel-서비스-개요-및-기능\"\u003e1. Vercel 서비스 개요 및 기능\u003c/h2\u003e\n\u003cp\u003e\u003cstrong\u003eVercel\u003c/strong\u003e은 개발자가 만든 웹 애플리케이션을 쉽고 빠르게 배포할 수 있도록 돕는 클라우드 플랫폼입니다. 초기에는 Next.js와 같은 프론트엔드 프레임워크 배포에 최적화된 서비스로 시작했으나, 현재는 \u003cstrong\u003eServerless Functions\u003c/strong\u003e 기능을 통해 Python, Node.js, Go 등의 백엔드 언어도 지원합니다.\u003c/p\u003e","title":"Python Web 프레임워크 (Flask, FastAPI) Vercel로 배포하기"},{"content":"네트워크 상에서 데이터(패킷)가 출발지에서 목적지까지 어떻게 이동하는지, 그 과정을 단계별로 정리해 보았습니다. 우리가 인터넷을 통해 데이터를 보낼 때, 눈에 보이지 않는 수많은 장비들이 어떤 역할을 수행하는지 알아보겠습니다.\n전체 흐름도 (Network Flow Diagram) 먼저 전체적인 흐름을 인포그래픽으로 살펴보겠습니다.\n단계별 이동 과정 패킷이 목적지 IP로 이동하는 과정은 크게 4단계로 나눌 수 있습니다.\n(1) 로컬 네트워크 확인 및 이동 (Routing Table \u0026amp; MAC) 컴퓨터나 네트워크 스위치는 패킷을 보낼 때 먼저 자신의 **라우팅 테이블(Routing Table)**을 확인합니다.\n동일 네트워크인 경우: 라우팅 테이블을 통해 목적지가 같은 네트워크 대역임이 확인되면, **ARP(Address Resolution Pro L2 스위치의 역할: L2 스위치는 MAC 주소 테이블을 기반으로 연결된 포트로 프레임을 전달합니다. (2) 디폴트 게이트웨이로 이동 (Default Gateway) 라우팅 테이블에 목적지로 가는 특정 경로가 명시되어 있지 않다면, 패킷은 **디폴트 게이트웨이(Default Gateway)**로 보내집니다.\n디폴트 게이트웨이는 보통 상위 라우터나 L3 스위치가 됩니다. PC는 게이트웨이의 MAC 주소를 ARP로 찾아서 패킷을 전달합니다. (3) DFZ (Default Free Zone)까지의 여정 상위 라우터로 전달된 패킷은 또다시 (1)과 (2)의 과정을 반복하며 인터넷 백본망으로 이동합니다.\n이 과정은 DFZ (Default Free Zone) 영역에 도달할 때까지 계속됩니다. DFZ 라우터: 전 세계의 모든 네트워크 경로 정보를 가지고 있는 최상위 라우터들입니다. 이들은 \u0026ldquo;모르면 위로 보낸다(Default Gateway)\u0026ldquo;는 개념이 없으며, 자신이 가진 경로 정보에 목적지가 없으면 패킷을 **폐기(Drop)**합니다. (4) 목적지 네트워크 진입 및 최종 도착 DFZ를 통과하여 목적지 IP 대역이 있는 네트워크 근처에 도달하면, 다시 하위 라우터를 타고 내려갑니다.\n최종 목적지 네트워크의 라우터(게이트웨이)에 도착하면, 라우터는 다시 ARP를 통해 최종 목적지 PC의 MAC 주소를 확인합니다. 확인된 MAC 주소를 이용해 L2 스위치를 거쳐 최종적으로 목적지 컴퓨터에 패킷이 도착합니다. 주요 용어 및 장비 설명 L2 스위치 vs L3 스위치 L2 스위치 (Layer 2): MAC 주소를 보고 통신합니다. 주로 같은 네트워크 안에서 기기들을 연결하는 역할을 합니다. L3 스위치 (Layer 3): IP 주소와 라우팅 테이블을 보고 통신합니다. 서로 다른 네트워크 간의 통신(라우팅)이 가능하며, 라우터의 역할을 겸합니다. DFZ (Default Free Zone) 일반적인 라우터들은 경로를 모르면 \u0026lsquo;디폴트 게이트웨이\u0026rsquo;로 패킷을 넘기지만, 인터넷의 최상위 계층인 DFZ에 있는 라우터들은 디폴트 게이트웨이가 없습니다. Full Routing Table: 전 세계의 모든 BGP 경로 정보(약 90만 개 이상)를 가지고 있어, 목적지 IP만 보면 어디로 보내야 할지 알 수 있습니다. 만약 여기서도 경로를 찾을 수 없다면 그 IP는 인터넷에 존재하지 않는 것으로 간주되어 폐기됩니다. ARP (Address Resolution Pro 네트워크 통신은 결과적으로 물리 장비(랜카드)를 찾아가야 하므로 MAC 주소가 필요합니다. 우리는 IP 주소로 통신한다고 생각하지만, 실제 데이터 링크 계층에서는 ARP 프로토콜이 \u0026ldquo;이 IP 주소 쓰는 사람 누구니?\u0026ldquo;라고 방송(Broadcasting)하여 그에 맞는 MAC 주소를 받아와서 통신합니다. ","permalink":"https://cdecl.github.io/devops/network-packet-flow/","summary":"\u003cp\u003e네트워크 상에서 데이터(패킷)가 출발지에서 목적지까지 어떻게 이동하는지, 그 과정을 단계별로 정리해 보았습니다. 우리가 인터넷을 통해 데이터를 보낼 때, 눈에 보이지 않는 수많은 장비들이 어떤 역할을 수행하는지 알아보겠습니다.\u003c/p\u003e\n\u003ch2 id=\"전체-흐름도-network-flow-diagram\"\u003e전체 흐름도 (Network Flow Diagram)\u003c/h2\u003e\n\u003cp\u003e먼저 전체적인 흐름을 인포그래픽으로 살펴보겠습니다.\u003c/p\u003e\n\u003cp\u003e\u003cimg alt=\"Network Packet Flow Diagram\" loading=\"lazy\" src=\"/assets/images/2025/12/network-flow.png\"\u003e\u003c/p\u003e\n\u003ch2 id=\"단계별-이동-과정\"\u003e단계별 이동 과정\u003c/h2\u003e\n\u003cp\u003e패킷이 목적지 IP로 이동하는 과정은 크게 4단계로 나눌 수 있습니다.\u003c/p\u003e\n\u003ch3 id=\"1-로컬-네트워크-확인-및-이동-routing-table--mac\"\u003e(1) 로컬 네트워크 확인 및 이동 (Routing Table \u0026amp; MAC)\u003c/h3\u003e\n\u003cp\u003e컴퓨터나 네트워크 스위치는 패킷을 보낼 때 먼저 자신의 **라우팅 테이블(Routing Table)**을 확인합니다.\u003c/p\u003e","title":"네트워크 패킷의 이동"},{"content":"오픈 소스 프로젝트를 시작하거나 기여할 때 가장 먼저 고려해야 할 것 중 하나는 **라이선스(License)**입니다. Github에는 수많은 프로젝트가 존재하며, 각 프로젝트는 코드 사용에 대한 권리와 의무를 규정하는 라이선스를 가지고 있습니다.\n라이선스를 제대로 이해하지 못하고 코드를 사용하면 법적 분쟁에 휘말릴 수 있습니다. 이 글에서는 Github에서 가장 널리 사용되는 주요 오픈 소스 라이선스들의 특징과 허용 범위, 제약 사항을 정리해 봅니다.\n1. MIT 라이선스 (MIT License) MIT 라이선스는 가장 단순하고 제한이 적은 라이선스 중 하나로, Github에서 가장 많이 사용되는 라이선스입니다.\n1-1. 특징 매우 관대함: 사용자가 코드를 자유롭게 사용, 수정, 배포할 수 있으며, 상업적 이용도 가능합니다. 단순함: 라이선스 문구가 짧고 명확합니다. 1-2. 요구 사항 저작권 고지 및 라이선스 사본 포함: 소스 코드나 소프트웨어를 배포할 때 원본의 저작권 표시와 MIT 라이선스 문구를 포함해야 합니다. 1-3. 제약 사항 책임 부인: 저작권자는 소프트웨어 사용으로 인한 어떠한 책임도 지지 않습니다. 한 줄 요약: \u0026ldquo;저작권 문구만 남겨주면 마음대로 써도 됨. 대신 책임은 안 짐.\u0026rdquo;\n2. Apache 라이선스 2.0 (Apache License 2.0) Apache 소프트웨어 재단에서 만든 라이선스로, MIT와 비슷하게 관대하지만 특허권에 대한 명시적인 조항이 포함되어 있습니다.\n2-1. 특징 특허 권리 부여: 기여자가 자신의 특허 기술을 프로젝트에 포함시킨 경우, 사용자에게 해당 특허의 사용 권한을 자동으로 부여합니다. 상표권 보호: 저작권자의 상표(이름, 로고 등)를 허락 없이 사용할 수 없습니다. 2-2. 요구 사항 저작권, 라이선스, 보증 부인 고지 포함: 배포 시 관련 문서를 포함해야 합니다. 수정 사항 명시: 코드를 수정하여 배포할 경우, 수정된 파일에 수정 사실을 명시해야 합니다. 2-3. 제약 사항 비슷하게 책임 부인 조항이 있습니다. 특허 소송 제기 시 라이선스가 종료될 수 있는 \u0026lsquo;특허 보복 조항\u0026rsquo;이 포함되어 있습니다. 한 줄 요약: \u0026ldquo;마음대로 써도 되고 특허 문제도 해결해 줌. 대신 수정했으면 티를 내고 설명서(NOTICE)는 챙겨 줘.\u0026rdquo;\n3. GNU 일반 공중 라이선스 (GNU GPL v3) 자유 소프트웨어 재단(FSF)에서 만든 강력한 Copyleft 라이선스입니다. 코드의 공개와 자유로운 공유를 강제하는 성격이 강합니다.\n3-1. 특징 전염성 (Viral Effect): GPL 라이선스 코드를 사용하여 만든 파생 소프트웨어도 반드시 GPL로 배포해야 합니다. 소스 코드 공개 의무: 실행 파일(바이너리)을 배포할 경우, 반드시 소스 코드도 함께 제공해야 합니다. 3-2. 요구 사항 동일 라이선스 배포: 수정된 코드는 GPL v3 하에 배포되어야 합니다. 저작권 고지, 라이선스 사본 포함. 3-3. 제약 사항 독점 소프트웨어와 결합 제한: GPL 코드를 정적/동적 링크하여 사용하는 독점(비공개) 소프트웨어 개발이 어렵습니다. (이 경우 전체 코드를 공개해야 할 수 있음) 상업적 판매 자체는 가능하지만, 소스 코드를 구매자에게 제공해야 하므로 사실상 독점적 판매가 어렵습니다. 한 줄 요약: \u0026ldquo;자유롭게 써도 되지만, 수정해서 배포하면 너의 코드도 무조건 공개해야 해.\u0026rdquo;\n4. GNU Affero 일반 공중 라이선스 (GNU AGPL v3) GPL과 거의 동일하지만, 네트워크를 통해 서비스를 제공하는 경우(SaaS)에 대한 규정이 추가된 더욱 강력한 라이선스입니다.\n4-1. 특징 네트워크 서비스도 배포로 간주: 일반적인 GPL은 실행 파일을 \u0026lsquo;배포\u0026rsquo;할 때만 소스 공개 의무가 생깁니다. 하지만 AGPL은 서버에서 실행되고 사용자가 네트워크로 접속해 사용하는 경우에도 \u0026lsquo;서비스 제공\u0026rsquo;을 배포와 유사하게 보아 소스 공개 의무를 부과합니다. 4-2. 요구 사항 네트워크 사용자에게 소스 공개: 프로그램을 네트워크를 통해 사용하는 모든 사용자에게 소스 코드(수정된 부분 포함)를 다운로드할 수 있는 방법을 제공해야 합니다. GPL v3의 모든 요구 사항을 포함합니다. 4-3. 제약 사항 가장 강력한 제약: 클라우드 서비스나 웹 서비스로 수익을 창출하려는 기업에게는 매우 까다로운 라이선스입니다. (예: MongoDB가 과거 AGPL을 사용했으나, 클라우드 사업자들과의 이슈로 SSPL로 변경함) 한 줄 요약: \u0026ldquo;GPL이랑 똑같은데, 이걸로 웹 사이트 만들어서 서비스만 해도 소스 다 공개해야 함.\u0026rdquo;\n5. BSD 라이선스 (BSD 2-Clause / 3-Clause) 버클리 캘리포니아 대학(UC Berkeley)에서 배포한 라이선스로, MIT와 매우 유사하게 관대합니다. 주로 2-Clause(Simplified)와 3-Clause(New) 버전이 사용됩니다.\n5-1. 특징 2-Clause: MIT 라이선스와 거의 동일합니다. 3-Clause: 2-Clause에 \u0026ldquo;저작권자의 이름을 홍보 목적으로 사용할 수 없다\u0026quot;는 조항이 추가된 버전입니다. 5-2. 요구 사항 저작권 고지 및 라이선스 사본 포함. 5-3. 제약 사항 (3-Clause의 경우) 저작권자나 기여자의 이름을 제품 홍보나 보증에 사용할 수 없습니다. 한 줄 요약: \u0026ldquo;MIT랑 거의 비슷한데, 내 이름 팔아서 홍보하지 마. (3-Clause)\u0026rdquo;\n6. 라이선스 비교 요약표 구분 MIT Apache 2.0 GPL v3 AGPL v3 BSD (3-Clause) 상업적 이용 허용 허용 허용 허용 허용 배포 허용 허용 허용 허용 허용 허용 수정 허용 허용 허용 허용 허용 허용 소스 코드 공개 의무 없음 없음 필수 (전염성) 필수 (강력한 전염성) 없음 특허 권리 부여 명시 없음 포함 포함 포함 명시 없음 라이선스 및 저작권 고지 필수 필수 필수 필수 필수 주요 사용 사례 React, Vue Android, Spark Linux Kernel Grafana(과거), MinIO Nginx, Go 6-1. 어떤 라이선스를 선택해야 할까? 최대한 널리 쓰이게 하고 싶다 (가장 관대): MIT 특허권 문제까지 깔끔하게 하고 싶다: Apache 2.0 내 코드를 가져다 쓴 사람이 소스를 비공개로 하는 꼴을 못 보겠다: GPL v3 웹 서비스 형태로만 얌체같이 쓰는 것도 용납 못 한다: AGPL v3 관대하지만 내 이름을 홍보에 이용하는 건 싫다: BSD 3-Clause 주의: 이 글은 일반적인 정보를 제공하기 위함이며 법적 자문이 아닙니다. 중요한 프로젝트나 법적 분쟁 소지가 있는 경우 전문 변호사의 상담을 받는 것이 좋습니다.\n","permalink":"https://cdecl.github.io/dev/github-open-source-licenses/","summary":"\u003cp\u003e오픈 소스 프로젝트를 시작하거나 기여할 때 가장 먼저 고려해야 할 것 중 하나는 **라이선스(License)**입니다. Github에는 수많은 프로젝트가 존재하며, 각 프로젝트는 코드 사용에 대한 권리와 의무를 규정하는 라이선스를 가지고 있습니다.\u003c/p\u003e\n\u003cp\u003e라이선스를 제대로 이해하지 못하고 코드를 사용하면 법적 분쟁에 휘말릴 수 있습니다. 이 글에서는 Github에서 가장 널리 사용되는 주요 오픈 소스 라이선스들의 특징과 허용 범위, 제약 사항을 정리해 봅니다.\u003c/p\u003e\n\u003chr\u003e\n\u003ch2 id=\"1-mit-라이선스-mit-license\"\u003e1. MIT 라이선스 (MIT License)\u003c/h2\u003e\n\u003cp\u003eMIT 라이선스는 가장 단순하고 제한이 적은 라이선스 중 하나로, Github에서 가장 많이 사용되는 라이선스입니다.\u003c/p\u003e","title":"Github에서 사용되는 주요 라이선스 종류 및 허용, 제약 사항"},{"content":"현대 웹 환경에서는 Cross-Origin 리소스 접근을 관리하기 위한 복잡한 보안 메커니즘이 존재합니다. 그 중심에는 SOP, CORS, CORP 세 가지 정책이 있습니다.\n특히 CDN(Content Delivery Network)을 사용하는 경우, 이 정책들을 정확히 이해하지 못하면 예측하지 못한 로드 오류(CORS/CORP 에러)에 직면하게 됩니다.\n1. 웹 보안의 근간: 출처(Origin)와 SOP 웹 보안의 모든 논의는 **출처(Origin)**의 개념에서 시작됩니다.\n1-1. 출처(Origin)의 정의 두 URL이 동일한 출처가 되기 위해서는 다음 세 가지 요소가 모두 일치해야 합니다.\n프로토콜 (Scheme): http 또는 https 호스트 (Host): 도메인 이름 (예: example.com) 포트 (Port): 포트 번호 (생략 시 기본값 80 또는 443) 1-2. 동일 출처 정책 (SOP: Same-Origin Policy) SOP는 웹 브라우저의 가장 기본적인 보안 정책입니다.\n목표: 한 출처에서 로드된 문서나 스크립트가 다른 출처의 리소스에 임의로 접근하여 정보를 읽는 것을 차단합니다. 이를 통해 CSRF(교차 사이트 요청 위조), 정보 유출 등의 악성 행위를 방지합니다. 기본 원칙: 기본적으로 동일 출처 간의 상호작용만 허용합니다. 2. SOP의 예외: CORS (Cross-Origin Resource Sharing) CORS는 SOP가 엄격하게 제한하는 스크립트 기반의 교차 출처 데이터 통신을 안전하게 허용하기 위한 표준 메커니즘입니다.\n2-1. CORS의 역할과 작동 방식 구분 CORS (Cross-Origin Resource Sharing) 목표 스크립트 기반의 교차 출처 데이터 읽기 허용 (SOP의 예외 부여). 대상 Fetch API, XMLHttpRequest 등을 사용한 동적 API 요청. 작동 주체 서버가 정책을 설정하고, 브라우저가 이를 검증 및 실행. 핵심 헤더 Access-Control-Allow-Origin: \u0026lt;허용 출처\u0026gt; 작동 흐름:\n브라우저: 교차 출처 요청 시 Origin 헤더에 자신의 출처 정보를 담아 서버에 보냅니다. (복잡한 요청의 경우 Preflight 요청을 먼저 보냅니다.) 서버: Origin 헤더를 확인하고, 허용 목록에 있으면 응답 헤더에 Access-Control-Allow-Origin을 포함하여 브라우저에 보냅니다. 브라우저: 응답 헤더를 검증합니다. 허용되지 않은 출처라면, 서버가 응답을 성공적으로 보냈더라도 브라우저가 스크립트가 해당 응답 데이터에 접근하는 것을 차단하고 콘솔에 CORS 에러를 띄웁니다. 📝 서버 측 필수 응답 헤더 (CORS) 서버는 상황에 따라 다음 헤더들을 적절히 조합하여 내려주어야 합니다.\n헤더 이름 설명 예시 Access-Control-Allow-Origin 접근을 허용할 출처(Origin)를 지정합니다. *은 인증이 필요 없는 경우에만 사용 가능합니다. https://example.com Access-Control-Allow-Methods 리소스 접근 시 허용할 HTTP 메서드 목록입니다. (Preflight 응답 시 사용) GET, POST, OPTIONS Access-Control-Allow-Headers 실제 요청에서 사용할 수 있는 커스텀 헤더 목록입니다. Content-Type, Authorization Access-Control-Allow-Credentials 쿠키(Cookie)나 인증 헤더를 포함한 요청을 허용할지 여부입니다. true일 때만 자격 증명 포함 요청이 성공합니다. true Access-Control-Expose-Headers 브라우저 스크립트에서 접근할 수 있는 응답 헤더 화이트리스트입니다. 기본적으로 6개 헤더 외에는 읽을 수 없습니다. X-My-Custom-Header Access-Control-Max-Age Preflight 요청의 결과를 캐시할 시간(초)입니다. 캐시된 시간 동안은 다시 Preflight를 보내지 않습니다. 3600 2-2. 상세 프로세스: 클라이언트와 서버의 대화 CORS는 마치 \u0026ldquo;입국 심사\u0026quot;와 유사한 과정을 거칩니다.\n1) Simple Request (단순 요청)\n안전한 메서드(GET, HEAD, POST)와 안전한 헤더(Accept, User-Agent 등)만 사용하는 경우입니다.\n[Browser] [Server] | | | --- GET /api/data -----------------------\u0026gt; | | (Origin: https://my-app.com) | | | | \u0026lt;---------------------- 200 OK ----------- | | (Access-Control-Allow-Origin: | | https://my-app.com) | | | V V [JS App] (성공!) 브라우저가 헤더 확인 후 데이터 전달 2) Preflight Request (예비 요청)\nPUT, DELETE 등 데이터를 변경할 수 있는 요청이나 커스텀 헤더(Authorization 등)를 사용할 때 발생합니다. 브라우저는 본 요청을 보내기 전에 \u0026ldquo;간 보기(Preflight)\u0026rdquo; 요청을 먼저 보냅니다.\n[Browser] [Server] | | | --- OPTIONS /api/update -----------------\u0026gt; | | (Origin: ..., Method: PUT) | | \u0026#34;나 좀 이따 PUT 보낼 건데 괜찮?\u0026#34; | | | | \u0026lt;----------------- 204 No Content -------- | | (Allow-Methods: PUT) | | \u0026#34;ㅇㅇ PUT 써도 됨\u0026#34; | | | | --- PUT /api/update ---------------------\u0026gt; | | | | \u0026lt;---------------------- 200 OK ----------- | 3. 새로운 방어막: CORP (Cross-Origin Resource Policy) CORP는 CORS와 달리, 스크립트 기반 요청뿐만 아니라 **HTML 태그를 통한 리소스 포함(Embedding)**까지 제어하여, 민감한 리소스가 다른 출처의 메모리에 로드되는 것 자체를 방지하는 강력한 보안 정책입니다.\n3-1. CORP의 역할 및 도입 배경 구분 CORP (Cross-Origin Resource Policy) 목표 리소스의 메모리 로드 자체를 차단하여 Spectre와 같은 사이드 채널 공격으로부터 정보를 보호. 대상 \u0026lt;script\u0026gt;, \u0026lt;img\u0026gt;, \u0026lt;link\u0026gt; 등 포함(Embedding) 가능한 모든 정적 리소스. 작동 주체 서버가 정책을 설정하고, 브라우저가 이를 검증 및 실행. 핵심 헤더 Cross-Origin-Resource-Policy: \u0026lt;정책\u0026gt; 📝 서버 측 필수 응답 헤더 (CORP) CORP는 단 하나의 헤더로 제어되지만, 정책의 의미가 매우 중요합니다.\n정책 값 (Value) 설명 사용 예시 same-origin 가장 강력한 제한. 동일한 출처(같은 Scheme, Host, Port)에서만 리소스를 로드할 수 있습니다. 뱅킹 데이터, 개인정보 JSON same-site 동일한 상위 도메인(Site) 내에서는 로드 허용. 서브도메인 간 공유가 필요할 때 사용합니다. login.naver.com ↔ mail.naver.com cross-origin 모든 출처 허용. CDN이나 공개 이미지처럼 어디서든 로드되어도 되는 리소스에 사용합니다. CDN 호스팅 이미지, 공개 JS 라이브러리 3-2. CORP vs. CORS: 명확한 차이 구분 CORP (Cross-Origin Resource Policy) CORS (Cross-Origin Resource Sharing) 제어 대상 리소스의 로드(Load) 및 포함(Embedding) 자체 스크립트의 응답 데이터 접근(Read) 보안 목적 메모리 기반의 정보 유출 방지 SOP의 제약을 해제하여 API 통신 허용 3-3. 상세 프로세스: 브라우저의 입국 심사 CORP는 서버가 브라우저에게 **\u0026ldquo;나를 아무데나 태우지 마!\u0026rdquo;**라고 신분증을 보여주는 것과 같습니다. 브라우저는 이 신분증을 보고 로드 여부를 결정합니다.\n[Attacker.com] [Browser] [Bank Server] | | | | -- \u0026lt;img src\u0026gt; ---\u0026gt; | | | | | | | --- GET /user_info.png --\u0026gt; | | | | | | \u0026lt;------- 200 OK ---------- | | | (CORP: same-origin) | | | | X | (차단!) | (로드 실패) [메모리 파기] \u0026#34;잠깐, 출처가 다른데 same-origin이네? 버렷!\u0026#34; Client (브라우저): 응답을 받았을 때, Cross-Origin-Resource-Policy 헤더를 확인합니다. 현재 페이지의 출처(Origin)와 리소스의 CORP 정책이 맞지 않으면, 응답 내용을 메모리에 올리지 않고 즉시 파기합니다. (렌더링 자체가 안 됨) Server: 리소스가 어디서 로드되어도 되는지(cross-origin), 같은 출처에서만 로드되어야 하는지(same-origin), 혹은 같은 사이트(same-site)인지 헤더로 명시합니다. 4. CDN 환경에서 발생하는 이슈 정리 CDN은 메인 웹사이트와 **다른 출처(Cross-Origin)**인 경우가 대부분이기 때문에, 이 두 정책에 모두 영향을 받습니다.\n리소스 위치 로드 방법 발생 가능한 충돌 해결책 CDN (정적 파일) \u0026lt;script\u0026gt;, \u0026lt;link\u0026gt;, \u0026lt;img\u0026gt; 태그 (Embedding) CORP 충돌 (same-origin 설정 시 로드 차단) CDN 응답 헤더에 Cross-Origin-Resource-Policy: cross-origin 설정. CDN (동적 데이터) Fetch/XHR 스크립트 (Data Reading) CORS 충돌 (스크립트의 응답 접근 차단) CDN/원본 서버 응답 헤더에 Access-Control-Allow-Origin: \u0026lt;사이트 출처\u0026gt; 설정. 💡 핵심: CDN과 same-origin의 역설\nCDN에 호스팅 된 리소스에 Cross-Origin-Resource-Policy: same-origin을 설정하면, 브라우저는 해당 리소스가 오직 CDN 도메인에서만 사용될 수 있다고 해석합니다.\n따라서 메인 웹사이트(다른 출처)에서 로드하려고 할 때, 이 same-origin 정책 때문에 로드가 차단되어 오히려 문제가 발생합니다. CDN 리소스는 Cross-Origin 로드를 허용하는 cross-origin으로 설정해야 정상적으로 작동합니다.\n5. 핵심 용어 정리 용어 정의 역할 출처 (Origin) 프로토콜, 호스트, 포트 3가지가 결합된 URL의 일부. 웹 보안의 기본 단위. SOP (Same-Origin Policy) 동일 출처에서 로드된 문서만 다른 출처의 리소스에 스크립트를 통해 접근하도록 허용하는 브라우저의 보안 정책 (기본적으로 교차 출처 스크립트 접근 차단). 기본적인 보안 경계를 설정. CORP (Cross-Origin Resource Policy) 서버 응답 헤더를 통해 리소스를 포함(embedding)하거나 읽을 수 있는 출처를 명시적으로 제한하는 정책. (주로 사이드 채널 공격 방어 목적). 리소스의 교차 출처 로드/사용 가능 여부를 제어. CORS (Cross-Origin Resource Sharing) SOP의 제약을 우회하여 스크립트 기반의 교차 출처 데이터 요청(XMLHttpRequest, Fetch API 등)을 안전하게 허용하기 위한 메커니즘. SOP의 예외를 만들어 교차 출처 통신을 가능하게 함. CDN (Content Delivery Network) 지리적으로 분산된 서버 네트워크를 통해 콘텐츠를 빠르게 제공하는 서비스. 웹사이트의 정적 파일을 교차 출처 환경에서 제공하게 만듦. ","permalink":"https://cdecl.github.io/dev/sop-cors-corp/","summary":"\u003cp\u003e현대 웹 환경에서는 Cross-Origin 리소스 접근을 관리하기 위한 복잡한 보안 메커니즘이 존재합니다. 그 중심에는 \u003cstrong\u003eSOP, CORS, CORP\u003c/strong\u003e 세 가지 정책이 있습니다.\u003c/p\u003e\n\u003cp\u003e특히 CDN(Content Delivery Network)을 사용하는 경우, 이 정책들을 정확히 이해하지 못하면 예측하지 못한 로드 오류(CORS/CORP 에러)에 직면하게 됩니다.\u003c/p\u003e\n\u003chr\u003e\n\u003ch2 id=\"1-웹-보안의-근간-출처origin와-sop\"\u003e1. 웹 보안의 근간: 출처(Origin)와 SOP\u003c/h2\u003e\n\u003cp\u003e웹 보안의 모든 논의는 **출처(Origin)**의 개념에서 시작됩니다.\u003c/p\u003e\n\u003ch3 id=\"1-1-출처origin의-정의\"\u003e1-1. 출처(Origin)의 정의\u003c/h3\u003e\n\u003cp\u003e두 URL이 동일한 출처가 되기 위해서는 다음 세 가지 요소가 모두 일치해야 합니다.\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003e\u003cstrong\u003e프로토콜 (Scheme)\u003c/strong\u003e: \u003ccode\u003ehttp\u003c/code\u003e 또는 \u003ccode\u003ehttps\u003c/code\u003e\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e호스트 (Host)\u003c/strong\u003e: 도메인 이름 (예: \u003ccode\u003eexample.com\u003c/code\u003e)\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e포트 (Port)\u003c/strong\u003e: 포트 번호 (생략 시 기본값 80 또는 443)\u003c/li\u003e\n\u003c/ol\u003e\n\u003ch3 id=\"1-2-동일-출처-정책-sop-same-origin-policy\"\u003e1-2. 동일 출처 정책 (SOP: Same-Origin Policy)\u003c/h3\u003e\n\u003cp\u003eSOP는 웹 브라우저의 가장 기본적인 보안 정책입니다.\u003c/p\u003e","title":"웹 개발 필수 개념: SOP, CORS, CORP의 관계 정리"},{"content":"멀티스레드 프로그래밍 환경에서 동시성 제어는 성능과 직결되는 매우 중요한 문제입니다. 이번 글에서는 전통적인 락 기반 동시성 제어의 한계를 극복하기 위해 등장한 락프리(Lock-Free) 알고리즘에 대해 알아보고, 그 개념과 구현 방법, 그리고 장단점을 살펴보겠습니다.\n락프리 알고리즘이란? **락프리(Lock-Free)**는 이름 그대로 \u0026ldquo;자물쇠(Lock) 없이\u0026rdquo; 여러 스레드가 동시에 데이터를 처리하는 기술입니다.\n쉽게 비유하자면 회전문과 같습니다.\n락(Lock): 한 번에 한 명만 들어갈 수 있는 화장실입니다. 누군가 안에 있으면 밖에서 열쇠를 받을 때까지 마냥 기다려야 합니다. 락프리(Lock-Free): 여러 사람이 동시에 지나갈 수 있는 회전문입니다. 가끔 문이 꽉 차서 한 바퀴 더 돌아야 할 수도 있지만, 멈추지 않고 계속 움직일 수 있습니다. 락프리는 시스템 전체가 멈추는 일(Deadlock) 없이, 누군가는 반드시 작업을 완료한다는 것을 보장합니다.\n락프리 알고리즘을 사용하지 않는 일반적인 방법 (Lock-Based) 락프리 기법을 사용하지 않는 경우, 우리는 데이터 경쟁(Data Race)을 막기 위해 상호 배제(Mutual Exclusion) 메커니즘을 사용합니다.\nMutex (뮤텍스): 공유 자원에 접근하기 전 락을 획득하고, 사용 후 반납합니다. Semaphore (세마포어): 정해진 수의 스레드만 자원에 접근하도록 제한합니다. 이 방식은 직관적이고 구현이 쉽지만 다음과 같은 문제점이 발생할 수 있습니다.\nDeadlock (교착 상태): 두 스레드가 서로의 자원을 기다리며 영원히 멈추는 현상. Priority Inversion (우선순위 역전): 낮은 우선순위의 스레드가 락을 잡고 있어 높은 우선순위의 스레드가 실행되지 못하는 현상. Convoying (컨보이 현상): 락을 쥐고 있는 스레드가 스케줄링에서 배제되면, 해당 락을 기다리는 모든 스레드가 대기하게 되어 성능이 저하되는 현상. 락프리 알고리즘 구현 내용: 컨셉 및 의사코드 락프리 알고리즘의 핵심은 원자적 연산(Atomic Operation), 특히 CAS (Compare-And-Swap) 연산입니다.\n핵심 컨셉: CAS (Compare-And-Swap) CAS는 **\u0026ldquo;이 자리가 비어있으면 제가 앉을게요, 아니면 다시 올게요\u0026rdquo;**라고 말하는 것과 같습니다.\n하드웨어 수준에서 단숨에(원자적으로) 처리되는 이 명령어는 다음과 같은 로직을 가집니다.\n확인: \u0026ldquo;지금 내 데이터가 A가 맞니?\u0026rdquo; 변경: \u0026ldquo;맞다면 B로 바꿔줘.\u0026rdquo; 실패: \u0026ldquo;아니라고? (누가 벌써 바꿨네) 그럼 다시 시도할게.\u0026rdquo; // 가상의 CAS 함수 설명 bool CAS(int* addr, int expected, int new_value) { // *하드웨어적인 배제(Exclusion) 발생* // CPU는 이 순간 메모리 버스를 잠그거나(Bus Lock), // 캐시 라인을 독점(Cache Lock/MESI 프로토콜)하여 // 다른 코어가 접근하지 못하게 막습니다. if (*addr == expected) { *addr = new_value; return true; } return false; } Q. compare_exchange도 내부적으로 락을 쓰나요?\n네, 맞습니다. 하지만 적용 범위와 매커니즘이 다릅니다.\n구분 CAS (Atomic Op) 스핀락 (Spinlock) 뮤텍스 (Mutex) 성격 하드웨어 락 (미시적) 소프트웨어 락 (거시적) OS 관리 락 (거시적) 잠금 대상 단일 메모리 주소 (변수 하나) 코드 영역 (Critical Section) 코드 영역 (Critical Section) 동작 방식 Bus Lock / Cache Lock CAS 루프 (Busy Waiting) Sleep / Wakeup (Context Switching) 비용 극도로 낮음 낮음 (경합 없을 시) ~ 높음 (경합 시) 높음 (시스템 콜 + 스케줄링) 즉, CAS는 **\u0026ldquo;데이터 갱신 그 자체\u0026rdquo;**를 위한 미시적인 배제이고, 스핀락/뮤텍스는 이를 이용해 **\u0026ldquo;코드 영역\u0026rdquo;**을 보호하는 거시적인 배제입니다.\n락프리 알고리즘은 보통 다음과 같은 패턴을 따릅니다.\n변경하려는 값을 읽어옵니다 (expected). 변경할 새로운 값을 계산합니다 (new_value). CAS를 시도합니다. 만약 실패했다면(다른 스레드가 먼저 값을 바꿨다면), 1번부터 다시 시도합니다. 구현 예시: 락프리 스택 (C++ 스타일) 복잡한 템플릿 대신, 간단한 정수형(int) 스택으로 예시를 들어보겠습니다.\n#include \u0026lt;atomic\u0026gt; struct Node { int data; Node* next; }; class LockFreeIntStack { std::atomic\u0026lt;Node*\u0026gt; head; // 스택의 맨 위(Top)를 가리키는 포인터 public: void push(int value) { Node* new_node = new Node{value, nullptr}; // 1. 새 노드의 next가 현재 head를 가리키도록 설정 new_node-\u0026gt;next = head.load(); // 2. CAS: head가 여전히 new_node-\u0026gt;next와 일치하면 new_node로 교체 // 실패 시: compare_exchange_weak가 new_node-\u0026gt;next를 최신 head 값으로 자동 갱신 -\u0026gt; 재시도 while (!head.compare_exchange_weak(new_node-\u0026gt;next, new_node)) { // (Empty Body: 실패 시 new_node-\u0026gt;next가 자동으로 갱신됨) } // [상황: 성공] // Head -\u0026gt; [내노드 30] -\u0026gt; [40] -\u0026gt; [20] -\u0026gt; ... } }; 구현 예시: 스핀락 (Spinlock) (C++ std::atomic 활용) 락프리 자료구조는 아니지만, 락프리 구현에 쓰이는 원자적 연산을 이해하기 좋은 예제로 스핀락이 있습니다. std::atomic\u0026lt;int\u0026gt;를 사용하여 락을 획득할 때까지 계속 루프를 도는(Spinning) 방식입니다.\nclass SpinLock { std::atomic\u0026lt;int\u0026gt; flag = {0}; // 0: Unlocked, 1: Locked public: void lock() { int expected = 0; // CAS: 0(Open)이면 1(Locked)로 변경 시도 // 실패 시 expected가 1로 바뀌므로, 0으로 다시 초기화 후 재시도 while (!flag.compare_exchange_weak(expected, 1)) { expected = 0; } } void unlock() { flag.store(0); // 락 반납 } }; 알고리즘별 비교: 락프리 vs 일반 락(Wait Lock) vs 스핀락(Spinlock) 락을 사용하는 방식도 대기 흐름에 따라 Wait Lock과 Spinlock으로 나뉩니다. 이들과 락프리를 한눈에 비교해 봅시다.\n구분 일반 락 (Wait Lock, Mutex) 스핀락 (Spinlock) 락프리 (Lock-Free) 대기 방식 Sleep (대기 상태로 전환, CPU 양보) Spin (루프 돌며 계속 확인, CPU 점유) Non-Blocking (계속 작업 시도, 실패 시 즉시 재시도) 컨텍스트 스위칭 락 대기 시 발생 (비용 큼) 발생하지 않음 (단, 타임슬라이스 소진 시 발생) 발생하지 않음 구현 난이도 쉬움 (OS/라이브러리 제공) 중간 (직접 구현 시 주의 필요) 매우 어려움 (ABA, 메모리 해제 등) CPU 사용량 대기 중에는 거의 없음 대기 중에도 계속 소모 (Busy Waiting) 경합 시 높음 (계속 CAS 시도) 적합한 상황 락 보유 시간이 길거나, 경합이 심할 때 락 보유 시간이 매우 짧고, 컨텍스트 스위칭 비용을 아끼고 싶을 때 매우 정밀한 성능이 필요하고, 데드락을 원천 차단하고 싶을 때 베스트 케이스와 최악의 상황 (Performance Analysis) 1. 일반 락 (Wait Lock / Mutex) Best Case: 경합이 없을 때. 뮤텍스 획득/해제가 빠르지만, 시스템 콜 오버헤드가 약간 있을 수 있습니다. Worst Case: 경합이 많을 때. 스레드가 계속 잠들었다 깨어나는(Context Switching) 비용이 급증하여 성능이 급격히 저하됩니다. 또한 Deadlock 발생 위험이 있습니다. 2. 스핀락 (Spinlock) Best Case: 잠깐 기다려서 바로 락을 얻을 때. 컨텍스트 스위칭 없이 즉시 자원을 쓰므로 대기 비용이 사실상 0에 가깝습니다. Worst Case: 락 소유자가 오랫동안 락을 놓지 않을 때. 기다리는 스레드는 의미 없이 무한 루프를 돌며 **CPU 100%**를 소모합니다. (전기세 낭비의 주범) 3. 락프리 (Lock-Free) Best Case: 경합이 적을 때. CAS 연산 한 번으로 끝나며, 어떤 락 매커니즘보다 빠릅니다. Worst Case: 경합이 극심할 때. 수많은 스레드가 동시에 CAS를 시도하고 실패하기를 반복합니다. 스핀락과 비슷하게 CPU를 많이 쓰지만, 적어도 시스템 전체가 멈추지 않고(Deadlock Free) 누군가는 계속 진행한다는 점에서 스핀락보다는 낫습니다. 락프리 알고리즘은 고성능 시스템에 필수적일 수 있지만, 그 복잡도로 인해 신중하게 도입해야 합니다. 무조건적인 락프리 전환보다는 프로파일링을 통해 병목 구간을 확인하고 적용하는 것이 바람직합니다.\n","permalink":"https://cdecl.github.io/dev/lock-free-algorithm/","summary":"\u003cp\u003e멀티스레드 프로그래밍 환경에서 동시성 제어는 성능과 직결되는 매우 중요한 문제입니다. 이번 글에서는 전통적인 락 기반 동시성 제어의 한계를 극복하기 위해 등장한 \u003cstrong\u003e락프리(Lock-Free) 알고리즘\u003c/strong\u003e에 대해 알아보고, 그 개념과 구현 방법, 그리고 장단점을 살펴보겠습니다.\u003c/p\u003e\n\u003ch2 id=\"락프리-알고리즘이란\"\u003e락프리 알고리즘이란?\u003c/h2\u003e\n\u003cp\u003e**락프리(Lock-Free)**는 이름 그대로 \u003cstrong\u003e\u0026ldquo;자물쇠(Lock) 없이\u0026rdquo;\u003c/strong\u003e 여러 스레드가 동시에 데이터를 처리하는 기술입니다.\u003c/p\u003e\n\u003cp\u003e쉽게 비유하자면 \u003cstrong\u003e회전문\u003c/strong\u003e과 같습니다.\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003e락(Lock)\u003c/strong\u003e: 한 번에 한 명만 들어갈 수 있는 화장실입니다. 누군가 안에 있으면 밖에서 열쇠를 받을 때까지 마냥 기다려야 합니다.\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e락프리(Lock-Free)\u003c/strong\u003e: 여러 사람이 동시에 지나갈 수 있는 회전문입니다. 가끔 문이 꽉 차서 한 바퀴 더 돌아야 할 수도 있지만, 멈추지 않고 계속 움직일 수 있습니다.\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e락프리는 시스템 전체가 멈추는 일(Deadlock) 없이, 누군가는 반드시 작업을 완료한다는 것을 보장합니다.\u003c/p\u003e","title":"락프리(Lock-Free) 알고리즘 이해하기"},{"content":"rustfs 소개 rustfs는 Rust로 구축된 고성능 S3 호환 분산 객체 스토리지 시스템입니다. 성능, 메모리 안전성 및 보다 관대한 라이선스에 중점을 두어 MinIO와 같은 다른 객체 스토리지 솔루션에 대한 현대적인 대안으로 자리매김하고 있습니다.\n웹사이트: https://rustfs.com/{:target=\u0026quot;_blank\u0026quot;} 핵심 기술: Rust로 구축되어 메모리 안전성과 고성능 보장. 라이선스: MinIO의 AGPLv3에 비해 비즈니스 친화적인 Apache 2.0. 호환성: 100% S3 호환. rustfs 시작하기 rustfs는 Docker를 사용하여 빠르고 쉽게 시작할 수 있습니다.\nDocker로 설치 Docker 이미지 다운로드\ndocker pull rustfs/rustfs Docker 컨테이너 실행\n로컬에 데이터를 저장할 디렉토리(예: /mnt/rustfs/data)를 생성한 후, 아래 명령어를 실행합니다.\ndocker run -d \\ --name rustfs_local \\ -p 9000:9000 \\ -p 9001:9001 \\ -v /mnt/rustfs/data:/data \\ rustfs/rustfs:latest \\ /data -p 9000:9000: S3 API 포트 -p 9001:9001: 웹 콘솔 포트 -v /mnt/rustfs/data:/data: 로컬 데이터 저장 경로 마운트 웹 콘솔 접속 컨테이너가 실행되면 웹 브라우저에서 http://localhost:9001 주소로 접속할 수 있습니다. 기본 사용자 이름과 비밀번호는 모두 rustfsadmin 입니다. 사용법 rustfs는 S3와 100% 호환되므로, 웹 콘솔 외에도 mc (MinIO Client)나 S3 SDK 등 모든 S3 호환 도구를 사용하여 상호작용할 수 있습니다. 버킷 생성, 객체 업로드/다운로드 등의 작업을 편리하게 수행할 수 있습니다.\nrustfs vs. MinIO 주요 영역에서 rustfs와 MinIO를 비교한 내용은 다음과 같습니다.\n핵심 기술 및 라이선스 기능 rustfs MinIO 언어 Rust Go 라이선스 Apache 2.0 AGPLv3 rustfs에 Rust를 선택하면 메모리 안전성 및 성능 측면에서 이점을 제공하며, MinIO와 같은 Go 기반 애플리케이션에 나타날 수 있는 가비지 컬렉션 일시 중지(garbage collection pauses)와 같은 문제를 피할 수 있습니다. Apache 2.0 라이선스는 AGPLv3의 카피레프트(copyleft) 특성에 대해 우려하는 기업에게 rustfs를 더욱 매력적인 옵션으로 만드는 중요한 차별점입니다.\n성능 작은 객체: rustfs는 작은 (4KB) 객체에 대해 MinIO보다 최대 2.3배 더 나은 성능을 제공한다고 주장합니다. 이는 IoT, 로그 및 썸네일과 같이 작은 파일이 많은 워크로드에 이상적입니다. 큰 객체: MinIO는 큰 순차 읽기에서 뛰어난 성능을 발휘하는 것으로 알려져 있습니다. 전반: 두 시스템 모두 고성능을 제공하지만, 더 나은 선택은 특정 워크로드에 따라 달라집니다. rustfs의 \u0026ldquo;메타데이터 코디네이터 없음(no metadata coordinator)\u0026rdquo; 및 \u0026ldquo;가비지 컬렉터 없음(no garbage collector)\u0026rdquo; 설계는 지연 시간 급증을 줄이는 것을 목표로 합니다. 아키텍처 및 확장성 rustfs와 MinIO는 모두 분산형, 확장 가능한 객체 스토리지 시스템으로 설계되었습니다.\n분산 아키텍처: 둘 다 여러 머신의 여러 드라이브를 단일 스토리지 서버로 통합할 수 있습니다. 데이터 보호: 둘 다 데이터 보호 및 내구성을 위해 이레이저 코딩(erasure coding)을 사용합니다. 확장성: 둘 다 페타바이트 이상으로 수평 확장이 가능하도록 설계되었습니다. rustfs는 노드 로드를 자동으로 균형 있게 조절하고 데이터가 고르게 분산되도록 보장하는 기능을 강조합니다. 기능 두 시스템 모두 풍부한 엔터프라이즈급 기능을 제공합니다.\nS3 호환성: S3 API와 완벽하게 호환됩니다. 보안: rustfs: 고성능 암호화를 위해 RustyVault와 통합됩니다. 또한 규정 준수를 위해 WORM(Write Once Read Many)을 지원합니다. MinIO: 내장 암호화를 제공하며 IAM/LDAP을 지원합니다. 복제: rustfs: 액티브-액티브(active-active) 교차 지역 복제를 지원합니다. MinIO: 또한 다양한 복제 전략을 지원합니다. 사용 사례 둘 다 다음과 같은 용도에 적합합니다.\nAI/ML 및 빅데이터 워크로드 클라우드 네이티브 애플리케이션 및 Kubernetes 백업 및 아카이브 프라이빗 및 하이브리드 클라우드 스토리지 결론 rustfs는 MinIO에 대한 매력적인 대안을 제시하며, 특히 다음을 우선시하는 조직에 적합합니다.\n관대한 오픈 소스 라이선스 (Apache 2.0). 작은 객체 스토리지에 대한 고성능. Rust의 메모리 안전성 및 성능 이점. MinIO가 성숙하고 널리 채택된 솔루션인 반면, rustfs는 라이선스 문제를 중심으로 MinIO에 대한 몇 가지 일반적인 우려를 해결하는 유망한 신규 솔루션입니다. 둘 중 어떤 것을 선택할지는 특정 요구 사항, 워크로드 특성 및 라이선스 선호도에 따라 달라질 것입니다.\n","permalink":"https://cdecl.github.io/devops/rustfs-101/","summary":"\u003ch2 id=\"rustfs-소개\"\u003erustfs 소개\u003c/h2\u003e\n\u003cp\u003erustfs는 Rust로 구축된 고성능 S3 호환 분산 객체 스토리지 시스템입니다. 성능, 메모리 안전성 및 보다 관대한 라이선스에 중점을 두어 MinIO와 같은 다른 객체 스토리지 솔루션에 대한 현대적인 대안으로 자리매김하고 있습니다.\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003e웹사이트\u003c/strong\u003e: \u003ca href=\"https://rustfs.com/\"\u003ehttps://rustfs.com/\u003c/a\u003e{:target=\u0026quot;_blank\u0026quot;}\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e핵심 기술\u003c/strong\u003e: Rust로 구축되어 메모리 안전성과 고성능 보장.\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e라이선스\u003c/strong\u003e: MinIO의 AGPLv3에 비해 비즈니스 친화적인 Apache 2.0.\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e호환성\u003c/strong\u003e: 100% S3 호환.\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"rustfs-시작하기\"\u003erustfs 시작하기\u003c/h2\u003e\n\u003cp\u003erustfs는 Docker를 사용하여 빠르고 쉽게 시작할 수 있습니다.\u003c/p\u003e\n\u003ch3 id=\"docker로-설치\"\u003eDocker로 설치\u003c/h3\u003e\n\u003col\u003e\n\u003cli\u003e\n\u003cp\u003e\u003cstrong\u003eDocker 이미지 다운로드\u003c/strong\u003e\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003edocker pull rustfs/rustfs\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e\u003cstrong\u003eDocker 컨테이너 실행\u003c/strong\u003e\u003c/p\u003e","title":"rustfs 101"},{"content":"가상 사설망(VPN)은 인터넷과 같은 공용 네트워크를 통해 사설 네트워크를 안전하게 확장하는 기술입니다. VPN은 데이터를 암호화하여 터널링함으로써 사용자의 개인 정보와 데이터를 보호하고, 지역 제한 콘텐츠에 접근하거나 원격지에서 사내망에 접속하는 등 다양한 용도로 활용됩니다.\nVPN을 구현하는 방법에는 여러 가지가 있으며, 각각의 프로토콜과 소프트웨어는 고유한 특징과 장단점을 가지고 있습니다. 이번 포스트에서는 대표적인 VPN 구현체인 OpenVPN과 최신 기술로 주목받는 WireGuard를 중심으로 VPN 구현체의 종류와 특징을 비교 분석해 보겠습니다.\n주요 VPN 프로토콜의 종류와 특징 VPN의 핵심은 터널링과 암호화 프로토콜이며, 이는 VPN의 속도, 보안, 안정성을 결정하는 가장 중요한 요소입니다. 다양한 VPN 프로토콜이 있으며, 각각은 고유한 장단점을 가집니다.\nWireGuard\n특징: 매우 간결한 코드(약 4,000 라인)를 기반으로 한 최신 프로토콜입니다. 장점: 속도가 가장 빠르고, CPU 사용량이 적어 모바일 기기나 저사양 하드웨어에 최적화되어 있습니다. SSH와 유사한 공개키 암호화 방식으로 설정이 간편합니다. 단점: UDP 기반으로만 동작하며, 역사가 짧아 OpenVPN만큼 다양한 환경에서 검증되지는 않았습니다. OpenVPN\n특징: SSL/TLS를 기반으로 하는 오픈소스 프로토콜로, VPN 시장의 표준으로 여겨집니다. 장점: UDP와 TCP 프로토콜을 모두 지원하여 유연성이 높고, 다양한 암호화 알고리즘을 선택할 수 있습니다. 방화벽 우회 능력이 뛰어나고 엔터프라이즈급 기능이 풍부합니다. 단점: 코드베이스가 방대하여 WireGuard보다 속도가 느리고, 설정이 상대적으로 복잡합니다. **IKEv2/IPSec (Internet Key Exchange v2 / Internet Pro\n특징: Microsoft와 Cisco가 공동 개발한 프로토콜로, 강력한 보안 표준인 IPSec 제품군에 속합니다. 장점: 네트워크 전환 시(예: Wi-Fi에서 셀룰러로) 재연결이 매우 안정적입니다. 속도가 우수하여 모바일 사용자에게 인기가 많습니다. 기업 환경의 표준으로 널리 채택됩니다. 단점: 특정 방화벽에서 차단될 수 있으며, OpenVPN만큼 다양한 플랫폼을 지원하지는 않을 수 있습니다. **L2TP/IPSec (Layer 2 Tunneling Pro\n특징: L2TP 터널링 프로토콜과 IPSec 암호화를 결합한 형태입니다. 장점: 거의 모든 운영체제에 내장되어 있어 설정이 비교적 쉽습니다. 단점: 데이터를 두 번 캡슐화하여 속도가 느리고 데이터 오버헤드가 큽니다. NAT 방화벽을 통과하기 어려울 수 있습니다. SoftEther (Software an Ethernet)\n특징: 일본 쓰쿠바 대학에서 개발한 오픈소스 다중 프로토콜 VPN 소프트웨어입니다. 장점: OpenVPN, L2TP/IPSec, SSTP 등 여러 VPN 프로토콜을 지원하여 호환성이 뛰어납니다. 강력한 방화벽 우회 기능으로 인터넷 검열을 피하는 데 효과적입니다. 단점: 다른 프로토콜에 비해 인지도가 낮아 관련 정보를 얻기 어려울 수 있습니다. **SSTP (Secure Socket Tunneling Pro\n특징: Microsoft가 개발한 오래된 프로토콜입니다. 단점: SSTP는 Windows 플랫폼에 종속적이며, PPTP는 심각한 보안 취약점이 발견되어 더 이상 사용이 권장되지 않습니다. 최신 VPN 솔루션에서는 거의 사용되지 않습니다. 이처럼 다양한 프로토콜이 존재하지만, 현재 개인 및 대부분의 기업 환경에서는 WireGuard의 속도와 간편함, OpenVPN의 안정성과 호환성, IKEv2/IPSec의 모바일 안정성이 가장 주목받고 있습니다.\nOpenVPN vs WireGuard: 상세 비교 OpenVPN과 WireGuard는 현재 VPN 시장에서 가장 주목받는 두 기술입니다. 둘의 차이점을 자세히 살펴보겠습니다.\n특징 OpenVPN WireGuard 프로토콜 SSL/TLS 기반 커스텀 프로토콜 자체 프로토콜 (UDP 기반) 코드베이스 약 40만 라인 이상의 방대한 코드 약 4,000 라인의 매우 간결한 코드 암호화 AES, Camellia, ChaCha20 등 다양한 암호화 알고리즘 선택 가능 ChaCha20 암호화, Poly1305 인증, Curve25519 키 교환 등 최신 암호화 기술 고정 사용 성능 안정적이지만, 상대적으로 느린 속도 매우 빠르고 높은 처리량(Throughput) 제공. 커널 수준에서 동작하여 효율적. 보안 오랜 기간 검증된 안정성. 다양한 암호화 옵션 제공. 간결한 코드로 감사(Audit)가 용이하여 보안 취약점 발견이 쉬움. 최신 암호화 기술 사용. 설정 설정이 다소 복잡하고, 인증서 기반의 키 관리가 필요함. SSH와 유사한 공개키/비공개키 기반으로 설정이 매우 간단함. 플랫폼 호환성 거의 모든 운영체제 지원 (Windows, macOS, Linux, iOS, Android 등) 주요 운영체제 지원. Linux 커널 5.6부터 기본 내장됨. 네트워크 이동성 네트워크 변경 시(예: Wi-Fi -\u0026gt; LTE) 연결이 끊길 수 있음. 네트워크 변경에도 연결을 원활하게 유지하는 로밍(Roaming) 기능이 뛰어남. OpenVPN: 신뢰성과 유연성의 상징 2001년에 출시된 OpenVPN은 오랜 시간 동안 VPN 시장의 표준으로 자리매김했습니다.\n장점:\n높은 신뢰성과 안정성: 20년 이상 사용되며 수많은 환경에서 검증되었습니다. 강력한 보안 및 유연성: AES-256과 같은 강력한 암호화 표준을 지원하며, 사용자가 직접 암호화 알고리즘을 선택할 수 있습니다. 방화벽 우회: TCP 443 포트를 사용할 수 있어 엄격한 네트워크 환경에서도 VPN 연결이 가능합니다. 단점:\n상대적으로 느린 속도: 복잡한 구조와 많은 코드로 인해 WireGuard에 비해 성능이 떨어집니다. 복잡한 설정: 초보자가 설정하기에는 다소 복잡하며, 인증서 관리가 번거로울 수 있습니다. WireGuard: 속도와 단순함의 혁신 2016년에 처음 등장한 WireGuard는 \u0026ldquo;차세대 VPN\u0026quot;으로 불리며 빠르게 인기를 얻고 있습니다.\n장점:\n압도적인 성능: 커널 수준에서 동작하고, 경량 프로토콜을 사용하여 CPU 사용량이 적고 매우 빠른 속도를 자랑합니다. 간결하고 현대적인 보안: 코드 라인 수가 매우 적어 보안 감사가 용이하며, ChaCha20과 같은 최신 암호화 기술을 사용하여 보안성이 뛰어납니다. 단순한 설정: SSH처럼 공개키를 교환하는 방식으로 설정이 매우 직관적이고 간단합니다. 뛰어난 이동성: 모바일 환경과 같이 네트워크가 자주 변경되는 상황에서도 연결을 안정적으로 유지합니다. 단점:\nUDP만 지원: TCP를 지원하지 않아 특정 네트워크 환경에서는 연결이 불안정할 수 있습니다. 동적 IP 할당 부재: 기본적으로 동적 IP를 할당하는 기능이 없어 별도의 스크립트나 관리 도구가 필요할 수 있습니다. (다만, 많은 상용 서비스들이 이 문제를 해결하여 제공합니다.) 상대적으로 짧은 역사: OpenVPN에 비해 검증 기간이 짧습니다. 서비스형 VPN 비교 (소규모 무료제공): Tailscale vs. Cloudflare Zero Trust 최근에는 직접 VPN 서버를 구축하는 대신, WireGuard와 같은 최신 기술을 기반으로 한 편리한 서비스형 VPN(VPN as a Service)이 인기를 끌고 있습니다. 그중 대표적인 두 서비스가 Tailscale과 Cloudflare Zero Trust입니다.\n특징 Tailscale Cloudflare Zero Trust (WARP) 기반 기술 WireGuard WireGuard (BoringTun 구현) 네트워크 모델 P2P 메시 네트워크 (Peer-to-Peer Mesh) 프록시 기반 네트워크 (Proxy-based) 주요 목적 기기 간의 간편하고 안전한 직접 연결 포괄적인 제로 트러스트 보안 및 기업용 접근 제어 편의성 설치 및 설정이 매우 간단, 직관적인 UI 초기 설정이 다소 복잡, 강력한 관리 기능 제공 가격 (무료 플랜) 개인 사용자 1명, 기기 100대까지 무료 최대 50명의 사용자까지 무료 장점 P2P 방식으로 지연 시간이 낮음, 쉬운 사용법 Cloudflare의 글로벌 네트워크 활용, 강력한 보안 정책 단점 기업용 기능은 상대적으로 부족 모든 트래픽이 Cloudflare를 경유, P2P보다 느릴 수 있음 Tailscale: 가장 쉬운 P2P VPN Tailscale은 WireGuard를 기반으로 복잡한 네트워크 설정 없이도 P2P(Peer-to-Peer) 메시 네트워크를 구성해주는 서비스입니다.\n편의성: 각 기기에 Tailscale 클라이언트를 설치하고 Google, Microsoft, GitHub 등 기존 계정으로 로그인하기만 하면, 별도의 방화벽 설정이나 IP 주소 관리 없이도 모든 기기가 같은 사설망에 연결된 것처럼 통신할 수 있습니다. \u0026ldquo;그냥 작동한다(It just works)\u0026ldquo;는 철학을 완벽하게 구현했습니다. 가격: 개인 사용자는 100개의 기기까지 무료로 사용할 수 있어 매우 관대합니다. 소규모 팀이나 가족 네트워크를 구성하는 데 최고의 선택입니다. 작동 방식: 중앙 조정 서버(Coordination Server)가 기기들의 공개키와 접근 정책을 관리하지만, 실제 데이터 트래픽은 암호화되어 기기 간에 직접 전송됩니다(P2P). 이 덕분에 지연 시간이 매우 짧습니다. Cloudflare Zero Trust: 포괄적인 기업용 보안 플랫폼 Cloudflare Zero Trust는 단순한 VPN을 넘어, 기업의 모든 IT 리소스에 대한 접근을 보호하는 SASE(Secure Access Service Edge) 플랫폼입니다. 그 일부로 WARP 클라이언트라는 VPN 기능을 제공합니다.\n편의성: WARP 클라이언트 자체는 설치가 간단하지만, 제로 트러스트의 모든 기능을 활용하려면 대시보드에서 접근 정책, 터널, 보안 규칙 등을 설정해야 하므로 Tailscale보다 초기 학습 곡선이 가파릅니다. 가격: 최대 50명의 사용자까지 무료로 제공하여 소규모 팀이나 기업에게 매우 매력적인 옵션입니다. 무료 플랜에서도 강력한 보안 기능을 대부분 사용할 수 있습니다. 작동 방식: 모든 트래픽은 Cloudflare의 전 세계에 분산된 엣지 네트워크를 경유합니다. 이 구조를 통해 트래픽 필터링, DNS 기반 보안, 접속 로깅 등 중앙화된 보안 정책을 모든 기기에 일관되게 적용할 수 있습니다. P2P 방식보다는 지연 시간이 발생할 수 있지만, 강력한 보안과 관리 기능을 제공합니다. 결론: 어떤 서비스를 선택해야 할까? 개인 개발자, 소규모 팀, 홈 네트워크에서 여러 기기를 쉽고 빠르게 연결하고 싶다면 Tailscale이 가장 편리하고 효과적인 선택입니다. 보안 정책, 접근 제어, 로깅 등 중앙화된 관리가 중요하고, VPN을 넘어 포괄적인 제로 트러스트 보안 환경을 구축하려는 기업에게는 Cloudflare Zero Trust가 더 적합합니다. 두 서비스 모두 WireGuard라는 훌륭한 기술을 기반으로 하면서도, 각기 다른 철학과 구조를 통해 VPN의 미래를 보여주고 있습니다.\n","permalink":"https://cdecl.github.io/devops/vpn-implementations-comparison/","summary":"\u003cp\u003e가상 사설망(VPN)은 인터넷과 같은 공용 네트워크를 통해 사설 네트워크를 안전하게 확장하는 기술입니다. VPN은 데이터를 암호화하여 터널링함으로써 사용자의 개인 정보와 데이터를 보호하고, 지역 제한 콘텐츠에 접근하거나 원격지에서 사내망에 접속하는 등 다양한 용도로 활용됩니다.\u003c/p\u003e\n\u003cp\u003eVPN을 구현하는 방법에는 여러 가지가 있으며, 각각의 프로토콜과 소프트웨어는 고유한 특징과 장단점을 가지고 있습니다. 이번 포스트에서는 대표적인 VPN 구현체인 \u003cstrong\u003eOpenVPN\u003c/strong\u003e과 최신 기술로 주목받는 \u003cstrong\u003eWireGuard\u003c/strong\u003e를 중심으로 VPN 구현체의 종류와 특징을 비교 분석해 보겠습니다.\u003c/p\u003e\n\u003ch2 id=\"주요-vpn-프로토콜의-종류와-특징\"\u003e주요 VPN 프로토콜의 종류와 특징\u003c/h2\u003e\n\u003cp\u003eVPN의 핵심은 터널링과 암호화 프로토콜이며, 이는 VPN의 속도, 보안, 안정성을 결정하는 가장 중요한 요소입니다. 다양한 VPN 프로토콜이 있으며, 각각은 고유한 장단점을 가집니다.\u003c/p\u003e","title":"VPN 구현체의 종류 및 특징 비교: OpenVPN vs Wireguard"},{"content":"리눅스 환경에서 대량의 데이터나 파일을 처리하다 보면, 단일 코어만 사용하는 쉘 스크립트의 성능 한계에 부딪히게 됩니다. xargs를 통해 어느 정도 병렬 처리가 가능하지만, 더 복잡하고 강력한 기능을 제공하는 도구가 바로 GNU Parallel입니다.\n🚀 parallel 개요 GNU Parallel은 로컬 또는 원격 컴퓨터에서 작업을 병렬로 실행하기 위한 쉘 도구입니다. 덴마크의 Ole Tange가 Perl로 개발했으며, 표준 입력(stdin)이나 파일로부터 인자를 받아 명령어를 병렬로 실행합니다.\n가장 큰 특징은 xargs나 find -exec와 같은 기존 도구들의 사용성을 유지하면서도, 출력 제어, 작업 슬롯 관리, 원격 실행 등 고급 기능을 제공한다는 점입니다.\n⚙️ 주요 기능 및 내부 구현 1. 출력 그룹화 (Output Grouping) 병렬 처리 시 가장 큰 골칫거리 중 하나는 여러 프로세스의 출력이 뒤섞이는 것입니다.\nxargs -P를 사용하면 여러 줄의 출력이 섞여서 알아보기 힘든 경우가 많습니다. Parallel은 각 작업의 출력을 임시 파일이나 메모리에 버퍼링했다가, 작업이 완료되는 순간 한꺼번에 출력합니다. 따라서 출력이 섞이지 않고 깔끔하게 보장됩니다. 2. 지능적인 작업 슬롯 관리 parallel은 기본적으로 시스템의 CPU 코어 수를 감지하여 최적의 병렬 작업 수(Job slot)를 결정합니다. --load 옵션을 통해 시스템 부하(Load Average)에 따라 새로운 작업을 시작할지 대기할지 동적으로 결정할 수도 있습니다. 3. 강력한 인자 치환 (Replacement Strings) xargs보다 훨씬 유연한 인자 치환 기능을 제공합니다.\n{}: 전체 인자 (기본값) {.}: 확장자를 제외한 파일명 (file.txt -\u0026gt; file) {/}: 경로를 제외한 파일명 (Basename, dir/file.txt -\u0026gt; file.txt) {//}: 파일명을 제외한 경로 (Dirname, dir/file.txt -\u0026gt; dir) {/.}: 경로와 확장자를 모두 제외한 순수 파일명 (dir/file.txt -\u0026gt; file) {#}: 작업의 시퀀스 번호 (1부터 시작) {%}: 작업 슬롯 번호 (1 ~ 병렬 작업 수) {n}: n번째 입력 소스의 인자 (예: {1}, {2} - ::: 또는 :::: 사용 시) 4. Perl 기반 구현 GNU Parallel은 단일 Perl 스크립트로 구현되어 있습니다. 이는 별도의 컴파일 과정 없이 Perl이 설치된 대부분의 유닉스/리눅스 시스템에서 즉시 사용할 수 있음을 의미합니다.\n🎛️ 주요 옵션 (Major Options) parallel은 매우 방대한 옵션을 제공하지만, 자주 사용되는 핵심 옵션들은 다음과 같습니다.\n--jobs N / -j N: 동시에 실행할 작업(Job)의 개수를 지정합니다. (기본값: CPU 코어 수) +N: 코어 수 + N개 -N: 코어 수 - N개 50%: 코어 수의 50% --load N / -l N: 시스템 부하(Load Average)가 N 이상이면 새 작업을 시작하지 않고 대기합니다. --delay N: 각 작업 시작 사이에 N초의 지연 시간을 둡니다. (API 호출 제한 등에 유용) --timeout N: 작업이 N초 이상 걸리면 강제로 종료합니다. --joblog FILE: 작업 실행 기록(Exit code, 실행 시간 등)을 파일에 저장합니다. --resume: --joblog를 사용하여 중단된 작업 지점부터 다시 시작합니다. --bar: 진행 상황을 프로그레스 바 형태로 보여줍니다. --dry-run: 명령어를 실제로 실행하지 않고, 실행될 명령어 구문을 출력합니다. --keep-order / -k: 작업 완료 순서와 상관없이, 입력 순서대로 출력을 정렬합니다. --pipe: 표준 입력을 덩어리(Block)로 나누어 여러 작업으로 분산 처리합니다. (대용량 파일 처리에 필수) --block N: --pipe 사용 시 나눌 블록의 크기를 지정합니다. (예: 10M, 1G) --tag: 각 출력 라인의 앞에 인자를 태그로 붙여서 어떤 작업의 결과인지 식별하게 해줍니다. --colsep regexp: 입력 라인을 정규표현식 구분자로 나누어 {1}, {2}, \u0026hellip; 로 사용할 수 있게 합니다. (예: --colsep ',' - CSV 처리) 🆚 xargs와의 비교 특징 GNU Parallel xargs (-P 옵션) 출력 순서 작업 단위로 그룹화되어 섞이지 않음 라인 단위로 섞일 수 있음 (Interleaved) 사용 편의성 직관적이고 다양한 치환 문자 제공 ({.}, {/} 등) 비교적 제한적 (-I {} 등) 원격 실행 SSH를 통한 손쉬운 분산 처리 지원 (-S) 기본 지원 없음 (별도 구현 필요) 입력 처리 빈 칸, 따옴표 등 특수 문자 처리가 강력함 특수 문자 처리가 까다로울 수 있음 (-0 필요) 성능 Perl 오버헤드가 약간 있음 (작업당 수 ms) C로 구현되어 매우 가벼움 Note: 수백만 개의 아주 짧은 작업(ms 단위)을 실행할 때는 xargs가 더 빠를 수 있지만, 대부분의 실무 작업(초 단위 이상)에서는 parallel의 오버헤드는 무시할 만하며 편의성이 압도적입니다.\n💻 샘플 명령어 10선 1. 기본 사용법: 파일 압축하기 (Basic) 현재 디렉토리의 모든 *.log 파일을 gzip으로 병렬 압축합니다.\nls *.log | parallel gzip 기본 동작: 파이프(|)로 전달된 표준 입력의 각 라인을 인자로 받아 gzip 명령어를 병렬 실행합니다. 별도 옵션이 없으면 CPU 코어 수만큼의 작업이 동시에 실행됩니다. 2. 인자 치환 활용: 이미지 변환 (Image Processing) images 폴더의 모든 .jpg 파일을 .png로 변환하여 converted 폴더에 저장합니다.\nls images/*.jpg | parallel convert {} converted/{/.}.png {}: 입력 파일 전체 경로 (images/photo.jpg) {/.}: 경로와 확장자를 제외한 파일명 (photo) 3. 여러 인자 조합하기 (Cartesian Product) 여러 리스트의 모든 조합을 실행할 때 매우 유용합니다. :::, :::: 구분자를 사용합니다.\nparallel echo \u0026#34;Color: {1}, Size: {2}\u0026#34; ::: Red Blue Green ::: S M L ::: : 커맨드 라인 인자로 리스트를 전달할 때 사용합니다. {1}, {2}: 첫 번째, 두 번째 리스트의 인자를 각각 참조합니다. 파일로부터 인자를 읽어올 때는 ::::를 사용합니다.\n# userlist.txt와 hostlist.txt의 모든 조합 실행 parallel echo \u0026#34;User: {1}, Host: {2}\u0026#34; :::: userlist.txt :::: hostlist.txt :::: : 파일의 내용을 인자 리스트로 사용할 때 사용합니다. 각 파일의 라인들이 조합됩니다. 4. 원격 서버 분산 처리 (Remote Execution) 로컬의 파일을 여러 서버로 전송하지 않고, 명령어만 분산 실행합니다. (SSH 설정 필요)\n# server1, server2에서 hostname 실행 parallel --nonall -S server1,server2 hostname --nonall: 인자를 전달하지 않고, 모든 서버에서 명령어를 한 번씩만 실행합니다. -S server1,server2: 작업을 실행할 원격 서버 목록을 지정합니다. (콤마로 구분) 5. 대량 파일 다운로드 (Multiple URL Download) urls.txt에 있는 수많은 URL을 4개의 작업으로 병렬 다운로드합니다.\ncat urls.txt | parallel -j 4 wget {} -j 4: 동시에 실행할 작업 수를 4개로 고정합니다. (서버 부하 조절 시 유용) 6. 대규모 문자열 검색 (Large Scale Grep) 수만 개의 파일에서 특정 문자열을 검색할 때 grep 하나로는 느릴 수 있습니다.\nfind . -name \u0026#34;*.txt\u0026#34; | parallel grep \u0026#34;pattern\u0026#34; {} find와 조합하여 재귀적으로 파일을 찾고, grep을 병렬로 수행하여 검색 속도를 높입니다. 7. 동영상 변환 (Video Transcoding) ffmpeg를 사용하여 여러 동영상 파일을 동시에 변환합니다. CPU를 많이 쓰는 작업에 효과적입니다.\nls *.mp4 | parallel ffmpeg -i {} -c:v libx264 output/{.}.mkv {.}: 입력 파일명에서 확장자를 제거합니다. (video.mp4 -\u0026gt; video) CPU 집약적인 작업에서 parallel의 진가가 발휘됩니다. 8. 데이터베이스 쿼리 병렬 실행 (Database Processing) 여러 테이블이나 데이터베이스에 대해 SQL 쿼리를 병렬로 수행합니다.\ncat tables.txt | parallel \u0026#34;mysql -e \u0026#39;CHECK TABLE {};\u0026#39;\u0026#34; 명령어 전체를 따옴표(\u0026quot;)로 감싸서 복잡한 구문을 하나의 명령어로 전달합니다. {}가 SQL 쿼리 내부의 테이블명으로 치환됩니다. 9. 진행 상황 및 로그 기록 (Progress Bar \u0026amp; Job Log) 오래 걸리는 작업의 진행 상황을 확인하고, 결과를 로그로 남깁니다.\nseq 100 | parallel --bar --joblog my_jobs.log sleep {} --bar: 터미널 하단에 진행률(Progress Bar)을 표시합니다. --joblog my_jobs.log: 각 작업의 실행 결과(성공/실패, 소요 시간 등)를 로그 파일에 기록합니다. 10. 실패 시 재시도 (Fail/Retry Handling) 네트워크 불안정 등으로 작업이 실패할 경우 자동으로 재시도하게 할 수 있습니다.\n# 실패 시 3번까지 재시도 cat urls.txt | parallel --retries 3 wget {} --retries 3: 작업이 실패(Exit code != 0)할 경우, 최대 3번까지 재시도합니다. 11. CSV/TSV 데이터 처리 (Column Separation) CSV나 TSV 같은 구분자가 있는 데이터를 처리할 때 --colsep을 사용하면 각 컬럼을 개별 인자로 사용할 수 있습니다.\n# data.csv: name,age,email # Alice,30,alice@example.com cat data.csv | parallel --colsep \u0026#39;,\u0026#39; echo \u0026#34;Name: {1}, Age: {2}, Email: {3}\u0026#34; --colsep ',': 쉼표(,)를 구분자로 사용하여 입력 라인을 분리합니다. 분리된 각 컬럼은 {1}, {2}, {3}\u0026hellip; 순서대로 접근할 수 있습니다. 탭 구분자 파일(TSV)의 경우 --colsep '\\t'를 사용합니다. 📝 결론 GNU Parallel은 단순한 병렬 실행 도구를 넘어, 복잡한 배치 작업을 효율적으로 처리할 수 있게 해주는 \u0026ldquo;Swiss Army Knife\u0026quot;와 같습니다. 특히 데이터 처리 파이프라인이나 시스템 관리 스크립트에서 xargs의 한계를 느꼈다면, 꼭 도입해 보시기를 추천합니다.\n","permalink":"https://cdecl.github.io/devops/gnu-parallel-guide/","summary":"\u003cp\u003e리눅스 환경에서 대량의 데이터나 파일을 처리하다 보면, 단일 코어만 사용하는 쉘 스크립트의 성능 한계에 부딪히게 됩니다. \u003ccode\u003exargs\u003c/code\u003e를 통해 어느 정도 병렬 처리가 가능하지만, 더 복잡하고 강력한 기능을 제공하는 도구가 바로 \u003cstrong\u003eGNU Parallel\u003c/strong\u003e입니다.\u003c/p\u003e\n\u003ch2 id=\"-parallel-개요\"\u003e🚀 parallel 개요\u003c/h2\u003e\n\u003cp\u003e\u003cstrong\u003eGNU Parallel\u003c/strong\u003e은 로컬 또는 원격 컴퓨터에서 작업을 병렬로 실행하기 위한 쉘 도구입니다. 덴마크의 Ole Tange가 Perl로 개발했으며, 표준 입력(stdin)이나 파일로부터 인자를 받아 명령어를 병렬로 실행합니다.\u003c/p\u003e\n\u003cp\u003e가장 큰 특징은 \u003ccode\u003exargs\u003c/code\u003e나 \u003ccode\u003efind -exec\u003c/code\u003e와 같은 기존 도구들의 사용성을 유지하면서도, \u003cstrong\u003e출력 제어\u003c/strong\u003e, \u003cstrong\u003e작업 슬롯 관리\u003c/strong\u003e, \u003cstrong\u003e원격 실행\u003c/strong\u003e 등 고급 기능을 제공한다는 점입니다.\u003c/p\u003e","title":"GNU Parallel: xargs를 넘어선 강력한 병렬 처리"},{"content":"쓰레드는 운영체제가 프로세스 내에서 작업을 병렬로 실행하기 위해 사용하는 기본 실행 단위입니다. 리눅스와 윈도우는 이 쓰레드를 관리하고 스케줄링하는 방식에서 서로 다른 모델을 채택하고 있으며, 이러한 차이는 시스템 성능과 프로그래밍 방식에 영향을 미칩니다.\n🐧 리눅스 쓰레딩 모델: N:1 및 1:1 혼합 (NPTL) 리눅스는 역사적으로 다양한 쓰레딩 모델을 거쳐왔으나, 현재는 **NPTL(Native POSIX Thread Library)**이라는 1:1 모델과 N:1 모델의 장점을 결합한 형태가 주류입니다.\n1. 핵심 개념: 경량 프로세스 (LWP, LightWeight Process) 리눅스 커널의 관점: 리눅스 커널은 프로세스와 쓰레드를 구분하지 않고, 모두 태스크(Task) 또는 **경량 프로세스(LWP)**로 취급하고 스케줄링합니다. 쓰레드의 생성: POSIX 쓰레드(pthreads) 라이브러리를 통해 쓰레드를 생성하면, 커널에 새로운 LWP가 생성됩니다. 이 LWP들은 부모 프로세스의 주소 공간, 파일 디스크립터 등을 공유하며, 각자의 실행 문맥(Context)을 가집니다. 2. 모델 유형: 1:1 모델 특징: 사용자 공간의 **각 쓰레드(N)**가 커널 공간의 각각의 스케줄링 가능한 엔티티(1), 즉 LWP에 직접적으로 대응됩니다. 장점: 진정한 병렬성: 멀티 코어 환경에서 여러 쓰레드가 동시에 병렬로 실행될 수 있습니다. 커널 지원: 특정 쓰레드가 I/O 작업 등으로 블록(Block) 상태가 되더라도, 커널은 해당 프로세스의 다른 쓰레드들을 계속 스케줄링할 수 있습니다. 단점: 쓰레드 생성 및 컨텍스트 전환 시 커널 오버헤드가 발생합니다. 요약: 리눅스는 POSIX 표준을 따르며, 사용자 레벨의 쓰레드가 커널 레벨의 프로세스와 유사한 경량 프로세스로 매핑되는 1:1 모델에 가깝습니다.\n🖼️ 윈도우 쓰레딩 모델: 1:1 (일대일) 윈도우 운영체제는 초기부터 현재까지 비교적 명확한 1:1 쓰레딩 모델을 사용하고 있습니다.\n1. 핵심 개념: 쓰레드 오브젝트 (Thread Object) 윈도우 커널의 관점: 윈도우 커널은 프로세스와 그 프로세스 내의 쓰레드를 명확히 구분하여 관리합니다. 쓰레드의 생성: **쓰레드 오브젝트(Thread Object)**는 윈도우 커널의 기본 스케줄링 단위입니다. 프로세스는 하나 이상의 쓰레드를 가집니다. 2. 모델 유형: 1:1 모델 특징: 사용자 공간의 **모든 쓰레드(N)**는 윈도우 커널의 **고유한 쓰레드 오브젝트(1)**에 직접적으로 매핑됩니다. 장점: 단순하고 예측 가능: 구현이 단순하고 스케줄링 동작을 예측하기 쉽습니다. 강력한 커널 관리: 모든 쓰레드 활동은 커널에 의해 직접 관리되므로, 시스템 수준의 동시성 제어가 용이합니다. 단점: 리눅스와 마찬가지로, 쓰레드 생성 및 스케줄링에 커널 오버헤드가 수반됩니다. 요약: 윈도우는 프로세스 내의 모든 쓰레드가 커널의 고유한 쓰레드 오브젝트로 매핑되는 순수한 1:1 모델을 채택하고 있습니다.\n🗓️ 스케줄링 (Scheduling) Linux **CFS (Completely Fair Scheduler)**를 사용합니다. 쓰레드별로 공평한 CPU 시간을 분배하는 데 초점을 둡니다. SMP(대칭형 다중 처리) 환경에서 코어 간 부하 분산을 효율적으로 처리하며, 특정 코어에 쓰레드를 오래 머물게 하여 캐시 효율을 높이는 경향이 있습니다. Windows 우선순위 기반(Priority-based) 선점형 스케줄링을 사용합니다. 쓰레드의 우선순위가 매우 중요하게 작용하며, 포그라운드 작업(사용자가 보고 있는 창)의 쓰레드에 더 긴 타임 슬라이스(Quantum)를 할당하여 **반응성(Responsiveness)**을 높이는 데 최적화되어 있습니다. 🔒 동기화 및 성능 (Synchronization \u0026amp; Performance) Linux 동기화를 위해 **Futex (Fast Userspace Mutex)**를 사용하여, 경합이 없을 때는 커널 모드로 전환하지 않고 사용자 모드에서 빠르게 처리합니다. 이로 인해 문맥 교환(Context Switch) 오버헤드가 적은 편입니다. 쓰레드 생성과 소멸 속도가 매우 빠르며, 서버 사이드 및 대규모 병렬 처리에 유리합니다. Windows 동기화를 위해 Critical Section(사용자 모드), Mutex/Event/Semaphore(커널 모드) 등 다양한 객체를 제공합니다. 커널 객체를 사용하는 동기화는 무겁지만, 기능이 강력합니다. 일반적으로 Linux보다 쓰레드 생성 비용이 다소 높다고 평가받지만, GUI 애플리케이션 환경에서의 반응성은 매우 뛰어납니다. 📊 주요 비교 정리 특징 🐧 리눅스 (NPTL) 🖼️ 윈도우 기본 스케줄링 단위 경량 프로세스 (LWP, LightWeight Process) / 태스크 쓰레드 오브젝트 (Thread Object) 모델 유형 1:1 모델 기반 (LWP 이용) 1:1 모델 프로세스/쓰레드 구분 커널은 구분하지 않음 (모두 LWP) 커널은 명확하게 구분함 표준 채택 POSIX Threads (pthreads) 독자적인 Win32 Thread API 병렬 실행 능력 높음 (멀티 코어 활용) 높음 (멀티 코어 활용) 주 용도 서버, 고성능 연산, 대규모 병렬 처리 데스크톱, GUI, 복합 응용 프로그램 🧐 결론 리눅스와 윈도우 모두 현대적인 운영체제로서 1:1 쓰레딩 모델을 채택하고 있으며, 이는 멀티 코어 CPU 환경에서 진정한 병렬 처리를 가능하게 합니다.\n리눅스는 모든 실행 단위를 LWP로 통일하여 유연한 태스크 관리를 지향합니다. 윈도우는 프로세스와 쓰레드를 명확히 분리하고 쓰레드 오브젝트를 통해 세밀한 커널 관리를 제공합니다. 대부분의 현대 애플리케이션 개발자에게 이 모델 차이가 직접적인 코딩 방식에 큰 영향을 주지는 않지만, 각 운영체제가 어떻게 자원을 관리하는지 이해하는 것은 성능 튜닝 및 시스템 프로그래밍 시 매우 중요합니다.\n","permalink":"https://cdecl.github.io/dev/linux-vs-windows-threading/","summary":"\u003cp\u003e쓰레드는 운영체제가 프로세스 내에서 작업을 병렬로 실행하기 위해 사용하는 \u003cstrong\u003e기본 실행 단위\u003c/strong\u003e입니다. 리눅스와 윈도우는 이 쓰레드를 관리하고 스케줄링하는 방식에서 서로 다른 모델을 채택하고 있으며, 이러한 차이는 시스템 성능과 프로그래밍 방식에 영향을 미칩니다.\u003c/p\u003e\n\u003ch2 id=\"-리눅스-쓰레딩-모델-n1-및-11-혼합-nptl\"\u003e🐧 리눅스 쓰레딩 모델: N:1 및 1:1 혼합 (NPTL)\u003c/h2\u003e\n\u003cp\u003e리눅스는 역사적으로 다양한 쓰레딩 모델을 거쳐왔으나, 현재는 **NPTL(Native POSIX Thread Library)**이라는 1:1 모델과 N:1 모델의 장점을 결합한 형태가 주류입니다.\u003c/p\u003e\n\u003ch3 id=\"1-핵심-개념-경량-프로세스-lwp-lightweight-process\"\u003e1. 핵심 개념: 경량 프로세스 (LWP, LightWeight Process)\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003e리눅스 커널의 관점:\u003c/strong\u003e 리눅스 커널은 \u003cstrong\u003e프로세스와 쓰레드를 구분하지 않고\u003c/strong\u003e, 모두 \u003cstrong\u003e태스크(Task)\u003c/strong\u003e 또는 **경량 프로세스(LWP)**로 취급하고 스케줄링합니다.\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e쓰레드의 생성:\u003c/strong\u003e POSIX 쓰레드(pthreads) 라이브러리를 통해 쓰레드를 생성하면, 커널에 새로운 LWP가 생성됩니다. 이 LWP들은 부모 프로세스의 주소 공간, 파일 디스크립터 등을 공유하며, 각자의 실행 문맥(Context)을 가집니다.\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"2-모델-유형-11-모델\"\u003e2. 모델 유형: 1:1 모델\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003e특징:\u003c/strong\u003e 사용자 공간의 **각 쓰레드(N)**가 커널 공간의 \u003cstrong\u003e각각의 스케줄링 가능한 엔티티(1)\u003c/strong\u003e, 즉 LWP에 \u003cstrong\u003e직접적으로 대응\u003c/strong\u003e됩니다.\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e장점:\u003c/strong\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003e진정한 병렬성:\u003c/strong\u003e 멀티 코어 환경에서 여러 쓰레드가 \u003cstrong\u003e동시에 병렬\u003c/strong\u003e로 실행될 수 있습니다.\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e커널 지원:\u003c/strong\u003e 특정 쓰레드가 I/O 작업 등으로 \u003cstrong\u003e블록(Block)\u003c/strong\u003e 상태가 되더라도, 커널은 해당 프로세스의 다른 쓰레드들을 계속 스케줄링할 수 있습니다.\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e단점:\u003c/strong\u003e 쓰레드 생성 및 컨텍스트 전환 시 \u003cstrong\u003e커널 오버헤드\u003c/strong\u003e가 발생합니다.\u003c/li\u003e\n\u003c/ul\u003e\n\u003cblockquote\u003e\n\u003cp\u003e\u003cstrong\u003e요약:\u003c/strong\u003e 리눅스는 \u003cstrong\u003ePOSIX 표준\u003c/strong\u003e을 따르며, 사용자 레벨의 쓰레드가 커널 레벨의 프로세스와 유사한 경량 프로세스로 매핑되는 \u003cstrong\u003e1:1 모델\u003c/strong\u003e에 가깝습니다.\u003c/p\u003e","title":"Linux vs Windows 쓰레딩 모델 비교"},{"content":"파이썬으로 개발할 때 생산성을 크게 향상시켜주는 유용한 라이브러리들을 소개합니다.\ntqdm 간략 설명 tqdm은 \u0026ldquo;taqaddum\u0026quot;의 약자로, 아랍어로 \u0026ldquo;진행\u0026quot;을 의미합니다. 긴 작업의 진행 상황을 시각적으로 보여주는 스마트한 프로그레스 바를 쉽게 추가할 수 있게 해주는 라이브러리입니다.\n사용 잇점 작업의 진행률을 시각적으로 확인할 수 있어 대기 시간을 예측하고 지루함을 덜 수 있습니다. 반복문(loop)에 간단하게 적용할 수 있어 코드 수정이 거의 필요 없습니다. 처리 속도, 남은 시간 등 유용한 정보를 함께 표시해줍니다. 설치 pip install tqdm 간략 예제 코드 import time from tqdm import tqdm for i in tqdm(range(100), desc=\u0026#34;Processing\u0026#34;): time.sleep(0.05) 실행 결과 Processing: 100%|██████████| 100/100 [00:05\u0026lt;00:00, 19.99it/s] 추가 예제: 리스트와 함께 사용 tqdm은 리스트 컴프리헨션이나 제너레이터 표현식과도 잘 동작합니다.\nfrom tqdm import tqdm import time def process_item(item): time.sleep(0.01) return item * item my_list = range(200) results = [process_item(item) for item in tqdm(my_list, desc=\u0026#34;Processing List\u0026#34;)] 실행 결과 Processing List: 100%|██████████| 200/200 [00:02\u0026lt;00:00, 99.89it/s] 비슷한 다른 추천 라이브러리 alive-progress: tqdm보다 더 화려하고 다양한 애니메이션 효과를 제공합니다. Typer 간략 설명 Typer는 파이썬의 타입 힌트(type hints)를 기반으로 강력하고 사용하기 쉬운 CLI(Command-Line Interface) 애플리케이션을 만드는 라이브러리입니다.\n사용 잇점 타입 힌트를 그대로 사용하여 CLI 인자와 옵션을 정의하므로 코드가 간결하고 명확해집니다. 자동 완성(au 도움말 메시지를 자동으로 생성해주어 사용자가 CLI를 쉽게 이해하고 사용할 수 있도록 돕습니다. 설치 pip install \u0026#34;typer[all]\u0026#34; 간략 예제 코드 import typer def main(name: str, age: int = 20): \u0026#34;\u0026#34;\u0026#34; Say hi to NAME, optionally with a --age. \u0026#34;\u0026#34;\u0026#34; print(f\u0026#34;Hello {name}, you are {age} years old.\u0026#34;) if __name__ == \u0026#34;__main__\u0026#34;: typer.run(main) 실행 결과 # 터미널에서 실행 $ python exapp.py Alice Hello Alice, you are 20 years old. $ python exapp.py Bob --age 30 Hello Bob, you are 30 years old. $ python exapp.py --help Usage: exapp.py [OPTIONS] NAME Say hi to NAME, optionally with a --age. Arguments: NAME [required] Options: --age INTEGER [default: 20] --help Show this message and exit. 추가 예제: 서브커맨드 만들기 Typer를 사용하면 서브커맨드를 만드는 것도 매우 간단합니다.\nimport typer app = typer.Typer() @app.command() def create(username: str): print(f\u0026#34;Creating user: {username}\u0026#34;) @app.command() def delete(username: str): print(f\u0026#34;Deleting user: {username}\u0026#34;) if __name__ == \u0026#34;__main__\u0026#34;: app() 실행 결과 $ python exapp create Alice Creating user: Alice $ python exapp delete Bob Deleting user: Bob $ python exapp --help Usage: exapp [OPTIONS] COMMAND [ARGS]... Options: --help Show this message and exit. Commands: create delete 비슷한 다른 추천 라이브러리 Click: Typer의 기반이 되는 라이브러리로, 데코레이터를 사용하여 CLI를 구성합니다. 더 복잡한 커스터마이징이 필요할 때 좋습니다. argparse: 파이썬 표준 라이브러리로, 외부 의존성 없이 사용할 수 있지만 Typer보다 코드가 장황해질 수 있습니다. icecream 간략 설명 icecream은 print() 문을 대체하여 변수 이름, 값, 그리고 코드가 실행된 위치를 함께 출력해주는 디버깅용 라이브러리입니다.\n사용 잇점 print(f'{my_var=}')와 같은 코드를 ic(my_var)로 간단하게 줄일 수 있습니다. 변수 이름과 값이 함께 출력되어 어떤 변수를 확인하는지 명확하게 알 수 있습니다. 함수 호출 시 인자 없이 ic()만 사용해도 실행된 라인과 함수 이름을 알려주어 코드 흐름을 파악하기 좋습니다. 설치 pip install icecream 간략 예제 코드 from icecream import ic def my_function(a, b): ic() result = a + b ic(a, b, result) return result my_function(1, 2) 실행 결과 ic| exapp.py:4 in my_function() ic| exapp.py:6: a=1, b=2, result=3 추가 예제: 출력 설정 변경하기 icecream은 출력 형식이나 포함되는 정보를 커스터마이징 할 수 있습니다.\nfrom icecream import ic import time def get_timestamp(): return time.strftime(\u0026#39;%H:%M:%S\u0026#39;) ic.configureOutput(prefix=f\u0026#39;{get_timestamp()} | \u0026#39;) def expensive_calculation(): ic() time.sleep(0.5) return \u0026#34;done\u0026#34; expensive_calculation() 실행 결과 22:30:15 | exapp.py:11 in expensive_calculation() 비슷한 다른 추천 라이브러리 snoop: icecream보다 더 상세한 정보를 제공하며, 함수의 실행 과정을 한 줄 한 줄 추적해줍니다. pytest 간략 설명 pytest는 간단하고 확장 가능한 테스트 프레임워크입니다. 복잡한 설정 없이도 강력한 테스트를 작성할 수 있게 도와줍니다.\n사용 잇점 assert 문을 그대로 사용하여 테스트 케이스를 작성할 수 있어 코드가 간결합니다. Fixture라는 강력한 기능을 통해 테스트의 전후 준비 및 정리 과정을 쉽게 관리할 수 있습니다. 풍부한 플러그인 생태계를 통해 커버리지 측정, 병렬 테스트 등 다양한 기능을 쉽게 추가할 수 있습니다. 설치 pip install pytest 간략 예제 코드 # test_example.py def add(a, b): return a + b def test_add(): assert add(1, 2) == 3 assert add(-1, 1) == 0 터미널에서 pytest 실행\n실행 결과 ============================= test session starts ============================== platform darwin -- Python 3.9.6, pytest-6.2.4, py-1.10.0, pluggy-0.13.1 rootdir: /path/to/your/project collected 1 item test_example.py . [100%] ============================== 1 passed in 0.01s =============================== 추가 예제: Fixture 사용하기 fixture는 테스트 함수들이 실행되기 전에 필요한 데이터나 객체를 설정하고, 테스트가 끝난 후 정리하는 데 사용됩니다.\n# test_app.py import pytest @pytest.fixture def sample_data(): \u0026#34;\u0026#34;\u0026#34;Fixture to provide sample data to tests.\u0026#34;\u0026#34;\u0026#34; return {\u0026#34;user\u0026#34;: \u0026#34;Alice\u0026#34;, \u0026#34;items\u0026#34;: [1, 2, 3]} def test_user_name(sample_data): assert sample_data[\u0026#34;user\u0026#34;] == \u0026#34;Alice\u0026#34; def test_items_count(sample_data): assert len(sample_data[\u0026#34;items\u0026#34;]) == 3 실행 결과 ============================= test session starts ============================== ... collected 2 items test_app.py .. [100%] ============================== 2 passed in 0.02s =============================== 비슷한 다른 추천 라이브러리 unittest: 파이썬 표준 라이브러리로, xUnit 스타일의 테스트를 작성할 수 있습니다. pytest보다 구조가 더 복잡할 수 있습니다. Nose2: unittest의 확장 버전으로, 테스트를 더 쉽게 작성하고 실행할 수 있도록 도와줍니다. Loguru 간략 설명 Loguru는 파이썬의 기본 logging 모듈을 더 쉽고 강력하게 사용할 수 있도록 만든 로깅 라이브러리입니다.\n사용 잇점 최소한의 설정으로 바로 사용할 수 있으며, 색상 구분, 파일 로깅, 로테이션 등을 매우 쉽게 설정할 수 있습니다. 예외(Exception) 발생 시 스택 트레이스를 자동으로 포함하여 디버깅에 유용한 정보를 제공합니다. 문자열 포매팅이 내장되어 있어 logger.info(f\u0026quot;User {user_id} logged in\u0026quot;)와 같이 직관적으로 사용할 수 있습니다. 설치 pip install loguru 간략 예제 코드 from loguru import logger logger.add(\u0026#34;file_{time}.log\u0026#34;, rotation=\u0026#34;500 MB\u0026#34;) # 500MB 마다 로그 파일 분리 logger.debug(\u0026#34;This is a debug message.\u0026#34;) logger.info(\u0026#34;This is an info message.\u0026#34;) logger.warning(\u0026#34;This is a warning message.\u0026#34;) logger.error(\u0026#34;This is an error message.\u0026#34;) try: 1 / 0 except ZeroDivisionError: logger.exception(\u0026#34;What?!\u0026#34;) 실행 결과 (터미널에 아래와 같이 출력되며, file_2025-11-17_... .log 파일이 생성됩니다)\n2025-11-17 22:10:00.123 | DEBUG | __main__:\u0026lt;module\u0026gt;:5 - This is a debug message. 2025-11-17 22:10:00.123 | INFO | __main__:\u0026lt;module\u0026gt;:6 - This is an info message. 2025-11-17 22:10:00.123 | WARNING | __main__:\u0026lt;module\u0026gt;:7 - This is a warning message. 2025-11-17 22:10:00.123 | ERROR | __main__:\u0026lt;module\u0026gt;:8 - This is an error message. 2025-11-17 22:10:00.124 | ERROR | __main__:\u0026lt;module\u0026gt;:13 - What?! Traceback (most recent call last): File \u0026#34;exapp.py\u0026#34;, line 11, in \u0026lt;module\u0026gt; 1 / 0 ZeroDivisionError: division by zero 추가 예제: JSON 형식으로 로그 남기기 구조화된 로깅을 위해 로그를 JSON 형식으로 저장할 수 있습니다.\nfrom loguru import logger import sys logger.remove() # 기본 핸들러 제거 logger.add(sys.stderr, format=\u0026#34;{message}\u0026#34;) logger.add(\u0026#34;logs.json\u0026#34;, serialize=True) user_data = {\u0026#34;id\u0026#34;: 123, \u0026#34;name\u0026#34;: \u0026#34;Bob\u0026#34;} logger.bind(user=user_data).info(\u0026#34;User logged in\u0026#34;) 실행 결과 (터미널에는 포맷에 따라 message만 출력됩니다)\nUser logged in (logs.json 파일에 아래와 같은 내용이 기록됩니다)\n{\u0026#34;text\u0026#34;: \u0026#34;User logged in\\n\u0026#34;, \u0026#34;record\u0026#34;: {\u0026#34;elapsed\u0026#34;: {\u0026#34;repr\u0026#34;: \u0026#34;0:00:00.002453\u0026#34;, \u0026#34;seconds\u0026#34;: 0.002453}, \u0026#34;exception\u0026#34;: null, \u0026#34;extra\u0026#34;: {\u0026#34;user\u0026#34;: {\u0026#34;id\u0026#34;: 123, \u0026#34;name\u0026#34;: \u0026#34;Bob\u0026#34;}}, \u0026#34;file\u0026#34;: {\u0026#34;name\u0026#34;: \u0026#34;exapp.py\u0026#34;, \u0026#34;path\u0026#34;: \u0026#34;/path/to/exapp.py\u0026#34;}, \u0026#34;function\u0026#34;: \u0026#34;\u0026lt;module\u0026gt;\u0026#34;, \u0026#34;level\u0026#34;: {\u0026#34;icon\u0026#34;: \u0026#34;ℹ️\u0026#34;, \u0026#34;name\u0026#34;: \u0026#34;INFO\u0026#34;, \u0026#34;no\u0026#34;: 20}, \u0026#34;line\u0026#34;: 10, \u0026#34;message\u0026#34;: \u0026#34;User logged in\u0026#34;, \u0026#34;module\u0026#34;: \u0026#34;your_script_name\u0026#34;, \u0026#34;name\u0026#34;: \u0026#34;__main__\u0026#34;, \u0026#34;process\u0026#34;: {\u0026#34;id\u0026#34;: 12345, \u0026#34;name\u0026#34;: \u0026#34;MainProcess\u0026#34;}, \u0026#34;thread\u0026#34;: {\u0026#34;id\u0026#34;: 54321, \u0026#34;name\u0026#34;: \u0026#34;MainThread\u0026#34;}, \u0026#34;time\u0026#34;: {\u0026#34;repr\u0026#34;: \u0026#34;2025-11-17 22:45:00.543210+09:00\u0026#34;, \u0026#34;timestamp\u0026#34;: 1763435100.54321}}} 비슷한 다른 추천 라이브러리 logging: 파이썬 표준 라이브러리로, 매우 유연하고 강력하지만 초기 설정이 복잡할 수 있습니다. python-dotenv 간략 설명 .env 파일에 저장된 환경 변수를 코드 내에서 쉽게 불러와 사용할 수 있게 해주는 라이브러리입니다.\n사용 잇점 API 키, 데이터베이스 비밀번호 등 민감한 정보를 코드와 분리하여 안전하게 관리할 수 있습니다. 개발, 테스트, 운영 환경에 따라 다른 설정을 .env 파일을 통해 쉽게 주입할 수 있습니다. os.environ을 통해 환경 변수를 사용하므로, 12-Factor App 원칙을 따르기 용이합니다. 설치 pip install python-dotenv 간략 예제 코드 # .env 파일 API_KEY=\u0026#34;your_secret_api_key\u0026#34; DEBUG=\u0026#34;True\u0026#34; # main.py import os from dotenv import load_dotenv load_dotenv() # .env 파일의 환경 변수를 로드합니다. api_key = os.getenv(\u0026#34;API_KEY\u0026#34;) debug_mode = os.getenv(\u0026#34;DEBUG\u0026#34;) print(f\u0026#34;API Key: {api_key}\u0026#34;) print(f\u0026#34;Debug Mode: {debug_mode}\u0026#34;) 실행 결과 API Key: your_secret_api_key Debug Mode: True 추가 예제: os.environ을 수정하지 않고 값 가져오기 load_dotenv()는 os.environ을 직접 수정합니다. 만약 환경 변수를 딕셔너리 형태로만 가져오고 싶다면 dotenv_values를 사용할 수 있습니다.\n# .env 파일은 위와 동일 from dotenv import dotenv_values config = dotenv_values(\u0026#34;.env\u0026#34;) print(f\u0026#34;API Key from config: {config[\u0026#39;API_KEY\u0026#39;]}\u0026#34;) print(f\u0026#34;Debug mode from config: {config[\u0026#39;DEBUG\u0026#39;]}\u0026#34;) 실행 결과 API Key from config: your_secret_api_key Debug mode from config: True 비슷한 다른 추천 라이브러리 pydantic-settings: Pydantic 모델을 사용하여 환경 변수를 타입 검증과 함께 불러올 수 있어 더욱 안정적인 설정 관리가 가능합니다. ","permalink":"https://cdecl.github.io/dev/python-productivity-libraries/","summary":"\u003cp\u003e파이썬으로 개발할 때 생산성을 크게 향상시켜주는 유용한 라이브러리들을 소개합니다.\u003c/p\u003e\n\u003ch2 id=\"tqdm\"\u003etqdm\u003c/h2\u003e\n\u003ch3 id=\"간략-설명\"\u003e간략 설명\u003c/h3\u003e\n\u003cp\u003e\u003ccode\u003etqdm\u003c/code\u003e은 \u0026ldquo;taqaddum\u0026quot;의 약자로, 아랍어로 \u0026ldquo;진행\u0026quot;을 의미합니다. 긴 작업의 진행 상황을 시각적으로 보여주는 스마트한 프로그레스 바를 쉽게 추가할 수 있게 해주는 라이브러리입니다.\u003c/p\u003e\n\u003ch3 id=\"사용-잇점\"\u003e사용 잇점\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e작업의 진행률을 시각적으로 확인할 수 있어 대기 시간을 예측하고 지루함을 덜 수 있습니다.\u003c/li\u003e\n\u003cli\u003e반복문(loop)에 간단하게 적용할 수 있어 코드 수정이 거의 필요 없습니다.\u003c/li\u003e\n\u003cli\u003e처리 속도, 남은 시간 등 유용한 정보를 함께 표시해줍니다.\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"설치\"\u003e설치\u003c/h3\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003epip install tqdm\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch3 id=\"간략-예제-코드\"\u003e간략 예제 코드\u003c/h3\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-python\" data-lang=\"python\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003eimport\u003c/span\u003e time\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003efrom\u003c/span\u003e tqdm \u003cspan style=\"color:#f92672\"\u003eimport\u003c/span\u003e tqdm\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003efor\u003c/span\u003e i \u003cspan style=\"color:#f92672\"\u003ein\u003c/span\u003e tqdm(range(\u003cspan style=\"color:#ae81ff\"\u003e100\u003c/span\u003e), desc\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;Processing\u0026#34;\u003c/span\u003e):\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    time\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003esleep(\u003cspan style=\"color:#ae81ff\"\u003e0.05\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch3 id=\"실행-결과\"\u003e실행 결과\u003c/h3\u003e\n\u003cpre tabindex=\"0\"\u003e\u003ccode\u003eProcessing: 100%|██████████| 100/100 [00:05\u0026lt;00:00, 19.99it/s]\n\u003c/code\u003e\u003c/pre\u003e\u003ch3 id=\"추가-예제-리스트와-함께-사용\"\u003e추가 예제: 리스트와 함께 사용\u003c/h3\u003e\n\u003cp\u003e\u003ccode\u003etqdm\u003c/code\u003e은 리스트 컴프리헨션이나 제너레이터 표현식과도 잘 동작합니다.\u003c/p\u003e","title":"Python 유용한 생산성 라이브러리"},{"content":"리눅스나 macOS 환경에서 무거운 백그라운드 데몬 없이 간단하게 명령어 실행을 순차적으로 처리하고 싶을 때가 있습니다. at이나 batch 같은 전통적인 유틸리티도 훌륭하지만, 파일 시스템을 기반으로 더 직관적이고 가볍게 동작하는 nq는 훌륭한 대안이 될 수 있습니다.\n이 글에서는 nq의 기본 개념과 설치 방법, 그리고 실제 사용 사례를 통해 어떻게 명령어 큐를 관리하고 실행하는지 자세히 알아보겠습니다.\nnq란 무엇인가? nq는 \u0026rsquo;the nice queue\u0026rsquo;를 의미하는 것으로 보이며, 파일 시스템 기반의 간단한 커맨드 라인 큐 유틸리티입니다. 별도의 데몬 프로세스 없이, nq 명령어 자체가 백그라운드에서 순차적으로 작업을 처리합니다. 선행 작업이 끝나야 다음 작업이 시작되는 것을 보장해주므로, 여러 빌드 명령어나 다운로드 작업을 순서대로 실행할 때 매우 유용합니다.\n주요 명령어는 다음과 같습니다.\nnq: 실행하고 싶은 명령어를 큐(Queue)에 추가하고, 백그라운드에서 실행을 시작합니다. nqtail: 큐에서 실행 중이거나 완료된 작업의 로그(표준 출력/에러)를 확인합니다. 설치 방법 nq는 C로 작성된 간단한 프로그램이므로, 소스 코드를 직접 컴파일하여 설치합니다.\n먼저 Git을 사용해 소스 코드를 클론합니다.\ngit clone https://github.com/leahneukirchen/nq.git cd nq make 명령어로 컴파일하고, make install로 시스템에 설치합니다. sudo 권한이 필요할 수 있습니다.\nmake sudo make install 기본적으로 /usr/local/bin에 nq와 nqtail이 설치됩니다.\nnq 기본 사용법 명령어(잡) 큐에 추가하고 실행하기 nq 사용법은 매우 간단합니다. 그냥 실행하고 싶은 명령어 앞에 nq를 붙여주기만 하면 됩니다.\n# Makefile 타겟을 순차적으로 실행 nq make clean nq make depends nq make all 이렇게 하면 nq는 make clean을 백그라운드에서 실행하고, 이 작업이 끝나면 make depends를, 그 다음 make all을 순차적으로 실행합니다. 각 명령어는 즉시 큐에 추가되고, nq는 이전 작업이 끝날 때까지 다음 작업을 기다렸다가 실행합니다.\n작업 로그 확인하기 (nqtail) 백그라운드에서 실행되는 작업의 출력은 nqtail 명령어로 확인할 수 있습니다.\n# 현재 실행 중인 작업의 로그를 실시간으로 출력 nqtail # 모든 작업의 로그를 한 번에 출력 nqtail -a # 작업당 한 줄로 요약해서 보여주기 nqtail -q 모든 작업이 끝나기를 기다리기 (nq -w) 스크립트 등에서 nq로 추가한 모든 작업이 완료될 때까지 기다려야 할 때가 있습니다. 이때는 -w 옵션을 사용합니다.\necho \u0026#34;Starting downloads...\u0026#34; nq wget https://example.com/file1.zip nq wget https://example.com/file2.zip # 위의 두 다운로드가 모두 끝날 때까지 대기 nq -w echo \u0026#34;All downloads finished.\u0026#34; 큐 관리 및 분리 주요 명령어 및 옵션 nq와 nqtail은 간단하지만 강력한 옵션들을 제공합니다.\nnq 옵션 nq [command] -q: 작업을 큐에 추가할 때 기본적으로 출력되는 작업 ID를 숨깁니다. 스크립트에서 출력을 깔끔하게 유지하고 싶을 때 유용합니다. nq -q sleep 5 -w [job_id\u0026hellip;]: 모든 작업 또는 지정된 작업 ID들이 완료될 때까지 기다립니다. 스크립트 내에서 동기적으로 작업을 처리해야 할 때 필수적입니다. # 모든 작업이 끝날 때까지 대기 nq -w # 특정 작업들(예: 1, 3)이 끝날 때까지 대기 nq -w 1 3 -t: 큐에 처리 대기 중인 작업이 있는지 확인합니다. 작업이 남아있으면 종료 코드 0을, 큐가 비어있으면 0이 아닌 값을 반환합니다. if nq -t; then echo \u0026#34;아직 처리할 작업이 남았습니다.\u0026#34; fi nqtail 옵션 nqtail -a: 큐에 있는 모든 작업의 전체 로그를 출력합니다. -q: 각 작업을 한 줄로 요약하여 간략하게 상태를 보여줍니다. nq의 강력한 기능 중 하나는 여러 개의 큐를 손쉽게 분리하여 관리할 수 있다는 점입니다.\n큐 구분 방법 (NQDIR 환경 변수) nq는 NQDIR 환경 변수를 통해 작업 큐가 저장될 디렉토리를 결정합니다. 이 변수를 설정하지 않으면 현재 디렉토리를 큐로 사용합니다.\n예를 들어, 일반 작업과 다운로드 작업을 별도의 큐로 관리하고 싶다고 가정해 봅시다.\n일반 작업 (현재 디렉토리 큐)\nnq echo \u0026#34;This is a default task.\u0026#34; 다운로드 전용 큐 (/tmp/downloads) NQDIR 환경 변수를 설정하여 nq와 nqtail이 다른 디렉토리를 사용하도록 지정합니다.\n# NQDIR을 설정하여 다운로드 큐에 작업 추가 export NQDIR=/tmp/downloads nq wget https://example.com/big_file.iso # 다운로드 큐의 로그 확인 NQDIR=/tmp/downloads nqtail -q 이렇게 하면 현재 디렉토리의 큐와 다운로드용 /tmp/downloads 큐가 완전히 분리되어 서로 영향을 주지 않습니다.\n대기 중인 작업 확인 및 관리 nq는 파일 시스템을 기반으로 큐를 관리하므로, 일반적인 파일 시스템 명령어를 활용하여 대기 중인 작업을 확인하고 관리할 수 있습니다.\n대기 중인 작업 존재 여부 확인 (nq -t) 특정 큐에 대기 중인 작업이 있는지 빠르게 확인하려면 -t 옵션을 사용합니다. 이 옵션은 작업의 존재 여부만 알려주며, 개수를 직접 반환하지는 않습니다.\n# 현재 큐에 대기 중인 작업이 있으면 종료 코드 0을 반환 if nq -t; then echo \u0026#34;Jobs are pending.\u0026#34; else echo \u0026#34;Queue is empty.\u0026#34; fi 잔여 명령어 개수 확인 nq는 각 명령어를 큐 디렉토리 내의 파일로 저장합니다. 따라서 해당 디렉토리의 파일 개수를 세는 것으로 잔여 명령어의 개수를 파악할 수 있습니다. NQDIR 환경 변수가 설정되어 있지 않다면 현재 디렉토리를 사용합니다.\n# 현재 큐 디렉토리 (NQDIR이 설정되어 있지 않다면 현재 디렉토리) QUEUE_DIR=${NQDIR:-.} # 잔여 명령어 개수 확인 (nqtail -q를 통해 정확한 작업 개수 확인) NQDIR=\u0026#34;$QUEUE_DIR\u0026#34; nqtail -q | wc -l 참고: ls 명령으로 디렉토리 내 파일을 세는 것보다 nqtail -q의 출력 라인 수를 세는 것이 nq 작업 파일만을 정확히 세는 더 좋은 방법입니다.\n잔여 명령어 내용 확인 큐에 대기 중인 명령어의 실제 내용을 확인하려면, 해당 작업 파일을 직접 읽으면 됩니다. 작업 파일은 큐 디렉토리 내에 저장되며, 파일명은 일반적으로 ,TIMESTAMP.PID 형태를 따릅니다.\n# 현재 큐 디렉토리 (NQDIR이 설정되어 있지 않다면 현재 디렉토리) QUEUE_DIR=${NQDIR:-.} # 모든 대기 중인 명령어 파일의 내용 보기 for job_file in \u0026#34;$QUEUE_DIR\u0026#34;/,*; do if [ -f \u0026#34;$job_file\u0026#34; ]; then echo \u0026#34;--- Job: $(basename \u0026#34;$job_file\u0026#34;) ---\u0026#34; cat \u0026#34;$job_file\u0026#34; echo \u0026#34;\u0026#34; fi done 주의: nq는 작업 파일을 생성할 때 파일명 앞에 쉼표(,)를 붙입니다. ls 명령으로 큐 디렉토리를 직접 확인하여 파일명을 파악할 수 있습니다.\n큐에 저장된 실제 작업 파일 목록을 보려면 ls 명령어를 사용하면 됩니다.\n# 다운로드 큐의 작업 파일 목록 보기 ls -F /tmp/downloads 또한, ls -F 명령어를 사용하면 현재 실행 중인 작업을 시각적으로 구분할 수 있습니다. nq는 실행 중인 작업의 로그 파일에 실행 권한(+x)을 부여하므로, ls -F 출력에서 해당 파일명 뒤에 별표(*)가 붙어 나타납니다. 이를 통해 어떤 작업이 현재 실행 중인지 한눈에 파악할 수 있습니다.\n결론 nq는 복잡한 설정이나 데몬 없이, 파일 시스템을 이용해 간단하고 효율적으로 커맨드 라인 작업을 순차 관리할 수 있는 강력한 도구입니다. 특히 NQDIR 환경 변수를 활용한 큐 분리 기능은 여러 종류의 작업을 체계적으로 관리해야 할 때 매우 유용합니다.\n단순한 스크립트 실행 예약부터 여러 개의 빌드 작업이나 파일 다운로드를 순서대로 처리하는 등, nq를 활용해 자신만의 작업 자동화 파이프라인을 구축해 보세요.\n","permalink":"https://cdecl.github.io/devops/nq-command-guide/","summary":"\u003cp\u003e리눅스나 macOS 환경에서 무거운 백그라운드 데몬 없이 간단하게 명령어 실행을 순차적으로 처리하고 싶을 때가 있습니다. \u003ccode\u003eat\u003c/code\u003e이나 \u003ccode\u003ebatch\u003c/code\u003e 같은 전통적인 유틸리티도 훌륭하지만, 파일 시스템을 기반으로 더 직관적이고 가볍게 동작하는 \u003ccode\u003enq\u003c/code\u003e는 훌륭한 대안이 될 수 있습니다.\u003c/p\u003e\n\u003cp\u003e이 글에서는 \u003ccode\u003enq\u003c/code\u003e의 기본 개념과 설치 방법, 그리고 실제 사용 사례를 통해 어떻게 명령어 큐를 관리하고 실행하는지 자세히 알아보겠습니다.\u003c/p\u003e\n\u003ch2 id=\"nq란-무엇인가\"\u003e\u003ccode\u003enq\u003c/code\u003e란 무엇인가?\u003c/h2\u003e\n\u003cp\u003e\u003ccode\u003enq\u003c/code\u003e는 \u0026rsquo;the nice queue\u0026rsquo;를 의미하는 것으로 보이며, 파일 시스템 기반의 간단한 커맨드 라인 큐 유틸리티입니다. 별도의 데몬 프로세스 없이, \u003ccode\u003enq\u003c/code\u003e 명령어 자체가 백그라운드에서 순차적으로 작업을 처리합니다. 선행 작업이 끝나야 다음 작업이 시작되는 것을 보장해주므로, 여러 빌드 명령어나 다운로드 작업을 순서대로 실행할 때 매우 유용합니다.\u003c/p\u003e","title":"nq: 가볍고 단순한 커맨드 라인 잡 큐(Job Queue) 시스템"},{"content":"새로운 Mac을 설정하거나 여러 대의 Mac을 사용할 때마다 애플리케이션 설정을 일일이 다시 구성하는 것은 번거로운 일입니다. Mackup은 이러한 애플리케이션 설정 파일(dotfiles)을 iCloud, Dropbox, Google Drive 등과 같은 클라우드 스토리지에 백업하고, 필요할 때 손쉽게 복원하여 여러 기기 간의 설정을 동기화해주는 강력한 유틸리티입니다.\n이 글에서는 Mackup의 기본 개념부터 설치, 사용법, 그리고 고급 설정까지 자세히 다룹니다.\nMackup이란 무엇이며 왜 필요한가? Mackup은 \u0026lsquo;Mac\u0026rsquo;과 \u0026lsquo;Backup\u0026rsquo;의 합성어로, 이름에서 알 수 있듯이 macOS 환경의 설정을 백업하고 동기화하는 데 특화된 도구입니다. 많은 애플리케이션들은 홈 디렉토리에 .zshrc, .vimrc, .gitconfig와 같이 점(.)으로 시작하는 설정 파일(dotfiles)을 저장합니다. 새로운 기기를 설정할 때 이 파일들을 수동으로 옮기는 것은 매우 귀찮은 작업입니다.\nMackup은 이 과정을 자동화하여 다음과 같은 이점을 제공합니다.\n자동 동기화: 클라우드 스토리지를 통해 여러 Mac의 애플리케이션 설정을 항상 최신 상태로 유지합니다. 간편한 마이그레이션: 새 Mac을 설정할 때 단 몇 개의 명령어로 기존 환경을 그대로 복원할 수 있습니다. 중앙 관리: 모든 설정 파일을 하나의 폴더(예: Dropbox/Mackup)에서 관리하므로 버전 관리(Git)도 용이합니다. 설치 및 기능 설치 macOS에서는 Homebrew를 통해 간단하게 설치할 수 있습니다.\nbrew install mackup Homebrew를 사용하지 않는다면 pip으로도 설치가 가능합니다.\npip install --upgrade mackup 주요 기능 mackup backup: 로컬 설정 파일을 클라우드 스토리지로 백업합니다. mackup restore: 클라우드 스토리지의 설정 파일을 로컬 환경으로 복원합니다. mackup list: Mackup이 지원하는 애플리케이션 목록을 보여줍니다. mackup uninstall: Mackup으로 관리되던 모든 설정을 원래 상태로 되돌립니다. 백업 및 복원 백업하기 처음 Mackup을 실행할 때, backup 명령어를 사용해 현재 시스템의 설정 파일들을 백업합니다.\nmackup backup 이 명령을 실행하면, Mackup은 지원하는 애플리케이션의 설정 파일들을 찾아 설정된 클라우드 스토리지의 Mackup 폴더로 복사합니다. [2, 5]\n복원하기 새로운 Mac에 기존 설정을 적용하고 싶을 때는 restore 명령어를 사용합니다.\nmackup restore 이 명령은 클라우드 스토리지에 백업된 설정 파일들을 홈 디렉토리의 적절한 위치로 복사하여 기존 환경을 그대로 재현해 줍니다.\n특정 애플리케이션 설정 포함하기 Mackup의 가장 강력한 기능 중 하나는 사용자가 직접 동기화 대상을 지정할 수 있다는 점입니다. 홈 디렉토리에 .mackup.cfg 파일을 생성하여 이 모든 것을 제어할 수 있습니다.\n스토리지 엔진 및 디렉토리 설정 기본적으로 Mackup은 dropbox, google_drive, icloud 등 다양한 클라우드 스토리지 엔진을 지원합니다. 또한 file_system 엔진을 사용하면 로컬 폴더(예: Git으로 관리되는 dotfiles 저장소)에 설정을 백업할 수 있습니다. .mackup.cfg 파일에 원하는 엔진과 디렉토리를 지정하여 사용합니다. 각 엔진을 사용하려면 해당 클라우드 서비스의 데스크톱 클라이언트가 설치되어 실행 중이어야 합니다. 예를 들어, dropbox 엔진을 사용하려면 Dropbox 데스크톱 앱이, google_drive를 사용하려면 Google Drive 앱이 설치되어 있어야 합니다. icloud는 macOS에 내장되어 있으므로 iCloud Drive가 활성화되어 있으면 됩니다.\niCloud 예시:\n[storage] engine = icloud directory = Mackup Google Drive 예시:\n[storage] engine = google_drive directory = Mackup Git 저장소 (로컬 파일 시스템) 예시:\nfile_system 엔진을 사용하면 로컬의 특정 경로를 백업 위치로 지정할 수 있어 Git과 함께 사용하기 좋습니다.\n[storage] engine = file_system path = path/to/your/dotfiles/repo file_system 엔진을 사용하여 백업된 폴더에 Git 저장소를 초기화하고 원격으로 푸시하는 스크립트 예시입니다. 이 스크립트는 백업 폴더가 Git으로 관리되지 않을 때 유용합니다.\n#!/bin/bash # Mackup의 file_system 엔진으로 백업된 폴더에 Git 저장소를 초기화하고 푸시하는 스크립트입니다. # --- 설정 --- BACKUP_DIR=\u0026#34;/path/to/your/backup/folder\u0026#34; # 백업 디렉토리 경로 REMOTE_URL=\u0026#34;git@github.com:your_user/your_repo.git\u0026#34; # 원격 Git 저장소 URL BRANCH_NAME=\u0026#34;main\u0026#34; # 브랜치 이름 # --- 스크립트 로직 --- if [ -z \u0026#34;$BACKUP_DIR\u0026#34; ] || [ -z \u0026#34;$REMOTE_URL\u0026#34; ]; then echo \u0026#34;오류: BACKUP_DIR 또는 REMOTE_URL이 설정되지 않았습니다. 스크립트를 편집하십시오.\u0026#34; exit 1 fi if [ ! -d \u0026#34;$BACKUP_DIR\u0026#34; ]; then echo \u0026#34;오류: 백업 디렉토리 \u0026#39;$BACKUP_DIR\u0026#39;가 존재하지 않습니다.\u0026#34; exit 1 fi cd \u0026#34;$BACKUP_DIR\u0026#34; || { echo \u0026#34;디렉토리 변경 실패: $BACKUP_DIR\u0026#34;; exit 1; } if [ ! -d \u0026#34;.git\u0026#34; ]; then git init git branch -M \u0026#34;$BRANCH_NAME\u0026#34; fi git add . git commit -m \u0026#34;Initial backup commit\u0026#34; || echo \u0026#34;커밋할 변경사항이 없습니다.\u0026#34; if ! git remote get-url origin \u0026amp;\u0026gt;/dev/null; then git remote add origin \u0026#34;$REMOTE_URL\u0026#34; else git remote set-url origin \u0026#34;$REMOTE_URL\u0026#34; fi git push -u origin \u0026#34;$BRANCH_NAME\u0026#34; echo \u0026#34;Git 작업 완료: $BACKUP_DIR\u0026#34; 동기화할 앱과 제외할 앱 지정하기 applications_to_sync와 applications_to_ignore 섹션을 사용하여 동기화 대상을 세밀하게 제어할 수 있습니다.\n[applications_to_sync] iterm2 visual-studio-code [applications_to_ignore] filezilla spotify 만약 applications_to_sync를 지정하지 않으면, Mackup은 지원하는 모든 앱을 동기화 대상으로 간주합니다.\n지원하는 애플리케이션 목록 확인하기 Mackup이 어떤 애플리케이션을 지원하는지 확인하고 싶다면 list 명령어를 사용합니다.\nmackup list 이 명령어는 Mackup이 동기화할 수 있는 모든 애플리케이션의 목록을 출력합니다. 이 목록을 참고하여 .mackup.cfg 파일에 동기화하거나 제외할 앱을 지정할 수 있습니다.\n사용자 정의 애플리케이션 및 디렉토리 추가 Mackup이 공식적으로 지원하지 않는 애플리케이션이나 사용자 정의 디렉토리도 직접 추가하여 관리할 수 있습니다. 홈 디렉토리에 .mackup 폴더를 만들고, 그 안에 my-custom-app.cfg와 같은 설정 파일을 만들어주면 됩니다.\n예를 들어, 특정 설정 파일 ~/.my-app-config를 백업하고 싶다면, .mackup/my-app.cfg 파일을 다음과 같이 작성합니다.\n[application] name = My Custom App [configuration_files] .my-app-config 사용자 정의 디렉토리 추가 예시:\n만약 ~/my-custom-directory와 같은 전체 디렉토리를 백업하고 싶다면, .mackup/my-custom-dir.cfg 파일을 다음과 같이 작성합니다.\n[application] name = My Custom Directory [configuration_files] my-custom-directory/ Mackup은 configuration_files 섹션에 나열된 항목이 디렉토리인 경우, 해당 디렉토리의 모든 내용을 백업합니다.\n기타 유용한 기능 Copy 모드와 Link 모드 Mackup은 copy와 link 두 가지 모드로 작동합니다.\nCopy 모드 (기본): backup과 restore 명령어로 설정 파일을 복사합니다. 가장 안전하고 권장되는 방식입니다. Link 모드: 설정 파일을 클라우드 스토리지로 옮긴 후, 원래 위치에 심볼릭 링크를 생성합니다. 이를 통해 여러 기기에서 실시간으로 설정을 동기화할 수 있었지만, 최신 macOS(Sonoma 이상)에서는 시스템 무결성 보호(SIP)로 인해 환경설정 파일에 대한 심볼릭 링크가 제대로 동작하지 않는 문제가 있어 현재는 권장되지 않습니다. 결론 Mackup은 여러 대의 Mac을 사용하거나 새로운 Mac으로 마이그레이션할 때 개발 환경 및 애플리케이션 설정을 일관성 있게 유지해주는 필수 도구입니다. 간단한 명령 몇 줄로 번거로운 설정 과정을 자동화하고, .mackup.cfg 파일을 통해 자신만의 동기화 규칙을 만들어보세요. 더 이상 새로운 기기 앞에서 시간을 낭비하지 않아도 될 것입니다.\n","permalink":"https://cdecl.github.io/devops/macos-mackup-guide/","summary":"\u003cp\u003e새로운 Mac을 설정하거나 여러 대의 Mac을 사용할 때마다 애플리케이션 설정을 일일이 다시 구성하는 것은 번거로운 일입니다. Mackup은 이러한 애플리케이션 설정 파일(dotfiles)을 iCloud, Dropbox, Google Drive 등과 같은 클라우드 스토리지에 백업하고, 필요할 때 손쉽게 복원하여 여러 기기 간의 설정을 동기화해주는 강력한 유틸리티입니다.\u003c/p\u003e\n\u003cp\u003e이 글에서는 Mackup의 기본 개념부터 설치, 사용법, 그리고 고급 설정까지 자세히 다룹니다.\u003c/p\u003e\n\u003ch2 id=\"mackup이란-무엇이며-왜-필요한가\"\u003eMackup이란 무엇이며 왜 필요한가?\u003c/h2\u003e\n\u003cp\u003eMackup은 \u0026lsquo;Mac\u0026rsquo;과 \u0026lsquo;Backup\u0026rsquo;의 합성어로, 이름에서 알 수 있듯이 macOS 환경의 설정을 백업하고 동기화하는 데 특화된 도구입니다. 많은 애플리케이션들은 홈 디렉토리에 \u003ccode\u003e.zshrc\u003c/code\u003e, \u003ccode\u003e.vimrc\u003c/code\u003e, \u003ccode\u003e.gitconfig\u003c/code\u003e와 같이 점(.)으로 시작하는 설정 파일(dotfiles)을 저장합니다. 새로운 기기를 설정할 때 이 파일들을 수동으로 옮기는 것은 매우 귀찮은 작업입니다.\u003c/p\u003e","title":"Mackup으로 macOS 애플리케이션 설정 동기화하기"},{"content":"클라우드 컴퓨팅은 IT 인프라의 핵심으로 자리 잡았지만, AI의 급속한 발전과 함께 새로운 진화 단계에 접어들고 있습니다. 클라우드 2.0은 이러한 변화의 중심에 있으며, 기존 클라우드의 한계를 넘어 더 지능적이고 분산된 형태로 발전하고 있습니다. 이 글에서는 온프레미스와 클라우드의 기본 정의 및 비교를 시작으로 클라우드 1.0과 2.0의 정의, 특징, 비교를 살펴보고, AI 시대에서 클라우드 2.0의 의의를 자세히 탐구\n온프레미스와 클라우드의 정의 및 비교 온프레미스(On-Premises)와 클라우드 컴퓨팅은 IT 인프라를 구축하는 두 가지 주요 접근 방식입니다. 이 둘의 차이를 이해하는 것은 클라우드 2.0의 맥락을 파악하는 데 필수적입니다.\n온프레미스의 정의 온프레미스는 조직의 내부 시설 내에 서버, 스토리지, 네트워킹 등의 하드웨어를 직접 설치하고 운영하는 방식입니다. 모든 데이터와 애플리케이션이 회사 소유의 물리적 인프라에서 관리되며, 외부 제공자에 의존하지 않습니다.\n클라우드의 정의 클라우드 컴퓨팅은 인터넷을 통해 타사 제공자의 원격 서버에서 데이터 저장, 처리, 관리하는 서비스입니다. 사용자는 필요에 따라 리소스를 확장하거나 축소할 수 있으며, 유지보수는 제공자가 담당합니다.\n온프레미스와 클라우드의 비교 비용 구조: 온프레미스는 높은 초기 자본 투자(하드웨어 구매, 설치)가 필요하지만 장기적으로 안정적입니다. 반대로 클라우드는 사용량 기반의 운영 비용으로 초기 비용이 낮고, 유연한 스케일링이 가능합니다. 보안 및 제어: 온프레미스는 데이터가 내부에 저장되어 더 높은 제어권과 보안을 제공하지만, 유지보수가 복잡합니다. 클라우드는 제공자의 보안 조치를 활용하나, 데이터 유출 위험이 있을 수 있습니다. 유연성 및 확장성: 온프레미스는 하드웨어 추가가 필요해 확장이 느립니다. 클라우드는 즉시 리소스를 조정할 수 있어 민첩합니다. 유지보수: 온프레미스는 내부 IT 팀이 모든 것을 관리해야 하며, 클라우드는 제공자가 업데이트와 유지보수를 처리합니다. 온프레미스는 규제 준수가 중요한 산업(예: 금융)에서 선호되며, 클라우드는 스타트업이나 빠른 성장을 추구하는 기업에 적합합니다.\n클라우드 1.0의 정의 클라우드 1.0은 클라우드 컴퓨팅의 초기 단계로, 주로 인프라스트럭처 중심의 서비스(IaaS)를 의미합니다. 이는 가상화 기술을 통해 물리적 서버를 가상 머신으로 제공하며, 사용자가 서버를 임대하고 운영하는 형태입니다. AWS의 초기 EC2나 Azure의 가상 머신 서비스가 대표적입니다. 이 단계에서는 중앙화된 데이터 센터를 기반으로 기본적인 컴퓨팅, 스토리지, 네트워킹을 제공했습니다.\n클라우드 2.0의 정의 클라우드 2.0은 클라우드 컴퓨팅의 다음 진화 단계로, 지능형, 분산화된 클라우드 서비스를 강조합니다. 이는 PaaS(Platform as a Service), 컨테이너화(예: Docker, Kubernetes), 에지 컴퓨팅, 서버리스 아키텍처를 포함하며, 멀티클라우드와 하이브리드 환경을 지원합니다. 중앙화된 데이터 센터에서 벗어나 에지 노드로 확장되어 실시간 처리와 AI 통합을 강화합니다.\n클라우드 1.0과 2.0의 특징 및 비교 클라우드 1.0과 2.0은 클라우드의 성숙도를 나타내며, 다음과 같은 특징과 차이가 있습니다.\n클라우드 1.0의 특징 중앙화된 데이터 센터 중심. 기본 IaaS 제공: 가상 머신, 스토리지. 비용 절감과 스케일링에 초점. 초기 채택 단계로, 온프레미스에서 클라우드로의 단순 마이그레이션. 클라우드 2.0의 특징 분산화: 에지 컴퓨팅으로 지연 시간 최소화. PaaS와 서버리스: 개발자 생산성 향상. 하이브리드/멀티클라우드 지원: 유연한 환경. AI/ML 통합: 자동화와 지능화. 클라우드 1.0과 2.0의 비교 아키텍처: 1.0은 중앙화 vs. 2.0은 분산화. 서비스 수준: 1.0은 IaaS 중심 vs. 2.0은 PaaS, 서버리스 포함. 유연성: 1.0은 기본 스케일링 vs. 2.0은 실시간 에지 처리와 자동화. 목적: 1.0은 비용 절감 vs. 2.0은 혁신과 AI 지원. 클라우드 2.0은 1.0의 기반 위에 더 고급 기능을 추가하여 기업의 디지털 트랜스포메이션을 가속화합니다.\nAI 시대의 클라우드 2.0의 의의 AI 시대에서 클라우드 2.0은 단순한 인프라가 아닌, AI 워크로드를 효율적으로 지원하는 핵심 플랫폼으로 부상합니다. AI 모델 훈련과 추론은 막대한 컴퓨팅 자원과 데이터를 요구하므로, 클라우드 2.0의 분산화와 지능화가 필수적입니다.\nAI 생산성 향상: 클라우드 2.0은 AI와 결합되어 자동화된 워크플로우를 제공하며, 에지 컴퓨팅으로 실시간 AI 적용(예: 자율주행, IoT)을 가능하게 합니다. 데이터 관리 및 보안: 소버린 클라우드 개념으로 AI 데이터의 보안과 규제 준수를 강화합니다. 비용 및 에너지 효율: AI의 높은 에너지 소비를 클라우드 2.0의 최적화로 관리하며, 클라우드 소비 증가를 지원합니다. 혁신 촉진: AI와 빅데이터 통합으로 기업이 클라우드 네이티브 AI 애플리케이션을 개발할 수 있게 합니다. 결과적으로, 클라우드 2.0은 AI 시대의 인프라로, 혁신을 가속화하고 경쟁력을 강화하는 역할을 합니다.\n결론 클라우드 2.0은 온프레미스와 클라우드 1.0의 한계를 넘어 AI 시대에 최적화된 컴퓨팅 패러다임을 제시합니다. 분산화, 지능화, 유연성을 통해 기업은 더 빠르고 스마트한 디지털 전환을 이룰 수 있습니다. AI가 주도하는 미래에서 클라우드 2.0을 활용하면, 새로운 기회를 포착할 수 있을 것입니다.\n","permalink":"https://cdecl.github.io/devops/cloud-2/","summary":"\u003cp\u003e클라우드 컴퓨팅은 IT 인프라의 핵심으로 자리 잡았지만, AI의 급속한 발전과 함께 새로운 진화 단계에 접어들고 있습니다. 클라우드 2.0은 이러한 변화의 중심에 있으며, 기존 클라우드의 한계를 넘어 더 지능적이고 분산된 형태로 발전하고 있습니다. 이 글에서는 온프레미스와 클라우드의 기본 정의 및 비교를 시작으로 클라우드 1.0과 2.0의 정의, 특징, 비교를 살펴보고, AI 시대에서 클라우드 2.0의 의의를 자세히 탐구\u003c/p\u003e\n\u003ch2 id=\"온프레미스와-클라우드의-정의-및-비교\"\u003e온프레미스와 클라우드의 정의 및 비교\u003c/h2\u003e\n\u003cp\u003e온프레미스(On-Premises)와 클라우드 컴퓨팅은 IT 인프라를 구축하는 두 가지 주요 접근 방식입니다. 이 둘의 차이를 이해하는 것은 클라우드 2.0의 맥락을 파악하는 데 필수적입니다.\u003c/p\u003e","title":"클라우드 2.0의 의의 - AI 시대를 위한 차세대 컴퓨팅"},{"content":"Obsidian은 그 자체로도 강력한 노트 앱이지만, 진정한 힘은 커뮤니티 플러그인을 통해 발휘됩니다. 수많은 플러그인 중에서 어떤 것을 선택해야 할지 막막한 분들을 위해, 생산성을 극대화하고 노트 경험을 한 차원 높여줄 필수 플러그인 15가지를 엄선하여 소개합니다.\n플러그인 목록 1. Tasks 기능: 옵시디언 내에서 강력한 할 일 관리 시스템을 구축합니다. 마감일, 반복 작업, 우선순위, 필터링 등 체계적인 작업 관리에 필요한 모든 기능을 제공합니다. (자세히 보기) 효과: 별도의 할 일 관리 앱 없이 옵시디언 내에서 모든 작업을 추적하고 관리할 수 있어 지식 관리와 작업 관리를 하나로 통합할 수 있습니다. 2. Advanced Tables 기능: 마크다운 테이블 작성을 획기적으로 개선합니다. Tab 키를 이용한 셀 이동, 자동 서식 지정, 간단한 수식 계산 등 고급 편집 기능을 지원합니다. 효과: 복잡한 표를 만들 때 드는 시간과 노력을 크게 줄여주어, 데이터를 정리하고 비교하는 작업을 훨씬 수월하게 만들어 줍니다. 3. Style Settings 기능: 테마나 다른 플러그인의 디자인을 코딩 없이 세밀하게 조정할 수 있게 해줍니다. 글꼴, 색상, 간격 등 다양한 시각적 요소를 사용자 인터페이스를 통해 직접 변경할 수 있습니다. 효과: 나만의 맞춤형 옵시디언 환경을 손쉽게 구축하여 시각적 만족도와 가독성을 높일 수 있습니다. 4. Git 기능: 옵시디언 볼트를 Git 저장소로 만들어 버전 관리를 자동화합니다. 설정된 시간마다 자동으로 변경 사항을 커밋하고 원격 저장소에 푸시합니다. 효과: 모든 노트의 변경 이력을 안전하게 보관하고, 실수로 내용을 삭제하거나 잘못 수정했을 때 언제든지 이전 상태로 복원할 수 있어 데이터 안정성이 크게 향상됩니다. 5. Iconize 기능: 파일, 폴더, 노트 제목 등 옵시디언의 거의 모든 요소에 아이콘을 추가할 수 있게 해줍니다. 효과: 시각적인 구분을 통해 원하는 정보를 더 빠르고 직관적으로 찾을 수 있도록 도와주며, 파일 탐색기를 더 다채롭게 꾸밀 수 있습니다. 6. Minimal Theme Settings 기능: 인기 테마인 \u0026lsquo;Minimal\u0026rsquo;의 색상, 글꼴, 레이아웃 등을 세부적으로 설정할 수 있는 전용 패널을 제공합니다. 효과: Minimal 테마 사용자에게 최적화된 맞춤 설정을 제공하여, 개인의 취향에 완벽하게 부합하는 작업 환경을 만들 수 있습니다. 7. File Explorer Note Count 기능: 파일 탐색기의 각 폴더명 옆에 해당 폴더에 포함된 노트의 개수를 표시해 줍니다. 효과: 폴더별 노트 분포를 한눈에 파악할 수 있어, 노트 정리 및 구조화에 유용한 정보를 제공합니다. 8. Excel to Markdown Table 기능: Microsoft Excel, Google Sheets, Apple Numbers 등 스프레드시트 프로그램에서 복사한 데이터를 마크다운 테이블 형식으로 깔끔하게 붙여넣을 수 있습니다. 효과: 외부 표 데이터를 옵시디언으로 가져오는 과정을 극도로 단순화하여, 데이터 이전 작업의 효율을 높입니다. 9. Local REST API 기능: 로컬 REST API를 통해 외부 애플리케이션이나 스크립트가 옵시디언 노트와 상호작용할 수 있도록 해줍니다. 효과: 다른 서비스(예: Alfred, Raycast, 스크립트)와 연동하여 노트 생성, 검색, 수정을 자동화하는 등 무한한 확장 가능성을 열어줍니다. 10. Todoist Sync 기능: Todoist의 작업을 옵시디언 노트 내에서 확인하고 관리할 수 있도록 동기화합니다. 효과: 외부 할 일 관리 서비스와 지식 베이스를 연결하여, 작업의 맥락을 노트와 함께 파악하고 관리할 수 있습니다. 11. Strange New Worlds 기능: 노트 간의 연결(링크)을 시각적으로 탐색할 수 있는 독특한 인터페이스를 제공합니다. 현재 노트와 연결된 다른 노트들을 깊이별로 보여줍니다. (자세히 보기) 효과: 생각의 흐름을 따라가며 예상치 못한 아이디어를 발견하거나, 잊고 있던 노트 간의 관계를 재발견하는 데 도움을 줍니다. 12. Smart Composer 기능: 노트 내용을 컨텍스트로 활용하는 AI 채팅 기능을 제공합니다. 볼트 전체를 대상으로 RAG(Retrieval-Augmented Generation) 검색을 수행하여 글쓰기, 요약, 아이디어 생성을 돕습니다. (자세히 보기) 효과: 내가 작성한 모든 노트를 기반으로 AI와 대화하며 글을 쓸 수 있어, 개인화된 AI 글쓰기 비서처럼 활용할 수 있습니다. 13. Copy Block Link 기능: 마우스 오른쪽 클릭 메뉴에 \u0026lsquo;블록 링크 복사\u0026rsquo; 옵션을 추가하여, 특정 문단이나 블록에 대한 링크를 손쉽게 생성할 수 있습니다. 효과: 노트의 특정 부분으로 직접 연결되는 링크를 만들어, 생각을 더 세밀하게 연결하고 참조의 정확성을 높입니다. 14. Ultimate Todoist Sync 기능: Todoist와의 동기화 기능을 더욱 강화한 플러그인입니다. 효과: Todoist를 핵심 작업 관리 도구로 사용하는 유저들에게 더 안정적이고 다양한 동기화 옵션을 제공합니다. 15. Keyshots 기능: VS Code나 JetBrains 등 인기 개발 도구에서 사용되는 단축키를 옵시디언에 추가해 줍니다. 효과: 개발자나 코딩에 익숙한 사용자가 손에 익은 단축키를 그대로 사용하여 텍스트 편집 효율을 극대화할 수 있습니다. 추가 정보: Text Generator 기능: 템플릿 기반으로 텍스트를 생성하는 플러그인입니다. (자세히 보기) 효과: 반복적인 텍스트 입력을 자동화하여 문서 작성 시간을 단축시킵니다. 결론 소개해 드린 플러그인들을 활용하여 자신만의 옵시디언 작업 환경을 구축해 보세요. 각 플러그인의 기능을 조합하면 단순한 노트 앱을 넘어, 강력한 개인 지식 관리 및 생산성 시스템으로 거듭날 것입니다. 지금 바로 커뮤니티 플러그인 탐색을 시작하고 당신의 두 번째 뇌를 업그레이드해 보세요.\n","permalink":"https://cdecl.github.io/devops/obsidian-plugins-guide/","summary":"\u003cp\u003eObsidian은 그 자체로도 강력한 노트 앱이지만, 진정한 힘은 커뮤니티 플러그인을 통해 발휘됩니다. 수많은 플러그인 중에서 어떤 것을 선택해야 할지 막막한 분들을 위해, 생산성을 극대화하고 노트 경험을 한 차원 높여줄 필수 플러그인 15가지를 엄선하여 소개합니다.\u003c/p\u003e\n\u003ch2 id=\"플러그인-목록\"\u003e플러그인 목록\u003c/h2\u003e\n\u003ch3 id=\"1-tasks\"\u003e1. Tasks\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003e기능:\u003c/strong\u003e 옵시디언 내에서 강력한 할 일 관리 시스템을 구축합니다. 마감일, 반복 작업, 우선순위, 필터링 등 체계적인 작업 관리에 필요한 모든 기능을 제공합니다. (\u003ca href=\"https://cdecl.github.io/devops/obsidian-tasks-plugin-guide\"\u003e자세히 보기\u003c/a\u003e)\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e효과:\u003c/strong\u003e 별도의 할 일 관리 앱 없이 옵시디언 내에서 모든 작업을 추적하고 관리할 수 있어 지식 관리와 작업 관리를 하나로 통합할 수 있습니다.\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"2-advanced-tables\"\u003e2. Advanced Tables\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003e기능:\u003c/strong\u003e 마크다운 테이블 작성을 획기적으로 개선합니다. \u003ccode\u003eTab\u003c/code\u003e 키를 이용한 셀 이동, 자동 서식 지정, 간단한 수식 계산 등 고급 편집 기능을 지원합니다.\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e효과:\u003c/strong\u003e 복잡한 표를 만들 때 드는 시간과 노력을 크게 줄여주어, 데이터를 정리하고 비교하는 작업을 훨씬 수월하게 만들어 줍니다.\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"3-style-settings\"\u003e3. Style Settings\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003e기능:\u003c/strong\u003e 테마나 다른 플러그인의 디자인을 코딩 없이 세밀하게 조정할 수 있게 해줍니다. 글꼴, 색상, 간격 등 다양한 시각적 요소를 사용자 인터페이스를 통해 직접 변경할 수 있습니다.\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e효과:\u003c/strong\u003e 나만의 맞춤형 옵시디언 환경을 손쉽게 구축하여 시각적 만족도와 가독성을 높일 수 있습니다.\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"4-git\"\u003e4. Git\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003e기능:\u003c/strong\u003e 옵시디언 볼트를 Git 저장소로 만들어 버전 관리를 자동화합니다. 설정된 시간마다 자동으로 변경 사항을 커밋하고 원격 저장소에 푸시합니다.\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e효과:\u003c/strong\u003e 모든 노트의 변경 이력을 안전하게 보관하고, 실수로 내용을 삭제하거나 잘못 수정했을 때 언제든지 이전 상태로 복원할 수 있어 데이터 안정성이 크게 향상됩니다.\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"5-iconize\"\u003e5. Iconize\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003e기능:\u003c/strong\u003e 파일, 폴더, 노트 제목 등 옵시디언의 거의 모든 요소에 아이콘을 추가할 수 있게 해줍니다.\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e효과:\u003c/strong\u003e 시각적인 구분을 통해 원하는 정보를 더 빠르고 직관적으로 찾을 수 있도록 도와주며, 파일 탐색기를 더 다채롭게 꾸밀 수 있습니다.\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"6-minimal-theme-settings\"\u003e6. Minimal Theme Settings\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003e기능:\u003c/strong\u003e 인기 테마인 \u0026lsquo;Minimal\u0026rsquo;의 색상, 글꼴, 레이아웃 등을 세부적으로 설정할 수 있는 전용 패널을 제공합니다.\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e효과:\u003c/strong\u003e Minimal 테마 사용자에게 최적화된 맞춤 설정을 제공하여, 개인의 취향에 완벽하게 부합하는 작업 환경을 만들 수 있습니다.\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"7-file-explorer-note-count\"\u003e7. File Explorer Note Count\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003e기능:\u003c/strong\u003e 파일 탐색기의 각 폴더명 옆에 해당 폴더에 포함된 노트의 개수를 표시해 줍니다.\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e효과:\u003c/strong\u003e 폴더별 노트 분포를 한눈에 파악할 수 있어, 노트 정리 및 구조화에 유용한 정보를 제공합니다.\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"8-excel-to-markdown-table\"\u003e8. Excel to Markdown Table\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003e기능:\u003c/strong\u003e Microsoft Excel, Google Sheets, Apple Numbers 등 스프레드시트 프로그램에서 복사한 데이터를 마크다운 테이블 형식으로 깔끔하게 붙여넣을 수 있습니다.\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e효과:\u003c/strong\u003e 외부 표 데이터를 옵시디언으로 가져오는 과정을 극도로 단순화하여, 데이터 이전 작업의 효율을 높입니다.\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"9-local-rest-api\"\u003e9. Local REST API\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003e기능:\u003c/strong\u003e 로컬 REST API를 통해 외부 애플리케이션이나 스크립트가 옵시디언 노트와 상호작용할 수 있도록 해줍니다.\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e효과:\u003c/strong\u003e 다른 서비스(예: Alfred, Raycast, 스크립트)와 연동하여 노트 생성, 검색, 수정을 자동화하는 등 무한한 확장 가능성을 열어줍니다.\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"10-todoist-sync\"\u003e10. Todoist Sync\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003e기능:\u003c/strong\u003e Todoist의 작업을 옵시디언 노트 내에서 확인하고 관리할 수 있도록 동기화합니다.\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e효과:\u003c/strong\u003e 외부 할 일 관리 서비스와 지식 베이스를 연결하여, 작업의 맥락을 노트와 함께 파악하고 관리할 수 있습니다.\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"11-strange-new-worlds\"\u003e11. Strange New Worlds\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003e기능:\u003c/strong\u003e 노트 간의 연결(링크)을 시각적으로 탐색할 수 있는 독특한 인터페이스를 제공합니다. 현재 노트와 연결된 다른 노트들을 깊이별로 보여줍니다. (\u003ca href=\"https://cdecl.github.io/devops/obsidian-smart-connections-plugin\"\u003e자세히 보기\u003c/a\u003e)\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e효과:\u003c/strong\u003e 생각의 흐름을 따라가며 예상치 못한 아이디어를 발견하거나, 잊고 있던 노트 간의 관계를 재발견하는 데 도움을 줍니다.\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"12-smart-composer\"\u003e12. Smart Composer\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003e기능:\u003c/strong\u003e 노트 내용을 컨텍스트로 활용하는 AI 채팅 기능을 제공합니다. 볼트 전체를 대상으로 RAG(Retrieval-Augmented Generation) 검색을 수행하여 글쓰기, 요약, 아이디어 생성을 돕습니다. (\u003ca href=\"https://cdecl.github.io/devops/obsidian-smart-composer-guide\"\u003e자세히 보기\u003c/a\u003e)\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e효과:\u003c/strong\u003e 내가 작성한 모든 노트를 기반으로 AI와 대화하며 글을 쓸 수 있어, 개인화된 AI 글쓰기 비서처럼 활용할 수 있습니다.\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"13-copy-block-link\"\u003e13. Copy Block Link\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003e기능:\u003c/strong\u003e 마우스 오른쪽 클릭 메뉴에 \u0026lsquo;블록 링크 복사\u0026rsquo; 옵션을 추가하여, 특정 문단이나 블록에 대한 링크를 손쉽게 생성할 수 있습니다.\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e효과:\u003c/strong\u003e 노트의 특정 부분으로 직접 연결되는 링크를 만들어, 생각을 더 세밀하게 연결하고 참조의 정확성을 높입니다.\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"14-ultimate-todoist-sync\"\u003e14. Ultimate Todoist Sync\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003e기능:\u003c/strong\u003e Todoist와의 동기화 기능을 더욱 강화한 플러그인입니다.\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e효과:\u003c/strong\u003e Todoist를 핵심 작업 관리 도구로 사용하는 유저들에게 더 안정적이고 다양한 동기화 옵션을 제공합니다.\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"15-keyshots\"\u003e15. Keyshots\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003e기능:\u003c/strong\u003e VS Code나 JetBrains 등 인기 개발 도구에서 사용되는 단축키를 옵시디언에 추가해 줍니다.\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e효과:\u003c/strong\u003e 개발자나 코딩에 익숙한 사용자가 손에 익은 단축키를 그대로 사용하여 텍스트 편집 효율을 극대화할 수 있습니다.\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"추가-정보-text-generator\"\u003e추가 정보: Text Generator\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003e기능:\u003c/strong\u003e 템플릿 기반으로 텍스트를 생성하는 플러그인입니다. (\u003ca href=\"https://cdecl.github.io/devops/obsidian-text-generator-plugin\"\u003e자세히 보기\u003c/a\u003e)\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e효과:\u003c/strong\u003e 반복적인 텍스트 입력을 자동화하여 문서 작성 시간을 단축시킵니다.\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"결론\"\u003e결론\u003c/h2\u003e\n\u003cp\u003e소개해 드린 플러그인들을 활용하여 자신만의 옵시디언 작업 환경을 구축해 보세요. 각 플러그인의 기능을 조합하면 단순한 노트 앱을 넘어, 강력한 개인 지식 관리 및 생산성 시스템으로 거듭날 것입니다. 지금 바로 커뮤니티 플러그인 탐색을 시작하고 당신의 두 번째 뇌를 업그레이드해 보세요.\u003c/p\u003e","title":"옵시디언 개인 플러그인 15선"},{"content":"Obsidian은 강력한 노트 테이킹 앱이지만, 방대하게 쌓인 노트를 활용해 새로운 콘텐츠를 만드는 것은 종종 어려운 과제입니다. Obsidian Smart Composer는 이러한 문제를 해결하기 위해 등장한 플러그인으로, 내 볼트(Vault)의 모든 콘텐츠를 이해하는 개인 AI 비서처럼 작동합니다. 이 글에서는 Smart Composer의 핵심 기능과 함께, 실제 시나리오 기반의 효율적인 활용법을 자세히 알아보겠습니다.\nSmart Composer란? Smart Composer(GitHub)는 Obsidian 내에서 AI를 활용하여 글쓰기 효율을 극대화하는 플러그인입니다. 단순히 ChatGPT를 연동하는 것을 넘어, 특정 노트나 폴더, 심지어 웹사이트와 유튜브 영상까지 \u0026lsquo;컨텍스트\u0026rsquo;로 참조하여 AI와 대화할 수 있습니다. 이를 통해 내 지식 기반 위에서 더욱 정확하고 맥락에 맞는 결과물을 얻을 수 있습니다.\nSmart Composer의 주요 기능 Smart Composer는 글쓰기 과정을 돕는 강력하고 직관적인 기능들을 제공합니다.\n컨텍스트 채팅 (Contextual Chat): 채팅창에 @를 입력하여 특정 파일이나 폴더를 컨텍스트로 손쉽게 추가할 수 있습니다. AI는 지정된 내용을 기반으로 답변을 생성합니다. 멀티미디어 컨텍스트: 웹사이트 링크, 이미지, 유튜브 비디오를 컨텍스트로 추가할 수 있습니다. 웹사이트 내용은 자동으로 추출되고, 유튜브 영상은 스크립트가 자동으로 포함됩니다. 수정 제안 및 적용 (Apply Edit): AI가 제안한 수정 사항을 단 한 번의 클릭으로 본문에 바로 적용할 수 있어, 교정 및 편집 작업이 매우 편리해집니다. 볼트 전체 검색 (Vault Search - RAG): Shift + Enter를 누르면 볼트 전체에서 질문과 관련된 노트를 자동으로 찾아 컨텍스트로 활용합니다. 산재된 아이디어를 연결하는 데 매우 유용합니다. 커스텀 모델 지원: OpenAI, Anthropic, Google(Gemini) 등 다양한 AI 모델을 API 키 설정을 통해 사용할 수 있습니다. OpenRouter나 로컬 LLM(Ollama, LM Studio) 연동도 지원하여 유연성을 높였습니다. 프롬프트 템플릿: 자주 사용하는 질문이나 작업 형식을 템플릿으로 저장해두고 / 키로 빠르게 불러와 사용할 수 있습니다. 주요 기능 사용법 Smart Composer의 강력한 기능들을 제대로 활용하기 위한 구체적인 사용법입니다.\n1. 컨텍스트 채팅 (Contextual Chat) 특정 노트나 웹사이트를 AI에게 알려주고 싶을 때 사용합니다.\n파일/폴더 참조: 채팅 입력창에서 @를 입력하면 자동 완성 목록이 나타납니다. 참조하고 싶은 파일이나 폴더를 선택하세요. 웹사이트 참조: 웹사이트 주소(URL)를 복사하여 채팅창에 그대로 붙여넣으면, Smart Composer가 자동으로 해당 페이지의 콘텐츠를 읽어 컨텍스트에 포함시킵니다. 유튜브 영상 참조: 유튜브 영상 링크를 붙여넣으면 영상의 스크립트(자막)가 컨텍스트로 자동 추가됩니다. 2. 볼트 전체 검색 (Vault Search - RAG) 내 모든 노트 중에서 현재 대화와 관련된 내용을 AI가 스스로 찾게 하고 싶을 때 사용합니다.\n채팅 입력창에 질문을 입력한 후, Enter 대신 Shift + Enter를 누릅니다. AI는 질문의 의도를 파악하여 내 볼트 전체에서 가장 관련성 높은 노트들을 자동으로 찾아내 컨텍스트로 사용한 후 답변을 생성합니다. 3. 수정 제안 및 적용 (Apply Edit) AI의 제안을 내 노트에 바로 반영하고 싶을 때 사용합니다.\nAI의 답변 아래에 있는 Apply Edit 버튼을 클릭합니다. 제안된 내용이 현재 노트의 커서 위치에 즉시 적용됩니다. 교정, 요약, 번역 등 다양한 편집 작업을 빠르고 편리하게 수행할 수 있습니다. 4. 프롬프트 템플릿 (Prompt Templates) 반복적인 작업을 자동화하고 싶을 때 유용합니다.\n채팅 입력창에서 /를 입력하면 저장된 프롬플릿 템플릿 목록이 나타납니다. 원하는 템플릿을 선택하면 미리 정의된 프롬프트가 자동으로 입력되어, 반복적인 질문을 손쉽게 실행할 수 있습니다. 효율적인 사용법 예시 (시나리오 기반) Smart Composer는 다양한 시나리오에서 글쓰기 생산성을 획기적으로 높여줍니다.\n시나리오 1: 여러 노트를 종합하여 새로운 글 초안 작성하기 산발적으로 작성해 둔 여러 아이디어 노트를 합쳐 하나의 완성된 글로 만들고 싶을 때, Smart Composer는 뛰어난 능력을 발휘합니다.\n새로운 노트를 열고 Smart Composer 채팅창을 켭니다. 채팅창에 @를 입력하고, 초안의 재료가 될 노트들(@아이디어 노트 A, @관련 리서치 노트, @미완성 글 조각)을 차례로 태그하여 컨텍스트에 추가합니다. 다음과 같이 AI에게 요청합니다. \u0026ldquo;위에 참조된 노트들의 핵심 아이디어를 종합해서 \u0026lsquo;AI 시대의 글쓰기 전략\u0026rsquo;이라는 주제로 블로그 글 초안을 작성해 줘. 서론, 본론, 결론 구조를 갖추고, 각주 스타일로 출처를 표기해 줘.\u0026rdquo;\nAI가 생성한 초안을 검토하고, Apply Edit 기능을 사용해 필요한 부분을 본문에 바로 적용하며 글을 다듬습니다. 시나리오 2: 웹 아티클과 내 생각을 융합하여 리서치 노트 만들기 특정 주제에 대해 웹 리서치를 하다가 중요한 아티클을 발견했을 때, 이를 내 지식 체계와 연결하여 깊이 있는 노트를 만들 수 있습니다.\n리서치 노트를 작성하던 중, Smart Composer 채팅창에 방금 발견한 웹 아티클 주소를 붙여넣습니다. @를 이용해 이 주제와 관련된 내 기존 노트(@디지털 정원 가꾸기)도 컨텍스트에 추가합니다. AI에게 다음과 같이 지시합니다. \u0026ldquo;첨부된 웹 아티클의 내용을 세 가지 핵심 포인트로 요약하고, @디지털 정원 가꾸기 노트에 있는 내 관점과 비교해서 설명해 줘. 두 아이디어의 공통점과 차이점을 명확하게 분석해 줘.\u0026rdquo;\nAI의 분석 결과를 바탕으로, 단순한 정보 요약을 넘어선 자신만의 통찰이 담긴 리서치 노트를 완성할 수 있습니다. 시나리오 3: 코드 리팩토링 및 문서화 작업 개발자에게도 Smart Composer는 훌륭한 보조 도구입니다.\n리팩토링할 코드 파일(@my_script.py)을 컨텍스트로 추가합니다. AI에게 코드 개선을 요청합니다. \u0026ldquo;이 파이썬 스크립트에서 비효율적인 부분을 찾아서 더 읽기 쉽고 성능이 좋은 코드로 리팩토링해 줘. 변경된 부분을 중심으로 제안해 줘.\u0026rdquo;\nAI가 제안한 코드를 Apply Edit으로 바로 적용하거나, 부분적으로 수정하여 반영합니다. 이어서 문서화 작업을 요청할 수 있습니다. \u0026ldquo;방금 수정한 코드를 기반으로, 각 함수가 어떤 역할을 하는지 설명하는 주석(docstring)을 추가해 줘.\u0026rdquo;\n결론 Obsidian Smart Composer는 단순히 글을 대신 써주는 도구가 아닙니다. 내가 쌓아온 지식(노트)을 AI가 이해하고 활용할 수 있도록 연결하는 \u0026lsquo;지능형 증강 글쓰기\u0026rsquo; 도구에 가깝습니다. 컨텍스트를 자유자재로 조합하고 AI와 대화하며 아이디어를 발전시키는 과정을 통해, 우리는 더 깊이 있고 창의적인 결과물을 더 효율적으로 만들어낼 수 있습니다.\n산재된 노트를 보며 막막함을 느꼈거나, 여러 정보를 종합하는 데 어려움을 겪었다면 Smart Composer를 통해 당신의 두 번째 뇌를 한 단계 더 스마트하게 활용해 보세요.\n","permalink":"https://cdecl.github.io/devops/obsidian-smart-composer-guide/","summary":"\u003cp\u003eObsidian은 강력한 노트 테이킹 앱이지만, 방대하게 쌓인 노트를 활용해 새로운 콘텐츠를 만드는 것은 종종 어려운 과제입니다. Obsidian Smart Composer는 이러한 문제를 해결하기 위해 등장한 플러그인으로, 내 볼트(Vault)의 모든 콘텐츠를 이해하는 개인 AI 비서처럼 작동합니다. 이 글에서는 Smart Composer의 핵심 기능과 함께, 실제 시나리오 기반의 효율적인 활용법을 자세히 알아보겠습니다.\u003c/p\u003e\n\u003ch2 id=\"smart-composer란\"\u003eSmart Composer란?\u003c/h2\u003e\n\u003cp\u003eSmart Composer(\u003ca href=\"https://github.com/glowingjade/obsidian-smart-composer\"\u003eGitHub\u003c/a\u003e)는 Obsidian 내에서 AI를 활용하여 글쓰기 효율을 극대화하는 플러그인입니다. 단순히 ChatGPT를 연동하는 것을 넘어, 특정 노트나 폴더, 심지어 웹사이트와 유튜브 영상까지 \u0026lsquo;컨텍스트\u0026rsquo;로 참조하여 AI와 대화할 수 있습니다. 이를 통해 내 지식 기반 위에서 더욱 정확하고 맥락에 맞는 결과물을 얻을 수 있습니다.\u003c/p\u003e","title":"Obsidian Smart Composer - 내 모든 노트를 아는 AI 글쓰기 비서"},{"content":"수많은 대규모 언어 모델(LLM)이 등장하면서, 개발자와 기획자들은 프로젝트에 가장 적합한 모델을 선택하고 연동하는 데 많은 시간과 노력을 쏟고 있습니다. OpenRouter는 이러한 문제를 해결하기 위해 등장한 플랫폼으로, 다양한 AI 모델을 단일 API로 통합하여 제공하는 \u0026lsquo;AI의 관문(Gateway)\u0026rsquo; 역할을 합니다. 이 글에서는 OpenRouter의 핵심 기능부터 요금 체계, 활용 방법까지 자세히 알아보겠습니다.\nOpenRouter란? OpenRouter(https://openrouter.ai/)는 GPT-4, Claude 3.5 Sonnet, Gemini 2.5 Flash, Llama 3.1 등 여러 제공업체의 최신 AI 모델들을 하나의 표준화된 API 엔드포인트로 묶어 제공하는 서비스입니다. 개발자는 더 이상 각 모델의 API 문서를 따로 학습하거나, 여러 결제 시스템을 관리할 필요 없이 OpenRouter를 통해 원하는 모델을 손쉽게 테스트하고 실제 프로덕션에 적용할 수 있습니다.\nOpenRouter의 주요 기능 OpenRouter는 단순한 API 중계를 넘어, AI 모델 활용을 최적화하는 강력한 기능들을 제공합니다.\n통합 API (Unified API): 모든 모델을 OpenAI API와 유사한 형식으로 사용할 수 있어, 모델을 변경하더라도 코드 수정을 최소화할 수 있습니다. 비용 및 성능 최적화: OpenRouter는 여러 제공업체의 모델 가격과 응답 속도를 지속적으로 추적하여, 사용자에게 가장 경제적이고 빠른 옵션을 추천합니다. 통합 결제 시스템: 수많은 모델을 사용하더라도 OpenRouter에 한 번만 크레딧을 충전하면 되어, 결제 관리가 매우 간편해집니다. 높은 가용성과 안정성: 특정 모델 제공업체에 문제가 발생할 경우, 대체 가능한 다른 제공업체로 요청을 자동 라우팅하여 서비스 중단을 방지합니다. 최신 모델 접근성: 새로운 AI 모델이 출시되면 빠르게 지원 목록에 추가되므로, 사용자는 항상 최신 기술을 손쉽게 테스트하고 도입할 수 있습니다. 요금 체계 및 가격 모델 OpenRouter의 요금은 철저히 사용한 만큼 지불하는(Pay-as-you-go) 방식입니다. 기본적으로 1백만 토큰(Token)당 비용으로 책정되며, 입력(Prompt) 토큰과 출력(Completion) 토큰의 비용이 다르게 부과됩니다.\n가격대는 크게 4가지로 나눌 수 있습니다.\n가격 등급 1M 토큰당 비용 주요 용도 무료 (Free) $0 학습, 프로토타이핑, 개인 프로젝트 저예산 (Budget) $0.01 - $5 대용량 데이터 처리, 초안 작성 표준 (Standard) $5 - $20 일반적인 프로덕션 애플리케이션 프리미엄 (Premium) $20+ 고도의 정확성이 요구되는 핵심 작업 무료 모델: 한계와 가능성 OpenRouter는 실험과 학습을 위해 다양한 무료 모델을 제공합니다. Mistral, DeepSeek, Google, Meta 등에서 제공하는 모델들을 비용 부담 없이 사용할 수 있습니다.\n무료 모델의 장점 비용 없이 AI 애플리케이션을 개발하고 테스트할 수 있습니다. 아이디어 구체화 및 프로토타이핑에 이상적입니다. 예산 제약 없이 다양한 모델의 성능을 비교해볼 수 있습니다. 무료 모델의 한계 속도 제한(Rate Limiting): 사용량이 많은 피크 타임에는 응답 속도가 느려질 수 있습니다. 데이터 활용: 입력된 데이터가 모델 성능 향상을 위해 사용될 수 있습니다. (민감한 정보 사용 시 주의 필요) SLA 부재: 서비스 수준 협약(SLA)을 보장하지 않으므로, 미션 크리티컬한 프로덕션 환경에는 적합하지 않을 수 있습니다. 제한된 기능: 일부 고급 기능이나 긴 컨텍스트(Context) 길이를 지원하지 않을 수 있습니다. 무료 모델 선택 가이드 및 사용자 제약 OpenRouter에서 제공하는 무료 모델은 각기 다른 강점을 가지고 있어, 작업의 성격에 맞게 선택하는 것이 중요합니다.\n어떤 무료 모델을 선택해야 할까? 범용적인 대화 및 콘텐츠 생성: DeepSeek Chat (Free)나 Google/Gemini Flash (Free)는 뛰어난 추론 능력과 범용성을 갖추고 있어 대부분의 일반적인 작업에 적합합니다. 코딩 및 소프트웨어 개발: Mistral/Devstral Small (Free)은 코드 생성 및 이해에 특화되어 있어 개발 관련 작업에 가장 좋은 효율을 보입니다. 다양한 언어 지원 및 실험: Meta/Llama 3.1 8B (Free)와 같은 오픈소스 모델은 특정 언어 작업이나 새로운 아이디어를 실험해보기에 좋습니다. 무료 사용자의 주요 제약 사항 무료 모델 사용은 비용적인 이점이 크지만, OpenRouter의 공식 문서에 명시된 몇 가지 명확한 제약 사항을 인지하고 사용해야 합니다.\n요청 횟수 제한 (Rate Limits): 무료 모델(:free) 사용자는 아래와 같은 요청 수 제한을 받습니다.\n구분 조건 요청 한도 분당 제한 모든 사용자 20회 / 분 일일 제한 10 크레딧 미만 구매 계정 50회 / 일 10 크레딧 이상 구매 계정 1,000회 / 일 마이너스 크레딧 잔액: 계정의 크레딧이 마이너스 상태가 되면, 무료 모델을 포함한 모든 요청이 402 오류와 함께 거부될 수 있습니다. 다시 사용하려면 크레딧을 충전하여 잔액을 0 이상으로 만들어야 합니다.\n데이터 프라이버시: 일부 무료 모델은 서비스 개선 및 모델 훈련을 위해 입력된 데이터를 활용할 수 있습니다. 따라서 개인정보나 회사의 민감한 데이터를 무료 모델에 입력하는 것은 피해야 합니다.\n우선순위 큐(Priority Queue): 유료 사용자는 요청 시 더 높은 우선순위를 가집니다. 따라서 트래픽이 몰리는 시간에는 무료 사용자의 요청 처리가 지연될 수 있습니다.\n이러한 제약에도 불구하고, 무료 모델은 개인 프로젝트, 학습, 프로토타이핑 단계에서 매우 강력한 도구입니다. 본격적인 상용 서비스를 개발하거나 더 높은 한도가 필요할 경우에는 소액이라도 크레딧을 충전하여 일일 제한을 늘리거나, 저비용의 유료 모델로 전환하는 것을 고려하는 것이 좋습니다.\nAPI를 활용하는 대표적인 Agent 워크플로우 OpenRouter의 진정한 힘은 에이전트(Agent) 워크플로우를 구축할 때 드러납니다. AI 에이전트는 단일 작업을 위해 여러 번 모델을 호출하여 계획, 실행, 검토, 수정을 반복합니다. 예를 들어, 코딩 에이전트는 요구사항 분석, 코드 작성, 디버깅, 문서화 등 각 단계마다 API를 호출하며 작업을 완료합니다.\n이러한 워크플로우에서는 API 비용이 빠르게 증가할 수 있기 때문에, 작업의 성격에 맞춰 저비용 모델과 고성능 모델을 조합하는 전략이 매우 중요합니다.\nOpenRouter 주요 모델 리스트업 (2025년 기준) 모델명 제공사 1M 토큰 비용 (입력/출력) 특징 및 추천 용도 Claude 3.5 Sonnet Anthropic $3.00 / $15.00 지능, 비용, 속도의 균형. 범용적인 작업에 탁월 GPT-4o OpenAI $2.50 / $10.00 멀티모달(Vision) 지원. 다재다능한 스위스 아미 나이프 Gemini 2.5 Flash Google $0.15 / $0.60 1M 토큰의 방대한 컨텍스트, 빠른 추론 속도 DeepSeek Coder V2 DeepSeek $0.27 / $1.10 압도적인 가성비의 코딩 전문 모델 Llama 3.1 405B Meta $2.70 / $2.70 현존 가장 큰 규모의 오픈소스 모델 Devstral Small (Free) Mistral 무료 소프트웨어 엔지니어링에 최적화된 무료 코딩 모델 DeepSeek Chat (Free) DeepSeek 무료 강력한 추론 능력을 갖춘 무료 범용 모델 결론 OpenRouter는 복잡한 AI 모델의 세계를 탐험하는 개발자들에게 필수적인 도구로 자리 잡고 있습니다. 다양한 모델을 손쉽게 비교하고, 비용을 최적화하며, 안정적인 서비스를 구축할 수 있도록 지원합니다. 무료 모델로 시작하여 아이디어를 구체화하고, 필요에 따라 저비용 모델과 프리미엄 모델을 조합하는 스마트한 전략을 통해 누구나 저렴한 비용으로 강력한 AI 애플리케이션을 만들 수 있습니다.\nAI 혁명은 더 이상 비싸고 어려운 기술이 아닙니다. OpenRouter와 함께라면 누구나 이 혁신적인 기술의 잠재력을 최대한 활용할 수 있습니다.\n","permalink":"https://cdecl.github.io/devops/openrouter-ai-gateway-guide/","summary":"\u003cp\u003e수많은 대규모 언어 모델(LLM)이 등장하면서, 개발자와 기획자들은 프로젝트에 가장 적합한 모델을 선택하고 연동하는 데 많은 시간과 노력을 쏟고 있습니다. OpenRouter는 이러한 문제를 해결하기 위해 등장한 플랫폼으로, 다양한 AI 모델을 단일 API로 통합하여 제공하는 \u0026lsquo;AI의 관문(Gateway)\u0026rsquo; 역할을 합니다. 이 글에서는 OpenRouter의 핵심 기능부터 요금 체계, 활용 방법까지 자세히 알아보겠습니다.\u003c/p\u003e\n\u003ch2 id=\"openrouter란\"\u003eOpenRouter란?\u003c/h2\u003e\n\u003cp\u003eOpenRouter(\u003ca href=\"https://openrouter.ai/\"\u003ehttps://openrouter.ai/\u003c/a\u003e)는 GPT-4, Claude 3.5 Sonnet, Gemini 2.5 Flash, Llama 3.1 등 여러 제공업체의 최신 AI 모델들을 하나의 표준화된 API 엔드포인트로 묶어 제공하는 서비스입니다. 개발자는 더 이상 각 모델의 API 문서를 따로 학습하거나, 여러 결제 시스템을 관리할 필요 없이 OpenRouter를 통해 원하는 모델을 손쉽게 테스트하고 실제 프로덕션에 적용할 수 있습니다.\u003c/p\u003e","title":"OpenRouter - 모든 AI 모델을 하나로 연결하는 관문"},{"content":"Obsidian을 단순한 노트 앱을 넘어 강력한 할 일 관리(To-Do) 도구로 만들어주는 Tasks 플러그인에 대해 알아봅니다. 이 플러그인을 활용하면 여러 노트에 흩어져 있는 할 일들을 한 곳에서 모아보고, 마감일, 우선순위, 반복 설정 등 다양한 기능을 통해 체계적으로 관리할 수 있습니다.\nTasks 플러그인 핵심 기능 Tasks 플러그인은 마크다운 기반의 할 일 관리를 한 단계 업그레이드해줍니다. 기본적인 체크박스 외에 다양한 메타데이터를 추가하여 할 일을 더욱 스마트하게 관리할 수 있습니다.\n기본 Task 생성 가장 기본적인 할 일은 마크다운의 체크박스 문법을 사용하여 생성합니다.\n- [ ] 책 읽기 - [ ] 블로그 글 작성하기 - [ ] 운동하기 상태 표현 Tasks 플러그인은 단순한 \u0026lsquo;미완료/완료\u0026rsquo;를 넘어 다양한 상태를 표현할 수 있습니다.\n완료 (Done): x 또는 X를 괄호 안에 넣어 표시합니다. - [x] 책 읽기 ✅ 2025-07-22 진행 중 (In Progress): -를 괄호 안에 넣어 표시합니다. - [-] 블로그 글 작성하기 취소됨 (Cancelled): ~를 괄호 안에 넣어 표시합니다. - [~] 약속 취소 속성 추가 (날짜, 우선순위, 반복) Task에 이모지(Emoji)와 날짜를 조합하여 다양한 속성을 부여할 수 있습니다.\n마감일 (Due Date): 📅 YYYY-MM-DD - [ ] 프로젝트 제안서 제출 📅 2025-07-31 예정일 (Scheduled Date): ⏳ YYYY-MM-DD - [ ] 회의 준비 ⏳ 2025-07-25 시작일 (Start Date): 🛫 YYYY-MM-DD - [ ] 새로운 기능 개발 시작 🛫 2025-08-01 완료일 (Done Date): ✅ YYYY-MM-DD (완료 시 자동으로 추가됨) 우선순위 (Priority): 🔼 (높음), ⏫ (가장 높음), 🔽 (낮음) - [ ] 긴급 버그 수정 ⏫ 📅 2025-07-23 반복 설정 (Recurrence): 🔁 규칙 (e.g., every day, every week on Sunday) - [ ] 주간 보고서 작성 🔁 every Friday 📅 2025-07-25 Task 쿼리 사용하기 Tasks 플러그인의 가장 강력한 기능은 tasks 코드 블록을 사용하여 여러 노트에 흩어져 있는 할 일들을 동적으로 모아보는 것입니다.\n기본 쿼리 모든 할 일을 표시합니다.\n```tasks not done ``` 고급 쿼리 예시 다양한 필터와 정렬 옵션을 조합하여 원하는 할 일 목록을 만들 수 있습니다.\n오늘까지 마감인 할 일:\n```tasks due before tomorrow not done ``` \u0026lsquo;프로젝트A\u0026rsquo; 태그가 있고 우선순위가 높은 할 일:\n```tasks tags include #프로젝트A priority is high not done ``` 경로(path)를 기준으로 특정 폴더의 할 일만 보기:\n```tasks path includes \u0026#34;프로젝트/2025년\u0026#34; not done sort by due ``` 외부 연동: Todoist와 동기화하기 Obsidian을 Todoist와 연동하면 강력한 시너지를 낼 수 있습니다. 모바일에서는 Todoist로 빠르게 할 일을 입력하고, 데스크톱에서는 Obsidian에서 관련 노트와 함께 할 일을 관리하는 워크플로우를 구축할 수 있습니다. 이를 위한 대표적인 커뮤니티 플러그인 두 가지를 비교해 보겠습니다.\n1. Todoist Sync Plugin (단방향: Todoist → Obsidian) 이 플러그인은 주로 Todoist의 작업을 Obsidian으로 가져오는 단방향 동기화에 초점을 맞춥니다.\n작동 방식: Todoist API를 사용하여 필터링된 작업 목록(예: \u0026lsquo;오늘 마감\u0026rsquo;, \u0026lsquo;프로젝트 A\u0026rsquo;)을 Obsidian 노트에 마크다운 형식으로 렌더링합니다. todoist 코드 블록을 사용합니다. 설정: 커뮤니티 플러그인에서 \u0026ldquo;Todoist Sync\u0026quot;를 설치하고 활성화합니다. Todoist 설정에서 API 토큰을 발급받아 플러그인 설정에 입력합니다. 사용 예시: ```todoist { \u0026#34;name\u0026#34;: \u0026#34;오늘 할 일\u0026#34;, \u0026#34;filter\u0026#34;: \u0026#34;today | overdue\u0026#34; } ``` 위와 같이 작성하면 오늘 마감이거나 기한이 지난 Todoist 작업 목록이 해당 위치에 표시됩니다. 장점: Obsidian에서 노트를 작성하면서 Todoist 작업 목록을 함께 확인하고 싶을 때 유용합니다. Obsidian 내에서 Todoist 작업을 완료 처리하는 것도 가능합니다. 2. Ultimate Todoist Sync (양방향) 이름처럼 더 강력한 양방향(Two-way) 동기화 기능을 제공하는 플러그인입니다.\n작동 방식: Todoist → Obsidian (가져오기): Todoist에서 생성/수정한 작업이 설정된 규칙에 따라 Obsidian의 특정 노트로 동기화됩니다. Obsidian → Todoist (내보내기): Obsidian의 동기화된 노트에서 작업을 수정/완료하면, 변경사항이 다시 Todoist에 반영됩니다. 설정: 커뮤니티 플러그인에서 \u0026ldquo;Ultimate Todoist Sync\u0026quot;를 설치하고 활성화합니다. 마찬가지로 Todoist API 토큰을 플러그인 설정에 입력합니다. 동기화할 Todoist 프로젝트나 필터, 그리고 동기화 내용을 저장할 Obsidian 노트를 지정하는 등 조금 더 상세한 설정이 필요합니다. 장점: 두 앱의 데이터를 항상 최신 상태로 유지할 수 있어, 양쪽 앱을 모두 활발하게 사용하는 사용자에게 적합합니다. 어떤 플러그인을 선택할까? 기능 Todoist Sync Plugin Ultimate Todoist Sync 동기화 방향 단방향 (Todoist → Obsidian) 양방향 (Obsidian ↔ Todoist) 주요 용도 Todoist 작업을 Obsidian에서 보기 양쪽 앱의 할 일을 완전히 동기화하기 설정 복잡도 간단함 다소 복잡함 추천 사용자 Todoist를 메인으로 사용하며 Obsidian에서 작업을 확인하고 싶을 때 Obsidian과 Todoist를 모두 적극적으로 사용하는 경우 자신의 작업 스타일에 맞는 플러그인을 선택하여 두 앱의 장점을 최대한 활용하는 효율적인 할 일 관리 시스템을 만들어 보세요.\n추가 팁 Create/Edit Task 모달: Command + P를 눌러 \u0026ldquo;Tasks: Create or edit task\u0026quot;를 실행하면 편리한 UI를 통해 Task를 생성하고 수정할 수 있습니다. 사용자 정의 상태: 플러그인 설정에서 자신만의 상태(Status)를 추가하여 워크플로우에 맞게 커스터마이징할 수 있습니다. Tasks 플러그인을 활용하여 Obsidian을 더욱 강력한 생산성 도구로 만들어보세요. 흩어져 있던 생각과 할 일을 한 곳에서 체계적으로 관리하며 작업 효율을 높일 수 있습니다.\n","permalink":"https://cdecl.github.io/devops/obsidian-tasks-plugin-guide/","summary":"\u003cp\u003eObsidian을 단순한 노트 앱을 넘어 강력한 할 일 관리(To-Do) 도구로 만들어주는 Tasks 플러그인에 대해 알아봅니다. 이 플러그인을 활용하면 여러 노트에 흩어져 있는 할 일들을 한 곳에서 모아보고, 마감일, 우선순위, 반복 설정 등 다양한 기능을 통해 체계적으로 관리할 수 있습니다.\u003c/p\u003e\n\u003ch2 id=\"tasks-플러그인-핵심-기능\"\u003eTasks 플러그인 핵심 기능\u003c/h2\u003e\n\u003cp\u003eTasks 플러그인은 마크다운 기반의 할 일 관리를 한 단계 업그레이드해줍니다. 기본적인 체크박스 외에 다양한 메타데이터를 추가하여 할 일을 더욱 스마트하게 관리할 수 있습니다.\u003c/p\u003e\n\u003ch3 id=\"기본-task-생성\"\u003e기본 Task 생성\u003c/h3\u003e\n\u003cp\u003e가장 기본적인 할 일은 마크다운의 체크박스 문법을 사용하여 생성합니다.\u003c/p\u003e","title":"Obsidian Tasks 플러그인으로 할 일 관리"},{"content":"macOS의 Mission Control과 Spaces 기능을 활용하여 여러 데스크탑 화면을 효율적으로 관리하고 이동하는 방법에 대해 알아봅니다. 자동 재정렬 기능을 끄고 단축키를 활용하면 작업 생산성을 크게 높일 수 있습니다.\nMission Control 및 Spaces 기능 Mission Control: Mac에서 열려있는 모든 윈도우와 Spaces를 한눈에 보여주는 기능입니다. 여러 데스크탑 화면(Spaces)을 만들어 사용하거나, 전체 화면으로 실행 중인 앱 윈도우를 나열하는 데 사용됩니다. Spaces: macOS에서 제공하는 가상 데스크탑 기능으로, 여러 작업 공간을 분리하여 사용할 수 있습니다. Spaces를 통해 여러 개의 데스크탑을 만들고 각 데스크탑에 작업 윈도우를 배치하여 작업 효율성을 높일 수 있습니다. 최대 16개의 Spaces를 만들 수 있습니다. Spaces 순서 변경 및 고정 Spaces 자동 재정렬 끄기 macOS에서는 Spaces를 최근 사용 내역에 따라 자동으로 재정렬하는 기능이 기본적으로 활성화되어 있습니다. 이 기능을 끄면 데스크탑 순서가 사용자가 설정한 순서대로 고정됩니다. 설정 방법: 시스템 설정 열기. 데스크탑 및 Dock 또는 Mission Control 메뉴를 찾습니다. Mission Control 설정에서 \u0026ldquo;Spaces를 최근 사용 내역에 따라 자동으로 재정렬\u0026rdquo; 옵션을 끕니다. Spaces 순서 고정의 장점 데스크탑 순서가 바뀌지 않아 작업 공간을 예측 가능하게 관리할 수 있습니다. Control + 숫자 단축키를 사용하여 원하는 데스크탑으로 빠르게 이동할 수 있습니다. Spaces 이동 방법 트랙패드 제스처 세 손가락 또는 네 손가락을 사용하여 트랙패드를 좌우로 쓸어 넘겨 Spaces를 이동할 수 있습니다. 설정 확인: 시스템 환경설정 \u0026gt; 트랙패드에서 \u0026ldquo;Mission Control\u0026rdquo; 제스처가 활성화되어 있는지 확인합니다. 키보드 단축키 Control + ← 또는 Control + → 키를 사용하여 이전 또는 다음 Spaces로 이동할 수 있습니다. Control + 숫자 (1, 2, 3...) 키를 사용하여 특정 Spaces로 바로 이동할 수 있습니다. 단축키 활성화: 시스템 환경설정 \u0026gt; 키보드 \u0026gt; 단축키 \u0026gt; Mission Control에서 \u0026ldquo;데스크탑 X로 전환\u0026rdquo; 옵션을 활성화해야 합니다. Mission Control 사용 Mission Control을 열어(F3 키 또는 Control + ↑) 화면 상단의 Spaces 막대에서 원하는 Spaces를 클릭하여 이동할 수 있습니다. 추가 팁 Mission Control 설정 시스템 설정에서 Mission Control 관련 설정을 변경하여 작업 스타일에 맞게 조정할 수 있습니다. 예를 들어, \u0026ldquo;응용 프로그램으로 전환할 때, 응용 프로그램에 대해 윈도우가 열려 있는 Space로 전환\u0026rdquo; 옵션을 활성화하면 앱 전환 시 해당 앱의 윈도우가 열려 있는 Space로 자동으로 이동합니다. 핫 코너 활용 핫 코너를 설정하여 마우스 커서를 화면 모서리로 이동하면 Mission Control이 활성화되도록 할 수 있습니다. 시스템 설정 \u0026gt; 데스크탑 및 Dock \u0026gt; 핫 코너에서 설정할 수 있습니다. 윈도우 이동 Mission Control을 사용하여 윈도우를 다른 데스크탑으로 드래그 앤 드롭할 수 있습니다. 창 상단을 클릭한 상태에서 화면 위쪽 모서리로 마우스 커서를 이동하면 Spaces 막대가 나타나고, 원하는 데스크탑으로 창을 이동시킬 수 있습니다. Dock 활용 Dock에서 앱 아이콘을 Control-클릭하여 옵션 메뉴를 열고, \u0026ldquo;Option \u0026gt; Dock에 유지\u0026quot;를 선택하면 해당 앱이 Dock에 항상 표시되도록 할 수 있습니다. 이 정보가 macOS 데스크탑 화면 이동 순서를 관리하는 데 도움이 되기를 바랍니다.\n","permalink":"https://cdecl.github.io/devops/macos-desktop-screen-switching-order/","summary":"\u003cp\u003emacOS의 Mission Control과 Spaces 기능을 활용하여 여러 데스크탑 화면을 효율적으로 관리하고 이동하는 방법에 대해 알아봅니다. 자동 재정렬 기능을 끄고 단축키를 활용하면 작업 생산성을 크게 높일 수 있습니다.\u003c/p\u003e\n\u003ch2 id=\"mission-control-및-spaces-기능\"\u003eMission Control 및 Spaces 기능\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003eMission Control:\u003c/strong\u003e Mac에서 열려있는 모든 윈도우와 Spaces를 한눈에 보여주는 기능입니다. 여러 데스크탑 화면(Spaces)을 만들어 사용하거나, 전체 화면으로 실행 중인 앱 윈도우를 나열하는 데 사용됩니다.\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eSpaces:\u003c/strong\u003e macOS에서 제공하는 가상 데스크탑 기능으로, 여러 작업 공간을 분리하여 사용할 수 있습니다. Spaces를 통해 여러 개의 데스크탑을 만들고 각 데스크탑에 작업 윈도우를 배치하여 작업 효율성을 높일 수 있습니다. 최대 16개의 Spaces를 만들 수 있습니다.\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"spaces-순서-변경-및-고정\"\u003eSpaces 순서 변경 및 고정\u003c/h2\u003e\n\u003ch3 id=\"spaces-자동-재정렬-끄기\"\u003eSpaces 자동 재정렬 끄기\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003emacOS에서는 Spaces를 최근 사용 내역에 따라 자동으로 재정렬하는 기능이 기본적으로 활성화되어 있습니다. 이 기능을 끄면 데스크탑 순서가 사용자가 설정한 순서대로 고정됩니다.\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e설정 방법:\u003c/strong\u003e\n\u003col\u003e\n\u003cli\u003e\u003cstrong\u003e시스템 설정\u003c/strong\u003e 열기.\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e데스크탑 및 Dock\u003c/strong\u003e 또는 \u003cstrong\u003eMission Control\u003c/strong\u003e 메뉴를 찾습니다.\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eMission Control\u003c/strong\u003e 설정에서 \u0026ldquo;Spaces를 최근 사용 내역에 따라 자동으로 재정렬\u0026rdquo; 옵션을 끕니다.\u003c/li\u003e\n\u003c/ol\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"spaces-순서-고정의-장점\"\u003eSpaces 순서 고정의 장점\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e데스크탑 순서가 바뀌지 않아 작업 공간을 예측 가능하게 관리할 수 있습니다.\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eControl + 숫자\u003c/code\u003e 단축키를 사용하여 원하는 데스크탑으로 빠르게 이동할 수 있습니다.\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"spaces-이동-방법\"\u003eSpaces 이동 방법\u003c/h2\u003e\n\u003ch3 id=\"트랙패드-제스처\"\u003e트랙패드 제스처\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e세 손가락 또는 네 손가락을 사용하여 트랙패드를 좌우로 쓸어 넘겨 Spaces를 이동할 수 있습니다.\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e설정 확인:\u003c/strong\u003e 시스템 환경설정 \u0026gt; 트랙패드에서 \u0026ldquo;Mission Control\u0026rdquo; 제스처가 활성화되어 있는지 확인합니다.\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"키보드-단축키\"\u003e키보드 단축키\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003eControl + ←\u003c/code\u003e 또는 \u003ccode\u003eControl + →\u003c/code\u003e 키를 사용하여 이전 또는 다음 Spaces로 이동할 수 있습니다.\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eControl + 숫자 (1, 2, 3...)\u003c/code\u003e 키를 사용하여 특정 Spaces로 바로 이동할 수 있습니다.\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003e단축키 활성화:\u003c/strong\u003e 시스템 환경설정 \u0026gt; 키보드 \u0026gt; 단축키 \u0026gt; Mission Control에서 \u0026ldquo;데스크탑 X로 전환\u0026rdquo; 옵션을 활성화해야 합니다.\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"mission-control-사용\"\u003eMission Control 사용\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003eMission Control을 열어(F3 키 또는 \u003ccode\u003eControl + ↑\u003c/code\u003e) 화면 상단의 Spaces 막대에서 원하는 Spaces를 클릭하여 이동할 수 있습니다.\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"추가-팁\"\u003e추가 팁\u003c/h2\u003e\n\u003ch3 id=\"mission-control-설정\"\u003eMission Control 설정\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e시스템 설정에서 Mission Control 관련 설정을 변경하여 작업 스타일에 맞게 조정할 수 있습니다. 예를 들어, \u0026ldquo;응용 프로그램으로 전환할 때, 응용 프로그램에 대해 윈도우가 열려 있는 Space로 전환\u0026rdquo; 옵션을 활성화하면 앱 전환 시 해당 앱의 윈도우가 열려 있는 Space로 자동으로 이동합니다.\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"핫-코너-활용\"\u003e핫 코너 활용\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e핫 코너를 설정하여 마우스 커서를 화면 모서리로 이동하면 Mission Control이 활성화되도록 할 수 있습니다. 시스템 설정 \u0026gt; 데스크탑 및 Dock \u0026gt; 핫 코너에서 설정할 수 있습니다.\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"윈도우-이동\"\u003e윈도우 이동\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003eMission Control을 사용하여 윈도우를 다른 데스크탑으로 드래그 앤 드롭할 수 있습니다. 창 상단을 클릭한 상태에서 화면 위쪽 모서리로 마우스 커서를 이동하면 Spaces 막대가 나타나고, 원하는 데스크탑으로 창을 이동시킬 수 있습니다.\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"dock-활용\"\u003eDock 활용\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003eDock에서 앱 아이콘을 Control-클릭하여 옵션 메뉴를 열고, \u0026ldquo;Option \u0026gt; Dock에 유지\u0026quot;를 선택하면 해당 앱이 Dock에 항상 표시되도록 할 수 있습니다.\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e이 정보가 macOS 데스크탑 화면 이동 순서를 관리하는 데 도움이 되기를 바랍니다.\u003c/p\u003e","title":"macOS 데스크탑 화면 이동 순서 관리하기"},{"content":"macOS에서 키를 길게 눌렀을 때 기본적으로 악센트 메뉴(예: \u0026ldquo;a\u0026quot;를 길게 누르면 à, á, â 등이 표시)가 나타나지만, 이를 키 반복(Windows와 유사한 문자 반복 입력)으로 변경할 수 있습니다.\n개요 이 문서에서는 터미널 명령어(defaults)를 사용해 ApplePressAndHoldEnabled 설정을 변경하는 방법과 관련된 동작 방식, 설정 확인, 삭제, 주의사항을 설명합니다.\nApplePressAndHoldEnabled 설정은 키를 길게 눌렀을 때의 동작을 제어합니다:\ntrue (기본값): 키를 길게 누르면 악센트 메뉴가 표시됩니다. 예를 들어, \u0026ldquo;e\u0026rdquo; 키를 길게 누르면 é, è, ê 등의 선택 메뉴가 나타납니다. false: 키를 길게 누르면 해당 문자가 반복적으로 입력됩니다(예: \u0026ldquo;eeeee\u0026rdquo;). 이는 Windows의 키보드 동작과 유사합니다. 이 설정은 시스템 전반 또는 특정 응용 프로그램에 적용할 수 있습니다.\n명령어 사용법 터미널에서 defaults 명령어를 사용하여 설정을 변경할 수 있습니다. 변경 후 일부 앱은 재시작이 필요할 수 있습니다.\n시스템 전체 설정 악센트 메뉴 활성화 (기본값):\ndefaults write NSGlobalDomain ApplePressAndHoldEnabled -bool true 키 반복 활성화:\ndefaults write NSGlobalDomain ApplePressAndHoldEnabled -bool false 특정 응용 프로그램 설정 특정 앱(예: 터미널, JetBrains IDE)에만 설정을 적용하려면 앱의 번들 ID를 사용합니다. 예를 들어:\n터미널에서 키 반복 활성화:\ndefaults write com.apple.terminal ApplePressAndHoldEnabled -bool false JetBrains IDE (예: IntelliJ IDEA): JetBrains IDE의 번들 ID는 앱마다 다릅니다(예: com.jetbrains.intellij). 번들 ID는 앱의 Info.plist 파일에서 확인하거나, 아래 명령어로 앱 목록을 확인할 수 있습니다:\nls /Applications | grep -i jetbrains 이후, 예를 들어:\ndefaults write com.jetbrains.intellij ApplePressAndHoldEnabled -bool false 설정 적용 변경 사항을 적용하려면:\n터미널에서 명령어를 실행한 후, 영향을 받는 앱을 재시작합니다. 또는 시스템을 로그아웃/로그인하거나 재부팅합니다. 설정 확인 및 삭제 현재 설정 확인 시스템 전체 설정 확인:\ndefaults read NSGlobalDomain ApplePressAndHoldEnabled 출력: 1 (true, 악센트 메뉴) 또는 0 (false, 키 반복). 특정 앱 설정 확인 (예: 터미널):\ndefaults read com.apple.terminal ApplePressAndHoldEnabled 설정 삭제 (기본값 복원) 시스템 전체 설정 삭제:\ndefaults delete NSGlobalDomain ApplePressAndHoldEnabled 특정 앱 설정 삭제:\ndefaults delete com.apple.terminal ApplePressAndHoldEnabled 삭제 후 macOS는 기본값(true, 악센트 메뉴)으로 복원됩니다.\n추가 설정: 키 반복 속도 조정 키 반복 동작을 세밀히 조정하려면 시스템 환경설정 또는 터미널에서 키 반복 속도와 지연 시간을 변경할 수 있습니다.\n시스템 환경설정 시스템 설정 \u0026gt; 키보드로 이동. 키 반복(Key Repeat): 슬라이더를 조정하여 반복 속도를 설정 (오른쪽으로 갈수록 빠름). 반복 지연(Delay Until Repeat): 슬라이더를 조정하여 반복 시작 전 지연 시간 설정 (오른쪽으로 갈수록 짧음). 터미널 명령어 키 반복 속도:\ndefaults write NSGlobalDomain KeyRepeat -int 2 값이 낮을수록 반복 속도가 빠릅니다 (기본값: 약 6). 반복 지연:\ndefaults write NSGlobalDomain InitialKeyRepeat -int 15 값이 낮을수록 지연 시간이 짧습니다 (기본값: 약 25). 적용:\nkillall Finder 또는 로그아웃/로그인.\n주의사항 재시작 필요: ApplePressAndHoldEnabled 또는 KeyRepeat 설정 변경 후, 앱이나 시스템을 재시작해야 변경 사항이 적용됩니다. 응용 프로그램별 설정 우선순위: 특정 앱에 설정된 값은 시스템 전체 설정(NSGlobalDomain)보다 우선합니다. macOS 버전 호환성: 일부 구형 macOS 버전(예: El Capitan, Sierra)에서는 특정 앱의 동작이 다를 수 있습니다. 일관성 문제: macOS는 ~/Library/Preferences/.GlobalPreferences.plist 파일에서 설정을 덮어쓸 수 있으므로, 설정이 예상대로 작동하지 않으면 파일을 확인하세요: plutil -p ~/Library/Preferences/.GlobalPreferences.plist | grep ApplePressAndHoldEnabled 백업: 설정 변경 전 ~/Library/Preferences 폴더를 백업하세요. 특정 앱 예외: JetBrains IDE 등 일부 앱은 자체 키보드 설정을 가질 수 있으므로, 앱 내 설정도 확인하세요. 참고 macOS 버전에 따라 메뉴 이름이나 동작이 약간 다를 수 있습니다(예: macOS Ventura 이상에서는 시스템 설정 사용). JetBrains IDE의 번들 ID는 JetBrains 공식 문서 또는 앱의 Info.plist 파일에서 확인 가능. 문제 발생 시, macOS 버전을 확인하고 터미널에서 defaults read로 현재 설정을 점검하세요. ","permalink":"https://cdecl.github.io/devops/macos-key-repeat-settings/","summary":"\u003cp\u003emacOS에서 키를 길게 눌렀을 때 기본적으로 악센트 메뉴(예: \u0026ldquo;a\u0026quot;를 길게 누르면 à, á, â 등이 표시)가 나타나지만, 이를 키 반복(Windows와 유사한 문자 반복 입력)으로 변경할 수 있습니다.\u003c/p\u003e\n\u003ch2 id=\"개요\"\u003e개요\u003c/h2\u003e\n\u003cp\u003e이 문서에서는 터미널 명령어(\u003ccode\u003edefaults\u003c/code\u003e)를 사용해 \u003ccode\u003eApplePressAndHoldEnabled\u003c/code\u003e 설정을 변경하는 방법과 관련된 동작 방식, 설정 확인, 삭제, 주의사항을 설명합니다.\u003c/p\u003e\n\u003cp\u003e\u003ccode\u003eApplePressAndHoldEnabled\u003c/code\u003e 설정은 키를 길게 눌렀을 때의 동작을 제어합니다:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003e\u003ccode\u003etrue\u003c/code\u003e (기본값)\u003c/strong\u003e: 키를 길게 누르면 악센트 메뉴가 표시됩니다. 예를 들어, \u0026ldquo;e\u0026rdquo; 키를 길게 누르면 é, è, ê 등의 선택 메뉴가 나타납니다.\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e\u003ccode\u003efalse\u003c/code\u003e\u003c/strong\u003e: 키를 길게 누르면 해당 문자가 반복적으로 입력됩니다(예: \u0026ldquo;eeeee\u0026rdquo;). 이는 Windows의 키보드 동작과 유사합니다.\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e이 설정은 시스템 전반 또는 특정 응용 프로그램에 적용할 수 있습니다.\u003c/p\u003e","title":"macOS에서 키를 길게 눌렀을 때 동작 변경하기"},{"content":"이 글에서는 Obsidian Smart Connections 플러그인의 개념부터 기능, 설정 방법, 주요 기능과 예제, 그리고 비슷한 플러그인까지 상세히 알아보겠습니다.\n1. Obsidian Smart Connections 플러그인이란? Smart Connections는 Obsidian에서 AI 임베딩을 활용해 노트 간의 의미적 연결을 찾아주는 강력한 플러그인입니다. 사용자의 노트를 분석하여 관련된 콘텐츠를 실시간으로 추천하거나, 노트를 기반으로 대화형 AI와 상호작용할 수 있게 합니다. 블로그 작성, 연구, 지식 관리 등에서 생산성을 높여주며, 특히 대규모 노트 저장소에서 유용합니다.\n주요 특징:\n의미적 검색: 키워드가 아닌 노트의 의미를 기반으로 관련 노트를 찾아줍니다. 로컬 및 클라우드 AI 지원: Ollama, LM Studio 같은 로컬 모델과 OpenAI, Gemini, Claude 등 100개 이상의 API를 지원합니다. Smart Chat: 노트를 기반으로 AI와 대화하며 질문에 답변하거나 콘텐츠를 생성합니다. 컨텍스트 인식: 현재 노트나 선택한 텍스트를 활용해 관련 콘텐츠를 제안합니다. 오프라인 지원: 로컬 임베딩 모델을 사용해 데이터 프라이버시를 보장합니다. 2. 설치 및 설정 Smart Connections 플러그인은 Obsidian의 커뮤니티 플러그인 마켓에서 설치할 수 있습니다. 아래는 기본 설치 및 설정 방법입니다.\n설치\nObsidian에서 설정(Settings) \u0026gt; 커뮤니티 플러그인(Community Plugins)으로 이동. Smart Connections 플러그인을 검색 후 설치 및 활성화. 로컬 모델(Ollama 등)을 사용할 경우 별도 설치 없이 즉시 임베딩 생성 시작. 클라우드 모델(OpenAI, Gemini 등)을 사용할 경우: OpenAI 또는 Google AI Studio에서 API 키를 획득. 플러그인 설정에서 LLM Provider를 선택하고 API 키 입력. 설정에서 제외할 폴더나 파일 지정 가능(민감 정보 보호). 설정 예시 (OpenAI)\n--- model: gpt-3.5-turbo max_tokens: 500 temperature: 0.8 --- 설명: model: 사용할 AI 모델(예: gpt-3.5-turbo, gemini-1.5-flash) 지정. max_tokens: 생성 텍스트의 최대 길이. temperature: 창의성 정도(0.0~1.0, 높을수록 더 창의적). 비용:\n로컬 모델: 무료, Ollama나 LM Studio 사용 시 추가 비용 없음. 클라우드 모델: OpenAI, Gemini 등 API 사용 시 토큰 기반 과금. 비용은 노트 크기와 사용 빈도에 따라 다름(자세한 가격은 OpenAI 또는 Google AI Studio 참조). 3. 주요 기능과 예제 Smart Connections는 다양한 기능을 제공하며, 커맨드 팔레트(Ctrl/Cmd + P)를 통해 실행 가능합니다. 주요 기능과 사용 예제를 소개합니다.\nSmart View\n설명: 현재 노트와 의미적으로 유사한 노트를 실시간으로 표시. 임베딩을 통해 노트 간 관계를 시각화하며, 점수(Score)로 유사도를 나타냄. 예제: 상황: \u0026ldquo;블로그 작성\u0026rdquo; 노트를 작성 중. 동작: Smart View 패널에 \u0026ldquo;콘텐츠 기획\u0026rdquo;, \u0026ldquo;SEO 전략\u0026rdquo; 노트가 유사도 점수 0.92, 0.87로 표시. 사용법: Open Smart Connections view 명령어 실행 후 패널에서 관련 노트 클릭. 활용: 블로그 주제 확장 시 관련 아이디어 발견. Smart Chat\n설명: 노트를 기반으로 AI와 대화. 특정 노트를 참조하거나 전체 볼트를 검색해 답변 생성. 예제: 프롬프트: \u0026ldquo;내 노트를 기반으로 블로그 포스트 아이디어를 제안해.\u0026rdquo; 입력: 노트에 \u0026ldquo;AI와 생산성\u0026rdquo; 관련 내용 포함. 출력: \u0026ldquo;AI 도구를 활용한 워크플로우 최적화에 관한 블로그 포스트를 작성하세요. [[AI와 생산성]] 노트를 참고해 구체적인 사례를 포함할 수 있습니다.\u0026rdquo; 사용법: Open Smart Chat 명령어로 채팅 창 열기. 활용: 블로그 초안 작성 시 아이디어 브레인스토밍. Semantic Search\n설명: 키워드가 아닌 개념 기반 검색. 특정 주제나 질문을 입력하면 관련 노트를 찾아줌. 예제: 프롬프트: \u0026ldquo;블로그 마케팅 전략 관련 노트 찾아줘.\u0026rdquo; 출력: \u0026ldquo;[[디지털 마케팅]], [[소셜 미디어 전략]]\u0026rdquo; 등 관련 노트 목록. 사용법: Semantic Search 명령어로 검색 창 열기. 활용: 주제별 노트 정리 및 블로그 콘텐츠 기획. Context Builder\n설명: 특정 노트나 블록을 선택해 AI 답변의 컨텍스트로 사용. 프롬프트에 명시적으로 포함 가능. 예제: 프롬프트: \u0026ldquo;[[프로젝트 관리]] 노트를 기반으로 블로그 개요 작성.\u0026rdquo; 출력: \u0026ldquo;1. 프로젝트 관리 개요: 정의와 중요성\\n2. 효과적인 도구: [[프로젝트 관리]]에서 언급된 Trello, Asana 활용법\\n3. 사례 연구\u0026hellip;\u0026rdquo; 사용법: Smart Chat에서 컨텍스트 트리에서 노트 선택. 활용: 특정 주제에 초점을 맞춘 블로그 초안 생성. Multi-modal Support\n설명: 이미지나 PDF를 컨텍스트로 사용(실험적, Ollama 모델 필요). 블로그에 시각적 자료를 포함할 때 유용. 예제: 입력: \u0026ldquo;이 이미지를 기반으로 블로그 배너 설명 작성.\u0026rdquo; 출력: \u0026ldquo;배너는 현대적인 기술 테마로, AI와 노트 연결을 상징하는 푸른 톤의 그래픽 포함.\u0026rdquo; 사용법: Smart Chat에서 이미지 업로드 후 프롬프트 입력. 활용: 블로그 시각 자료 설명 생성. 4. 비슷한 플러그인 소개 Smart Connections와 유사한 기능을 제공하는 다른 Obsidian 플러그인을 소개합니다.\nObsidian Co-Pilot\n특징: AI 기반 채팅, 노트 편집, 사용자 정의 프롬프트 지원. OpenAI, Azure, LocalAI 등 다양한 모델과 호환. Smart Connections보다 UI가 세련되고 편집 기능이 강력. 비교: 장점: 노트 수정 및 커스텀 프롬프트에 특화, Vault Q\u0026amp;A로 볼트 전체 검색 가능. 단점: 클라우드 모델 사용 시 비용 발생, 로컬 모델 설정이 복잡할 수 있음. 사용 예: 블로그 초안을 작성한 후 bullet point로 변환하거나, 특정 노트를 요약. 추천 대상: 편집 및 커스터마이징을 중시하는 사용자. Text Generator\n특징: 텍스트 생성에 초점, 사용자 정의 템플릿과 컨텍스트 인식 기능 제공. Gemini, Claude 등 지원. Smart Connections보다 텍스트 생성에 특화. 비교: 장점: 템플릿 기반으로 반복 작업 자동화, 멀티모달 지원. 단점: 의미적 연결 추천은 약함, 주로 텍스트 생성에 초점. 사용 예: 블로그 포스트 초안을 빠르게 생성하거나 노트 요약. 추천 대상: 템플릿 기반 콘텐츠 생성을 선호하는 사용자. SystemSculpt\n특징: 스마트 템플릿, Whisper 음성 입력, 로컬 모델 지원. Smart Connections와 달리 템플릿과 음성 입력에 강점. 비교: 장점: 음성 입력과 템플릿 커스터마이징이 뛰어남, 활발한 개발자 커뮤니티. 단점: 연결 추천 기능은 Smart Connections보다 약함. 사용 예: 음성 메모를 블로그 초안으로 변환. 추천 대상: 멀티모달 입력과 템플릿을 활용하려는 사용자. 마치며 Obsidian Smart Connections 플러그인은 AI를 활용해 노트 간 연결을 자동화하고, 블로그 작성 워크플로우를 혁신적으로 개선합니다. Smart View와 Smart Chat을 통해 아이디어를 빠르게 발굴하고, 의미적 검색과 컨텍스트 빌더로 콘텐츠를 체계화할 수 있습니다. 로컬 모델 지원으로 프라이버시를 보장하며, 다양한 AI 모델과의 호환성으로 유연성을 제공합니다.\n","permalink":"https://cdecl.github.io/devops/obsidian-smart-connections-plugin/","summary":"\u003cp\u003e이 글에서는 Obsidian Smart Connections 플러그인의 개념부터 기능, 설정 방법, 주요 기능과 예제, 그리고 비슷한 플러그인까지 상세히 알아보겠습니다.\u003c/p\u003e\n\u003ch3 id=\"1-obsidian-smart-connections-플러그인이란\"\u003e1. Obsidian Smart Connections 플러그인이란?\u003c/h3\u003e\n\u003cp\u003eSmart Connections는 Obsidian에서 AI 임베딩을 활용해 노트 간의 의미적 연결을 찾아주는 강력한 플러그인입니다. 사용자의 노트를 분석하여 관련된 콘텐츠를 실시간으로 추천하거나, 노트를 기반으로 대화형 AI와 상호작용할 수 있게 합니다. 블로그 작성, 연구, 지식 관리 등에서 생산성을 높여주며, 특히 대규모 노트 저장소에서 유용합니다.\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003e주요 특징\u003c/strong\u003e:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003e의미적 검색\u003c/strong\u003e: 키워드가 아닌 노트의 의미를 기반으로 관련 노트를 찾아줍니다.\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e로컬 및 클라우드 AI 지원\u003c/strong\u003e: Ollama, LM Studio 같은 로컬 모델과 OpenAI, Gemini, Claude 등 100개 이상의 API를 지원합니다.\u003ca href=\"https://github.com/brianpetro/obsidian-smart-connections\"\u003e\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eSmart Chat\u003c/strong\u003e: 노트를 기반으로 AI와 대화하며 질문에 답변하거나 콘텐츠를 생성합니다.\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e컨텍스트 인식\u003c/strong\u003e: 현재 노트나 선택한 텍스트를 활용해 관련 콘텐츠를 제안합니다.\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e오프라인 지원\u003c/strong\u003e: 로컬 임베딩 모델을 사용해 데이터 프라이버시를 보장합니다.\u003ca href=\"https://smartconnections.app/\"\u003e\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"2-설치-및-설정\"\u003e2. 설치 및 설정\u003c/h3\u003e\n\u003cp\u003eSmart Connections 플러그인은 Obsidian의 커뮤니티 플러그인 마켓에서 설치할 수 있습니다. 아래는 기본 설치 및 설정 방법입니다.\u003c/p\u003e","title":"Obsidian - Smart Connections 플러그인"},{"content":"uv를 활용한 현대적인 Python 프로젝트 구조, src 레이아웃과 Flat 레이아웃의 차이점, 그리고 uvx를 통한 원격 도구 실행 방법을 알아봅니다.\nPython 프로젝트 구조의 중요성 잘 구성된 프로젝트 디렉토리 구조는 코드의 유지보수성, 확장성, 그리고 협업 효율성을 크게 향상시킵니다. Python에서는 전통적으로 두 가지 주요 레이아웃이 사용됩니다: Flat 레이아웃과 src 레이아웃. 현대적인 Python 프로젝트에서는 src 레이아웃이 많은 이점을 제공하여 표준으로 자리 잡고 있습니다.\n일반적인 Python 프로젝트 디렉토리 구조 현대적인 Python 프로젝트는 일반적으로 다음과 같은 구조를 가집니다.\nmy-project/ ├── .venv/ ├── src/ │ └── my_package/ │ ├── __init__.py │ └── main.py ├── tests/ │ └── test_main.py ├── pyproject.toml └── README.md .venv/: uv venv로 생성된 가상 환경 폴더입니다. src/: 패키지의 소스 코드가 위치하는 디렉토리입니다. tests/: 테스트 코드가 위치하는 디렉토리입니다. pyproject.toml: uv가 프로젝트의 메타데이터와 의존성을 관리하는 표준 설정 파일입니다. 구조 생성을 위한 명령어 이러한 구조는 몇 가지 간단한 명령어로 빠르게 생성할 수 있습니다.\n# 프로젝트 디렉토리 및 하위 폴더 생성 mkdir -p my-project/src/my_package my-project/tests # 빈 파일 생성 touch my-project/src/my_package/__init__.py my-project/src/my_package/main.py touch my-project/tests/test_main.py touch my-project/pyproject.toml my-project/README.md # 프로젝트 디렉토리로 이동하여 가상 환경 생성 cd my-project uv venv 이 명령어들을 실행하면 위에서 설명한 기본 프로젝트 구조가 완성됩니다.\nsrc 레이아웃 (권장) src 레이아웃은 프로젝트의 모든 소스 코드를 src라는 이름의 하위 디렉토리에 배치하는 구조입니다.\nsrc 레이아웃의 장점 경로 문제 방지: 현재 작업 디렉토리가 Python의 sys.path에 자동으로 추가되어 발생하는 잠재적인 임포트 오류를 방지합니다. src 레이아웃을 사용하면, 패키지를 반드시 설치해야만 임포트할 수 있으므로 실제 배포 환경과 동일한 조건에서 테스트할 수 있습니다. 명확한 구분: 소스 코드(src)와 테스트 코드(tests), 문서(docs) 등 다른 프로젝트 파일들을 명확하게 분리하여 구조를 깔끔하게 유지합니다. 편집 가능한 설치 (Editable Install)의 신뢰성: uv pip install -e .와 같은 편집 가능한 모드로 설치했을 때, src 레이아웃은 패키지가 올바르게 설치되었는지 명확하게 확인할 수 있도록 돕습니다. pyproject.toml 최소 설정 src 레이아웃을 사용하려면 pyproject.toml 파일에 패키지의 소스가 어디에 있는지 uv에게 알려주어야 합니다. 또한, 패키지를 실행 가능한 커맨드 라인 도구로 만들려면 [project.scripts]를 설정할 수 있습니다.\n[project] name = \u0026#34;my_package\u0026#34; version = \u0026#34;0.1.0\u0026#34; dependencies = [ \u0026#34;requests\u0026#34;, ] [project.scripts] my-cli = \u0026#34;my_package.main:main\u0026#34; [tool.uv.sources] my_package = \u0026#34;src\u0026#34; [project.scripts]: 이 섹션은 패키지를 설치할 때 생성될 실행 가능한 스크립트를 정의합니다. 예를 들어, my-cli = \u0026quot;my_package.main:main\u0026quot;은 my-cli라는 명령어를 실행하면 my_package/main.py 파일의 main 함수를 호출하도록 합니다. [tool.uv.sources]: 이 테이블은 my_package라는 패키지의 소스 코드가 src 디렉토리에 있음을 uv에 명시합니다. src 레이아웃 vs. Flat 레이아웃 Flat 레이아웃은 프로젝트 루트에 패키지 디렉토리를 바로 두는 방식입니다.\nmy-project/ ├── my_package/ │ ├── __init__.py │ └── main.py ├── tests/ ... 두 레이아웃의 주요 차이점은 다음과 같습니다.\n특징 src 레이아웃 Flat 레이아웃 구조 소스 코드가 src/ 디렉토리 내에 위치 소스 코드가 프로젝트 루트에 위치 장점 설치된 패키지만 임포트 가능하여 신뢰성 높음 구조가 단순하여 작은 프로젝트에 적합 단점 초기 설정이 약간 더 복잡 (pyproject.toml 설정 필요) 로컬 경로 문제로 인해 예기치 않은 임포트 오류 발생 가능 추천 대상 라이브러리, 애플리케이션 등 모든 규모의 프로젝트 매우 간단한 스크립트나 개인 프로젝트 결론적으로, 장기적인 유지보수와 신뢰성을 위해 src 레이아웃을 사용하는 것이 강력히 권장됩니다.\ntests 디렉토리 위치 및 주의점 테스트 코드는 소스 코드와 분리하여 프로젝트 루트에 tests/ 디렉토리를 만들어 관리하는 것이 가장 좋습니다.\nmy-project/ ├── src/ │ └── my_package/ └── tests/ └── test_my_package.py 왜 src 밖에 두어야 하는가? tests 디렉토리를 src 외부에 두면, 설치된 패키지를 기준으로 테스트하게 됩니다. 만약 tests가 src 내부에 있다면, 로컬 소스 파일을 직접 임포트하여 테스트하게 되어 실제 사용자가 패키지를 설치했을 때와 다른 환경에서 테스트가 진행될 수 있습니다.\npytest와 같은 테스트 프레임워크는 프로젝트 루트에서 tests 디렉토리를 자동으로 찾아 실행하므로 이 구조와 잘 맞습니다.\npyproject.toml에 테스트 경로 설정 pytest가 src 디렉토리 내의 패키지를 찾을 수 있도록 pyproject.toml에 pytest의 pythonpath를 설정해주는 것이 좋습니다. 이렇게 하면 import my_package와 같은 구문을 테스트 코드에서 바로 사용할 수 있습니다.\n[tool.pytest.ini_options] pythonpath = [ \u0026#34;src\u0026#34; ] 이 설정을 추가하면 pytest를 실행할 때 src 디렉토리가 sys.path에 포함되어, my_package를 모듈로 인식할 수 있게 됩니다.\nuvx를 활용한 원격 도구 실행 uvx는 pipx와 유사하게, 특정 도구를 가상 환경에 설치하지 않고도 일회성으로 실행할 수 있게 해주는 uv의 강력한 기능입니다. 특히 GitHub 저장소에서 직접 도구를 가져와 실행할 수 있습니다.\n예를 들어, ruff 린터를 프로젝트에 설치하지 않고 실행하고 싶다면 다음과 같이 명령할 수 있습니다.\n# astral-sh/ruff 저장소에서 ruff를 가져와 현재 디렉토리에서 실행 uvx astral-sh/ruff check . # black 포맷터를 실행 uvx psf/black . # git 저장소에서 직접 실행 uvx --from git+https://github.com/cdecl/gemini-mcp gemini-mcp uvx는 임시 가상 환경을 만들고 도구를 실행한 뒤, 환경을 자동으로 정리합니다. 이를 통해 pyproject.toml에 개발용 도구를 명시하지 않고도 필요할 때마다 최신 버전의 도구를 사용할 수 있습니다. 결론 현대적인 Python 프로젝트에서는 uv와 같은 빠른 도구와 함께 체계적인 디렉토리 구조를 채택하는 것이 중요합니다.\nsrc 레이아웃을 사용하여 경로 문제를 방지하고 코드의 신뢰성을 높이세요. tests 디렉토리는 소스 코드와 분리하여 실제 배포 환경과 유사한 테스트를 보장하세요. **uvx**를 활용하여 프로젝트를 깔끔하게 유지하면서 필요한 개발 도구를 유연하게 사용하세요. 이러한 모범 사례들은 프로젝트가 성장하더라도 높은 수준의 코드 품질과 유지보수성을 유지하는 데 큰 도움이 될 것입니다.\n추가 리소스 Astral uv 공식 문서 Python Packaging User Guide: src layout vs flat layout ","permalink":"https://cdecl.github.io/dev/python-uv-project-structure/","summary":"\u003cp\u003euv를 활용한 현대적인 Python 프로젝트 구조, \u003ccode\u003esrc\u003c/code\u003e 레이아웃과 Flat 레이아웃의 차이점, 그리고 \u003ccode\u003euvx\u003c/code\u003e를 통한 원격 도구 실행 방법을 알아봅니다.\u003c/p\u003e\n\u003ch2 id=\"python-프로젝트-구조의-중요성\"\u003ePython 프로젝트 구조의 중요성\u003c/h2\u003e\n\u003cp\u003e잘 구성된 프로젝트 디렉토리 구조는 코드의 유지보수성, 확장성, 그리고 협업 효율성을 크게 향상시킵니다. Python에서는 전통적으로 두 가지 주요 레이아웃이 사용됩니다: \u003cstrong\u003eFlat 레이아웃\u003c/strong\u003e과 \u003cstrong\u003e\u003ccode\u003esrc\u003c/code\u003e 레이아웃\u003c/strong\u003e. 현대적인 Python 프로젝트에서는 \u003ccode\u003esrc\u003c/code\u003e 레이아웃이 많은 이점을 제공하여 표준으로 자리 잡고 있습니다.\u003c/p\u003e\n\u003ch2 id=\"일반적인-python-프로젝트-디렉토리-구조\"\u003e일반적인 Python 프로젝트 디렉토리 구조\u003c/h2\u003e\n\u003cp\u003e현대적인 Python 프로젝트는 일반적으로 다음과 같은 구조를 가집니다.\u003c/p\u003e","title":"Python uv 프로젝트 구조"},{"content":"이 글에서는 Obsidian Text Generator 플러그인의 개념부터 기능, 설정 방법, 명령어, 예약어 사용법, 그리고 유용한 추가 기능까지 상세히 알아보겠습니다.\n1. Obsidian Text Generator 플러그인이란? Obsidian Text Generator 플러그인은 Obsidian에서 AI를 활용해 텍스트를 생성하는 강력한 도구입니다. 노트 작성, 아이디어 생성, 콘텐츠 요약 등 다양한 작업을 자동화하여 생산성을 높여줍니다. 이 플러그인은 사용자가 선택한 텍스트나 노트의 컨텍스트를 기반으로 AI 모델을 통해 문장을 완성하거나 새로운 콘텐츠를 생성합니다.\n주요 특징:\n다양한 AI 지원: OpenAI(GPT-3, GPT-4), Google Gemini, Anthropic Claude, 그리고 LM Studio와 같은 로컬 모델을 지원합니다. 템플릿 엔진: 반복 작업을 간소화하는 사용자 정의 템플릿을 제공합니다. 컨텍스트 인식: 현재 노트, 선택한 텍스트, 링크된 노트를 활용해 문맥에 맞는 텍스트를 생성합니다. 커뮤니티 템플릿: 다른 사용자의 템플릿을 공유하거나 가져와 다양한 활용 사례를 탐색할 수 있습니다. 유연한 설정: Frontmatter를 통해 AI 모델, 토큰 수, 온도 등을 세부적으로 조정 가능합니다. 2. 설치 및 Gemini 기반 설정 Text Generator 플러그인은 Obsidian의 커뮤니티 플러그인 마켓에서 설치할 수 있습니다. Google Gemini를 사용한 설정 예시는 다음과 같습니다.\n설치\nObsidian에서 설정(Settings) \u0026gt; 커뮤니티 플러그인(Community Plugins)으로 이동. Text Generator 플러그인을 검색 후 설치 및 활성화. Google Gemini API 키를 획득: Google AI Studio에서 Google 계정으로 로그인. \u0026ldquo;Get API Key\u0026quot;를 클릭해 API 키를 생성하고 복사. 플러그인 설정에서 LLM Provider를 Google Gemini로 선택하고 API 키를 입력. Gemini 설정 예시\n--- model: gemini-1.5-flash max_tokens: 200 temperature: 0.7 --- 설명: model: 사용할 Gemini 모델(예: gemini-1.5-flash, gemini-1.5-pro)을 지정. max_tokens: 생성할 텍스트의 최대 길이. temperature: 텍스트의 창의성 정도(0.0~1.0, 낮을수록 보수적). 3. 주요 명령어(Commands)와 기능 Text Generator 플러그인은 커맨드 팔레트(Ctrl/Cmd + P)를 통해 다양한 명령어를 제공합니다. 주요 명령어와 기능은 다음과 같습니다.\nGenerate Text (단축키: Cmd+J): 선택한 텍스트나 현재 노트의 컨텍스트를 기반으로 AI가 텍스트를 생성합니다. 가장 기본적인 텍스트 생성 명령어입니다. Generate Text with Prompt: 사용자 정의 프롬프트를 입력하여 텍스트를 생성합니다. 특정 형식이나 스타일로 결과를 얻고 싶을 때 유용합니다. Create Template: 현재 노트의 내용을 기반으로 새로운 Text Generator 템플릿을 생성합니다. 반복적인 작업을 자동화할 때 편리합니다. Run Template: 저장된 템플릿을 실행하여 텍스트를 생성합니다. Search/Generate (Community Prompts): 커뮤니티에서 공유된 프롬프트를 검색하고 실행합니다. 다른 사용자의 아이디어를 활용할 수 있습니다. Increase/Decrease Temperature: AI 모델의 창의성(무작위성)을 조절합니다. Temperature 값이 높을수록 더 창의적이고 예측 불가능한 결과가 나옵니다. Increase/Decrease max_tokens: 생성될 텍스트의 최대 길이를 조절합니다. 더 길거나 짧은 결과물이 필요할 때 사용합니다. Estimate Tokens: 현재 노트나 선택한 텍스트의 토큰 수를 예측합니다. API 비용을 관리하거나 모델의 입력 제한을 확인할 때 유용합니다. Consider Note\u0026rsquo;s Frontmatter for Generation: 파일의 Frontmatter(머리말)에 정의된 설정을 텍스트 생성 시 반영할지 여부를 토글합니다. Auto-Suggest: 문장을 입력하는 동안 자동으로 다음 내용을 제안합니다. (실험적 기능) Stop Generation: 현재 진행 중인 텍스트 생성을 중단합니다. Get Models: 사용 가능한 AI 모델 목록을 가져옵니다. 4. Generate Text 예약어: {{selected_text}}와 {{context}} Text Generator 플러그인에서 {{selected_text}}와 {{context}}는 프롬프트에서 사용하는 핵심 예약어입니다.\n{{selected_text}} 의미: 사용자가 노트에서 선택한 텍스트를 입력으로 사용. 힌트(프롬프트): 명확한 작업 지시와 함께 사용(예: \u0026ldquo;50자 이내로 완성\u0026rdquo;, \u0026ldquo;유머러스한 톤으로 확장\u0026rdquo;). 영향도: 선택한 텍스트에 직접적으로 초점을 맞춰 결과를 생성. 텍스트가 없으면 빈 결과나 오류 발생 가능. 사용 예: {{selected_text}}를 3문장으로 확장하세요. 입력: \u0026ldquo;아이디어 회의\u0026rdquo; 선택. 출력: \u0026ldquo;아이디어 회의는 팀의 창의력을 끌어내는 중요한 시간이다. 다양한 관점이 공유되며 새로운 해결책이 도출된다. 이를 통해 프로젝트의 방향성이 명확해진다.\u0026rdquo; {{context}} 의미: 현재 노트, 링크된 노트, 또는 설정된 컨텍스트(예: Frontmatter, 태그)를 참조. 힌트(프롬프트): 노트 전체를 기반으로 요약, 확장, 분석 등을 요청. 영향도: 전체 문서를 기본으로 참조하며, 설정에 따라 링크된 노트나 특정 섹션 포함 가능. 토큰 제한으로 긴 노트는 일부만 처리될 수 있음. 사용 예: {{context}}를 기반으로 다음 문장을 이어가세요: {{selected_text}} 입력: 노트에 \u0026ldquo;프로젝트 계획: 1단계 완료\u0026quot;가 있고, 선택한 텍스트는 \u0026ldquo;2단계는\u0026rdquo;. 출력: \u0026ldquo;2단계는 데이터 분석과 프로토타입 개발에 초점을 맞춘다.\u0026rdquo; 컨텍스트 미지정 시: {{context}}를 프롬프트에 포함하지 않으면 선택한 텍스트나 직접 입력만 사용되며, 전체 문서는 참조되지 않습니다. 포함 시 기본적으로 현재 노트 전체를 참조합니다.\n5. 추가적인 유용한 기능 Text Generator 플러그인은 다양한 생산성 향상 기능을 제공합니다:\n커뮤니티 템플릿: 다른 사용자의 템플릿을 가져오거나 공유하여 새로운 활용 사례를 탐색. 예: 블로그 작성, 코드 스니펫 생성 템플릿. Smart Templates: EJS 문법을 사용해 동적 템플릿을 생성, 변수와 조건문으로 복잡한 콘텐츠 생성 가능. 로컬 모델 지원: LM Studio, Ollama를 통해 오프라인에서도 AI 사용 가능, API 비용 절감. 자동 제안(Auto-Suggest): 문장 끝에서 자동으로 후속 문장을 제안, Copilot과 유사한 경험 제공. 멀티모달 지원: Gemini를 통해 텍스트 외에 이미지 분석이나 멀티모달 입력 처리 가능(실험적). QuickAdd 연동: QuickAdd 플러그인과 함께 매크로를 설정해 반복 작업 자동화. 예: 특정 노트에서 요약 생성 후 새 노트에 저장. 마치며 Obsidian Text Generator 플러그인은 AI를 활용해 노트 작성과 지식 관리를 혁신적으로 개선합니다. Gemini와 같은 강력한 AI 모델과 유연한 템플릿, 컨텍스트 인식 기능을 통해 글쓰기, 아이디어 생성, 요약 등 다양한 작업을 효율적으로 처리할 수 있습니다. 이 플러그인을 활용하여 여러분의 Obsidian 워크플로우를 한 단계 업그레이드해보세요!\n","permalink":"https://cdecl.github.io/devops/obsidian-text-generator-plugin/","summary":"\u003cp\u003e이 글에서는 Obsidian Text Generator 플러그인의 개념부터 기능, 설정 방법, 명령어, 예약어 사용법, 그리고 유용한 추가 기능까지 상세히 알아보겠습니다.\u003c/p\u003e\n\u003ch3 id=\"1-obsidian-text-generator-플러그인이란\"\u003e1. Obsidian Text Generator 플러그인이란?\u003c/h3\u003e\n\u003cp\u003eObsidian Text Generator 플러그인은 Obsidian에서 AI를 활용해 텍스트를 생성하는 강력한 도구입니다. 노트 작성, 아이디어 생성, 콘텐츠 요약 등 다양한 작업을 자동화하여 생산성을 높여줍니다. 이 플러그인은 사용자가 선택한 텍스트나 노트의 컨텍스트를 기반으로 AI 모델을 통해 문장을 완성하거나 새로운 콘텐츠를 생성합니다.\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003e주요 특징\u003c/strong\u003e:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003e다양한 AI 지원\u003c/strong\u003e: OpenAI(GPT-3, GPT-4), Google Gemini, Anthropic Claude, 그리고 LM Studio와 같은 로컬 모델을 지원합니다.\u003ca href=\"https://www.obsidianstats.com/plugins/obsidian-textgenerator-plugin\"\u003e\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e템플릿 엔진\u003c/strong\u003e: 반복 작업을 간소화하는 사용자 정의 템플릿을 제공합니다.\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e컨텍스트 인식\u003c/strong\u003e: 현재 노트, 선택한 텍스트, 링크된 노트를 활용해 문맥에 맞는 텍스트를 생성합니다.\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e커뮤니티 템플릿\u003c/strong\u003e: 다른 사용자의 템플릿을 공유하거나 가져와 다양한 활용 사례를 탐색할 수 있습니다.\u003ca href=\"https://github.com/nhaouari/obsidian-textgenerator-plugin\"\u003e\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e유연한 설정\u003c/strong\u003e: Frontmatter를 통해 AI 모델, 토큰 수, 온도 등을 세부적으로 조정 가능합니다.\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"2-설치-및-gemini-기반-설정\"\u003e2. 설치 및 Gemini 기반 설정\u003c/h3\u003e\n\u003cp\u003eText Generator 플러그인은 Obsidian의 커뮤니티 플러그인 마켓에서 설치할 수 있습니다. Google Gemini를 사용한 설정 예시는 다음과 같습니다.\u003c/p\u003e","title":"Obsidian Text Generator 플러그인 가이드 (selected_text, context)"},{"content":"이 글에서는 ttyd의 개념부터 설치, 활용법, 그리고 보안 강화 방안까지 상세하게 알아보겠습니다.\n1. ttyd란 무엇인가? 개발자, 시스템 관리자, 혹은 단순히 터미널 작업을 즐기는 분이라면 원격으로 shell에 접속해야 하는 경우가 많습니다. SSH가 가장 일반적인 해결책이지만, 웹 브라우저만 있다면 어디서든 터미널에 접속할 수 있는 더 가벼운 방법이 있습니다. 바로 ttyd입니다.\nttyd는 \u0026lsquo;TTY over Web\u0026rsquo;의 약자로, 명령줄 도구를 웹 애플리케이션으로 변환해 주는 간단하고 효율적인 C언어 기반 프로그램입니다. 내부적으로는 Libwebsockets를 사용하여 웹소켓 통신을 처리하고, 프론트엔드에서는 xterm.js를 통해 완벽한 기능의 터미널을 웹 브라우저에 구현합니다.\n주요 특징은 다음과 같습니다.\n단순함: 별도의 복잡한 설정 없이 단일 실행 파일로 동작합니다. 빠른 속도: C언어로 작성되어 매우 가볍고 빠릅니다. 높은 호환성: Linux, macOS, FreeBSD 등 다양한 유닉스 계열 시스템을 지원합니다. 유연성: login, bash뿐만 아니라 vim, top, tmux 등 모든 CLI 프로그램을 웹으로 공유할 수 있습니다. SSL 지원: HTTPS를 통한 암호화 통신을 기본으로 지원합니다. 2. 설치 및 기본 사용법 ttyd는 다양한 방법으로 설치할 수 있습니다. 사용자의 운영체제에 맞춰 패키지 매니저를 이용하는 것이 가장 간편합니다.\nmacOS (Homebrew)\nbrew install ttyd Linux (Debian/Ubuntu)\nsudo apt-get install ttyd 소스 코드로 직접 빌드하기\n만약 최신 버전을 사용하거나 특정 옵션으로 컴파일하고 싶다면 소스 코드를 직접 빌드할 수 있습니다.\n# 1. 필요한 빌드 도구 설치 (Debian/Ubuntu 기준) sudo apt-get install build-essential cmake libjson-c-dev libwebsockets-dev # 2. 소스 코드 클론 및 빌드 git clone https://github.com/tsl0922/ttyd.git cd ttyd mkdir build \u0026amp;\u0026amp; cd build cmake .. make sudo make install 기본 사용법\n설치가 완료되면, 다음 명령어로 ttyd를 실행할 수 있습니다.\nttyd login 이 명령어는 ttyd 서버를 기본 포트인 7681에서 시작하고, 웹 브라우저에서 접속하면 시스템의 login 명령을 실행하여 사용자 인증을 거치도록 합니다. 이제 웹 브라우저를 열고 http://localhost:7681로 접속하면 익숙한 터미널 로그인 프롬프트를 볼 수 있습니다.\n3. 주요 활용 시나리오 ttyd는 매우 유연하여 다양한 시나리오에 활용될 수 있습니다.\n원격 서버 관리: 방화벽 정책으로 SSH 포트가 막혀있지만 웹 포트(80, 443)는 열려있는 환경에서 서버에 접속할 때 유용합니다. 실시간 협업 및 교육: tmux나 screen과 함께 사용하여 하나의 터미널 세션을 여러 명이 동시에 보고 조작할 수 있습니다. 코드 리뷰나 온라인 교육에 매우 효과적입니다. # \u0026#39;shared-session\u0026#39;이라는 tmux 세션을 공유하는 ttyd 실행 ttyd tmux attach -t shared-session 컨테이너 및 VM 접근: Docker 컨테이너나 가상 머신에 SSH 데몬을 설치하지 않고도 웹 기반 shell을 제공할 수 있습니다. # 특정 Docker 컨테이너에 bash `shell` 제공 docker exec -it \u0026lt;container_name\u0026gt; ttyd bash 임베디드 시스템: 리소스가 제한된 임베디드 장비에 웹 기반 관리 콘솔을 제공하는 용도로 적합합니다. 4. 보안 이슈 및 해결 방안 ttyd를 인터넷에 노출할 때는 반드시 보안을 강화해야 합니다.\n기본 인증 (Basic Authentication) --credential 옵션으로 간단한 사용자 이름과 비밀번호를 설정할 수 있습니다.\n# \u0026#39;myuser\u0026#39; 사용자에 \u0026#39;mypassword\u0026#39; 비밀번호 설정 ttyd --credential myuser:mypassword bash 주의: 이 방식은 비밀번호가 Base64로 인코딩되어 전송되므로, 반드시 SSL/TLS와 함께 사용해야 합니다.\nSSL/TLS 암호화 HTTPS 통신을 활성화하여 중간자 공격(MITM)을 방지합니다. Let\u0026rsquo;s Encrypt 등으로 발급받은 인증서를 사용할 수 있습니다.\nttyd --ssl --ssl-cert /path/to/cert.pem --ssl-key /path/to/key.pem login 임의의 URL 사용 --url-arg 옵션을 사용하면 추측하기 어려운 경로에서만 접속을 허용할 수 있어 보안 수준을 높일 수 있습니다.\n# 비밀 토큰을 URL에 포함시켜야 접속 가능 ttyd --url-arg \u0026#34;token=very-secret-string\u0026#34; bash 접속 주소: http://your-server:7681/?token=very-secret-string\n리버스 프록시 활용 Nginx, Caddy, Apache 등의 리버스 프록시 뒤에서 ttyd를 실행하는 것이 가장 강력하고 유연한 방법입니다. 리버스 프록시를 통해 SSL/TLS 관리, 고급 인증(OAuth2, JWT 등), 접근 제어, 로깅 등을 통합적으로 처리할 수 있습니다.\n5. 비슷한 기능의 도구들 ttyd 외에도 웹 기반 터미널을 구현할 수 있는 여러 도구가 있습니다.\nGoTTY: Go 언어로 작성된 ttyd의 대안입니다. Go의 특성상 단일 바이너리 파일로 쉽게 배포할 수 있다는 장점이 있습니다. Wetty (Web + TTY): Node.js 기반으로 만들어졌으며, 웹소켓을 통해 터미널을 제공합니다. Shell In A Box: 비교적 오래되었지만 여전히 널리 사용되는 웹 기반 터미널 에뮬레이터입니다. Cloud-based Terminals: AWS CloudShell, Google Cloud Shell 등 클라우드 제공업체에서 직접 제공하는 관리형 웹 터미널 서비스도 강력한 대안입니다. 마치며 ttyd는 단순함과 강력함을 겸비한 훌륭한 도구입니다. 가벼운 원격 접속, 실시간 협업, 안전한 서버 관리 등 다양한 목적에 맞춰 유연하게 활용할 수 있습니다. 이 글을 통해 ttyd의 매력을 발견하고, 여러분의 작업 환경에 적용하여 생산성을 한 단계 높여보시길 바랍니다.\n","permalink":"https://cdecl.github.io/devops/ttyd/","summary":"\u003cp\u003e이 글에서는 ttyd의 개념부터 설치, 활용법, 그리고 보안 강화 방안까지 상세하게 알아보겠습니다.\u003c/p\u003e\n\u003ch3 id=\"1-ttyd란-무엇인가\"\u003e1. ttyd란 무엇인가?\u003c/h3\u003e\n\u003cp\u003e개발자, 시스템 관리자, 혹은 단순히 터미널 작업을 즐기는 분이라면 원격으로 \u003ccode\u003eshell\u003c/code\u003e에 접속해야 하는 경우가 많습니다. SSH가 가장 일반적인 해결책이지만, 웹 브라우저만 있다면 어디서든 터미널에 접속할 수 있는 더 가벼운 방법이 있습니다. 바로 \u003cstrong\u003ettyd\u003c/strong\u003e입니다.\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003ettyd\u003c/strong\u003e는 \u0026lsquo;TTY over Web\u0026rsquo;의 약자로, 명령줄 도구를 웹 애플리케이션으로 변환해 주는 간단하고 효율적인 C언어 기반 프로그램입니다. 내부적으로는 Libwebsockets를 사용하여 웹소켓 통신을 처리하고, 프론트엔드에서는 xterm.js를 통해 완벽한 기능의 터미널을 웹 브라우저에 구현합니다.\u003c/p\u003e","title":"웹에서 만나는 터미널, ttyd 가이드"},{"content":"Gemini CLI의 핵심 개념, 주요 기능, 설치 및 구성 방법, 그리고 다른 AI 코딩 도우미와의 비교를 통해 Gemini CLI를 효과적으로 활용하는 방법을 알아봅니다.\nGemini CLI란? Gemini CLI는 구글에서 개발한 대화형 AI 코딩 어시스턴트로, 터미널 환경에서 직접 작동합니다. 개발자는 자연어 명령을 통해 복잡한 개발 작업을 Gemini에게 위임할 수 있습니다. 파일 시스템 조작, 코드 리팩토링, 셸 명령어 실행, Git 버전 관리 등 다양한 작업을 자동화하여 개발 생산성을 크게 향상시킵니다. 이 포스트에서는 Gemini CLI의 핵심 철학, 주요 기능, 설치 및 구성, 그리고 GitHub Copilot CLI와의 비교를 통해 그 차이점을 명확히 설명합니다.\nGemini CLI의 핵심 개념 Gemini CLI를 이해하기 위한 주요 개념은 다음과 같습니다:\n에이전트 기반 워크플로우: Gemini CLI는 단순한 명령어 제안을 넘어, 사용자의 요청을 이해하고 스스로 계획을 세워 작업을 수행하는 자율 에이전트처럼 작동합니다. 사용자는 목표를 제시하고, Gemini는 그 목표를 달성하기 위해 필요한 도구를 순차적으로 사용합니다.\n도구(Tools)와 MCP 지원: Gemini CLI는 강력한 기본 도구 세트와 함께, **MCP(Model Context Pro\n기본 제공 도구 (Built-in Tools): Gemini CLI는 로컬 환경과 상호작용하고, 정보를 가져오며, 다양한 작업을 수행하기 위해 Gemini 모델이 사용하는 강력한 내장 도구 세트를 포함하고 있습니다. 이 도구들은 단순한 텍스트 생성을 넘어 광범위한 개발 작업을 지원합니다.\n파일 시스템 도구 (read_file, write_file, replace, list_directory, glob, search_file_content): 로컬 파일 시스템과 직접 상호작용하여 파일을 읽고, 쓰고, 수정하며, 디렉토리 내용을 나열하고, 특정 패턴과 일치하는 파일을 찾거나 파일 내용 내에서 특정 문자열을 검색합니다. 이를 통해 코드베이스를 탐색하고 수정하는 대부분의 작업을 자동화할 수 있습니다.\n셸 도구 (run_shell_command): 사용자의 명시적인 승인 하에 터미널 명령을 직접 실행합니다. npm install, pytest, git commit 등 모든 종류의 스크립트와 명령을 실행할 수 있어, 빌드, 테스트, 배포 파이프라인을 완벽하게 자동화할 수 있습니다. 모든 민감한 작업 전에는 사용자에게 실행할 명령을 보여주고 확인을 받으므로 안전하게 사용할 수 있습니다.\n웹 도구 (web_fetch, google_web_search): URL에서 직접 콘텐츠를 가져오거나, Google 검색을 통해 웹에서 최신 정보를 찾습니다. \u0026ldquo;최신 버전의 React 문서를 요약해줘\u0026rdquo; 와 같은 요청을 처리하여, 개발자가 브라우저를 열지 않고도 필요한 정보를 얻을 수 있도록 돕습니다.\n멀티 파일 읽기 도구 (read_many_files): 여러 파일이나 디렉토리의 내용을 한 번에 읽어오는 특수 도구입니다. @ 명령과 함께 자주 사용되며, 프로젝트의 여러 부분에 대한 컨텍스트를 한 번에 파악해야 하는 복잡한 작업에 매우 유용합니다.\n메모리 도구 (save_memory): 세션 간에 정보를 저장하고 불러오는 데 사용됩니다. gemini.md 파일과 연동하여 프로젝트의 중요한 규칙이나 사용자의 선호도를 영구적으로 기억하게 만드는 핵심 도구입니다.\n커스텀 도구 (MCP 지원): Gemini CLI는 .gemini/settings.json 파일을 통해 MCP 서버를 등록하고, 이를 커스텀 도구로 활용할 수 있습니다.\n설정 방법 (.gemini/settings.json): { \u0026#34;mcpServers\u0026#34;: { \u0026#34;filesystem\u0026#34;: { \u0026#34;command\u0026#34;: \u0026#34;npx\u0026#34;, \u0026#34;args\u0026#34;: [\u0026#34;-y\u0026#34;, \u0026#34;@modelcontextpro }, \u0026#34;github\u0026#34;: { \u0026#34;command\u0026#34;: \u0026#34;npx\u0026#34;, \u0026#34;args\u0026#34;: [\u0026#34;-y\u0026#34;, \u0026#34;@modelcontextpro \u0026#34;env\u0026#34;: { \u0026#34;GITHUB_TOKEN\u0026#34;: \u0026#34;your_github_token\u0026#34; } }, \u0026#34;playwright\u0026#34;: { \u0026#34;command\u0026#34;: \u0026#34;npx\u0026#34;, \u0026#34;args\u0026#34;: [\u0026#34;-y\u0026#34;, \u0026#34;@playwright/mcp\u0026#34;] } } } 사용 예시: 위와 같이 github MCP 서버가 설정된 상태에서, 다음과 같이 자연어로 명령할 수 있습니다. gemini-cli\u0026gt; \u0026ldquo;이 저장소에서 \u0026lsquo;refactor\u0026rsquo; 라벨이 붙은 가장 오래된 이슈를 찾아줘.\u0026rdquo; Gemini는 등록된 github MCP 서버를 통해 GitHub API와 상호작용하여 해당 이슈를 찾아 사용자에게 보여줍니다.\n영구적인 메모리 (gemini.md): Gemini CLI는 프로젝트 루트 디렉토리에 있는 gemini.md 파일을 영구적인 메모리로 활용합니다. 사용자가 \u0026ldquo;이 내용을 기억해줘\u0026quot;라고 말하거나, 대화 중 중요한 정보(예: 아키텍처 결정, 코딩 스타일 가이드라인, 팀의 규칙)가 발생하면 Gemini는 이를 gemini.md 파일에 요약하여 저장합니다.\n작동 방식: 사용자가 \u0026ldquo;우리 팀은 모든 API 응답을 Zod 스키마로 검증해야 한다고 기억해줘\u0026rdquo; 라고 요청합니다.\nGemini는 해당 내용을 gemini.md 파일에 다음과 같이 추가합니다.\n## Project Guidelines - All API responses must be validated using Zod schemas. 이후의 모든 대화와 작업에서, Gemini는 gemini.md 파일을 먼저 참조하여 프로젝트의 규칙과 맥락을 벗어나지 않는 결과물을 생성합니다. 이를 통해 일관성 있는 개발을 유지할 수 있습니다.\n컨텍스트 인식: Gemini CLI는 현재 작업 중인 디렉토리의 파일 구조와 내용을 파악하여 사용자의 요청에 대한 깊은 문맥을 이해합니다. 이를 통해 더 정확하고 관련성 높은 응답을 제공합니다.\n사용자 승인 기반의 안전성: 파일 시스템을 변경하거나 명령어를 실행하는 등 중요한 작업을 수행하기 전에는 항상 사용자에게 실행 여부를 묻고 명시적인 승인을 받습니다. 이는 잠재적인 위험을 방지하고 사용자가 모든 과정을 제어할 수 있도록 보장합니다.\nGemini CLI의 역할 Gemini CLI는 개발자와 소통하며 복잡한 문제를 해결하는 AI 페어 프로그래머 역할을 합니다. 주요 역할은 다음과 같습니다:\n코드베이스 탐색 및 이해: \u0026ldquo;이 프로젝트에서 \u0026lsquo;User\u0026rsquo; 모델이 어떻게 사용되는지 알려줘\u0026quot;와 같은 질문에 답하기 위해 코드를 검색하고 분석합니다. 자동화된 코드 수정: \u0026ldquo;모든 API 요청에 타임아웃 로직을 추가해줘\u0026quot;와 같은 복잡한 리팩토링 작업을 여러 파일에 걸쳐 자동으로 수행합니다. 개발 환경 설정: \u0026ldquo;이 프로젝트에 필요한 의존성을 설치하고 데이터베이스를 마이그레이션해줘\u0026rdquo; 같은 요청을 받아 package.json을 읽고 필요한 셸 명령을 실행합니다. 테스트 및 디버깅: \u0026ldquo;이 함수에 대한 테스트 코드를 작성하고 실행해줘\u0026quot;라는 요청에 따라 테스트 파일을 생성하고 테스트 명령을 실행하여 결과를 보고합니다. Gemini CLI 설치 및 구성 Gemini CLI는 간단한 절차를 통해 설치하고 바로 사용할 수 있습니다.\n1. 설치 및 구성 필수 요구사항:\nNode.js 및 npm (또는 해당 패키지 매니저) 설치. Google AI Studio에서 Gemini API 키 발급. 설치 단계 (예시):\n터미널에서 다음 명령을 실행하여 Gemini CLI를 전역으로 설치합니다. npm install -g @google/gemini-cli 설치가 완료되면 API 키를 설정합니다. gemini config set api_key YOUR_GOOGLE_API_KEY (선택) 선호하는 Gemini 모델을 기본값으로 설정할 수 있습니다. gemini config set model gemini-1.5-pro-latest 2. 기본 사용 Gemini CLI 실행: 터미널에서 gemini-cli 또는 gcli와 같은 명령어로 세션을 시작합니다. 자연어 요청: 프롬프트에 원하는 작업을 자유롭게 입력합니다. 예: \u0026ldquo;현재 디렉토리에 있는 main.py 파일을 읽고, PEP 8 스타일 가이드에 맞게 수정해줘.\u0026rdquo; 도구 사용 승인: Gemini가 파일 수정이나 명령어 실행과 같은 도구를 사용하려고 할 때, 사용자에게 승인을 요청하는 프롬프트가 표시됩니다. y를 눌러 승인하거나 n을 눌러 취소할 수 있습니다. 대화 지속: Gemini는 이전 대화와 작업 내용을 기억하므로, \u0026ldquo;방금 수정한 파일에 대한 커밋 메시지를 작성해줘\u0026quot;와 같이 연속적인 요청을 할 수 있습니다. 지원 AI 모델 Gemini CLI는 구글의 최신 Gemini 모델들을 활용하여 강력한 성능을 제공합니다.\nGemini 1.5 Pro: 방대한 컨텍스트 창(최대 100만 토큰)과 멀티모달 이해 능력을 갖춘 플래그십 모델입니다. 복잡한 코드베이스 분석 및 대규모 리팩토링에 가장 적합합니다. Gemini 1.5 Flash: Pro 모델보다 빠르고 비용 효율적인 모델입니다. 일반적인 코드 생성, 파일 조작, 간단한 스크립팅 작업에 이상적입니다. 기타 모델: 사용자는 필요에 따라 다른 Gemini 모델 버전도 선택하여 사용할 수 있습니다. 모델 선택 팁:\n일상적인 작업: Gemini 1.5 Flash는 빠른 응답 속도와 낮은 비용으로 대부분의 개발 작업을 처리하기에 충분합니다. 복잡한 분석 및 대규모 변경: 프로젝트 전체에 대한 깊은 이해가 필요하거나 여러 파일에 걸친 대규모 변경이 필요할 때는 Gemini 1.5 Pro를 사용하는 것이 좋습니다. 유용한 기능 리스트 Gemini CLI는 개발 워크플로우를 가속화하는 다양한 기능을 제공합니다.\n대화형 코드 생성 및 수정: 자연어 대화를 통해 코드를 생성하고 즉시 파일에 쓰거나 기존 코드를 수정합니다. 파일 시스템과의 완벽한 통합: ls -R, cat, mkdir과 같은 파일 시스템 명령을 자연어로 요청하고 Gemini가 대신 실행하도록 할 수 있습니다. 셸 명령어 실행 및 결과 분석: 테스트 실행, 패키지 설치, 빌드 등 모든 셸 명령을 실행하고, 그 결과를 바탕으로 다음 작업을 이어나갈 수 있습니다. (예: 테스트 실패 시 자동으로 디버깅 시작) Git 워크플로우 자동화: git status로 변경 사항을 확인하고, git add로 파일을 스테이징한 후, 의미 있는 커밋 메시지를 생성하여 git commit까지 한 번에 처리할 수 있습니다. 웹 검색 통합: \u0026ldquo;최신 React 버전의 주요 변경 사항을 알려줘\u0026quot;와 같이 외부 정보가 필요한 경우, 웹 검색을 통해 최신 정보를 찾아 요약해줍니다. 프로젝트 컨텍스트 자동 로드: CLI가 시작될 때 현재 디렉토리 구조를 파악하여, 사용자가 파일 경로를 일일이 지정하지 않아도 문맥에 맞는 작업을 수행합니다. 안전 모드: 사용자의 명시적인 승인 없이는 어떠한 파일도 변경하거나 명령을 실행하지 않아 시스템을 안전하게 보호합니다. Gemini CLI와 Gemini Code Assist 비교 Gemini CLI와 Google의 Gemini Code Assist는 모두 Gemini 모델을 기반으로 개발자의 생산성을 높이는 AI 코딩 도우미이지만, 작동 환경과 핵심 철학에서 중요한 차이를 보입니다.\nGemini Code Assist란? Google Cloud에서 제공하는 AI 기반 코딩 어시스턴트로, VS Code 및 JetBrains IDEs와 같은 통합 개발 환경(IDE)에서 확장 프로그램 형태로 작동합니다. 코드 완성, 버그 수정, 테스트 케이스 생성 등 개발 워크플로우에 직접 통합되어 개발자의 생산성을 높이는 데 중점을 둡니다.\n주요 차이점 요약\n기능/특징 Gemini CLI Gemini Code Assist 핵심 철학 터미널 기반 자율 에이전트: 복잡한 작업을 계획하고 실행하는 데 중점을 둔 대화형 에이전트 IDE 통합 보조 도구: 코드 완성, 인라인 채팅 등 IDE 내에서 개발자의 작업을 보조하는 데 중점을 둔 도구 작동 환경 터미널 (CLI) 통합 개발 환경 (IDE) 주요 기능 파일 시스템 조작, 셸 명령어 실행, Git 워크플로우 자동화 등 환경과 상호작용하는 작업 전체 코드 블록 완성, 스마트 액션, 채팅 기반 질의응답 등 코드 중심의 작업 컨텍스트 범위 프로젝트 전체 파일 시스템, 터미널 환경 열려 있는 파일 및 코드 일부, 더 넓은 컨텍스트를 위한 채팅 기능 확장성 **도구(Tools)**를 통해 외부 스크립트나 API와 자유롭게 연동 가능 IDE 확장 기능에 의존하며, 외부 도구 연동은 제한적 대상 사용자 터미널 환경에서 복잡한 워크플로우를 자동화하고 싶은 개발자, DevOps 엔지니어 IDE 내에서 코드 작성 생산성을 높이고 싶은 모든 개발자 가격 정책 Google AI API 토큰 기반 사용량 과금 (Pay-as-you-go) Google Cloud 구독 기반 (주로 엔터프라이즈 대상) 결론 Gemini CLI는 자율적인 에이전트로서 도구 사용 능력과 깊은 문맥 이해를 바탕으로 개발자의 생산성을 극대화하는 강력한 도구입니다. 단순한 코드 제안을 넘어, 실제 개발 환경과 상호작용하며 복잡한 작업을 자동화합니다. 설치와 구성이 간편하며, 사용자 승인 기반의 안전장치를 통해 안심하고 사용할 수 있습니다. 터미널 환경에서 AI의 능력을 최대한 활용하고 싶은 개발자라면 Gemini CLI는 최고의 선택이 될 것입니다.\n추가 리소스 Google AI for Developers Gemini API 문서 Gemini CLI 공식 GitHub 저장소 (가상) ","permalink":"https://cdecl.github.io/devops/gemini_cli/","summary":"\u003cp\u003eGemini CLI의 핵심 개념, 주요 기능, 설치 및 구성 방법, 그리고 다른 AI 코딩 도우미와의 비교를 통해 Gemini CLI를 효과적으로 활용하는 방법을 알아봅니다.\u003c/p\u003e\n\u003ch2 id=\"gemini-cli란\"\u003eGemini CLI란?\u003c/h2\u003e\n\u003cp\u003eGemini CLI는 구글에서 개발한 대화형 AI 코딩 어시스턴트로, 터미널 환경에서 직접 작동합니다. 개발자는 자연어 명령을 통해 복잡한 개발 작업을 Gemini에게 위임할 수 있습니다. 파일 시스템 조작, 코드 리팩토링, 셸 명령어 실행, Git 버전 관리 등 다양한 작업을 자동화하여 개발 생산성을 크게 향상시킵니다. 이 포스트에서는 Gemini CLI의 핵심 철학, 주요 기능, 설치 및 구성, 그리고 GitHub Copilot CLI와의 비교를 통해 그 차이점을 명확히 설명합니다.\u003c/p\u003e","title":"구글의 AI 코딩 어시스턴트, Gemini CLI 사용 가이드"},{"content":"Cline의 핵심 개념, 역할, 지원 AI 모델, 설치 및 구성 방법, 그리고 유용한 기능들을 상세히 소개합니다.\nCline이란? Cline은 Visual Studio Code(VS Code)와 통합된 오픈소스 AI 코딩 어시스턴트로, 복잡한 소프트웨어 개발 작업을 자동화하고 생산성을 극대화합니다. Claude 3.7 Sonnet, DeepSeek, Google Gemini 등 다양한 대형 언어 모델(LLM)을 활용하여 코드 작성, 디버깅, 리팩토링, 터미널 명령 실행 등을 지원합니다. 이 포스트에서는 Cline의 정의, 역할, 지원 AI 모델, 설치 및 구성 방법, 그리고 개발자를 위한 유용한 기능들을 자세히 다룹니다.\nCline의 핵심 개념 Cline을 이해하기 위한 주요 개념은 다음과 같습니다:\nPlan/Act 모드: Cline의 독특한 듀얼 모드 시스템으로, Plan 모드에서는 작업 계획을 수립하고, Act 모드에서는 계획을 실행합니다. **Model Context Pro 프로젝트별 설정 (.cline/mcp.json): 프로젝트 루트 디렉터리에 위치하며, 해당 프로젝트에만 적용됩니다. 예시 { \u0026#34;mcpServers\u0026#34;: { \u0026#34;filesystem\u0026#34;: { \u0026#34;command\u0026#34;: \u0026#34;npx\u0026#34;, \u0026#34;args\u0026#34;: [\u0026#34;-y\u0026#34;, \u0026#34;@modelcontextpro }, \u0026#34;github\u0026#34;: { \u0026#34;command\u0026#34;: \u0026#34;npx\u0026#34;, \u0026#34;args\u0026#34;: [\u0026#34;-y\u0026#34;, \u0026#34;@modelcontextpro \u0026#34;env\u0026#34;: { \u0026#34;GITHUB_TOKEN\u0026#34;: \u0026#34;your_github_token\u0026#34; } } } } 전역 설정 (~/.../cline_mcp_settings.json): 모든 프로젝트에 공통으로 적용되는 설정을 관리합니다. 프로젝트별 설정이 전역 설정을 덮어씁니다. 경로: ~/Library/Application Support/Code/User/globalStorage/saoudrizwan.claude-dev/settings/cline_mcp_settings.json (macOS 기준) 용도: Playwright, Obsidian 등 범용적으로 사용하는 도구를 한 번만 설정하여 모든 프로젝트에서 활용할 수 있습니다. 유용한 MCP 서버 5가지: **`@modelcontextpro **`@modelcontextpro @playwright/mcp: Playwright를 통해 브라우저를 제어하여 웹 스크래핑이나 E2E 테스트를 수행합니다. obsidian-mcp: Obsidian 노트와 상호작용하여 지식 베이스를 AI 워크플로우에 통합합니다. @wonderwhy-er/desktop-commander: 데스크톱 애플리케이션을 제어하거나 OS 수준의 작업을 자동화합니다. Tailored Prompts: .clinerules 파일을 통해 프로젝트별 코딩 스타일, 기술 스택, 아키텍처 가이드라인을 설정. Token-Based Pricing: API 사용량에 따라 비용이 청구되며, Cline은 토큰 사용량과 비용을 실시간으로 표시. Zero Trust Security: 코드와 데이터는 사용자의 장치에 남아 있으며, 외부 API로 전송 시 명시적 승인이 필요. Deep Context Understanding: 전체 코드베이스를 읽고 문맥을 파악하여 정확한 코드 제안 제공. Multi-File Edits: 여러 파일을 동시에 읽고 수정 가능, 대규모 리팩토링에 적합. Cline의 역할 Cline은 단순한 코드 자동 완성을 넘어, 개발자와 협력하는 에이전트형 코딩 파트너 역할을 수행합니다. 주요 역할은 다음과 같습니다:\n코드 생성 및 수정: 자연어 요청(예: \u0026ldquo;React 계산기 앱 작성\u0026rdquo;)을 통해 코드 파일 생성 및 수정. 터미널 명령 실행: 패키지 설치, 테스트 실행, 배포 등 터미널 작업 자동화. 외부 도구 통합: MCP를 통해 브라우저, 데이터베이스, Jira 등과의 상호작용 지원. 프로젝트 문맥 이해: 코드베이스와 기술 스택을 분석하여 문맥에 맞는 솔루션 제공. 비용 투명성: 실시간 토큰 사용량 및 비용 모니터링으로 예산 관리 지원. Cline 설치 및 구성, 기본 사용 방법 Cline은 간단한 설치와 구성으로 빠르게 시작할 수 있습니다. 아래는 설치 및 기본 사용 방법입니다.\n1. 설치 및 구성 필수 요구사항:\nVisual Studio Code 설치. OpenRouter, Anthropic, OpenAI 등 API 키 준비. 설치 단계:\nVS Code에서 Extensions 마켓플레이스로 이동(Ctrl+Shift+X). \u0026ldquo;Cline\u0026rdquo; 검색 후 공식 확장 프로그램 설치. Cline 사이드바 아이콘 클릭 후 설정(⚙) 버튼 선택. API 제공자 설정: OpenRouter (추천): https://openrouter.ai/api/v1를 Base URL로 입력, API 키 추가. 로컬 모델: Ollama 설치 후 http://localhost:11434로 설정. 선호 모델 선택(예: deepseek/deepseek-chat). .clinerules 설정:\n프로젝트 루트에 .clinerules 폴더 생성.\n예시 규칙 파일(01-coding.md):\n# Coding Standards - Use TypeScript for all JavaScript projects. - Follow Airbnb style guide. - Prefer functional components in React. Cline은 .clinerules 내 모든 Markdown 파일을 자동으로 적용.\n2. 기본 사용 Cline 실행: VS Code에서 Cline 사이드바 열기(Ctrl+Shift+P, Cline: Open). 자연어 요청: 예: \u0026ldquo;TypeScript로 React 계산기 앱 작성\u0026rdquo;. Cline은 계획을 수립한 후 파일 생성, 의존성 설치, 로컬 서버 실행 등을 수행. 승인 프로세스: 파일 쓰기, 명령 실행 시 사용자 승인 요청(자동 승인 설정 가능). 모델 전환: 작업 유형에 따라 모델 변경(예: 계획 → DeepSeek, 구현 → Claude 3.7 Sonnet). 지원 AI 모델 Cline은 다양한 AI 모델을 지원하여 작업 유형과 예산에 맞는 선택을 가능하게 합니다. 주요 모델은 다음과 같습니다:\nAnthropic Claude 3.7 Sonnet: 코딩, 복잡한 추론, 문맥 이해에 강력. 비용: $3.00/M 입력, $15.00/M 출력. DeepSeek-R1: 비용 효율적인 오픈소스 모델, 계획 및 간단한 코딩 작업에 적합. 비용: $0.65/M 입력, $2.19/M 출력. Google Gemini 2.0 Flash: 리팩토링, 코드 정리 작업에 탁월. 무료 API 요청(월 50회) 제공. OpenAI GPT-3.5 Turbo: 일상적인 코딩 작업에 적합한 중급 모델. 로컬 모델: LM Studio/Ollama를 통해 로컬에서 실행 가능(예: Qwen 2.5 Coder 32B). 모델 선택 팁:\n시작 단계: Claude 3 Haiku 또는 GPT-3.5로 시작, 필요 시 업그레이드. 복잡한 작업: Claude 3.7 Sonnet 또는 DeepSeek-R1 + Sonnet 조합 사용. 비용 최적화: OpenRouter의 무료 티어 또는 DeepSeek 활용. 유용한 기능 리스트 Cline은 개발자 생산성을 높이는 다양한 기능을 제공합니다:\nPlan/Act 모드: Plan 모드: 작업 목표 분석 및 단계별 계획 수립. Act 모드: 계획 실행, 코드 작성, 테스트 수행. **Model Context Pro 커스텀 도구 생성(예: Jira 티켓 조회, AWS EC2 관리). 예시: add a tool that pulls the latest npm docs. 체크포인트 시스템: 작업마다 워크스페이스 스냅샷 저장, 롤백 가능. 예: Restore Workspace Only로 다른 버전 테스트. 실시간 비용 추적: 토큰 사용량 및 비용을 UI에서 실시간 확인. 예: 작업 비용이 $0.50 초과 시 경고. 컨텍스트 윈도우 프로그레스 바: 모델의 컨텍스트 한계 시각화, 작업 분할 권장. 멀티 파일 편집: 대규모 리팩토링 시 여러 파일 동시 수정. 터미널 통합: npm install, git commit 등 명령 자동 실행. 자연어 이해: \u0026ldquo;React 앱에 다크 모드 추가\u0026rdquo; 같은 요청 처리. 커스텀 규칙 관리: .clinerules로 프로젝트별 가이드라인 설정. 브라우저 상호작용: 로컬 서버 실행 후 브라우저로 테스트 확인. Cline과 Gemini Code Assist 비교 Cline과 Google의 Gemini Code Assist는 모두 개발 생산성을 높이는 AI 코딩 도우미이지만, 철학과 기능에서 차이가 있습니다.\nGemini Code Assist란? Google Cloud에서 제공하는 AI 기반 코딩 어시스턴트로, VS Code 및 JetBrains IDEs에서 확장 프로그램 형태로 작동합니다. Gemini 모델을 기반으로 코드 완성, 버그 수정, 테스트 케이스 생성 등 개발 워크플로우에 직접 통합되어 개발자의 생산성을 높이는 데 중점을 둡니다.\n주요 차이점 요약\n기능/특징 Cline Gemini Code Assist 핵심 철학 에이전트 기반 자동화: 복잡한 작업을 계획(Plan)하고 실행(Act)하는 자율 에이전트 개발자 워크플로우 통합: 코드 완성, 인라인 채팅 등 IDE에 통합된 보조 도구 주요 기능 MCP를 통한 외부 도구 통합, 멀티 파일 편집, 터미널 제어 전체 코드 블록 완성, 스마트 액션, 채팅 기반 질의응답 컨텍스트 범위 프로젝트 전체 코드베이스, .clinerules로 커스텀 규칙 적용 열린 파일 및 코드 일부, 더 넓은 컨텍스트를 위한 채팅 기능 확장성 **MCP(Model Context Pro 대상 사용자 복잡한 작업을 자동화하고 싶은 개발자, DevOps 엔지니어 일상적인 코딩 생산성 향상을 원하는 모든 개발자 가격 정책 API 토큰 기반 사용량 과금 (Pay-as-you-go) Google Cloud 구독 기반 (주로 엔터프라이즈 대상) 결론 Cline은 Plan/Act 모드, MCP, 다양한 AI 모델 지원을 통해 개발자의 생산성을 혁신적으로 향상시킵니다. 설치 및 구성은 간단하며, 체크포인트 시스템과 비용 투명성으로 안전하고 효율적인 작업이 가능합니다. 유용한 기능들은 코드 작성부터 외부 도구 통합까지 모든 개발 단계에서 강력한 지원을 제공합니다. Cline을 처음 사용하는 개발자는 소규모 프로젝트로 시작하여 .clinerules와 모델 조합을 최적화해 보세요.\n추가 리소스 Cline 공식 사이트 Cline 문서 Cline GitHub 저장소 Cline Discord 커뮤니티 ","permalink":"https://cdecl.github.io/devops/cline_usage_guide/","summary":"\u003cp\u003eCline의 핵심 개념, 역할, 지원 AI 모델, 설치 및 구성 방법, 그리고 유용한 기능들을 상세히 소개합니다.\u003c/p\u003e\n\u003ch2 id=\"cline이란\"\u003eCline이란?\u003c/h2\u003e\n\u003cp\u003eCline은 Visual Studio Code(VS Code)와 통합된 오픈소스 AI 코딩 어시스턴트로, 복잡한 소프트웨어 개발 작업을 자동화하고 생산성을 극대화합니다. Claude 3.7 Sonnet, DeepSeek, Google Gemini 등 다양한 대형 언어 모델(LLM)을 활용하여 코드 작성, 디버깅, 리팩토링, 터미널 명령 실행 등을 지원합니다. 이 포스트에서는 Cline의 정의, 역할, 지원 AI 모델, 설치 및 구성 방법, 그리고 개발자를 위한 유용한 기능들을 자세히 다룹니다.\u003c/p\u003e","title":"오픈소스 AI 코딩 어시스턴트, Cline 사용 가이드"},{"content":"Tailscale의 핵심 개념, VPN 정의, 동작 방식, 설치 및 구성 방법, 엔드포인트 관리, 포트 제어, 다른 단말 접속, 그리고 보안 설정 방법\nTailscale이란? Tailscale은 WireGuard 프로토콜을 기반으로 한 현대적인 매쉬 VPN 솔루션으로, 복잡한 네트워크 설정 없이 장치 간 안전하고 빠른 연결을 제공합니다. 개인, 팀, 또는 기업의 장치를 연결하여 로컬 네트워크, 원격 서버, 모바일 장치를 쉽게 관리할 수 있습니다. 이 포스트에서는 Tailscale의 핵심 개념, VPN 정의와 매쉬 VPN 동작 방식, 설치 및 구성, 엔드포인트 확인, 포트 제어, 다른 단말 접속, 그리고 보안 설정을 자세히 다룹니다.\nTailscale의 핵심 개념 이해하기 쉬운 Tailscale의 핵심 개념은 다음과 같습니다:\nTailnet: Tailscale의 가상 네트워크로, 사용자의 모든 장치가 속하는 논리적 네트워크. 각 장치는 고유한 Tailscale IP(100.x.y.z) 또는 MagicDNS 이름(예: my-laptop.tailnet)을 가짐. MagicDNS: IP 주소 대신 직관적인 장치 이름(예: my-pc.tailnet)으로 연결을 가능하게 하는 기능. 관리 콘솔에서 기본적으로 활성화. Tailscale IP: tailnet 내 장치에 할당된 고유한 가상 IP 주소(100.x.y.z). 공인 IP나 방화벽 설정 없이 장치 간 연결 가능. WireGuard: Tailscale의 핵심 프로토콜로, 빠르고 안전한 암호화를 제공. 기존 VPN보다 간단하고 효율적. DERP 서버: P2P 연결이 불가능할 때 사용하는 릴레이 서버. HTTPS(443) 포트를 통해 동작하며, 데이터는 여전히 암호화됨. 제로 트러스트 보안: 모든 연결은 기본적으로 암호화되며, 접근 제어 목록(ACL)을 통해 권한을 엄격히 관리. 태그(Tag): 장치나 사용자 그룹을 식별하는 라벨(예: tag:server). ACL에서 특정 그룹에 대한 접근 제어에 사용. 출구 노드(Exit Node): 특정 장치를 통해 tailnet의 인터넷 트래픽을 라우팅하는 기능. 서브넷 라우팅: Tailscale이 설치되지 않은 로컬 네트워크 장치(예: 프린터)에 접근 가능하도록 설정. WireGuard 프로토콜 WireGuard는 Tailscale의 핵심 프로토콜로, 현대적이고 경량화된 VPN 프로토콜입니다. 다음은 WireGuard의 주요 특징과 Tailscale에서의 역할입니다:\n경량화된 설계: 약 4,000줄의 코드로 구성된 WireGuard는 기존 VPN 프로토콜(OpenVPN, IPsec 등)보다 간단하고 빠르며, 유지보수가 쉬움. 고성능 암호화: ChaCha20, Poly1305, Curve25519와 같은 최신 암호화 기술을 사용하여 보안성과 속도를 동시에 제공. 빠른 연결 설정: WireGuard는 연결 설정 시간이 짧아, Tailscale의 P2P 연결에서 지연 시간을 최소화. 크로스 플랫폼 지원: Linux, Windows, macOS, iOS, Android 등 다양한 플랫폼에서 일관된 성능 제공. Tailscale과의 통합: Tailscale은 WireGuard를 사용하여 장치 간 직접 연결(P2P)을 구현하며, DERP 서버를 통해 NAT 관통 및 릴레이 연결을 보완. WireGuard의 단순성과 보안성은 Tailscale의 빠르고 안전한 매쉬 VPN 환경을 가능하게 합니다.\nVPN 정의 및 Tailscale 동작 방식 1. VPN이란? VPN(Virtual Private Network)은 공공 네트워크(인터넷)를 통해 장치 간 안전한 전용 네트워크를 형성하는 기술입니다. 데이터를 암호화하여 외부의 무단 접근을 차단하며, 원격으로 사설 네트워크에 접근할 수 있게 합니다.\n2. Tailscale의 매쉬 VPN 동작 방식: Tailscale은 매쉬 VPN(Mesh VPN)을 구현하여 모든 장치가 서로 직접 연결됩니다. 기존 허브-스포크(Hub-and-Spoke) 모델은 모든 트래픽이 중앙 서버를 거치기 때문에 병목 현상이 발생하거나 중앙 서버 장애 시 전체 네트워크가 마비될 수 있습니다. 반면, Tailscale의 피어-투-피어(P2P) 모델은 장치 간 직접 통신하므로 지연 시간이 짧고, 특정 지점의 장애가 전체 네트워크에 미치는 영향이 적습니다. 클라이언트와 서버의 상호작용: 서버: 서버에 Tailscale을 설치하면, 해당 서버는 tailnet의 일부가 됩니다. 별도의 방화벽 포트 개방이나 복잡한 라우팅 설정 없이도 tailnet 내 다른 장치들이 서버에 접근할 수 있습니다. 서버는 고유한 Tailscale IP와 MagicDNS 이름을 가지며, 이를 통해 클라이언트가 서버의 서비스(예: SSH, 웹 서버)에 연결할 수 있습니다. 클라이언트: 클라이언트 장치에 Tailscale을 설치하고 로그인하면, tailnet 내의 다른 모든 장치(서버 포함)와 직접 통신할 수 있는 가상 네트워크 인터페이스가 생성됩니다. 클라이언트는 서버의 MagicDNS 이름(예: my-server.tailnet)을 사용하여 실제 IP 주소를 몰라도 서버에 안전하게 접속할 수 있습니다. 모든 트래픽은 WireGuard를 통해 종단 간 암호화됩니다. WireGuard 기반: 고성능 암호화 프로토콜 WireGuard를 사용하여 빠르고 안전한 연결. 중앙 조정 서버: Tailscale은 연결 설정을 위해 DERP(Distributed Encrypted Relay Pro 제로 트러스트 보안: 모든 연결은 암호화되며, ACL을 통해 권한 관리. 3. Tailscale의 주요 역할 요약 Tailscale은 단순한 VPN을 넘어, 정책 관리, P2P 연결, 그리고 필요시 브릿지 역할을 수행하는 종합적인 네트워킹 솔루션입니다. 주요 역할은 다음과 같습니다.\n정책 관리 및 배포 (Control Plane):\n중앙 조정 서버가 접근 제어 목록(ACL)과 같은 네트워크 정책을 모든 장치에 배포합니다. 이를 통해 \u0026ldquo;누가 무엇에 접근할 수 있는지\u0026quot;를 정의하여 제로 트러스트 보안을 구현합니다. P2P 직접 연결 및 브릿지 (Data Plane):\n기본적으로 장치 간 P2P(피어-투-피어) 메시 네트워크를 형성하여 데이터 전송 지연을 최소화합니다. 방화벽이나 NAT 환경으로 인해 P2P 연결이 불가능할 경우, DERP 릴레이 서버가 암호화된 트래픽을 중계하는 브릿지 역할을 합니다. 설정 간소화 (Zero Config):\n복잡한 방화벽 규칙이나 포트 포워딩 설정 없이, 클라이언트 설치 및 인증만으로 네트워크(Tailnet)에 자동으로 참여시킵니다. 주요 브릿지 기능:\n서브넷 라우터: Tailscale이 설치되지 않은 로컬 네트워크 장치를 tailnet에 연결합니다. 출구 노드(Exit Node): 모든 인터넷 트래픽을 특정 장치를 통해 라우팅하여 공용 Wi-Fi 등에서 보안을 강화합니다. Tailscale Serve: 로컬에서 실행 중인 서비스를 tailnet 전체에 안전하게 공유합니다. Tailscale 설치 및 구성, 엔드포인트 확인 방법 Tailscale은 간단한 설치와 구성으로 빠르게 사용할 수 있습니다. 아래는 설치 및 엔드포인트 확인 방법입니다.\n1. 설치 및 구성 계정 생성: tailscale.com에 접속. Get Started 클릭 후 Google, Microsoft, GitHub 등 SSO 계정으로 로그인. 개인용 무료 플랜(최대 3명 사용자, 100대 장치) 선택. 클라이언트 설치: Windows/macOS: 다운로드 페이지에서 설치 파일 실행 후 로그인. Linux (Ubuntu): curl -fsSL https://pkgs.tailscale.com/stable/ubuntu/noble.noarmor.gpg | sudo tee /usr/share/keyrings/tailscale-archive-keyring.gpg \u0026gt;/dev/null curl -fsSL https://pkgs.tailscale.com/stable/ubuntu/noble.tailscale-keyring.list | sudo tee /etc/apt/sources.list.d/tailscale.list sudo apt update \u0026amp;\u0026amp; sudo apt install tailscale sudo tailscale up iOS/Android: App Store/Google Play에서 “Tailscale” 설치 후 로그인. 네트워크 설정: 로그인 후 장치가 tailnet에 자동 추가. MagicDNS 활성화: 관리 콘솔(login.tailscale.com)의 DNS 탭에서 확인. 장치 이름(예: my-pc.tailnet)으로 연결 가능. 인증 키 사용: 서버의 경우 관리 콘솔의 Keys 탭에서 인증 키 생성 후: sudo tailscale up --authkey=\u0026lt;your-auth-key\u0026gt; 2. 엔드포인트 확인 방법 관리 콘솔: login.tailscale.com의 Machines 탭에서 장치 목록, Tailscale IP(100.x.y.z), MagicDNS 이름 확인. 명령어: tailscale status: 연결된 장치 목록과 상태 표시. tailscale netcheck: 네트워크 연결 상태 및 엔드포인트 정보 확인. tailscale ping \u0026lt;장치 이름\u0026gt;: 특정 장치와의 연결 테스트(예: tailscale ping my-laptop.tailnet). 예시 출력 (tailscale status): 100.64.1.2 my-laptop user@domain.com Linux online 100.64.1.3 my-server user@domain.com Linux online 포트 제어 및 관리 Tailscale은 모든 포트를 암호화된 터널로 연결하지만, 특정 포트를 제어할 수 있습니다.\n1. 기본적으로 허용되는 서비스 포트 기본적으로 Tailscale은 tailnet에 속한 장치 간의 모든 포트 통신을 허용합니다. 이는 마치 동일한 로컬 네트워크(LAN)에 연결된 것처럼 작동하여, 별도의 방화벽 규칙 없이도 장치 간에 자유롭게 서비스를 이용할 수 있습니다. 예를 들어, 다음과 같은 일반적인 포트들이 기본적으로 열려 있습니다.\nSSH (22/TCP): 원격 서버 관리 HTTP (80/TCP): 웹 서버 접근 HTTPS (443/TCP): 보안 웹 서버 접근 SMB/CIFS (445/TCP): 파일 공유 RDP (3389/TCP): 원격 데스크톱 연결 이러한 기본 정책은 초기 설정을 간소화하지만, 보안을 강화하기 위해 아래 설명된 접근 제어(ACL)를 사용하여 특정 포트만 허용하도록 제한하는 것이 좋습니다.\n2. Tailscale 운영 포트 UDP 41641: Tailscale의 기본 포트로, P2P 연결에 사용. 방화벽에서 열어야 함. HTTPS 443: DERP 서버를 통한 릴레이 연결에 사용. 3. 접근 제어(ACL)로 포트 관리 수정 위치: Tailscale의 접근 제어(ACL)는 **관리 콘솔(Admin Console)**에서 수정합니다. login.tailscale.com에 로그인한 후, Access Controls 페이지로 이동하면 JSON 형식의 정책 파일이 나타납니다. 이 파일을 직접 수정하여 규칙을 적용할 수 있습니다. 예시 (SSH 포트 22만 허용): { \u0026#34;acls\u0026#34;: [ {\u0026#34;action\u0026#34;: \u0026#34;accept\u0026#34;, \u0026#34;src\u0026#34;: [\u0026#34;user@example.com\u0026#34;], \u0026#34;dst\u0026#34;: [\u0026#34;tag:server:22\u0026#34;]} ] } 설정 방법: 장치에 태그 추가(예: tag:server). ACL 파일에 특정 포트 허용 규칙 작성. 관리 콘솔에서 저장 및 적용. 4. 방화벽 설정 로컬 방화벽에서 Tailscale 트래픽 허용: Linux (ufw): sudo ufw allow 41641/udp sudo ufw allow 22/tcp Windows: Windows Defender 방화벽에서 Tailscale 실행 파일 예외 추가. 다른 단말에서의 접속 방법 Tailscale은 다양한 단말에서 간편하게 접속할 수 있도록 설계되었습니다.\n1. 접속 방법 동일 tailnet 내 장치: Tailscale IP 또는 MagicDNS 이름 사용. 예: SSH 접속: ssh user@my-server.tailnet 파일 공유: SCP 또는 SMB로 Tailscale IP 사용. 모바일 장치: iOS/Android 앱 설치 후 로그인. 앱에서 장치 목록 확인 후 접속(예: SSH 클라이언트로 my-server.tailnet 연결). 서브넷 라우터: Tailscale이 설치되지 않은 장치(예: 프린터) 접근: 한 장치에서 서브넷 라우팅 활성화: sudo tailscale up --advertise-routes=192.168.1.0/24 관리 콘솔의 Routes 탭에서 승인. 다른 단말에서 로컬 IP(예: 192.168.1.100)로 접근. 2. 출구 노드 사용 특정 장치를 통해 인터넷 트래픽 라우팅: 관리 콘솔에서 출구 노드 지정. 클라이언트에서: sudo tailscale up --exit-node=my-server.tailnet 기타 보안 사항 Tailscale은 기본적으로 높은 보안을 제공하지만, 추가 설정으로 보안을 강화할 수 있습니다.\n1. Tailnet Lock 기능: 새 장치 추가 시 기존 장치의 승인 요구. 설정: 관리 콘솔의 Security 탭에서 활성화. 사용 사례: 팀 환경에서 무단 장치 추가 방지. 2. SSO 및 2FA SSO 제공자(Google, Microsoft 등)에서 2FA(2단계 인증)를 활성화하여 계정 보안 강화. 관리 콘솔의 Users 탭에서 사용자별 인증 관리. 3. ACL로 세부 권한 관리 특정 사용자 또는 태그에 대한 접근 제한. 예: 개발자만 서버의 특정 포트에 접근: { \u0026#34;ac这一次 { \u0026#34;acls\u0026#34;: [ {\u0026#34;action\u0026#34;: \u0026#34;accept\u0026#34;, \u0026#34;src\u0026#34;: [\u0026#34;tag:dev\u0026#34;], \u0026#34;dst\u0026#34;: [\u0026#34;tag:server:8080\u0026#34;]} ] } 4. 로그 및 모니터링 관리 콘솔의 Logs 탭에서 연결 기록 확인. 이상 행위 감지 시 즉시 ACL 수정 또는 장치 차단. 5. 정기 업데이트 tailscale update로 최신 버전 유지. 취약점 패치 및 성능 개선 적용. 결론 Tailscale은 WireGuard 기반의 매쉬 VPN으로, 핵심 개념(Tailnet, MagicDNS, WireGuard 등)을 통해 간단하고 안전한 네트워크를 제공합니다. 설치 및 구성은 직관적이며, 엔드포인트 확인과 포트 제어를 통해 세밀한 관리 가능. 다른 단말 접속은 MagicDNS와 서브넷 라우팅으로 간편하며, 보안 설정(Tailnet Lock, ACL, 2FA 등)으로 데이터를 보호할 수 있습니다. Tailscale을 처음 사용하는 사용자는 기본 설정과 ACL을 단계적으로 적용하며 자신만의 안전한 네트워크를 구축해 보세요.\n추가 리소스 Tailscale 공식 사이트 Tailscale 문서 Tailscale 지원 Reddit Tailscale 커뮤니티 ","permalink":"https://cdecl.github.io/devops/tailscale-guide/","summary":"\u003cp\u003eTailscale의 핵심 개념, VPN 정의, 동작 방식, 설치 및 구성 방법, 엔드포인트 관리, 포트 제어, 다른 단말 접속, 그리고 보안 설정 방법\u003c/p\u003e\n\u003ch2 id=\"tailscale이란\"\u003eTailscale이란?\u003c/h2\u003e\n\u003cp\u003eTailscale은 WireGuard 프로토콜을 기반으로 한 현대적인 매쉬 VPN 솔루션으로, 복잡한 네트워크 설정 없이 장치 간 안전하고 빠른 연결을 제공합니다. 개인, 팀, 또는 기업의 장치를 연결하여 로컬 네트워크, 원격 서버, 모바일 장치를 쉽게 관리할 수 있습니다. 이 포스트에서는 Tailscale의 핵심 개념, VPN 정의와 매쉬 VPN 동작 방식, 설치 및 구성, 엔드포인트 확인, 포트 제어, 다른 단말 접속, 그리고 보안 설정을 자세히 다룹니다.\u003c/p\u003e","title":"Tailscale 가이드 - 안전한 매쉬 VPN 활용법"},{"content":"Obsidian의 주요 기능과 설정, 테마와 외관, 그리고 필수 커뮤니티 플러그인을 활용한 생산성 향상 방법\nObsidian이란? Obsidian은 마크다운 기반의 강력한 노트 관리 및 지식 관리 도구로, 로컬 파일을 활용해 개인 지식 베이스를 구축하는 데 최적화되어 있습니다. 링크를 통한 노트 간 연결, 그래프 뷰, 플러그인 생태계를 통해 유연한 워크플로우를 제공합니다. 이번 포스트에서는 Obsidian의 주요 기능, 설정, 테마와 외관, 그리고 생산성을 극대화할 수 있는 커뮤니티 플러그인(예: Tasks, Advanced Tables, Git 등)을 자세히 다룹니다.\nObsidian의 주요 기능 및 설정 Obsidian은 다양한 기능을 통해 사용자의 생산성을 높입니다. 아래는 핵심 기능과 이를 효과적으로 활용하기 위한 설정입니다.\n1. 주요 기능 마크다운 기반 노트 작성: Obsidian은 마크다운 형식을 사용해 간단하고 구조화된 노트를 작성할 수 있습니다. 예: # 제목, [[링크]]로 노트 연결. 그래프 뷰: 노트 간 링크를 시각화하여 지식의 연결성을 확인할 수 있습니다. 백링크와 아웃고잉 링크: 특정 노트가 참조된 위치와 연결된 노트를 쉽게 탐색. 로컬 파일 기반: 클라우드 종속 없이 로컬 저장소에서 작동하며, 데이터 소유권을 완전히 제어. 커뮤니티 플러그인: 수백 개의 플러그인을 통해 기능을 확장 가능. 2. 주요 설정 파일 및 링크 설정 (설정 \u0026gt; 파일 및 링크): 새 링크 형식: 상대 경로로 설정하여 노트 이동 시 링크 깨짐 방지. 기본 위치: 새 노트를 저장할 폴더 지정(예: Notes/Inbox). 삭제된 파일 처리: 휴지통으로 이동하도록 설정해 실수로 삭제 방지. 편집기 설정 (설정 \u0026gt; 편집기): 미리보기 모드에서 링크 표시: 활성화하여 편집 없이 링크 미리보기 가능. 스마트 인덴테이션: 코드 블록 작성 시 자동 들여쓰기. 줄바꿈 표시: 긴 텍스트 작업 시 가독성 향상. 핫키 설정 (설정 \u0026gt; 핫키): 자주 사용하는 기능(예: 새 노트 생성, 그래프 뷰 열기)에 단축키 지정. 예: Ctrl + T로 새 탭 열기, Ctrl + G로 그래프 뷰 전환. 코어 플러그인 활성화: 데일리 노트: 매일 자동으로 노트 생성. 템플릿: 반복적인 노트 형식을 빠르게 삽입. Zettelkasten 접두어: 고유 ID를 노트에 자동 추가. 테마와 외관, 유용한 기능 설정 Obsidian의 외관은 사용자 경험을 크게 향상시킬 수 있습니다. 테마와 CSS 조정을 통해 작업 환경을 최적화할 수 있습니다.\n1. 테마 설정 기본 테마: Obsidian은 Light와 Dark 테마를 제공하며, 설정 \u0026gt; 외관에서 변경 가능. 커뮤니티 테마: Minimal: 깔끔하고 미니멀한 디자인. Minimal Theme Settings 플러그인과 함께 사용 추천. ITS Theme: 현대적이고 세련된 스타일. Blue Topaz: 컬러풀한 UI로 시각적 작업에 적합. 설치 방법: 설정 \u0026gt; 외관 \u0026gt; 테마 관리에서 검색 후 설치. 2. CSS 커스터마이징 사용자 정의 CSS: 설정 \u0026gt; 외관 \u0026gt; CSS 스니펫 활성화 후 .obsidian/snippets/ 폴더에 .css 파일 추가. 예시 (폰트 크기 조정): .markdown-preview-view { font-size: 16px; } 유용한 스니펫: 테이블 크기 조정: 좁은 화면에서도 가독성 향상. 헤더 색상 변경: 계층 구조 시각화. 3. 유용한 외관 관련 설정 폰트 설정: 설정 \u0026gt; 외관 \u0026gt; 글꼴에서 시스템 폰트 또는 Noto Sans, Roboto 등 선호 폰트 선택. 줌 레벨: 설정 \u0026gt; 외관 \u0026gt; 기본 줌 레벨에서 화면 크기에 맞게 조정. 탭 스타일: 설정 \u0026gt; 외관 \u0026gt; 탭 스타일에서 컴팩트 탭으로 전환해 공간 절약. 커뮤니티 플러그인: 주요 기능 및 설정 Obsidian의 커뮤니티 플러그인은 생산성을 극대화하는 데 필수적입니다. 아래는 추천 플러그인과 주요 설정입니다.\n1. Tasks 기능: 할 일 목록 관리 및 추적. 주요 설정: 설정 \u0026gt; Tasks에서 날짜 형식(예: YYYY-MM-DD) 지정. 쿼리 필터: #task 태그로 필터링하거나 특정 폴더 내 작업만 표시. 상태 커스터마이징: To Do, In Progress, Done 외 사용자 정의 상태 추가. 예시: - [ ] Buy groceries #task - [x] Finish report #task due:2025-07-10 사용 사례: 프로젝트 관리, 데일리 플래너. 2. Advanced Tables 기능: 마크다운 테이블 생성 및 편집 간소화. 주요 설정: 자동 정렬: 테이블 셀 정렬(왼쪽, 가운데, 오른쪽). 열 이동: Ctrl + 화살표로 열 순서 변경. CSV 가져오기: 외부 데이터 통합. 예시: | Name | Age | Role | |------|-----|------| | Alice| 30 | Dev | | Bob | 25 | PM | 사용 사례: 데이터 정리, 보고서 작성. 3. Git 기능: Obsidian 볼트를 Git 저장소로 백업 및 버전 관리. 주요 설정: 설정 \u0026gt; Git에서 저장소 URL과 인증 정보 입력. 자동 커밋: 주기적 커밋(예: 5분마다) 설정. 브랜치 관리: main 또는 master 브랜치로 동기화. 사용 사례: 노트 백업, 팀 협업. 4. Iconize 기능: 파일, 폴더, 노트에 아이콘 추가. 주요 설정: 아이콘 세트: Lucide, FontAwesome 등 선택. 폴더별 아이콘: Notes 폴더에 📝, Projects에 🚀 설정. 사용 사례: 시각적 탐색, 폴더 구조 가독성 향상. 5. Remotely Save 기능: Dropbox, OneDrive, Google Drive 등 클라우드 동기화. 주요 설정: 동기화 경로: 클라우드 폴더와 로컬 볼트 매핑. 자동 동기화: 변경 사항 실시간 동기화. 사용 사례: 멀티 디바이스 작업, 데이터 백업. 6. Minimal Theme Settings 기능: Minimal 테마 전용 스타일 커스터마이징. 주요 설정: 컬러 스킴: 다크, 라이트, 또는 커스텀 팔레트. 카드 레이아웃: 노트를 카드 스타일로 표시. 사용 사례: 깔끔한 UI 선호 사용자. 7. Excel to Markdown Table 기능: Excel 또는 CSV 데이터를 마크다운 테이블로 변환. 주요 설정: 클립보드 가져오기: Excel에서 복사 후 바로 변환. 헤더 자동 감지: 첫 행을 헤더로 인식. 사용 사례: 데이터 분석, 보고서 통합. 8. Local REST API 기능: Obsidian 데이터를 API로 접근 가능. 주요 설정: 포트 설정: 8080 등 로컬 포트 지정. 인증: API 키 활성화로 보안 강화. 사용 사례: 외부 스크립트 연동, 자동화. 9. Strange New Worlds 기능: 노트 간 숨겨진 연결 탐색. 주요 설정: 유사도 임계값: 관련성 높은 노트만 표시. 그래프 통합: 그래프 뷰에 통합 표시. 사용 사례: 지식 네트워크 확장, 연구. 10. Floating 기능: 문서의 목차를 플로팅 창으로 표시. 주요 설정: 위치: 오른쪽 또는 왼쪽 사이드바. 접기/펴기: 하위 항목 자동 접기. 사용 사례: 긴 문서 탐색. 11. Keyshots 기능: 단축키 기반 워크플로우 자동화. 주요 설정: 커스텀 명령: 자주 사용하는 작업(예: 새 노트 생성)에 단축키 지정. 매크로: 여러 작업을 순차 실행. 사용 사례: 반복 작업 자동화. 결론 Obsidian은 강력한 마크다운 기반 노트 관리 도구로, 유연한 설정과 플러그인을 통해 생산성을 극대화할 수 있습니다. 핵심 기능은 노트 연결과 그래프 뷰를 통해 지식 관리의 새로운 가능성을 열어주며, 테마와 외관 설정은 작업 환경을 개인화합니다. 커뮤니티 플러그인(Tasks, Advanced Tables, Git 등)은 워크플로우를 더욱 효율적으로 만들어줍니다. Obsidian을 처음 사용하는 사용자는 기본 설정과 플러그인을 단계적으로 적용하며 자신만의 워크플로우를 구축해 보세요.\n추가 리소스 Obsidian 공식 사이트 Obsidian 커뮤니티 플러그인 Obsidian 포럼 Minimal 테마 문서 ","permalink":"https://cdecl.github.io/devops/obsidian-101/","summary":"\u003cp\u003eObsidian의 주요 기능과 설정, 테마와 외관, 그리고 필수 커뮤니티 플러그인을 활용한 생산성 향상 방법\u003c/p\u003e\n\u003ch2 id=\"obsidian이란\"\u003eObsidian이란?\u003c/h2\u003e\n\u003cp\u003eObsidian은 마크다운 기반의 강력한 노트 관리 및 지식 관리 도구로, 로컬 파일을 활용해 개인 지식 베이스를 구축하는 데 최적화되어 있습니다. 링크를 통한 노트 간 연결, 그래프 뷰, 플러그인 생태계를 통해 유연한 워크플로우를 제공합니다. 이번 포스트에서는 Obsidian의 주요 기능, 설정, 테마와 외관, 그리고 생산성을 극대화할 수 있는 커뮤니티 플러그인(예: Tasks, Advanced Tables, Git 등)을 자세히 다룹니다.\u003c/p\u003e","title":"Obsidian 101 - 강력한 노트 관리 도구 활용법"},{"content":"멀티라인 표현식의 활용법, Dotall (Single Line) 모드, Multi Line 모드, Non-Dotall 모드의 차이점, 여러 줄을 처리하는 방법\n정규식의 멀티라인 표현식이란? 정규식(Regular Expression, Regex)은 텍스트 패턴을 검색하거나 조작할 때 강력한 도구로 사용됩니다. 특히 멀티라인 표현식은 여러 줄에 걸친 텍스트를 처리할 때 유용하며, 줄바꿈(\\n)을 포함한 패턴 매칭을 가능하게 합니다. 이번 포스트에서는 멀티라인 표현식의 활용법, Dotall (Single Line) 모드, Multi Line 모드, Non-Dotall 모드의 차이점, 여러 줄을 처리하는 방법, 그리고 특정 패턴(예: start로 시작하고 end로 끝나는 패턴) 매칭 방법 등을 다룹니다. 또한, /s, /S, /w, /W, .|\\n의 모드별 동작 차이를 설명합니다.\nDotall, Multi Line, Non-Dotall 모드의 차이점 정규식에서 멀티라인 텍스트를 다룰 때, 세 가지 주요 모드가 사용됩니다: Dotall 모드, Multi Line 모드, 그리고 Non-Dotall 모드. 이들은 점(.)과 경계 문자(^, $)의 동작 방식에서 차이가 있습니다.\n1. Dotall (Single Line) 모드 설명: Dotall 모드는 점(.)이 줄바꿈 문자(\\n)를 포함한 모든 문자를 매칭하도록 합니다. 기본적으로 점(.)은 줄바꿈을 제외한 모든 단일 문자를 의미하지만, Dotall 모드에서는 줄바꿈까지 포함됩니다. 활성화 방법: Python에서는 re.DOTALL 플래그(또는 re.S)를, JavaScript에서는 /s 플래그를 사용합니다. 예시 (Python): import re text = \u0026#34;Hello\\nWorld\u0026#34; pattern = r\u0026#34;Hello.*World\u0026#34; # Dotall 모드 없이: 매칭 실패 print(re.search(pattern, text)) # None # Dotall 모드 활성화: 매칭 성공 print(re.search(pattern, text, re.DOTALL)) # \u0026lt;re.Match object; span=(0, 11), match=\u0026#39;Hello\\nWorld\u0026#39;\u0026gt; 사용 사례: 여러 줄에 걸친 텍스트 블록(예: HTML, 로그 파일)을 한 번에 매칭할 때 유용합니다. 2. Multi Line 모드 설명: Multi Line 모드는 ^와 $가 각각 각 줄의 시작과 끝을 나타내도록 합니다. 기본적으로 ^는 문자열 전체의 시작, $는 문자열 전체의 끝을 의미하지만, Multi Line 모드에서는 각 줄에 대해 독립적으로 작동합니다. 활성화 방법: Python에서는 re.MULTILINE 플래그(또는 re.M)를, JavaScript에서는 /m 플래그를 사용합니다. 예시 (Python): import re text = \u0026#34;start line1\\nstart line2\\nend line3\u0026#34; pattern = r\u0026#34;^start.*$\u0026#34; # Multi Line 모드 없이: 첫 번째 줄만 매칭 시도 print(re.findall(pattern, text)) # [] # Multi Line 모드 활성화: 각 줄에서 패턴 매칭 print(re.findall(pattern, text, re.MULTILINE)) # [\u0026#39;start line1\u0026#39;, \u0026#39;start line2\u0026#39;] 사용 사례: 로그 파일에서 특정 패턴으로 시작하는 각 줄을 추출하거나, 여러 줄에 걸친 코드에서 특정 주석 패턴을 찾을 때 유용합니다. 3. Non-Dotall 모드 설명: Non-Dotall 모드는 기본 정규식 동작으로, 점(.)이 줄바꿈 문자(\\n)를 제외한 모든 단일 문자를 매칭합니다. 이 모드에서는 줄바꿈을 포함하려면 명시적으로 \\n을 패턴에 포함하거나 다른 방법을 사용해야 합니다. 특징: Dotall 모드가 활성화되지 않은 상태로, 점(.)은 한 줄 내에서만 작동하며, 멀티라인 텍스트를 처리하려면 줄바꿈을 별도로 처리해야 합니다. 예시 (Python): import re text = \u0026#34;Hello\\nWorld\u0026#34; pattern = r\u0026#34;Hello.*World\u0026#34; # Non-Dotall 모드: 매칭 실패 (줄바꿈 때문에) print(re.search(pattern, text)) # None # Non-Dotall에서 줄바꿈 명시적 처리 pattern = r\u0026#34;Hello[\\s\\S]*World\u0026#34; print(re.search(pattern, text)) # \u0026lt;re.Match object; span=(0, 11), match=\u0026#39;Hello\\nWorld\u0026#39;\u0026gt; 사용 사례: 줄바꿈을 포함하지 않는 패턴을 엄격히 매칭하거나, 줄바꿈을 명시적으로 제어하고 싶을 때 사용됩니다. /s, /S, /w, /W, .|\\n의 모드별 차이점 정규식에서 특정 문자 클래스와 패턴은 모드에 따라 다르게 동작합니다. 아래는 주요 패턴의 동작을 비교합니다:\n패턴 설명 Dotall 모드 동작 Multi Line 모드 동작 Non-Dotall 모드 동작 /s 공백 문자(스페이스, 탭, 줄바꿈 등)를 매칭 줄바꿈(\\n) 포함 줄바꿈(\\n) 포함 줄바꿈(\\n) 포함 /S 공백 문자가 아닌 모든 문자를 매칭 줄바꿈(\\n) 포함 줄바꿈(\\n) 포함 줄바꿈(\\n) 포함 /w 단어 문자(알파벳, 숫자, 언더스코어: [a-zA-Z0-9_])를 매칭 모드에 무관 모드에 무관 모드에 무관 /W 단어 문자가 아닌 모든 문자를 매칭 모드에 무관 모드에 무관 모드에 무관 `. \\n` 점(.) 또는 줄바꿈(\\n)을 명시적으로 매칭 불필요 (.)가 이미 \\n 포함 줄바꿈(\\n) 명시적 매칭 필요 설명: /s와 /S는 공백 문자와 비공백 문자를 매칭하며, 모든 모드에서 줄바꿈(\\n)을 포함합니다. /w와 /W는 단어 문자와 비단어 문자를 매칭하며, 모드에 영향을 받지 않습니다. .|\\n은 Non-Dotall 모드에서 줄바꿈을 포함하려는 대안으로 사용되며, Dotall 모드에서는 불필요합니다. 예시 (Python, Non-Dotall에서 .|\\n 사용): import re text = \u0026#34;Hello\\nWorld\u0026#34; pattern = r\u0026#34;Hello(.|\\n)*World\u0026#34; match = re.search(pattern, text) print(match.group()) # Hello\\nWorld 차이점 요약 모드 점(.) 동작 ^와 $ 동작 플래그 (Python) 플래그 (JavaScript) Dotall (Single Line) 줄바꿈(\\n) 포함 모든 문자 매칭 문자열 전체의 시작/끝 re.DOTALL (re.S) /s Multi Line 줄바꿈(\\n) 제외 각 줄의 시작/끝 re.MULTILINE (re.M) /m Non-Dotall 줄바꿈(\\n) 제외 문자열 전체의 시작/끝 없음 없음 여러 줄을 표현하는 방법 멀티라인 텍스트를 처리할 때, 정규식에서 여러 줄을 표현하는 주요 방법은 다음과 같습니다:\nDotall 모드 활용:\n점(.)을 사용해 줄바꿈을 포함한 모든 텍스트 블록을 매칭. 예: .*로 여러 줄을 한 번에 캡처. Python 예시: import re text = \u0026#34;Line 1\\nLine 2\\nLine 3\u0026#34; pattern = r\u0026#34;.*\u0026#34; matches = re.findall(pattern, text, re.DOTALL) print(matches) # [\u0026#39;Line 1\\nLine 2\\nLine 3\u0026#39;] 줄바꿈 문자(\\n) 명시적 사용:\n줄바꿈을 명시적으로 패턴에 포함(예: .*\\n.*). 예: 두 줄에 걸친 패턴 매칭. import re text = \u0026#34;Line 1\\nLine 2\\nLine 3\u0026#34; pattern = r\u0026#34;.*\\n.*\u0026#34; matches = re.findall(pattern, text) print(matches) # [\u0026#39;Line 1\\nLine 2\u0026#39;] Multi Line 모드와 ^, $ 활용:\n각 줄을 개별적으로 처리. 예: 각 줄의 시작이 특정 단어로 시작하는 경우. import re text = \u0026#34;apple\\nbanana\\ncherry\u0026#34; pattern = r\u0026#34;^\\w+\u0026#34; matches = re.findall(pattern, text, re.MULTILINE) print(matches) # [\u0026#39;apple\u0026#39;, \u0026#39;banana\u0026#39;, \u0026#39;cherry\u0026#39;] Non-Dotall 모드에서 .|\\n 활용:\n점(.)이 줄바꿈을 포함하지 않으므로, .|\\n를 사용해 줄바꿈을 명시적으로 포함. 예: 여러 줄에 걸친 텍스트를 Non-Dotall 모드로 매칭. import re text = \u0026#34;Line 1\\nLine 2\\nLine 3\u0026#34; pattern = r\u0026#34;Line(.|\\n)*3\u0026#34; matches = re.findall(pattern, text) print(matches) # [\u0026#39;\\n\u0026#39;] start로 시작하고 end로 끝나는 멀티라인 패턴 특정 문자열(예: start로 시작하고 end로 끝나는 패턴)을 멀티라인에서 매칭하려면 Dotall 모드 또는 Non-Dotall 모드에서 [\\s\\S]를 활용합니다. 또한 특정 문자를 포함하거나 포함하지 않는 조건을 추가할 수 있습니다.\n1. 기본 패턴: start로 시작하고 end로 끝나는 텍스트 Dotall 모드 패턴: start.*?end (비탐욕적 매칭). Non-Dotall 모드 패턴: start[\\s\\S]*?end. 예시 (Python, Non-Dotall): import re text = \u0026#34;start middle content\\nmore content\\nend other text\u0026#34; pattern = r\u0026#34;start[\\s\\S]*?end\u0026#34; match = re.search(pattern, text) print(match.group()) # start middle content\\nmore content\\nend 2. 특정 문자 포함 요구사항: start와 end 사이에 특정 문자(예: keyword)를 포함하며, 여러 블록을 매칭. 패턴: Non-Dotall 모드에서는 start(?:(?!end)[\\s\\S])*?keyword[\\s\\S]*?end. 예시 (Python, Non-Dotall): import re text = \u0026#34;\u0026#34;\u0026#34;start first block\\nkeyword here\\nend some text start second block\\nno keyword\\nend start third block\\nkeyword again\\nend\u0026#34;\u0026#34;\u0026#34; pattern = r\u0026#34;start(?:(?!end)[\\s\\S])*?keyword[\\s\\S]*?end\u0026#34; matches = re.findall(pattern, text) for match in matches: print(match) 출력: start first block keyword here end start third block keyword again end 3. 특정 문자 포함하지 않음 요구사항: start와 end 사이에 특정 문자(예: forbidden)를 포함하지 않으며, 여러 블록을 매칭. 패턴: Non-Dotall 모드에서는 start(?:(?!end)[\\s\\S])*?(?![\\s\\S]*forbidden)[\\s\\S]*?end. 예시 (Python, Non-Dotall): import re text = \u0026#34;\u0026#34;\u0026#34;start first block\\nkeyword here\\nend some text start second block\\nno keyword\\nend start third block\\nkeyword again\\nend start fourth block\\nforbidden content\\nend\u0026#34;\u0026#34;\u0026#34; pattern = r\u0026#34;start(?:(?!end)[\\s\\S])*?(?![\\s\\S]*forbidden)[\\s\\S]*?end\u0026#34; matches = re.findall(pattern, text) for match in matches: print(match) 출력: start first block keyword here end start second block no keyword end start third block keyword again end 기타 활용 사례 정규식의 멀티라인 표현식은 다양한 시나리오에서 활용됩니다. 아래는 몇 가지 실용적인 예시입니다:\n로그 파일 분석:\n로그 파일에서 특정 에러 메시지가 포함된 블록을 추출. 예: ERROR(.|\\n)*?\\n로 에러 메시지와 관련된 블록을 Non-Dotall 모드로 추출. import re text = \u0026#34;INFO: System started\\nERROR: Connection failed\\nDetails: Timeout\\nINFO: System running\u0026#34; pattern = r\u0026#34;ERROR(.|\\n)*?\\n\u0026#34; matches = re.findall(pattern, text) print(matches) # [\u0026#39;\\n\u0026#39;, \u0026#39;\\n\u0026#39;] 코드 주석 추출:\n여러 줄 주석(예: /* ... */)을 Non-Dotall 모드로 추출. 예 (JavaScript): const text = \u0026#34;code\\n/* comment\\nmultiline */\\nmore code\u0026#34;; const pattern = /\\/\\*(.|\\n)*?\\*\\//; const matches = text.match(pattern); console.log(matches[0]); // /* comment\\nmultiline */ HTML 태그 내용 추출:\n특정 태그(예: \u0026lt;div\u0026gt;...\u0026lt;/div\u0026gt;)의 내용을 멀티라인에서 추출. 예 (Python, Non-Dotall): import re text = \u0026#34;\u0026lt;div\u0026gt;\\n Content Line 1\\n Content Line 2\\n\u0026lt;/div\u0026gt;\u0026#34; pattern = r\u0026#34;\u0026lt;div\u0026gt;(.|\\n)*?\u0026lt;/div\u0026gt;\u0026#34; match = re.search(pattern, text) print(match.group()) # \u0026lt;div\u0026gt;\\n Content Line 1\\n Content Line 2\\n\u0026lt;/div\u0026gt; 결론 정규식의 멀티라인 표현식은 텍스트 데이터를 다룰 때 강력한 도구입니다. Dotall 모드는 줄바꿈을 포함한 전체 텍스트 블록을 처리하는 데 유용하며, Multi Line 모드는 각 줄의 시작과 끝을 독립적으로 다룰 때 적합합니다. Non-Dotall 모드는 줄바꿈을 명시적으로 처리해야 하며, [\\s\\S]과 같은 패턴을 사용해 유연성을 제공합니다. /s, /S, /w, /W는 모드에 따라 일관된 동작을 보이며, .|\\n은 Non-Dotall 모드에서 줄바꿈을 포함하는 대안입니다. start와 end로 둘러싸인 패턴을 매칭하거나 특정 문자를 포함/제외하는 패턴을 활용하면 복잡한 텍스트 처리 작업을 효율적으로 수행할 수 있습니다.\n추가 리소스 Regular Expressions 101 - 정규식 테스트 및 디버깅 도구 Python re 모듈 문서 JavaScript RegExp MDN 문서 ","permalink":"https://cdecl.github.io/devops/regex-multiline/","summary":"\u003cp\u003e멀티라인 표현식의 활용법, \u003cstrong\u003eDotall (Single Line) 모드\u003c/strong\u003e, \u003cstrong\u003eMulti Line 모드\u003c/strong\u003e, \u003cstrong\u003eNon-Dotall 모드\u003c/strong\u003e의 차이점, 여러 줄을 처리하는 방법\u003c/p\u003e\n\u003ch2 id=\"정규식의-멀티라인-표현식이란\"\u003e정규식의 멀티라인 표현식이란?\u003c/h2\u003e\n\u003cp\u003e정규식(Regular Expression, Regex)은 텍스트 패턴을 검색하거나 조작할 때 강력한 도구로 사용됩니다. 특히 \u003cstrong\u003e멀티라인 표현식\u003c/strong\u003e은 여러 줄에 걸친 텍스트를 처리할 때 유용하며, 줄바꿈(\u003ccode\u003e\\n\u003c/code\u003e)을 포함한 패턴 매칭을 가능하게 합니다. 이번 포스트에서는 멀티라인 표현식의 활용법, \u003cstrong\u003eDotall (Single Line) 모드\u003c/strong\u003e, \u003cstrong\u003eMulti Line 모드\u003c/strong\u003e, \u003cstrong\u003eNon-Dotall 모드\u003c/strong\u003e의 차이점, 여러 줄을 처리하는 방법, 그리고 특정 패턴(예: \u003ccode\u003estart\u003c/code\u003e로 시작하고 \u003ccode\u003eend\u003c/code\u003e로 끝나는 패턴) 매칭 방법 등을 다룹니다. 또한, \u003ccode\u003e/s\u003c/code\u003e, \u003ccode\u003e/S\u003c/code\u003e, \u003ccode\u003e/w\u003c/code\u003e, \u003ccode\u003e/W\u003c/code\u003e, \u003ccode\u003e.|\\n\u003c/code\u003e의 모드별 동작 차이를 설명합니다.\u003c/p\u003e","title":"정규식의 멀티라인 expressions 활용"},{"content":"Model Context Pro **Model Context Pro\nMCP-SuperAssistant란? MCP-SuperAssistant는 MCP를 활용해 AI 플랫폼(ChatGPT, Perplexity, Google Gemini, Grok 등)과 외부 데이터 및 도구를 연결하는 크롬 확장 프로그램입니다. 이 도구는 AI 대화 내에서 MCP 도구 호출을 감지하고, 실행 결과를 자동 또는 수동으로 대화에 삽입하여 워크플로우를 간소화합니다. MCP-SuperAssistant는 다양한 AI 플랫폼과의 호환성과 유연한 설정을 통해 개발자와 비즈니스 사용자의 생산성을 극대화합니다.\nMCP-SuperAssistant의 주요 기능 MCP-SuperAssistant는 다음과 같은 기능을 제공합니다:\n다양한 AI 플랫폼 지원: ChatGPT, Perplexity, Google Gemini, Grok, Google AI Studio, OpenRouter, DeepSeek 등에서 MCP 도구 실행 가능 MCP 도구 실행 및 결과 삽입: AI 대화 내 도구 호출을 감지해 실행하고 결과를 대화에 삽입 실시간 데이터 연결: MCP를 통해 콘텐츠 저장소, 비즈니스 앱, 개발 환경 등과 안전하게 연결 자동/수동 모드: 자동 모드(도구 실행 및 결과 제출 자동화)와 수동 모드(사용자 제어) 지원 확장성과 모듈성: 플러그인 기반 아키텍처로 새로운 플랫폼 및 도구 추가 가능, WebSocket 및 SSE 지원 보안 및 접근성: 복잡한 API 키 설정 없이 기존 AI 구독 활용, 최소 설정으로 사용 가능 6000+ MCP 서버 지원: 다양한 MCP 서버와 통합해 AI 워크플로우 강화 특징: 확장 프로그램은 간단한 설치로 즉시 사용 가능하며, 샌드박스 환경에서 실행되어 보안성을 유지합니다. 제약사항: 일부 복잡한 도구 호출은 MCP 서버 설정이 필요하며, AI 모델의 프롬프트 이해도에 따라 결과 정확도가 달라질 수 있습니다. 초기 설치 및 세팅, 실행 준비 MCP-SuperAssistant를 사용하려면 크롬 확장 프로그램 설치와 MCP 프록시 서버 설정이 필요합니다. 아래는 단계별 설치 및 실행 준비 과정입니다.\n1. 크롬 확장 프로그램 설치 크롬 웹 스토어에서 설치: 크롬 웹 스토어로 이동합니다. \u0026ldquo;Chrome에 추가\u0026quot;를 클릭해 확장 프로그램을 설치합니다. 설치 후 브라우저 확장 바에 MCP-SuperAssistant 아이콘이 표시됩니다. 확장 프로그램 활성화 확인: 크롬의 chrome://extensions/ 페이지에서 MCP-SuperAssistant가 활성화되어 있는지 확인합니다. 2. MCP 프록시 서버 설정 MCP-SuperAssistant는 로컬 프록시 서버를 통해 MCP 서버와 통신합니다. 설정 방법은 다음과 같습니다:\n1. 프록시 서버 실행: 터미널 또는 명령 프롬프트를 열고 다음 명령어를 실행하여 MCP SuperAssistant Proxy를 실행합니다: npx @srbhptl39/mcp-superassistant-proxy@latest --config ./mcpconfig.json 이 명령은 mcpconfig.json 파일을 참조하여 프록시 서버를 시작하며, 기본적으로 http://localhost:3006에서 실행됩니다. 2. mcpconfig.json 예시: mcpconfig.json 파일을 생성하고 연결할 MCP 서버 정보를 입력합니다. 예시 구성은 다음과 같습니다: { \u0026#34;mcpServers\u0026#34;: { \u0026#34;notion\u0026#34;: { \u0026#34;command\u0026#34;: \u0026#34;npx\u0026#34;, \u0026#34;args\u0026#34;: [\u0026#34;-y\u0026#34;, \u0026#34;@suekou/mcp-notion-server\u0026#34;], \u0026#34;env\u0026#34;: { \u0026#34;NOTION_API_TOKEN\u0026#34;: \u0026#34;\u0026lt;your_notion_token_here\u0026gt;\u0026#34; } }, \u0026#34;gmail\u0026#34;: { \u0026#34;url\u0026#34;: \u0026#34;https://mcp.composio.dev/gmail/xxxx\u0026#34; }, \u0026#34;youtube-subtitle-downloader\u0026#34;: { \u0026#34;command\u0026#34;: \u0026#34;bun\u0026#34;, \u0026#34;args\u0026#34;: [\u0026#34;run\u0026#34;, \u0026#34;/path/to/mcp-youtube/src/index.ts\u0026#34;] }, \u0026#34;desktop-commander\u0026#34;: { \u0026#34;command\u0026#34;: \u0026#34;npx\u0026#34;, \u0026#34;args\u0026#34;: [\u0026#34;-y\u0026#34;, \u0026#34;@wonderwhy-er/desktop-commander\u0026#34;] } } } 설명: mcpServers: 각 서버는 고유한 키(예: notion, gmail)로 정의됩니다. command 및 args: stdio 기반 서버의 실행 명령어와 인수(예: npx, bun). url: SSE 기반 서버의 URL. env: API 키와 같은 환경 변수. 예시에는 Notion, Gmail, YouTube 자막 다운로더, 데스크톱 명령 서버를 포함했습니다. 3. mcpconfig.json 구성: obsidian, filesystem ```json { \u0026quot;mcpServers\u0026quot;: { \u0026quot;obsidian-mcp\u0026quot;: { \u0026quot;command\u0026quot;: \u0026quot;npx\u0026quot;, \u0026quot;args\u0026quot;: [ \u0026quot;-y\u0026quot;, \u0026quot;obsidian-mcp\u0026quot;, \u0026quot;/Users/cdecl/Library/Mobile Documents/iCloud~md~obsidian/Documents/obsidian-me\u0026quot; ] }, \u0026quot;filesystem\u0026quot;: { \u0026quot;command\u0026quot;: \u0026quot;npx\u0026quot;, \u0026quot;args\u0026quot;: [ \u0026quot;-y\u0026quot;, \u0026quot;@modelcontextpro \u0026quot;/Users/cdecl/Downloads\u0026quot; ] } } } ``` 4. 프록시 서버 실행 확인: 명령어 실행 후 서버가 http://localhost:3006에서 정상적으로 작동하는지 확인합니다. MCP-SuperAssistant 사이드바에서 \u0026ldquo;Connected\u0026rdquo; 상태를 확인할 수 있습니다. 3. AI 플랫폼에서 확장 프로그램 연결 지원되는 AI 플랫폼 접속: ChatGPT, Perplexity, Google Gemini, Grok 등 지원되는 AI 플랫폼에 접속합니다. 화면 오른쪽에 MCP-SuperAssistant 사이드바가 표시됩니다. 서버 상태 연결: 사이드바에서 서버 상태 표시기(기본적으로 \u0026ldquo;Disconnected\u0026rdquo;)를 클릭합니다. 프록시 서버가 실행 중인 경우, 기본 URL(http://localhost:3006)로 자동 연결되거나, 필요 시 URL을 입력합니다. 상태 표시기가 \u0026ldquo;Connected\u0026quot;로 변경되면 연결 성공입니다. 4. 추가 설정 팁 검색 모드 비활성화: ChatGPT, Perplexity 등에서 검색 모드를 끄면 도구 호출 프롬프트 경험이 향상됩니다.\nReasoning 모드 활성화: Grok, ChatGPT 등에서 Reasoning 모드를 켜면 AI가 컨텍스트를 더 잘 이해합니다.\n최신 모델 사용: GPT-4o, Gemini 1.5 등 최신 모델은 도구 호출을 더 정확히 처리합니다.\n문제 해결:\n확장 프로그램이 작동하지 않을 경우: chrome://extensions/에서 활성화 확인, 네트워크 연결 확인. 사이드바가 표시되지 않을 경우: 브라우저 새로고침 또는 확장 프로그램 재시작. 프록시 서버 연결 실패 시: mcpconfig.json 파일의 형식을 확인하고, 터미널에서 npx 명령이 올바르게 실행되는지 점검하세요. 자동 모드:\n자동 실행 (Auto Execute): MCP SuperAssistant가 도구 호출을 감지하면 자동으로 도구를 실행합니다. 자동 삽입 (Auto Insert): 도구 실행 결과가 자동으로 대화에 삽입됩니다. 자동 제출 (Auto Submit): 결과가 AI에 자동으로 제출되어 추가 처리됩니다. 때때로 MCP가 실행을 완료하는 데 시간이 필요하기 때문에 자동 제출에 약간의 대기 시간을 설정해야 할 수도 있습니다. Push Content 모드\nPush Content Mode는 MCP SuperAssistant의 기능 중 하나로, 페이지 콘텐츠를 오버레이 대신 챗으로 푸시하는 옵션을 제공합니다. 즉, AI가 현재 페이지의 콘텐츠를 분석하고 활용할 수 있도록 해당 콘텐츠를 AI 챗 인터페이스로 직접 보낼 수 있습니다. AI 모델에서 MCP 인식 과정 및 MCP (Tools) 호출 예시 MCP-SuperAssistant는 AI 대화에서 자연어 기반의 도구 호출 요청을 감지하고 실행하며, 결과를 대화에 삽입합니다.\n아래는 특정 사이트의 내용을 요약하여 로컬 경로에 Markdown 파일로 저장하는 시뮬레이션을 포함한 과정과 예시입니다.\n도구 호출은 XML 태그나 특정 형식 대신 자연어 프롬프트로 처리됩니다.\n1. MCP 인식 및 도구 호출 과정 AI 대화에서 자연어 요청: 사용자가 AI에 자연어로 요청(예: \u0026ldquo;xAI 웹사이트의 최신 소식을 요약해서 내 문서 폴더에 Markdown 파일로 저장해\u0026rdquo;)을 입력합니다. AI 모델(예: GPT-4o, Gemini 1.5)은 MCP-SuperAssistant가 이해할 수 있는 내부 도구 호출로 요청을 변환하거나, MCP-SuperAssistant가 자연어 요청을 직접 해석하여 적절한 MCP 도구를 매핑합니다. 확장 프로그램이 요청 감지: MCP-SuperAssistant의 사이드바가 대화 내 자연어 요청을 감지하고, 이를 기반으로 적합한 MCP 도구(예: 웹 요약 및 파일 저장)를 선택합니다. MCP 서버로 요청 전송: 감지된 요청은 WebSocket 또는 SSE를 통해 MCP 서버로 전송됩니다. 결과 반환 및 삽입: MCP 서버가 웹사이트 내용을 요약하고 지정된 경로에 파일을 저장한 후, 결과를 AI 대화에 삽입합니다(자동 또는 수동 모드). 2. Tools 호출 프롬프트 예시 (자연어 기반, 특정 사이트 요약 및 파일 저장 시뮬레이션) 시나리오 자연어 프롬프트 예시 내부 MCP 도구 매핑 유용성 포인트 웹사이트 요약 및 저장 \u0026ldquo;xAI 웹사이트의 최신 소식을 요약해서 ~/Documents/xai_summary.md에 저장해\u0026rdquo; 웹 요약 및 파일 저장 도구 웹 데이터 자동 요약 및 로컬 저장 뉴스 기사 요약 및 저장 \u0026ldquo;BBC 뉴스의 최신 AI 기사를 요약해서 ~/Documents/bbc_ai_summary.md에 저장해\u0026rdquo; 웹 요약 및 파일 저장 도구 (AI 필터 적용) 최신 뉴스 추출 및 정리 블로그 포스트 요약 및 저장 \u0026ldquo;Hacker News의 상위 포스트를 요약해서 ~/Documents/hn_summary.md에 저장해\u0026rdquo; 웹 요약 및 파일 저장 도구 (상위 1개 제한) 소셜 미디어 콘텐츠 정리 예시 워크플로우 (xAI 웹사이트 요약 및 저장):\n사용자: \u0026#34;xAI 웹사이트의 최신 소식을 요약해서 ~/Documents/xai_summary.md에 저장해\u0026#34; AI: (내부적으로 요청을 해석하여 MCP 도구 호출로 변환) MCP-SuperAssistant: 1. MCP 서버가 https://x.ai에 접속하여 최신 소식 페이지를 크롤링 2. 내용을 요약 (예: \u0026#34;xAI는 Grok 3를 통해 AI 워크플로우 혁신 중, 최신 API 업데이트 발표\u0026#34;) 3. 요약된 내용을 ~/Documents/xai_summary.md에 Markdown 형식으로 저장 4. 대화에 \u0026#34;요약이 ~/Documents/xai_summary.md에 저장되었습니다\u0026#34; 메시지 삽입 저장된 Markdown 파일 예시 (~/Documents/xai_summary.md):\n# xAI 웹사이트 요약 (2025-06-27) **출처**: https://x.ai **요약**: xAI는 Grok 3를 통해 AI와 인간의 상호작용을 혁신하고 있으며, 최신 API 업데이트를 통해 개발자 생산성을 향상시키고 있다. SuperGrok 플랜은 높은 사용 한도를 제공하며, 다양한 AI 플랫폼과의 통합을 지원한다. 자연어 호출을 위한 팁:\n명확한 요청: 자연어 프롬프트는 구체적이어야 합니다(예: \u0026ldquo;요약해서 파일로 저장해\u0026rdquo; 대신 \u0026ldquo;xAI 웹사이트의 최신 소식을 요약해서 ~/Documents/xai_summary.md에 저장해\u0026rdquo;). 고급 모델 사용: GPT-4o, Gemini 1.5와 같은 최신 모델은 자연어 요청을 더 정확히 해석하여 적절한 도구 호출로 변환합니다. Reasoning 모드 활성화: AI 플랫폼에서 Reasoning 모드를 켜면 자연어 요청의 의도를 더 잘 파악합니다. 확장 프로그램 설정: MCP-SuperAssistant의 사이드바에서 \u0026ldquo;자연어 처리\u0026rdquo; 옵션을 활성화하여 일반 텍스트 요청을 도구 호출로 매핑하도록 설정할 수 있습니다(지원되는 경우). 결론 MCP-SuperAssistant는 AI 플랫폼과 외부 데이터 및 도구를 연결하는 강력한 크롬 확장 프로그램으로, MCP를 통해 실시간 데이터 통합과 워크플로우 자동화를 지원합니다. 자연어 프롬프트를 활용하면 사용자는 복잡한 형식 없이도 직관적으로 도구를 호출할 수 있으며, npx를 사용한 프록시 서버 실행과 mcpconfig.json 설정으로 다양한 MCP 서버와 쉽게 통합할 수 있습니다. 웹사이트 내용을 요약하여 로컬 파일로 저장하는 기능은 정보 수집과 문서화 작업을 효율적으로 만들어줍니다.\n추가 리소스 MCP-SuperAssistant GitHub 저장소 크롬 웹 스토어 - MCP-SuperAssistant [Model Context Pro ","permalink":"https://cdecl.github.io/dev/superassistant/","summary":"\u003ch2 id=\"model-context-pro\"\u003eModel Context Pro\u003c/h2\u003e\n\u003cp\u003e**Model Context Pro\u003c/p\u003e\n\u003ch2 id=\"mcp-superassistant란\"\u003eMCP-SuperAssistant란?\u003c/h2\u003e\n\u003cp\u003e\u003cstrong\u003eMCP-SuperAssistant\u003c/strong\u003e는 MCP를 활용해 AI 플랫폼(ChatGPT, Perplexity, Google Gemini, Grok 등)과 외부 데이터 및 도구를 연결하는 크롬 확장 프로그램입니다. 이 도구는 AI 대화 내에서 MCP 도구 호출을 감지하고, 실행 결과를 자동 또는 수동으로 대화에 삽입하여 워크플로우를 간소화합니다. MCP-SuperAssistant는 다양한 AI 플랫폼과의 호환성과 유연한 설정을 통해 개발자와 비즈니스 사용자의 생산성을 극대화합니다.\u003c/p\u003e\n\u003ch3 id=\"mcp-superassistant의-주요-기능\"\u003eMCP-SuperAssistant의 주요 기능\u003c/h3\u003e\n\u003cp\u003eMCP-SuperAssistant는 다음과 같은 기능을 제공합니다:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003e다양한 AI 플랫폼 지원\u003c/strong\u003e: ChatGPT, Perplexity, Google Gemini, Grok, Google AI Studio, OpenRouter, DeepSeek 등에서 MCP 도구 실행 가능\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eMCP 도구 실행 및 결과 삽입\u003c/strong\u003e: AI 대화 내 도구 호출을 감지해 실행하고 결과를 대화에 삽입\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e실시간 데이터 연결\u003c/strong\u003e: MCP를 통해 콘텐츠 저장소, 비즈니스 앱, 개발 환경 등과 안전하게 연결\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e자동/수동 모드\u003c/strong\u003e: 자동 모드(도구 실행 및 결과 제출 자동화)와 수동 모드(사용자 제어) 지원\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e확장성과 모듈성\u003c/strong\u003e: 플러그인 기반 아키텍처로 새로운 플랫폼 및 도구 추가 가능, WebSocket 및 SSE 지원\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e보안 및 접근성\u003c/strong\u003e: 복잡한 API 키 설정 없이 기존 AI 구독 활용, 최소 설정으로 사용 가능\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e6000+ MCP 서버 지원\u003c/strong\u003e: 다양한 MCP 서버와 통합해 AI 워크플로우 강화\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e특징\u003c/strong\u003e: 확장 프로그램은 간단한 설치로 즉시 사용 가능하며, 샌드박스 환경에서 실행되어 보안성을 유지합니다.\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e제약사항\u003c/strong\u003e: 일부 복잡한 도구 호출은 MCP 서버 설정이 필요하며, AI 모델의 프롬프트 이해도에 따라 결과 정확도가 달라질 수 있습니다.\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"초기-설치-및-세팅-실행-준비\"\u003e초기 설치 및 세팅, 실행 준비\u003c/h2\u003e\n\u003cp\u003eMCP-SuperAssistant를 사용하려면 크롬 확장 프로그램 설치와 MCP 프록시 서버 설정이 필요합니다. 아래는 단계별 설치 및 실행 준비 과정입니다.\u003c/p\u003e","title":"MCP-SuperAssistant 사용법"},{"content":"Gemini CLI의 MCP(Model Context Pro\nModel Context Pro **Model Context Pro\nGemini CLI와 MCP 지원 개요 Gemini CLI는 Google의 생성형 AI 모델인 Gemini를 터미널에서 활용할 수 있는 오픈소스 도구로, MCP를 통해 내장 및 외부 도구와의 통합을 지원합니다. MCP를 활용하면 Gemini CLI는 파일 시스템 작업, 웹 검색, 버전 관리 시스템(Git 등)과의 연동, 또는 사용자 정의 API와의 상호작용과 같은 다양한 기능을 수행할 수 있습니다. Gemini CLI는 MCP를 통해 모델의 컨텍스트를 확장하여 복잡한 작업을 처리하거나, 외부 시스템과의 실시간 데이터 교환을 가능하게 합니다.\n내장 빌트인 Tools 지원 현황 및 기능 요약 Gemini CLI에는 다음과 같은 주요 MCP built-in tools가 내장되어 있습니다:\nTool 이름 주요 기능 및 설명 filesystem 로컬 파일/디렉토리 탐색, 읽기, 쓰기, 검색 obsidian Obsidian vault 내 노트 검색, 읽기, 태그 관리 등 webpage 웹페이지 내용 요약, 추출, 분석 github GitHub 저장소 코드/이슈/PR 등 검색 및 요약 python 파이썬 코드 실행, 결과 분석 terminal 쉘 명령 실행, 결과를 AI 컨텍스트로 활용 특징: 내장 도구는 별도의 설정 없이 즉시 사용 가능하며, Gemini CLI의 샌드박스 환경에서 실행되어 보안성을 유지합니다. 제약사항: 내장 도구는 기본적인 파일 시스템 및 웹 작업에 최적화되어 있으며, 복잡한 외부 시스템과의 연동은 외부 MCP 서버 설정이 필요합니다. 외부 Tools를 사용하기 위한 설정 및 사용 방법 Gemini CLI는 MCP 서버를 통해 외부 도구를 통합할 수 있으며, 이를 통해 사용자 정의 API, 데이터베이스, 또는 특화된 워크플로우와 연결할 수 있습니다. 외부 도구를 사용하기 위한 설정 및 사용 방법은 다음과 같습니다:\nMCP 서버 설정: MCP 서버는 Gemini CLI와 외부 시스템 간의 브릿지 역할을 하며, 로컬 또는 원격 서버로 실행 가능합니다.\n설정은 ~/.gemini/settings.json 파일의 mcpServers 항목에 MCP 서버 정보를 추가하여 수행됩니다. 예시 구성은 다음과 같습니다:\n{ \u0026#34;mcpServers\u0026#34;: { \u0026#34;github\u0026#34;: { \u0026#34;command\u0026#34;: \u0026#34;npx\u0026#34;, \u0026#34;args\u0026#34;: [\u0026#34;-y\u0026#34;, \u0026#34;@modelcontextpro \u0026#34;env\u0026#34;: { \u0026#34;GITHUB_PERSONAL_ACCESS_TOKEN\u0026#34;: \u0026#34;your_personal_access_token\u0026#34; } }, \u0026#34;custom-api\u0026#34;: { \u0026#34;command\u0026#34;: \u0026#34;node\u0026#34;, \u0026#34;args\u0026#34;: [\u0026#34;path/to/custom_mcp_server.js\u0026#34;], \u0026#34;env\u0026#34;: { \u0026#34;API_KEY\u0026#34;: \u0026#34;your_api_key\u0026#34; } } } } 설명:\ncommand: MCP 서버를 실행하는 명령어 (예: npx, node, python 등). args: 서버 실행에 필요한 인수. env: 서버 실행에 필요한 환경 변수 (예: API 키, 토큰 등). 예시에서는 GitHub MCP 서버와 사용자 정의 API 서버를 설정한 경우입니다. 외부 도구 사용: MCP 서버가 등록되면, Gemini CLI는 서버가 제공하는 도구를 자동으로 탐지하여 사용 가능합니다. 예시 명령어: gemini -p \u0026#34;GitHub 리포지토리의 최근 이슈 목록 가져와\u0026#34; 이 경우, GitHub MCP 서버를 통해 최신 이슈를 조회하고 결과를 반환합니다. MCP 서버는 도구의 스키마를 표준화된 형식으로 제공하므로, Gemini CLI는 이를 기반으로 적절한 도구를 선택해 실행합니다. 보안 및 신뢰 설정: MCP 서버는 사용자가 신뢰하는 소스에서 실행되어야 하며, Gemini CLI는 기본적으로 실행 전 확인 대화상자를 표시합니다. YOLO 모드(--yolo)를 사용하면 확인 없이 모든 작업을 자동 승인할 수 있지만, 신뢰할 수 있는 서버에서만 사용해야 합니다. 고급 활용: 동적 도구 탐지: MCP 서버는 실행 중 도구 목록을 동적으로 제공하며, gemini /mcp desc 명령어로 사용 가능한 도구와 스키마를 확인할 수 있습니다. 자동 정리: 유효하지 않은 도구를 제공하는 MCP 서버는 자동으로 연결이 종료됩니다. 타임아웃 관리: 서버 응답 시간에 따라 타임아웃을 설정하여 안정성을 유지합니다 (--timeout 옵션). 실전 시나리오 및 활용 예제 시나리오 명령어 예시 MCP 도구 사용 유용성 포인트 GitHub 이슈 관리 gemini -p \u0026quot;최근 7일간 GitHub 이슈 요약\u0026quot; GitHub MCP 서버 이슈 관리 자동화 API 데이터 조회 gemini -p \u0026quot;Salesforce에서 최근 고객 데이터 가져와\u0026quot; Custom API MCP 서버 CRM 통합 파일 시스템 작업 gemini -p \u0026quot;디렉토리의 모든 PDF를 요약해\u0026quot; 내장 파일 읽기 도구 대량 문서 처리 웹 검색 통합 gemini -p \u0026quot;최신 AI 트렌드 검색해줘\u0026quot; 내장 웹 fetch 도구 실시간 데이터 수집 예시 워크플로우: GitHub MCP 서버를 설정한 후, Gemini CLI를 사용해 리포지토리의 최근 풀 리퀘스트를 조회하고 요약: gemini -p \u0026#34;내 GitHub 리포지토리의 최근 5개 풀 리퀘스트 요약해줘\u0026#34; 사용자 정의 MCP 서버로 Salesforce API와 연동하여 고객 데이터를 조회: gemini -p \u0026#34;Salesforce에서 지난주 신규 고객 목록 가져와\u0026#34; --mcp-server custom-api 결론 Gemini CLI의 MCP 지원은 AI와 외부 시스템 간의 강력한 통합을 가능하게 하며, 내장 도구와 외부 MCP 서버를 통해 다양한 작업을 자동화하고 확장할 수 있습니다. 내장 도구는 간단한 파일 및 웹 작업에 즉시 사용 가능하며, 외부 MCP 서버를 설정하면 GitHub, Salesforce, 또는 사용자 정의 API와 같은 복잡한 시스템과의 연동이 가능합니다. 이를 통해 개발자는 터미널에서 AI를 활용한 효율적인 워크플로우를 구축할 수 있습니다.\n추가 리소스 Gemini CLI 공식 문서 MCP 서버 설정 가이드 Google Gemini 공식 소개 ","permalink":"https://cdecl.github.io/dev/gemini-cli-mcp-101/","summary":"\u003cp\u003eGemini CLI의 MCP(Model Context Pro\u003c/p\u003e\n\u003ch2 id=\"model-context-pro\"\u003eModel Context Pro\u003c/h2\u003e\n\u003cp\u003e**Model Context Pro\u003c/p\u003e\n\u003ch2 id=\"gemini-cli와-mcp-지원-개요\"\u003eGemini CLI와 MCP 지원 개요\u003c/h2\u003e\n\u003cp\u003e\u003cstrong\u003eGemini CLI\u003c/strong\u003e는 Google의 생성형 AI 모델인 Gemini를 터미널에서 활용할 수 있는 오픈소스 도구로, MCP를 통해 내장 및 외부 도구와의 통합을 지원합니다. MCP를 활용하면 Gemini CLI는 파일 시스템 작업, 웹 검색, 버전 관리 시스템(Git 등)과의 연동, 또는 사용자 정의 API와의 상호작용과 같은 다양한 기능을 수행할 수 있습니다. Gemini CLI는 MCP를 통해 모델의 컨텍스트를 확장하여 복잡한 작업을 처리하거나, 외부 시스템과의 실시간 데이터 교환을 가능하게 합니다.\u003c/p\u003e","title":"Gemini CLI의 MCP(Model Context Pro"},{"content":"Gemini CLI 툴: VSCode 플러그인과의 차이, 활용법, 실전 시나리오\nGemini CLI 이란? Gemini CLI는 Google의 생성형 AI 모델인 Gemini를 터미널 환경에서 직접 사용할 수 있도록 지원하는 커맨드라인 도구입니다. 이 도구를 활용하여 코드 생성, 요약, 번역, 문서화 등 다양한 AI 기능을 명령어 한 줄로 빠르게 수행할 수 있습니다. 특히, 별도의 통합 개발 환경(IDE) 없이도 쉘 스크립트, 자동화, 지속적 통합(CI)과 같은 다양한 환경에서 AI 기능을 활용할 수 있다는 점이 큰 특징입니다. Gemini CLI는 또한 **mcp(Model Context Pro\nGemini CLI vs VSCode Gemini Assistant 차이점 Gemini CLI와 VSCode Gemini Assistant는 모두 Gemini AI 모델을 활용하지만, 실행 환경과 주요 사용 목적에서 차이를 보입니다.\n구분 Gemini CLI VSCode Gemini Assistant 실행 환경 터미널/커맨드라인 VSCode(에디터 내) 주요 사용 목적 자동화, 배치, 스크립트, 빠른 질의 코드 작성, 리팩토링, 문서화, 대화형 AI 인터페이스 텍스트 기반, 파이프/리다이렉트 활용 GUI, 코드 인라인, 채팅 패널 확장성 쉘/스크립트와 연동, CI/CD에 통합 용이 VSCode 내 확장 기능 설치/사용 npm, pip 등으로 설치, 어디서나 사용 VSCode 마켓플레이스에서 설치 설치 및 기본 사용법 (인터랙티브, CLI 모드) Gemini CLI는 npm, pip 등 다양한 패키지 매니저를 통해 설치할 수 있습니다.\n# npm npm install -g @google/gemini-cli # 또는 pip pip install gemini-cli 기본 사용법 및 주요 옵션 예시:\n기본 프롬프트 사용: gemini -p \u0026#34;파이썬으로 퀵소트 구현해줘\u0026#34; stdin 파이프와 \u0026ndash;prompt 옵션 결합: echo \u0026#34;이 코드 설명해줘\u0026#34; | gemini --prompt \u0026#34;설명해줘\u0026#34; 특정 모델 지정: gemini -m gemini-2.5-pro \u0026#34;최신 모델로 답변해줘\u0026#34; 디버그 모드 및 체크포인팅 활성화: gemini -d -c \u0026#34;코드 리팩토링\u0026#34; 모든 파일 컨텍스트 포함: gemini --all_files \u0026#34;이 프로젝트의 구조를 요약해줘\u0026#34; 샌드박스 환경에서 실행: gemini --sandbox \u0026#34;이 코드가 안전한지 확인해줘\u0026#34; 인터랙티브 모드 (대화형 프롬프트): gemini # 또는 gemini -p \u0026#34;대화 시작\u0026#34; --debug 프롬프트 입력 없이 gemini만 실행하면 여러 줄 대화형 입력이 가능하며, 이전 대화 맥락을 유지하며 AI와 상호작용할 수 있습니다. 버전 및 도움말 확인: gemini --version gemini --help Gemini CLI는 API 키 등록, 프롬프트 템플릿, 출력 포맷(json, markdown 등) 등 다양한 옵션을 지원하며, 최신 버전에서는 멀티라인 입력, 파일 직접 지정, 파이프라인 연동 등 CLI 친화적인 기능이 강화되었습니다.\n설치 명령어 예시:\n다음은 gemini --help 명령어의 각 인수에 대한 설명 표입니다.\n옵션 단축 옵션 설명 타입 기본값 --model -m 사용할 Gemini 모델을 지정합니다. 문자열 \u0026ldquo;gemini-2.5-pro\u0026rdquo; --prompt -p 입력되는 내용(stdin 포함)에 추가될 프롬프트를 지정합니다. 문자열 --sandbox -s 샌드박스 환경에서 실행할지 여부를 지정합니다. 불리언 --sandbox-image 샌드박스 이미지 URI를 지정합니다. 문자열 --debug -d 디버그 모드로 실행할지 여부를 지정합니다. 불리언 false --all_files -a 모든 파일을 컨텍스트에 포함할지 여부를 지정합니다. 불리언 false --show_memory_usage 상태 표시줄에 메모리 사용량을 표시할지 여부를 지정합니다. 불리언 false --yolo -y 모든 작업을 자동으로 수락하는 YOLO 모드입니다. 불리언 false --telemetry 텔레메트리 전송을 활성화할지 여부를 제어합니다. 불리언 --telemetry-target 텔레메트리 대상을 설정합니다. 문자열 \u0026ldquo;local\u0026rdquo;, \u0026ldquo;gcp\u0026rdquo; 중 선택 --telemetry-otlp-endpoint 텔레메트리를 위한 OTLP 엔드포인트를 설정합니다.재정의합니다. 문자열 --telemetry-log-prompts 텔레메트리를 위한 사용자 프롬프트 로깅을 활성화하거나 비활성화합니다. 설정 파일을 재정의합니다. 불리언 --checkpointing -c 파일 편집 체크포인팅을 활성화합니다. 불리언 false --version -v 버전 정보를 표시합니다. 불리언 --help -h 도움말을 표시합니다. 불리언 각각의 사용에 있어서 효율적인 시나리오 예제 Gemini CLI의 효율적 사용 포인트: 반복 작업 자동화, 대량 파일 처리, 배치 작업에 적합합니다. Git Hook, CI 파이프라인, 쉘 스크립트와 결합하여 AI를 활용할 수 있습니다. 에디터 없이 빠르게 결과만 받고 싶을 때 유용합니다. VSCode Gemini Assistant의 효율적 사용 포인트: 코드 작성, 리팩토링, 설명 등 개발 생산성 향상에 기여합니다. 코드 인라인 제안, 대화형 질의, 문서 자동화 등 GUI 친화적인 작업에 적합합니다. 코드 컨텍스트를 직접 활용하는 복잡한 작업에 효율적입니다. CLI 환경에서의 활용 시나리오 및 유용한 기준 리스트:\n시나리오 명령어 예시 유용성 포인트 코드 자동 생성 gemini -p \u0026quot;Go로 HTTP 서버 샘플 코드\u0026quot; 빠른 샘플/템플릿 생성 코드 설명/리팩토링 `cat main.py gemini -p \u0026ldquo;설명해줘/리팩토링 해줘\u0026rdquo;` 문서 요약/번역 `cat README.md gemini -p \u0026ldquo;한글로 요약\u0026rdquo;` CI/CD 파이프라인 내 자동화 gemini -p \u0026quot;테스트 코드 생성\u0026quot; \u0026gt; test.py 자동화 스크립트와 결합 Git Hook에서 커밋 메시지 생성 `git diff gemini -p \u0026ldquo;좋은 커밋 메시지 추천\u0026rdquo;` 결론 Gemini CLI는 터미널 환경에서 AI의 강력함을 최대한 활용할 수 있는 도구입니다. 반복적이고 자동화가 필요한 작업, 대량 파일 처리, CI/CD 등에서는 CLI가, 코드 컨텍스트와 GUI가 중요한 작업에서는 VSCode 플러그인이 각각 강점을 가집니다. 두 도구를 상황에 맞게 병행 활용하면 개발 생산성을 극대화할 수 있습니다.\n추가 리소스 Gemini CLI 공식 문서 VSCode Gemini Assistant Google Gemini 공식 소개 ","permalink":"https://cdecl.github.io/dev/gemini-cli/","summary":"\u003cp\u003eGemini CLI 툴: VSCode 플러그인과의 차이, 활용법, 실전 시나리오\u003c/p\u003e\n\u003ch2 id=\"gemini-cli-이란\"\u003eGemini CLI 이란?\u003c/h2\u003e\n\u003cp\u003e\u003cstrong\u003eGemini CLI\u003c/strong\u003e는 Google의 생성형 AI 모델인 Gemini를 터미널 환경에서 직접 사용할 수 있도록 지원하는 커맨드라인 도구입니다. 이 도구를 활용하여 코드 생성, 요약, 번역, 문서화 등 다양한 AI 기능을 명령어 한 줄로 빠르게 수행할 수 있습니다. 특히, 별도의 통합 개발 환경(IDE) 없이도 쉘 스크립트, 자동화, 지속적 통합(CI)과 같은 다양한 환경에서 AI 기능을 활용할 수 있다는 점이 큰 특징입니다. Gemini CLI는 또한 **mcp(Model Context Pro\u003c/p\u003e","title":"Gemini CLI 툴 소개"},{"content":"정규식 탐색 기법: 전방탐색과 후방탐색\n정규식 탐색 기법 요약 정규식(Regular Expression)은 텍스트 패턴 매칭에 강력한 도구. **전방탐색(Lookahead)**과 **후방탐색(Lookbehind)**은 특정 조건을 만족하는 패턴을 찾되, 그 조건 자체는 결과에 포함시키지 않는 고급 기법 기법 문법 설명 전방탐색 (?=패턴) 패턴이 앞에 있을 때 매칭 부정형 전방탐색 (?!패턴) 패턴이 앞에 없을 때 매칭 후방탐색 (?\u0026lt;=패턴) 패턴이 뒤에 있을 때 매칭 부정형 후방탐색 (?\u0026lt;!패턴) 패턴이 뒤에 없을 때 매칭 왜 전방탐색과 후방탐색이 필요한가? 전방탐색과 후방탐색은 매칭 조건을 설정하지만, 해당 조건은 최종 결과에 포함되지 않습니다. 이는 URL, 로그, 텍스트 파싱에서 특정 패턴의 주변 정보만 필요할 때 유용합니다. 주요 장점:\n정확성: 원치 않는 부분을 결과에서 제외. 유연성: 복잡한 패턴 매칭 가능. 효율성: 불필요한 후처리 최소화. 샘플 URL 데이터 설명을 위해 다음 URL 데이터를 사용합니다:\nhttps://example.com/path/to/page.html http://api.example.org/v1/users https://blog.example.net/post/123 ftp://files.example.com/download/file.zip 1. 전방탐색 ((?=패턴)) 설명 전방탐색은 특정 패턴이 뒤에 있을 때만 매칭합니다. 예를 들어, https로 시작하는 URL에서 프로토콜(https)만 추출하되, 뒤에 ://가 따라오는 경우에만 매칭하려면 전방탐색을 사용합니다.\n사용 예제 예제: ://가 뒤에 있는 프로토콜(http 또는 https) 추출\n\\w+(?=\\://) 설명: \\w+는 단어 문자(프로토콜)를 매칭하고, (?=\\://)는 ://가 뒤에 있는지 확인. 결과: 샘플 URL 매칭 결과 https://example.com/path/to/page.html https http://api.example.org/v1/users http https://blog.example.net/post/123 https ftp://files.example.com/download/file.zip ftp 2. 부정형 전방탐색 ((?!패턴)) 설명 부정형 전방탐색은 특정 패턴이 뒤에 없을 때 매칭합니다. 예를 들어, https가 아닌 프로토콜을 추출하려면 부정형 전방탐색을 사용합니다.\n사용 예제 예제: https가 아닌 프로토콜 추출\n\\w+(?!\\s*https) 설명: \\w+는 단어 문자를 매칭하고, (?!https)는 https가 뒤에 없음을 확인. 결과: 샘플 URL 매칭 결과 https://example.com/path/to/page.html - http://api.example.org/v1/users http https://blog.example.net/post/123 - ftp://files.example.com/download/file.zip ftp 3. 후방탐색 ((?\u0026lt;=패턴)) 설명 후방탐색은 특정 패턴이 앞에 있을 때만 매칭합니다. 예를 들어, https://로 시작하는 URL에서 도메인(example.com)을 추출하려면 후방탐색을 사용합니다.\n사용 예제 예제: https:// 뒤의 도메인 추출\n(?\u0026lt;=https\\://)[^/]+ 설명: (?\u0026lt;=https\\://)는 https://가 앞에 있는지 확인하고, [^/]+는 슬래시(/)가 아닌 문자를 매칭. 결과: 샘플 URL 매칭 결과 https://example.com/path/to/page.html example.com http://api.example.org/v1/users - https://blog.example.net/post/123 blog.example.net ftp://files.example.com/download/file.zip - 4. 부정형 후방탐색 ((?\u0026lt;!패턴)) 설명 부정형 후방탐색은 특정 패턴이 앞에 없을 때 매칭합니다. 예를 들어, https://로 시작하지 않는 URL에서 도메인을 추출하려면 부정형 후방탐색을 사용합니다.\n사용 예제 예제: https://로 시작하지 않는 URL의 도메인 추출\n(?\u0026lt;!https\\://)[^/]+(?=\\//) 설명: (?\u0026lt;!https\\://)는 https://가 앞에 없음을 확인하고, [^/]+는 슬래시(/)가 아닌 문자를 매칭하며, (?=\\//)는 뒤에 /가 있음을 확인. 결과: 샘플 URL 매칭 결과 https://example.com/path/to/page.html - http://api.example.org/v1/users api.example.org https://blog.example.net/post/123 - ftp://files.example.com/download/file.zip files.example.com 결론 전방탐색과 후방탐색은 정규식에서 강력한 패턴 매칭을 가능하게 합니다. URL 파싱과 같은 작업에서 조건을 정밀하게 설정하여 원하는 데이터만 추출할 수 있습니다. 위 예제를 바탕으로 정규식 테스트 도구(예: regex101.com)를 활용해 패턴을 연습하고, 프로젝트 요구사항에 맞게 조정하세요.\n추가 리소스 Regex101 - 정규식 테스트 및 디버깅 Regular Expressions Info - 정규식 학습 자료 MDN Web Docs: Regular Expressions - JavaScript 정규식 가이드 ","permalink":"https://cdecl.github.io/dev/regex-lookahead/","summary":"\u003cp\u003e정규식 탐색 기법: 전방탐색과 후방탐색\u003c/p\u003e\n\u003ch2 id=\"정규식-탐색-기법-요약\"\u003e정규식 탐색 기법 요약\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003e정규식(Regular Expression)은 텍스트 패턴 매칭에 강력한 도구.\u003c/li\u003e\n\u003cli\u003e**전방탐색(Lookahead)**과 **후방탐색(Lookbehind)**은 특정 조건을 만족하는 패턴을 찾되, 그 조건 자체는 결과에 포함시키지 않는 고급 기법\u003c/li\u003e\n\u003c/ul\u003e\n\u003ctable\u003e\n  \u003cthead\u003e\n      \u003ctr\u003e\n          \u003cth\u003e기법\u003c/th\u003e\n          \u003cth\u003e문법\u003c/th\u003e\n          \u003cth\u003e설명\u003c/th\u003e\n      \u003c/tr\u003e\n  \u003c/thead\u003e\n  \u003ctbody\u003e\n      \u003ctr\u003e\n          \u003ctd\u003e전방탐색\u003c/td\u003e\n          \u003ctd\u003e\u003ccode\u003e(?=패턴)\u003c/code\u003e\u003c/td\u003e\n          \u003ctd\u003e패턴이 앞에 있을 때 매칭\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003e부정형 전방탐색\u003c/td\u003e\n          \u003ctd\u003e\u003ccode\u003e(?!패턴)\u003c/code\u003e\u003c/td\u003e\n          \u003ctd\u003e패턴이 앞에 없을 때 매칭\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003e후방탐색\u003c/td\u003e\n          \u003ctd\u003e\u003ccode\u003e(?\u0026lt;=패턴)\u003c/code\u003e\u003c/td\u003e\n          \u003ctd\u003e패턴이 뒤에 있을 때 매칭\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003e부정형 후방탐색\u003c/td\u003e\n          \u003ctd\u003e\u003ccode\u003e(?\u0026lt;!패턴)\u003c/code\u003e\u003c/td\u003e\n          \u003ctd\u003e패턴이 뒤에 없을 때 매칭\u003c/td\u003e\n      \u003c/tr\u003e\n  \u003c/tbody\u003e\n\u003c/table\u003e\n\u003ch2 id=\"왜-전방탐색과-후방탐색이-필요한가\"\u003e왜 전방탐색과 후방탐색이 필요한가?\u003c/h2\u003e\n\u003cp\u003e전방탐색과 후방탐색은 매칭 조건을 설정하지만, 해당 조건은 최종 결과에 포함되지 않습니다. 이는 URL, 로그, 텍스트 파싱에서 특정 패턴의 주변 정보만 필요할 때 유용합니다. 주요 장점:\u003c/p\u003e","title":"정규식 탐색 기법 - 전방탐색, 부정형 전방탐색, 후방탐색, 부정형 후방탐색"},{"content":"모던 쉘 명령어: 전통적인 도구를 대체하는 강력한 대안\n터미널은 개발자와 시스템 관리자의 핵심 도구입니다. 하지만 전통적인 쉘 명령어(grep, sed, find, cat, watch, top, du)는 속도, 가독성, 사용 편의성 면에서 한계가 있습니다. 2025년 기준, 이러한 명령어들을 대체하는 모던 대안들이 주목받고 있습니다. 이 포스트에서는 ripgrep, sd, fd, bat, hwatch, htop, dust를 전통 명령어와 비교하며 특징과 사용법을 소개합니다.\n모던 쉘 명령어 요약 전통 명령어 모던 대안 주요 특징 설치 명령어 (Ubuntu/Debian) grep ripgrep (rg) 고속 검색, .gitignore 통합, 컬러 출력 sudo apt-get install ripgrep sed sd 간단한 치환 문법, 빠른 처리 sudo apt-get install sd find fd 직관적 검색, .gitignore 지원 sudo apt-get install fd-find cat bat 구문 강조, Git 통합, 페이징 sudo apt-get install bat watch hwatch 변경 강조, 로그 저장 sudo apt-get install hwatch top htop 컬러 UI, 프로세스 트리 뷰 sudo apt-get install htop du dust 트리 구조, 직관적 시각화 sudo apt-get install dust 왜 모던 쉘 명령어가 필요한가? 모던 쉘 명령어는 Rust, Go 같은 현대 언어로 작성되어 속도와 효율성이 뛰어나며, 사용자 친화적인 인터페이스를 제공합니다. 주요 장점은 다음과 같습니다:\n속도: Rust 기반 도구는 병렬 처리로 빠른 성능 제공. 가독성: 컬러 출력, 직관적 결과. 호환성: 기존 명령어와 유사한 문법으로 학습 곡선 완만. 확장성: Git, Unicode, Regex 등 최신 기능 지원. 1. grep → ripgrep (rg) 설명 grep은 파일에서 패턴을 검색하지만, 대규모 프로젝트에서는 속도가 느릴 수 있습니다. ripgrep (rg)은 Rust로 작성된 고속 검색 도구로, 멀티스레딩과 .gitignore 통합을 지원합니다.\n특징 .gitignore 및 숨김 파일 무시. UTF-8, 정규 표현식 지원. 컬러 출력 및 파일별 매칭 라인 표시. 설치 # Ubuntu/Debian sudo apt-get install ripgrep # macOS (Homebrew) brew install ripgrep 사용법 비교 기본 검색 (src/ 디렉토리에서 \u0026ldquo;function\u0026rdquo; 검색):\n# grep grep -r \u0026#34;function\u0026#34; ./src # rg rg \u0026#34;function\u0026#34; ./src 파일 확장자 제한 (Python 파일에서 \u0026ldquo;function\u0026rdquo; 검색):\n# grep grep -r --include=\u0026#34;*.py\u0026#34; \u0026#34;function\u0026#34; ./src # rg rg \u0026#34;function\u0026#34; --type py JSON 출력 (\u0026ldquo;error\u0026rdquo; 검색 결과를 JSON으로 출력):\n# grep (추가 도구 jq 필요) grep -r \u0026#34;error\u0026#34; ./src | jq . # rg rg \u0026#34;error\u0026#34; --json \u0026gt; results.json 2. sed → sd 설명 sed는 텍스트 스트림 편집 도구지만, 복잡한 정규 표현식과 비직관적 문법이 단점입니다. sd는 Rust로 작성된 간단하고 빠른 대안으로, 직관적인 패턴 치환을 제공합니다.\n특징 간단한 치환 문법. 빠른 처리 속도. 멀티라인 지원. 설치 # Ubuntu/Debian sudo apt-get install sd # macOS (Homebrew) brew install sd 사용법 비교 문자열 치환 (\u0026ldquo;world\u0026quot;를 \u0026ldquo;universe\u0026quot;로 치환):\n# sed echo \u0026#34;hello world\u0026#34; | sed \u0026#39;s/world/universe/\u0026#39; # sd echo \u0026#34;hello world\u0026#34; | sd \u0026#34;world\u0026#34; \u0026#34;universe\u0026#34; 파일 내 치환 (file.txt에서 \u0026ldquo;old_text\u0026quot;를 \u0026ldquo;new_text\u0026quot;로 치환):\n# sed sed -i \u0026#39;s/old_text/new_text/g\u0026#39; file.txt # sd sd \u0026#34;old_text\u0026#34; \u0026#34;new_text\u0026#34; file.txt 정규 표현식 (숫자를 \u0026ldquo;NUMBER\u0026quot;로 치환):\n# sed sed \u0026#39;s/[0-9]\\+/NUMBER/g\u0026#39; file.txt # sd sd \u0026#39;\\d+\u0026#39; \u0026#39;NUMBER\u0026#39; file.txt 3. find → fd 설명 find는 파일 검색 도구지만, 복잡한 옵션과 느린 속도가 단점입니다. fd는 Rust 기반의 빠르고 직관적인 대안으로, 간단한 문법과 .gitignore 지원이 특징입니다.\n특징 컬러 출력 및 사용자 친화적 결과. .gitignore와 통합. 빠른 파일/디렉토리 검색. 설치 # Ubuntu/Debian sudo apt-get install fd-find # macOS (Homebrew) brew install fd 사용법 비교 파일 검색 (src/에서 \u0026ldquo;test\u0026rdquo; 포함 파일 검색):\n# find find ./src -name \u0026#34;*test*\u0026#34; # fd fd \u0026#34;test\u0026#34; ./src 확장자 제한 (Python 파일 검색):\n# find find . -name \u0026#34;*.py\u0026#34; # fd fd --extension py 숨김 파일 포함 (.bashrc 파일 검색):\n# find find . -name \u0026#34;.bashrc\u0026#34; # fd fd --hidden .bashrc 4. cat → bat 설명 cat은 파일 내용을 출력하지만, 가독성이 떨어집니다. bat은 Rust 기반의 cat 대안으로, 구문 강조, 줄 번호, Git 통합을 제공합니다.\n특징 구문 강조 및 테마 지원. Git 변경 사항 표시. 페이징 기능 내장. 설치 # Ubuntu/Debian sudo apt-get install bat # macOS (Homebrew) brew install bat 사용법 비교 파일 출력 (Python 파일 출력):\n# cat cat file.py # bat bat file.py 줄 번호 표시 (file.txt에 줄 번호 출력):\n# cat cat -n file.txt # bat bat -n file.txt Git 변경 사항 (Git 수정 사항 표시):\n# cat # 지원 없음 # bat bat --diff file.py 5. watch → hwatch 설명 watch는 명령어를 주기적으로 실행하지만, 출력이 단순합니다. hwatch는 Rust 기반 대안으로, 컬러 출력과 변경 사항 강조를 지원합니다.\n특징 변경된 출력만 강조. 히스토리 및 로그 저장. 직관적 인터페이스. 설치 # Ubuntu/Debian sudo apt-get install hwatch # macOS (Homebrew) brew install hwatch 사용법 비교 주기적 실행 (디렉토리 목록 2초마다 갱신):\n# watch watch ls -la # hwatch hwatch ls -la 인터벌 지정 (5초마다 디스크 사용량 출력):\n# watch watch -n 5 df -h # hwatch hwatch -n 5 df -h 로그 저장 (출력을 로그로 저장):\n# watch # 지원 없음 # hwatch hwatch --log output.log ls 6. top → htop 설명 top은 시스템 프로세스 모니터링 도구지만, UI가 제한적입니다. htop은 컬러 인터페이스와 사용자 친화적 조작(마우스/키보드)을 제공하는 대안입니다.\n특징 컬러 및 트리 뷰. 프로세스 필터링 및 검색. CPU, 메모리 사용량 시각화. 설치 # Ubuntu/Debian sudo apt-get install htop # macOS (Homebrew) brew install htop 사용법 비교 기본 실행 (프로세스 목록 표시):\n# top top # htop htop 특정 사용자 (현재 사용자 프로세스만 표시):\n# top top -u $USER # htop htop -u $USER 정렬 (CPU/메모리 기준 정렬):\n# top # 키보드 입력으로 제한적 정렬 # htop # F6 키로 CPU/메모리 정렬 7. du → dust 설명 du는 디렉토리 크기를 확인하지만, 출력이 복잡합니다. dust는 Rust 기반으로, 트리 구조와 직관적 시각화를 제공합니다.\n특징 트리 뷰로 디렉토리 크기 표시. 빠른 분석 및 정렬. 사용자 친화적 출력. 설치 # Ubuntu/Debian sudo apt-get install dust # macOS (Homebrew) brew install dust 사용법 비교 디렉토리 크기 (현재 디렉토리 크기 확인):\n# du du -sh * # dust dust 깊이 제한 (2단계 깊이까지 표시):\n# du du -d 2 # dust dust -d 2 숨김 파일 포함 (숨김 파일 포함 크기 확인):\n# du du -sh .[!.]* * # dust dust -a 결론 모던 쉘 명령어(ripgrep, sd, fd, bat, hwatch, htop, dust)는 속도, 가독성, 사용 편의성 면에서 전통 도구를 능가합니다. Rust 기반의 빠른 성능과 직관적 인터페이스로 터미널 작업을 효율화하세요. 전통 명령어와 비교하여 프로젝트 요구사항에 맞는 도구를 선택하고, 로컬 환경에서 테스트하여 워크플로우를 최적화하세요.\n추가 리소스 ripgrep GitHub sd GitHub fd GitHub bat GitHub hwatch GitHub htop GitHub dust GitHub ","permalink":"https://cdecl.github.io/devops/moden-shell-command/","summary":"\u003cp\u003e모던 쉘 명령어: 전통적인 도구를 대체하는 강력한 대안\u003c/p\u003e\n\u003cp\u003e터미널은 개발자와 시스템 관리자의 핵심 도구입니다. 하지만 전통적인 쉘 명령어(\u003ccode\u003egrep\u003c/code\u003e, \u003ccode\u003esed\u003c/code\u003e, \u003ccode\u003efind\u003c/code\u003e, \u003ccode\u003ecat\u003c/code\u003e, \u003ccode\u003ewatch\u003c/code\u003e, \u003ccode\u003etop\u003c/code\u003e, \u003ccode\u003edu\u003c/code\u003e)는 속도, 가독성, 사용 편의성 면에서 한계가 있습니다. 2025년 기준, 이러한 명령어들을 대체하는 모던 대안들이 주목받고 있습니다. 이 포스트에서는 \u003ccode\u003eripgrep\u003c/code\u003e, \u003ccode\u003esd\u003c/code\u003e, \u003ccode\u003efd\u003c/code\u003e, \u003ccode\u003ebat\u003c/code\u003e, \u003ccode\u003ehwatch\u003c/code\u003e, \u003ccode\u003ehtop\u003c/code\u003e, \u003ccode\u003edust\u003c/code\u003e를 전통 명령어와 비교하며 특징과 사용법을 소개합니다.\u003c/p\u003e\n\u003ch2 id=\"모던-쉘-명령어-요약\"\u003e모던 쉘 명령어 요약\u003c/h2\u003e\n\u003ctable\u003e\n  \u003cthead\u003e\n      \u003ctr\u003e\n          \u003cth\u003e전통 명령어\u003c/th\u003e\n          \u003cth\u003e모던 대안\u003c/th\u003e\n          \u003cth\u003e주요 특징\u003c/th\u003e\n          \u003cth\u003e설치 명령어 (Ubuntu/Debian)\u003c/th\u003e\n      \u003c/tr\u003e\n  \u003c/thead\u003e\n  \u003ctbody\u003e\n      \u003ctr\u003e\n          \u003ctd\u003e\u003ccode\u003egrep\u003c/code\u003e\u003c/td\u003e\n          \u003ctd\u003e\u003ccode\u003eripgrep (rg)\u003c/code\u003e\u003c/td\u003e\n          \u003ctd\u003e고속 검색, \u003ccode\u003e.gitignore\u003c/code\u003e 통합, 컬러 출력\u003c/td\u003e\n          \u003ctd\u003e\u003ccode\u003esudo apt-get install ripgrep\u003c/code\u003e\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003e\u003ccode\u003esed\u003c/code\u003e\u003c/td\u003e\n          \u003ctd\u003e\u003ccode\u003esd\u003c/code\u003e\u003c/td\u003e\n          \u003ctd\u003e간단한 치환 문법, 빠른 처리\u003c/td\u003e\n          \u003ctd\u003e\u003ccode\u003esudo apt-get install sd\u003c/code\u003e\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003e\u003ccode\u003efind\u003c/code\u003e\u003c/td\u003e\n          \u003ctd\u003e\u003ccode\u003efd\u003c/code\u003e\u003c/td\u003e\n          \u003ctd\u003e직관적 검색, \u003ccode\u003e.gitignore\u003c/code\u003e 지원\u003c/td\u003e\n          \u003ctd\u003e\u003ccode\u003esudo apt-get install fd-find\u003c/code\u003e\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003e\u003ccode\u003ecat\u003c/code\u003e\u003c/td\u003e\n          \u003ctd\u003e\u003ccode\u003ebat\u003c/code\u003e\u003c/td\u003e\n          \u003ctd\u003e구문 강조, Git 통합, 페이징\u003c/td\u003e\n          \u003ctd\u003e\u003ccode\u003esudo apt-get install bat\u003c/code\u003e\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003e\u003ccode\u003ewatch\u003c/code\u003e\u003c/td\u003e\n          \u003ctd\u003e\u003ccode\u003ehwatch\u003c/code\u003e\u003c/td\u003e\n          \u003ctd\u003e변경 강조, 로그 저장\u003c/td\u003e\n          \u003ctd\u003e\u003ccode\u003esudo apt-get install hwatch\u003c/code\u003e\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003e\u003ccode\u003etop\u003c/code\u003e\u003c/td\u003e\n          \u003ctd\u003e\u003ccode\u003ehtop\u003c/code\u003e\u003c/td\u003e\n          \u003ctd\u003e컬러 UI, 프로세스 트리 뷰\u003c/td\u003e\n          \u003ctd\u003e\u003ccode\u003esudo apt-get install htop\u003c/code\u003e\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003e\u003ccode\u003edu\u003c/code\u003e\u003c/td\u003e\n          \u003ctd\u003e\u003ccode\u003edust\u003c/code\u003e\u003c/td\u003e\n          \u003ctd\u003e트리 구조, 직관적 시각화\u003c/td\u003e\n          \u003ctd\u003e\u003ccode\u003esudo apt-get install dust\u003c/code\u003e\u003c/td\u003e\n      \u003c/tr\u003e\n  \u003c/tbody\u003e\n\u003c/table\u003e\n\u003ch2 id=\"왜-모던-쉘-명령어가-필요한가\"\u003e왜 모던 쉘 명령어가 필요한가?\u003c/h2\u003e\n\u003cp\u003e모던 쉘 명령어는 Rust, Go 같은 현대 언어로 작성되어 속도와 효율성이 뛰어나며, 사용자 친화적인 인터페이스를 제공합니다. 주요 장점은 다음과 같습니다:\u003c/p\u003e","title":"모던 쉘 명령어로 터미널 생산성 높이기"},{"content":"GitHub Actions YAML: CI/CD 워크플로우의 핵심\nGitHub Actions는 CI/CD 및 자동화 워크플로우를 정의하는 강력한 도구로, YAML 파일을 통해 설정됩니다. 이 포스트에서는 GitHub Actions YAML의 주요 사용법, 실행 환경, 쉘 스크립트 활용 방법, 그리고 실무에서 유용한 팁을 정리합니다.\n왜 GitHub Actions YAML이 중요한가? GitHub Actions는 코드 푸시, 풀 리퀘스트, 스케줄링 등 다양한 이벤트를 기반으로 자동화된 워크플로우를 실행할 수 있습니다. YAML 파일은 이를 직관적이고 선언적으로 정의하며, 다음과 같은 장점을 제공합니다:\n가독성: 명확한 구조로 워크플로우 정의. 유연성: 다양한 환경과 도구 지원. 재사용성: 액션과 워크플로우를 모듈화해 생산성 향상. 2025년 기준: GitHub Actions는 대부분의 주요 언어와 배포 환경을 지원하며, 커뮤니티 액션으로 확장 가능. 1. GitHub Actions YAML 기본 구조 GitHub Actions 워크플로우는 .github/workflows/ 디렉토리에 .yml 파일로 저장됩니다. 기본 구조는 다음과 같습니다:\nname: CI Pipeline run-name: ${{ github.actor }}\u0026#39;s CI Run on: push: branches: - main pull_request: branches: - main jobs: build: runs-on: ubuntu-latest steps: - name: Checkout code uses: actions/checkout@v4 - name: Run a command run: echo \u0026#34;Hello, GitHub Actions!\u0026#34; 주요 구성 요소 name: 워크플로우 이름 (옵션). run-name: 실행 시 표시될 이름 (동적 설정 가능, 예: ${{ github.actor }}). on: 트리ガー 이벤트 (예: push, pull_request, schedule). jobs: 실행할 작업 단위. steps: Job 내의 개별 단계. uses: 외부 액션 사용 (예: actions/checkout@v4). run: 쉘 명령어 실행. 주의: YAML은 들여쓰기에 민감하므로, 2칸 공백을 사용하세요.\n2. 실행 환경 및 배포판 GitHub Actions는 다양한 실행 환경(Runner)을 제공하며, runs-on으로 지정합니다.\n주요 실행 환경 ubuntu-latest: 최신 Ubuntu (리눅스 기반, 가장 보편적). windows-latest: 최신 Windows Server. macos-latest: 최신 macOS. 특정 버전 지정 가능 (예: ubuntu-22.04, windows-2022). 배포판 선택 팁 Ubuntu: 속도와 호환성으로 인해 표준 선택.\nWindows: .NET, C# 프로젝트 또는 Windows 전용 테스트.\nmacOS: iOS/macOS 앱 빌드 및 테스트.\n매트릭스 빌드: 여러 환경에서 테스트.\njobs: test: runs-on: ${{ matrix.os }} strategy: matrix: os: [ubuntu-latest, windows-latest, macos-latest] node-version: [14, 16, 18] steps: - uses: actions/checkout@v4 - uses: actions/setup-node@v4 with: node-version: ${{ matrix.node-version }} - run: npm test 3. 쉘 스크립트 사용법 run 키워드로 쉘 스크립트를 실행하며, bash, pwsh(PowerShell), cmd 등을 지정할 수 있습니다.\n기본 사용법 steps: - name: Run shell script run: | echo \u0026#34;Running multi-line script\u0026#34; ls -la python script.py shell: bash 쉘 지정 bash: Linux/macOS 기본.\npwsh: PowerShell Core (크로스 플랫폼).\ncmd: Windows 전용\n- name: Windows command run: dir shell: cmd 환경 변수 Job 단위 환경 변수:\njobs: build: env: MY_VAR: my-value steps: - run: echo $MY_VAR 시크릿 사용:\nsteps: - run: echo ${{ secrets.MY_SECRET }} 4. 주요 팁 및 모범 사례 1. 모듈화 및 재사용 Composite Actions:\n# .github/actions/my-action/action.yml name: My Custom Action runs: using: composite steps: - run: echo \u0026#34;Reusable step\u0026#34; shell: bash Workflow 재사용:\non: workflow_call: 2. 시크릿 관리 민감한 정보는 리포지토리 설정에서 시크릿으로 관리.\nsteps: - run: aws s3 sync ./dist s3://my-bucket env: AWS_ACCESS_KEY_ID: ${{ secrets.AWS_ACCESS_KEY_ID }} 3. 로컬 테스트 act 도구로 로컬 디버깅:\nbrew install act act -j build 4. 성능 최적화 캐시:\nsteps: - uses: actions/cache@v3 with: path: ~/.npm key: ${{ runner.os }}-node-${{ hashFiles(\u0026#39;**/package-lock.json\u0026#39;) }} 병렬 실행: strategy.matrix로 병렬화.\n조건문: if로 불필요한 스텝 제외.\n- run: echo \u0026#34;Only on push\u0026#34; if: github.event_name == \u0026#39;push\u0026#39; 5. 스케줄링 Cron으로 주기적 실행: on: schedule: - cron: \u0026#39;0 0 * * *\u0026#39; # 매일 자정 4.6. 주요 uses: 모듈 소개 GitHub Actions의 uses 키워드는 재사용 가능한 액션을 통해 워크플로우를 간소화합니다. 2025년 기준, 자주 사용되는 표준 액션을 소개합니다:\nactions/checkout@v4:\n설명: 리포지토리 코드를 워크플로우 환경으로 체크아웃.\n사용 예:\n- uses: actions/checkout@v4 with: ref: ${{ github.head_ref }} 용도: 모든 워크플로우의 첫 단계로 필수적.\nactions/setup-node@v4:\n설명: Node.js 환경 설정 및 특정 버전 설치.\n사용 예:\n- uses: actions/setup-node@v4 with: node-version: \u0026#39;18\u0026#39; cache: \u0026#39;npm\u0026#39; 용도: Node.js 프로젝트 빌드/테스트.\nactions/setup-python@v4:\n설명: Python 환경 설정 및 의존성 캐싱.\n사용 예:\n- uses: actions/setup-python@v4 with: python-version: \u0026#39;3.9\u0026#39; cache: \u0026#39;pip\u0026#39; 용도: Python 프로젝트 빌드/테스트/배포.\nactions/setup-go@v4:\n설명: Go 언어 환경 설정.\n사용 예:\n- uses: actions/setup-go@v4 with: go-version: \u0026#39;1.21\u0026#39; 용도: Go 프로젝트 빌드/테스트.\nactions/cache@v3:\n설명: 의존성 캐싱으로 빌드 시간 단축.\n사용 예:\n- uses: actions/cache@v3 with: path: ~/.npm key: ${{ runner.os }}-node-${{ hashFiles(\u0026#39;**/package-lock.json\u0026#39;) }} 용도: npm, pip, Maven 등 의존성 캐싱.\nactions/upload-artifact@v3 / actions/download-artifact@v3:\n설명: 빌드 결과물을 저장하거나 다운로드.\n사용 예:\n- uses: actions/upload-artifact@v3 with: name: my-artifact path: build/ 용도: Job 간 아티팩트 공유 또는 배포.\ndocker/build-push-action@v5:\n설명: Docker 이미지 빌드 및 레지스트리에 푸시.\n사용 예:\n- uses: docker/build-push-action@v5 with: context: . push: true tags: user/app:latest 용도: 컨테이너 기반 배포.\naws-actions/configure-aws-credentials@v4:\n설명: AWS CLI를 위한 자격 증명 설정.\n사용 예:\n- uses: aws-actions/configure-aws-credentials@v4 with: aws-access-key-id: ${{ secrets.AWS_ACCESS_KEY_ID }} aws-secret-access-key: ${{ secrets.AWS_SECRET_ACCESS_KEY }} aws-region: us-east-1 용도: AWS S3, ECS, Lambda 배포.\n팁: 최신 버전은 GitHub Actions Marketplace에서 확인하고, vX 태그를 명시하여 안정성을 확보하세요.\n5. 예제: Node.js, Python, C++ 프로젝트 배포 다양한 언어로 작성된 프로젝트의 빌드, 테스트, 배포 워크플로우 예제를 제공합니다.\nNode.js 프로젝트 배포 name: Node.js CI/CD on: push: branchesસ branches: - main jobs: build-and-deploy: runs-on: ubuntu-latest steps: - uses: actions/checkout@v4 - name: Set up Node.js uses: actions/setup-node@v4 with: node-version: \u0026#39;18\u0026#39; - name: Install dependencies run: npm ci - name: Run tests run: npm test - name: Deploy to server env: DEPLOY_KEY: ${{ secrets.DEPLOY_KEY }} run: ./deploy.sh Python 프로젝트 배포 name: Python CI/CD on: push: branches: - main pull_request: branches: - main jobs: build-and-deploy: runs-on: ubuntu-latest steps: - uses: actions/checkout@v4 - name: Set up Python uses: actions/setup-python@v4 with: python-version: \u0026#39;3.9\u0026#39; - name: Install dependencies run: | python -m pip install --upgrade pip pip install -r requirements.txt - name: Run tests run: pytest - name: Build package run: python -m build - name: Deploy to PyPI env: PYPI_TOKEN: ${{ secrets.PYPI_TOKEN }} run: twine upload dist/* --username __token__ --password $PYPI_TOKEN C++ 프로젝트 배포 name: C++ CI/CD on: push: branches: - main pull_request: branches: - main jobs: build-and-deploy: runs-on: ubuntu-latest steps: - uses: actions/checkout@v4 - name: Set up CMake run: | sudo apt-get update sudo apt-get install -y cmake g++ ninja-build - name: Configure CMake run: cmake -S . -B build -G Ninja - name: Build run: cmake --build build - name: Run tests run: ctest --test-dir build - name: Package artifact run: | mkdir -p artifacts cp build/myapp artifacts/ - name: Deploy to server env: DEPLOY_KEY: ${{ secrets.DEPLOY_KEY }} run: scp artifacts/myapp user@server:/path/to/deploy 결론 GitHub Actions YAML은 CI/CD와 자동화를 위한 강력한 도구로, 직관적인 문법과 유연한 환경 설정을 제공합니다. 실행 환경 선택, 쉘 스크립트 활용, 모듈화, 캐싱, 그리고 표준 액션(uses) 활용을 통해 워크플로우를 최적화하세요. 프로젝트 요구사항에 따라 적절한 설정을 선택하고, act로 로컬 테스트를 수행해 안정성을 높이세요.\n추가 리소스 GitHub Actions 공식 문서 GitHub Actions Marketplace act GitHub ","permalink":"https://cdecl.github.io/dev/github-actions-yaml/","summary":"\u003cp\u003eGitHub Actions YAML: CI/CD 워크플로우의 핵심\u003c/p\u003e\n\u003cp\u003eGitHub Actions는 CI/CD 및 자동화 워크플로우를 정의하는 강력한 도구로, YAML 파일을 통해 설정됩니다. 이 포스트에서는 GitHub Actions YAML의 주요 사용법, 실행 환경, 쉘 스크립트 활용 방법, 그리고 실무에서 유용한 팁을 정리합니다.\u003c/p\u003e\n\u003ch2 id=\"왜-github-actions-yaml이-중요한가\"\u003e왜 GitHub Actions YAML이 중요한가?\u003c/h2\u003e\n\u003cp\u003eGitHub Actions는 코드 푸시, 풀 리퀘스트, 스케줄링 등 다양한 이벤트를 기반으로 자동화된 워크플로우를 실행할 수 있습니다. YAML 파일은 이를 직관적이고 선언적으로 정의하며, 다음과 같은 장점을 제공합니다:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003e가독성\u003c/strong\u003e: 명확한 구조로 워크플로우 정의.\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e유연성\u003c/strong\u003e: 다양한 환경과 도구 지원.\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e재사용성\u003c/strong\u003e: 액션과 워크플로우를 모듈화해 생산성 향상.\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e2025년 기준\u003c/strong\u003e: GitHub Actions는 대부분의 주요 언어와 배포 환경을 지원하며, 커뮤니티 액션으로 확장 가능.\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"1-github-actions-yaml-기본-구조\"\u003e1. GitHub Actions YAML 기본 구조\u003c/h2\u003e\n\u003cp\u003eGitHub Actions 워크플로우는 \u003ccode\u003e.github/workflows/\u003c/code\u003e 디렉토리에 \u003ccode\u003e.yml\u003c/code\u003e 파일로 저장됩니다. 기본 구조는 다음과 같습니다:\u003c/p\u003e","title":"GitHub Actions YAML 사용법"},{"content":"C++20 std::format과 C++23 std::print: 현대적인 문자열 포매팅\nC++20과 C++23은 문자열 포매팅을 현대화한 std::format과 std::print를 도입하며, 기존의 printf나 std::cout에 비해 안전하고 직관적인 API를 제공합니다. 이 글에서는 두 기능의 사용법, 컴파일러 호환성, 그리고 지원되지 않는 환경에서 fmt 라이브러리 사용 방법을 다룹니다.\n왜 새로운 포매팅 API가 중요한가? 기존 C++ 문자열 포매팅 방법(printf, std::stringstream, std::cout)은 다음과 같은 단점이 있습니다:\n안전성 부족: printf는 타입 안정성을 보장하지 않아 런타임 오류 발생 가능. 복잡성: std::stringstream은 장황하고 성능 오버헤드 존재. 가독성: std::cout은 연속적인 \u0026lt;\u0026lt; 연산으로 코드가 길어짐. std::format(C++20)과 std::print(C++23)는 Python의 str.format에서 영감을 받아 타입 안전성, 가독성, 성능을 개선했습니다. fmt 라이브러리는 이를 보완하며, 최신 표준을 지원하지 않는 환경에서도 동일한 경험을 제공합니다.\n1. std::format (C++20) std::format은 문자열 포매팅을 위한 타입 안전한 템플릿 기반 API로, \u0026lt;format\u0026gt; 헤더에 포함됩니다.\n특징 타입 안전성: 컴파일 타임에 포맷 문자열과 인수 타입 검증. 유연성: 사용자 정의 타입 포매팅 지원. 성능: printf보다 빠르며, 동적 메모리 할당 최소화. 2025년 기준: C++20 표준의 대부분 컴파일러에서 안정적으로 지원. 사용법 #include \u0026lt;format\u0026gt; #include \u0026lt;string\u0026gt; #include \u0026lt;iostream\u0026gt; int main() { std::string s = std::format(\u0026#34;Hello, {}! You are {} years old.\u0026#34;, \u0026#34;Alice\u0026#34;, 25); std::cout \u0026lt;\u0026lt; s \u0026lt;\u0026lt; std::endl; // 위치 지정자 std::string s2 = std::format(\u0026#34;{1}, {0}!\u0026#34;, \u0026#34;World\u0026#34;, \u0026#34;Hello\u0026#34;); std::cout \u0026lt;\u0026lt; s2 \u0026lt;\u0026lt; std::endl; // 형식 지정 std::string s3 = std::format(\u0026#34;Pi: {:.2f}\u0026#34;, 3.14159); std::cout \u0026lt;\u0026lt; s3 \u0026lt;\u0026lt; std::endl; } 출력:\nHello, Alice! You are 25 years old. Hello, World! Pi: 3.14 사용자 정의 타입 #include \u0026lt;format\u0026gt; #include \u0026lt;string\u0026gt; struct Person { std::string name; int age; }; template \u0026lt;\u0026gt; struct std::formatter\u0026lt;Person\u0026gt; { constexpr auto parse(std::format_parse_context\u0026amp; ctx) { return ctx.begin(); } auto format(const Person\u0026amp; p, std::format_context\u0026amp; ctx) const { return std::format_to(ctx.out(), \u0026#34;Person{{name: {}, age: {}}}\u0026#34;, p.name, p.age); } }; int main() { Person p{\u0026#34;Bob\u0026#34;, 30}; std::string s = std::format(\u0026#34;{}\u0026#34;, p); std::cout \u0026lt;\u0026lt; s \u0026lt;\u0026lt; std::endl; // 출력: Person{name: Bob, age: 30} } 컴파일러 호환성 (2025년 기준) GCC: 11.1 이상 (-std=c++20) Clang: 14.0 이상 (-std=c++20) MSVC: Visual Studio 2019 16.10 이상 (/std:c++20) Apple Clang: Xcode 14 이상 제약사항: 일부 임베디드 환경(예: 특정 RTOS)에서는 \u0026lt;format\u0026gt; 지원 미비. 2. std::print (C++23) std::print는 std::format을 기반으로, 콘솔 출력에 최적화된 함수입니다. \u0026lt;print\u0026gt; 헤더에 포함되며, std::cout보다 간결하고 효율적입니다.\n특징 간결성: 포매팅과 출력을 단일 호출로 처리. 유니코드 지원: UTF-8 출력 최적화. 2025년 기준: C++23 지원이 초기 단계로, 최신 컴파일러에서만 동작. 사용법 #include \u0026lt;print\u0026gt; int main() { std::print(\u0026#34;Hello, {}! You are {} years old.\\n\u0026#34;, \u0026#34;Charlie\u0026#34;, 35); std::print(\u0026#34;Pi: {:.2f}\\n\u0026#34;, 3.14159); } 출력:\nHello, Charlie! You are 35 years old. Pi: 3.14 컴파일러 호환성 (2025년 기준) GCC: 13.1 이상 (-std=c++23) Clang: 16.0 이상 (-std=c++23) MSVC: Visual Studio 2022 17.8 이상 (/std:c++23) 제약사항: \u0026lt;print\u0026gt;는 최신 표준이므로, GCC 12 또는 Clang 15 이하에서는 사용 불가. 3. fmt 라이브러리: 지원되지 않는 환경에서의 대안 fmt 라이브러리는 std::format의 원형으로, C++20/C++23을 지원하지 않는 환경에서 동일한 포매팅 기능을 제공합니다. Chrome, Redis, MongoDB 등에서 사용됩니다.\n특징 호환성: C++11 이상에서 동작. 성능: std::format과 유사하거나 더 빠름. 2025년 기준: fmt 10.2.0 이상, C++23 std::print 호환 API 추가. 설치 방법 Ubuntu 24.04 sudo apt update sudo apt install libfmt-dev CMake:\nfind_package(fmt CONFIG REQUIRED) target_link_libraries(myapp PRIVATE fmt::fmt) Windows (vcpkg) vcpkg install fmt:x64-windows CMake:\nfind_package(fmt CONFIG REQUIRED) target_link_libraries(myapp PRIVATE fmt::fmt) 소스 빌드 git clone https://github.com/fmtlib/fmt cd fmt cmake -B build -DCMAKE_INSTALL_PREFIX=/usr/local cmake --build build --target install 사용법 #include \u0026lt;fmt/format.h\u0026gt; #include \u0026lt;fmt/printf.h\u0026gt; // printf 스타일 지원 #include \u0026lt;fmt/std.h\u0026gt; // C++23 print 호환 int main() { // std::format 스타일 std::string s = fmt::format(\u0026#34;Hello, {}! You are {} years old.\u0026#34;, \u0026#34;Dave\u0026#34;, 40); fmt::print(\u0026#34;{}\\n\u0026#34;, s); // printf 스타일 fmt::printf(\u0026#34;Pi: %.2f\\n\u0026#34;, 3.14159); // C++23 print 스타일 fmt::print(\u0026#34;Modern C++: {}\\n\u0026#34;, 2023); } 출력:\nHello, Dave! You are 40 years old. Pi: 3.14 Modern C++: 2023 사용자 정의 타입 #include \u0026lt;fmt/format.h\u0026gt; struct Person { std::string name; int age; }; template \u0026lt;\u0026gt; struct fmt::formatter\u0026lt;Person\u0026gt; { constexpr auto parse(format_parse_context\u0026amp; ctx) { return ctx.begin(); } auto format(const Person\u0026amp; p, format_context\u0026amp; ctx) const { return fmt::format_to(ctx.out(), \u0026#34;Person{{name: {}, age: {}}}\u0026#34;, p.name, p.age); } }; int main() { Person p{\u0026#34;Eve\u0026#34;, 45}; fmt::print(\u0026#34;{}\\n\u0026#34;, p); // 출력: Person{name: Eve, age: 45} } 성능 벤치마크 (2025): fmt::format은 std::format과 비슷하거나 10~20% 빠름 (GCC 13, Clang 16). 메모리 효율성: 동적 메모리 할당 최소화. 단점: 외부 종속성 추가로 빌드 복잡성 증가 가능. std::format vs std::print vs fmt: 비교 기준 std::format std::print fmt 표준 C++20 C++23 C++11 이상 주요 사용 사례 문자열 생성 콘솔 출력 모든 환경 성능 printf보다 빠름 std::cout보다 빠름 std::format과 유사/더 빠름 컴파일러 지원 GCC 11+, Clang 14+, MSVC 2019 GCC 13+, Clang 16+, MSVC 2022 대부분 컴파일러 유니코드 제한적 UTF-8 최적화 UTF-8 지원 디버깅 표준 에러 메시지 표준 에러 메시지 상세 에러 메시지 선택 가이드 std::format: C++20을 지원하는 환경에서 문자열 생성에 적합. std::print: C++23을 지원하며 간단한 콘솔 출력이 필요한 경우. fmt: C++20/23 미지원 환경, 또는 성능과 호환성을 모두 원하는 경우. 테스트 필수: 워크로드에 따라 성능 차이가 있으므로 벤치마킹 권장. 결론 C++20의 std::format과 C++23의 std::print는 현대적인 문자열 포매팅과 출력을 제공하며, 타입 안전성과 성능을 개선합니다. 지원되지 않는 환경에서는 fmt 라이브러리가 강력한 대안입니다. 애플리케이션 요구사항과 컴파일러 지원 여부에 따라 적절한 도구를 선택하세요.\n추가 리소스 C++ Reference: std::format C++ Reference: std::print fmt GitHub ","permalink":"https://cdecl.github.io/dev/cpp-format-print/","summary":"\u003cp\u003eC++20 std::format과 C++23 std::print: 현대적인 문자열 포매팅\u003c/p\u003e\n\u003cp\u003eC++20과 C++23은 문자열 포매팅을 현대화한 \u003ccode\u003estd::format\u003c/code\u003e과 \u003ccode\u003estd::print\u003c/code\u003e를 도입하며, 기존의 \u003ccode\u003eprintf\u003c/code\u003e나 \u003ccode\u003estd::cout\u003c/code\u003e에 비해 안전하고 직관적인 API를 제공합니다. 이 글에서는 두 기능의 사용법, 컴파일러 호환성, 그리고 지원되지 않는 환경에서 \u003ccode\u003efmt\u003c/code\u003e 라이브러리 사용 방법을 다룹니다.\u003c/p\u003e\n\u003ch2 id=\"왜-새로운-포매팅-api가-중요한가\"\u003e왜 새로운 포매팅 API가 중요한가?\u003c/h2\u003e\n\u003cp\u003e기존 C++ 문자열 포매팅 방법(\u003ccode\u003eprintf\u003c/code\u003e, \u003ccode\u003estd::stringstream\u003c/code\u003e, \u003ccode\u003estd::cout\u003c/code\u003e)은 다음과 같은 단점이 있습니다:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003e안전성 부족\u003c/strong\u003e: \u003ccode\u003eprintf\u003c/code\u003e는 타입 안정성을 보장하지 않아 런타임 오류 발생 가능.\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e복잡성\u003c/strong\u003e: \u003ccode\u003estd::stringstream\u003c/code\u003e은 장황하고 성능 오버헤드 존재.\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e가독성\u003c/strong\u003e: \u003ccode\u003estd::cout\u003c/code\u003e은 연속적인 \u003ccode\u003e\u0026lt;\u0026lt;\u003c/code\u003e 연산으로 코드가 길어짐.\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e\u003ccode\u003estd::format\u003c/code\u003e(C++20)과 \u003ccode\u003estd::print\u003c/code\u003e(C++23)는 Python의 \u003ccode\u003estr.format\u003c/code\u003e에서 영감을 받아 타입 안전성, 가독성, 성능을 개선했습니다. \u003ccode\u003efmt\u003c/code\u003e 라이브러리는 이를 보완하며, 최신 표준을 지원하지 않는 환경에서도 동일한 경험을 제공합니다.\u003c/p\u003e","title":"C++ std::format, std::print 사용법과 컴파일러 호환성"},{"content":"정규 표현식(BRE, ERE, PCRE) 기능 비교 및 명령어 지원 가이드\n1. 정규 표현식이란? 정규 표현식(Regular Expression, Regex)은 텍스트 패턴을 검색, 치환, 검증하는 데 사용되는 강력한 도구입니다.\nPOSIX 기반의 BRE(Basic Regular Expressions), ERE(Extended Regular Expressions), 그리고 Perl 호환 PCRE(Perl-Compatible Regular Expressions)는 각각 다른 기능과 지원 범위를 제공합니다.\n이 글에서는 각 정규 표현식 유형의 특징과 grep, egrep, sed, ripgrep, awk 같은 도구에서의 지원 옵션을 정리합니다.\n2. 정규 표현식 유형별 기능 기능 BRE (Basic) ERE (Extended) PCRE (Perl) 기본 메타문자 ., *, ^, $, [], [^ ] BRE + +, ?, ` , {n,m}` 그룹화 \\(\\) () (), 이름 붙은 그룹 지원 백레퍼런스 \\1, \\2 \\1, \\2 \\1, \\2, 이름 참조 가능 반복 *, \\{n,m\\} *, +, ?, {n,m} *, +, ?, {n,m}, *?, +? 고급 기능 없음 없음 전방 탐색((?=...)), 후방 탐색((?\u0026lt;=...)) 예시 a\\(b*\\)c → abbbc `a(b+ c)d→abbd, acd` 제한점 +, ?, |는 이스케이프 필요 비탐욕적 매칭, 전방/후방 탐색 미지원 POSIX 도구에서 제한적 지원 2.1 기본 정규 표현식 (BRE) 설명: POSIX 표준의 기본 정규 표현식, 가장 제한적. 주요 기능: 메타문자(., *, ^, $, []), 그룹화(\\(\\)), 백레퍼런스(\\1, \\2). 제한점: +, ?, |는 이스케이프(\\+, \\?, \\|) 필요. 2.2 확장 정규 표현식 (ERE) 설명: POSIX 확장 표준, BRE보다 간결하고 표현력 높음. 주요 기능: 추가 메타문자(+, ?, |, {n,m}), 그룹화(()). 제한점: 비탐욕적 매칭이나 전방/후방 탐색 미지원. 2.3 Perl 호환 정규 표현식 (PCRE) 설명: Perl 기반, 가장 강력한 정규 표현식. 주요 기능: 비탐욕적 매칭(*?, +?), 전방/후방 탐색, 유니코드 지원. 제한점: POSIX 도구에서 제한적 지원. 3. 명령어별 정규 표현식 지원 옵션 명령어 BRE ERE PCRE grep 기본 (옵션 없음) -E -P (GNU grep만) egrep - 기본 (옵션 없음) - sed 기본 (옵션 없음) -r (GNU) / -E (BSD) - ripgrep - 기본 (옵션 없음) 기본 (옵션 없음) awk 기본 (옵션 없음) - - (gawk는 제한적 PCRE 지원) 4. 모범 사례 POSIX 우선: 이식성을 위해 BRE/ERE 사용.\ngrep -E \u0026#39;a(b+|c)d\u0026#39; file.txt PCRE 활용: 복잡한 패턴은 ripgrep 또는 GNU grep의 -P 사용.\nrg \u0026#39;a(?=b)c\u0026#39; file.txt 명시적 옵션: 정규 표현식 유형 명시.\nsed -E \u0026#39;s/a(b+|c)d/x\\1y/\u0026#39; file.txt 플랫폼 테스트: GNU/Linux와 BSD/macOS에서 호환성 확인.\necho \u0026#34;abbc\u0026#34; | rg \u0026#39;a(b+|c)d\u0026#39; 5. 결론 POSIX 기반 BRE/ERE는 이식성이 높지만 제한적이며, PCRE는 강력하지만 ripgrep이나 GNU grep(-P)에서 주로 지원됩니다.\n적절한 옵션 사용과 플랫폼 간 테스트로 안정적인 정규 표현식 작업을 보장할 수 있습니다.\n추가 리소스 POSIX 정규 표현식 PCRE 문서 ripgrep 문서 GNU awk 매뉴얼 ","permalink":"https://cdecl.github.io/devops/regexp-bre-ere-pcre/","summary":"\u003cp\u003e정규 표현식(BRE, ERE, PCRE) 기능 비교 및 명령어 지원 가이드\u003c/p\u003e\n\u003ch2 id=\"1-정규-표현식이란\"\u003e1. 정규 표현식이란?\u003c/h2\u003e\n\u003cp\u003e정규 표현식(Regular Expression, Regex)은 텍스트 패턴을 검색, 치환, 검증하는 데 사용되는 강력한 도구입니다.\u003cbr\u003e\nPOSIX 기반의 BRE(Basic Regular Expressions), ERE(Extended Regular Expressions), 그리고 Perl 호환 PCRE(Perl-Compatible Regular Expressions)는 각각 다른 기능과 지원 범위를 제공합니다.\u003c/p\u003e\n\u003cp\u003e이 글에서는 각 정규 표현식 유형의 특징과 \u003ccode\u003egrep\u003c/code\u003e, \u003ccode\u003eegrep\u003c/code\u003e, \u003ccode\u003esed\u003c/code\u003e, \u003ccode\u003eripgrep\u003c/code\u003e, \u003ccode\u003eawk\u003c/code\u003e 같은 도구에서의 지원 옵션을 정리합니다.\u003c/p\u003e\n\u003ch2 id=\"2-정규-표현식-유형별-기능\"\u003e2. 정규 표현식 유형별 기능\u003c/h2\u003e\n\u003ctable\u003e\n  \u003cthead\u003e\n      \u003ctr\u003e\n          \u003cth\u003e\u003cstrong\u003e기능\u003c/strong\u003e\u003c/th\u003e\n          \u003cth\u003e\u003cstrong\u003eBRE (Basic)\u003c/strong\u003e\u003c/th\u003e\n          \u003cth\u003e\u003cstrong\u003eERE (Extended)\u003c/strong\u003e\u003c/th\u003e\n          \u003cth\u003e\u003cstrong\u003ePCRE (Perl)\u003c/strong\u003e\u003c/th\u003e\n      \u003c/tr\u003e\n  \u003c/thead\u003e\n  \u003ctbody\u003e\n      \u003ctr\u003e\n          \u003ctd\u003e\u003cstrong\u003e기본 메타문자\u003c/strong\u003e\u003c/td\u003e\n          \u003ctd\u003e\u003ccode\u003e.\u003c/code\u003e, \u003ccode\u003e*\u003c/code\u003e, \u003ccode\u003e^\u003c/code\u003e, \u003ccode\u003e$\u003c/code\u003e, \u003ccode\u003e[]\u003c/code\u003e, \u003ccode\u003e[^ ]\u003c/code\u003e\u003c/td\u003e\n          \u003ctd\u003eBRE + \u003ccode\u003e+\u003c/code\u003e, \u003ccode\u003e?\u003c/code\u003e, `\u003c/td\u003e\n          \u003ctd\u003e\u003ccode\u003e, \u003c/code\u003e{n,m}`\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003e\u003cstrong\u003e그룹화\u003c/strong\u003e\u003c/td\u003e\n          \u003ctd\u003e\u003ccode\u003e\\(\\)\u003c/code\u003e\u003c/td\u003e\n          \u003ctd\u003e\u003ccode\u003e()\u003c/code\u003e\u003c/td\u003e\n          \u003ctd\u003e\u003ccode\u003e()\u003c/code\u003e, 이름 붙은 그룹 지원\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003e\u003cstrong\u003e백레퍼런스\u003c/strong\u003e\u003c/td\u003e\n          \u003ctd\u003e\u003ccode\u003e\\1\u003c/code\u003e, \u003ccode\u003e\\2\u003c/code\u003e\u003c/td\u003e\n          \u003ctd\u003e\u003ccode\u003e\\1\u003c/code\u003e, \u003ccode\u003e\\2\u003c/code\u003e\u003c/td\u003e\n          \u003ctd\u003e\u003ccode\u003e\\1\u003c/code\u003e, \u003ccode\u003e\\2\u003c/code\u003e, 이름 참조 가능\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003e\u003cstrong\u003e반복\u003c/strong\u003e\u003c/td\u003e\n          \u003ctd\u003e\u003ccode\u003e*\u003c/code\u003e, \u003ccode\u003e\\{n,m\\}\u003c/code\u003e\u003c/td\u003e\n          \u003ctd\u003e\u003ccode\u003e*\u003c/code\u003e, \u003ccode\u003e+\u003c/code\u003e, \u003ccode\u003e?\u003c/code\u003e, \u003ccode\u003e{n,m}\u003c/code\u003e\u003c/td\u003e\n          \u003ctd\u003e\u003ccode\u003e*\u003c/code\u003e, \u003ccode\u003e+\u003c/code\u003e, \u003ccode\u003e?\u003c/code\u003e, \u003ccode\u003e{n,m}\u003c/code\u003e, \u003ccode\u003e*?\u003c/code\u003e, \u003ccode\u003e+?\u003c/code\u003e\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003e\u003cstrong\u003e고급 기능\u003c/strong\u003e\u003c/td\u003e\n          \u003ctd\u003e없음\u003c/td\u003e\n          \u003ctd\u003e없음\u003c/td\u003e\n          \u003ctd\u003e전방 탐색(\u003ccode\u003e(?=...)\u003c/code\u003e), 후방 탐색(\u003ccode\u003e(?\u0026lt;=...)\u003c/code\u003e)\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003e\u003cstrong\u003e예시\u003c/strong\u003e\u003c/td\u003e\n          \u003ctd\u003e\u003ccode\u003ea\\(b*\\)c\u003c/code\u003e → \u003ccode\u003eabbbc\u003c/code\u003e\u003c/td\u003e\n          \u003ctd\u003e`a(b+\u003c/td\u003e\n          \u003ctd\u003ec)d\u003ccode\u003e→\u003c/code\u003eabbd\u003ccode\u003e, \u003c/code\u003eacd`\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003e\u003cstrong\u003e제한점\u003c/strong\u003e\u003c/td\u003e\n          \u003ctd\u003e\u003ccode\u003e+\u003c/code\u003e, \u003ccode\u003e?\u003c/code\u003e, \u003ccode\u003e|\u003c/code\u003e는 이스케이프 필요 　　\u003c/td\u003e\n          \u003ctd\u003e비탐욕적 매칭, 전방/후방 탐색 미지원\u003c/td\u003e\n          \u003ctd\u003ePOSIX 도구에서 제한적 지원\u003c/td\u003e\n      \u003c/tr\u003e\n  \u003c/tbody\u003e\n\u003c/table\u003e\n\u003ch3 id=\"21-기본-정규-표현식-bre\"\u003e2.1 기본 정규 표현식 (BRE)\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003e설명\u003c/strong\u003e: POSIX 표준의 기본 정규 표현식, 가장 제한적.\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e주요 기능\u003c/strong\u003e: 메타문자(\u003ccode\u003e.\u003c/code\u003e, \u003ccode\u003e*\u003c/code\u003e, \u003ccode\u003e^\u003c/code\u003e, \u003ccode\u003e$\u003c/code\u003e, \u003ccode\u003e[]\u003c/code\u003e), 그룹화(\u003ccode\u003e\\(\\)\u003c/code\u003e), 백레퍼런스(\u003ccode\u003e\\1\u003c/code\u003e, \u003ccode\u003e\\2\u003c/code\u003e).\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e제한점\u003c/strong\u003e: \u003ccode\u003e+\u003c/code\u003e, \u003ccode\u003e?\u003c/code\u003e, \u003ccode\u003e|\u003c/code\u003e는 이스케이프(\u003ccode\u003e\\+\u003c/code\u003e, \u003ccode\u003e\\?\u003c/code\u003e, \u003ccode\u003e\\|\u003c/code\u003e) 필요.\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"22-확장-정규-표현식-ere\"\u003e2.2 확장 정규 표현식 (ERE)\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003e설명\u003c/strong\u003e: POSIX 확장 표준, BRE보다 간결하고 표현력 높음.\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e주요 기능\u003c/strong\u003e: 추가 메타문자(\u003ccode\u003e+\u003c/code\u003e, \u003ccode\u003e?\u003c/code\u003e, \u003ccode\u003e|\u003c/code\u003e, \u003ccode\u003e{n,m}\u003c/code\u003e), 그룹화(\u003ccode\u003e()\u003c/code\u003e).\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e제한점\u003c/strong\u003e: 비탐욕적 매칭이나 전방/후방 탐색 미지원.\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"23-perl-호환-정규-표현식-pcre\"\u003e2.3 Perl 호환 정규 표현식 (PCRE)\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003e설명\u003c/strong\u003e: Perl 기반, 가장 강력한 정규 표현식.\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e주요 기능\u003c/strong\u003e: 비탐욕적 매칭(\u003ccode\u003e*?\u003c/code\u003e, \u003ccode\u003e+?\u003c/code\u003e), 전방/후방 탐색, 유니코드 지원.\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e제한점\u003c/strong\u003e: POSIX 도구에서 제한적 지원.\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"3-명령어별-정규-표현식-지원-옵션\"\u003e3. 명령어별 정규 표현식 지원 옵션\u003c/h2\u003e\n\u003ctable\u003e\n  \u003cthead\u003e\n      \u003ctr\u003e\n          \u003cth\u003e\u003cstrong\u003e명령어\u003c/strong\u003e\u003c/th\u003e\n          \u003cth\u003e\u003cstrong\u003eBRE\u003c/strong\u003e\u003c/th\u003e\n          \u003cth\u003e\u003cstrong\u003eERE\u003c/strong\u003e\u003c/th\u003e\n          \u003cth\u003e\u003cstrong\u003ePCRE\u003c/strong\u003e\u003c/th\u003e\n      \u003c/tr\u003e\n  \u003c/thead\u003e\n  \u003ctbody\u003e\n      \u003ctr\u003e\n          \u003ctd\u003e\u003cstrong\u003egrep\u003c/strong\u003e\u003c/td\u003e\n          \u003ctd\u003e기본 (옵션 없음)\u003c/td\u003e\n          \u003ctd\u003e\u003ccode\u003e-E\u003c/code\u003e\u003c/td\u003e\n          \u003ctd\u003e\u003ccode\u003e-P\u003c/code\u003e (GNU grep만)\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003e\u003cstrong\u003eegrep\u003c/strong\u003e\u003c/td\u003e\n          \u003ctd\u003e-\u003c/td\u003e\n          \u003ctd\u003e기본 (옵션 없음)\u003c/td\u003e\n          \u003ctd\u003e-\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003e\u003cstrong\u003esed\u003c/strong\u003e\u003c/td\u003e\n          \u003ctd\u003e기본 (옵션 없음)\u003c/td\u003e\n          \u003ctd\u003e\u003ccode\u003e-r\u003c/code\u003e (GNU) / \u003ccode\u003e-E\u003c/code\u003e (BSD)\u003c/td\u003e\n          \u003ctd\u003e-\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003e\u003cstrong\u003eripgrep\u003c/strong\u003e\u003c/td\u003e\n          \u003ctd\u003e-\u003c/td\u003e\n          \u003ctd\u003e기본 (옵션 없음)\u003c/td\u003e\n          \u003ctd\u003e기본 (옵션 없음)\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003e\u003cstrong\u003eawk\u003c/strong\u003e\u003c/td\u003e\n          \u003ctd\u003e기본 (옵션 없음)\u003c/td\u003e\n          \u003ctd\u003e-\u003c/td\u003e\n          \u003ctd\u003e- (gawk는 제한적 PCRE 지원)\u003c/td\u003e\n      \u003c/tr\u003e\n  \u003c/tbody\u003e\n\u003c/table\u003e\n\u003ch2 id=\"4-모범-사례\"\u003e4. 모범 사례\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003e\u003cstrong\u003ePOSIX 우선\u003c/strong\u003e: 이식성을 위해 BRE/ERE 사용.\u003c/p\u003e","title":"정규 표현식(BRE, ERE, PCRE) 기능 비교 및 명령어 지원 가이드"},{"content":"멀티스레드 최적화 힙 메모리 할당기: tcmalloc, jemalloc\n이글 UPDATE : https://cdecl.tistory.com/304\n왜 멀티스레드 메모리 할당기가 중요한가? 기본 메모리 할당기(glibc의 malloc, Windows의 HeapAlloc)는 범용성을 목표로 설계되었지만, 멀티스레드 환경에서는 다음과 같은 문제로 성능이 저하됩니다:\n락 경합(Lock Contention): 다중 스레드가 동시에 메모리를 할당/해제할 때 락으로 인한 대기 시간 증가. 메모리 단편화(Memory Fragmentation): 빈번한 할당/해제로 메모리 사용 효율 저하. ABI 호환성 문제: 서로 다른 컴파일러나 표준 라이브러리 간 메모리 관리 방식 차이로 인한 런타임 오류. tcmalloc, jemalloc, mimalloc은 스레드별 캐싱, 효율적인 메모리 관리, ABI 안정성을 고려한 설계로 이러한 문제를 해결합니다. 이들은 웹 브라우저(Chrome, Firefox), 데이터베이스(MySQL, RocksDB), 고성능 서버에서 널리 사용됩니다.\n1. tcmalloc (Thread-Caching Malloc) tcmalloc은 Google이 개발한 고성능 메모리 할당기로, Chrome, TensorFlow, MySQL 등에서 사용됩니다. 스레드별 캐싱과 페이지 단위 할당으로 락 경합을 최소화합니다.\n특징 스레드별 캐싱: 각 스레드에 로컬 캐시를 제공해 락 없는 할당. 공간 효율성: 소형 객체(≤256KB)에서 1% 미만 오버헤드. 대형 객체: 256KB 이상은 페이지 단위로 직접 할당. 최신 업데이트 (2025): per-CPU 캐싱 모드 개선으로 스레드 확장성 강화, C23 표준의 메모리 정렬 최적화 지원. 설치 방법 Ubuntu 24.04 sudo apt update sudo apt install libtcmalloc-minimal4 CMake 설정:\nfind_library(TCMALLOC_LIB tcmalloc_minimal) target_link_libraries(myapp PRIVATE ${TCMALLOC_LIB}) Windows 11 (MSVC/vcpkg) vcpkg install gperftools:x64-windows CMake:\nfind_package(gperftools CONFIG REQUIRED) target_link_libraries(myapp PRIVATE gperftools::tcmalloc_minimal) 소스 빌드 git clone https://github.com/gperftools/gperftools cd gperftools ./autogen.sh ./configure --prefix=/usr/local make \u0026amp;\u0026amp; sudo make install 사용 방법 직접 호출:\n#include \u0026lt;gperftools/tcmalloc.h\u0026gt; void* ptr = tc_malloc(size); tc_free(ptr); 라이브러리 링크 (기본 malloc 대체):\ng++ -o myapp myapp.cpp -ltcmalloc_minimal LD_PRELOAD (권장하지 않음):\nLD_PRELOAD=/usr/lib/libtcmalloc_minimal.so ./myapp Windows (MSVC) #pragma comment(lib, \u0026#34;libtcmalloc_minimal.lib\u0026#34;) #pragma comment(linker, \u0026#34;/include:__tcmalloc\u0026#34;) 성능 벤치마크 (2025): 16코어 서버에서 glibc malloc 대비 소형 객체 할당 3.5배 빠름. MySQL: 8 vCPU 환경에서 TPS 5500 (glibc: 3500). 단점: 메모리 사용량이 glibc보다 2~3배 높을 수 있음. ABI 고려사항 GCC/Clang에서 -D_GLIBCXX_USE_CXX11_ABI=1 설정 필요. libstdc++와 libc++ 혼용 시 메모리 손상 가능. 2. jemalloc jemalloc은 Firefox, FreeBSD, RocksDB에서 사용되는 메모리 할당기로, 메모리 단편화 감소와 멀티스레드 확장성에 강점이 있습니다.\n특징 아레나 기반 할당: 스레드별 독립 메모리 아레나로 경합 최소화. 단편화 감소: 슬랩 기반 소형 객체 관리. 디버깅: malloc_stats_print()와 mallctl로 메모리 통계 제공. 최신 업데이트 (2025): jemalloc 5.4.0, 동적 스레드 풀 최적화. 설치 방법 Ubuntu 24.04 sudo apt update sudo apt install libjemalloc-dev CMake:\nfind_library(JEMALLOC_LIB jemalloc) target_link_libraries(myapp PRIVATE ${JEMALLOC_LIB}) Windows 11 (vcpkg) vcpkg install jemalloc:x64-windows CMake:\nfind_package(jemalloc CONFIG REQUIRED) target_link_libraries(myapp PRIVATE jemalloc::jemalloc) 소스 빌드 git clone https://github.com/jemalloc/jemalloc cd jemalloc ./autogen.sh ./configure --prefix=/usr/local make \u0026amp;\u0026amp; sudo make install 사용 방법 직접 호출:\n#include \u0026lt;jemalloc/jemalloc.h\u0026gt; void* ptr = je_malloc(size); je_free(ptr); 라이브러리 링크:\ng++ -o myapp myapp.cpp -ljemalloc LD_PRELOAD:\nLD_PRELOAD=/usr/lib/libjemalloc.so ./myapp C++ 사용자 정의 할당자 #include \u0026lt;jemalloc/jemalloc.h\u0026gt; void* operator new(size_t size) { return je_malloc(size); } void operator delete(void* ptr) noexcept { je_free(ptr); } 성능 벤치마크: MySQL 16코어 환경에서 glibc 대비 TPS 2.2배. 메모리 효율성: RocksDB에서 RSS 55% 감소. 단점: 동적 스레드 생성/소멸 빈번 시 캐시 오버헤드. ABI 고려사항 표준 라이브러리 객체(std::vector)를 인터페이스로 노출하면 안 됨. extern \u0026quot;C\u0026quot; 인터페이스 사용 권장. 3. mimalloc Microsoft의 mimalloc은 컴팩트하고 고성능 할당기로, 서버 워크로드와 긴 실행 시간 애플리케이션에 최적화되었습니다.\n특징 스레드 간 객체 마이그레이션: 캐시 효율성 극대화. 낮은 오버헤드: 메모리 사용량 최소화. 최신 업데이트 (2025): C23 정렬 최적화, ARM64 성능 개선. 설치 vcpkg install mimalloc CMake:\nfind_package(mimalloc CONFIG REQUIRED) target_link_libraries(myapp PRIVATE mimalloc) 성능 벤치마크: Lean 컴파일러에서 tcmalloc 대비 15% 속도 향상. 메모리 효율성: glibc 대비 RSS 40% 감소. ABI 고려사항 표준 라이브러리와의 호환성을 위해 동일한 컴파일러/플래그 사용. tcmalloc vs. jemalloc vs. mimalloc: 비교 기준 tcmalloc jemalloc mimalloc 주요 사용 사례 Chrome, MySQL, TensorFlow Firefox, FreeBSD, RocksDB Lean, 서버 워크로드 성능 소형 객체 할당 속도 빠름 단편화 감소에 강점 균형 잡힌 성능 메모리 효율성 glibc 대비 2~3배 사용량 증가 가능 glibc 대비 RSS 55% 감소 glibc 대비 RSS 40% 감소 멀티스레드 동적 스레드 환경에 유리 정-static 스레드 풀에 최적화 동적/정적 모두 적합 디버깅 도구 힙 프로파일링 지원 상세 통계, mallctl API 기본 통계 제공 선택 가이드 tcmalloc: 소형 객체 할당이 빈번하거나 동적 스레드 환경(웹 브라우저, 실시간 서버). jemalloc: 메모리 단편화가 문제인 장기 실행 서버(데이터베이스, 캐시 서버). mimalloc: 메모리 효율성과 성능 균형이 필요한 최신 프로젝트. 테스트 필수: 애플리케이션 워크로드에 따라 성능 차이가 크므로 벤치마킹 필수. 결론 tcmalloc, jemalloc, mimalloc은 멀티스레드 환경에서 glibc malloc을 대체해 성능과 메모리 효율성을 크게 향상시킵니다.\n애플리케이션 특성에 맞는 할당기를 선택하려면 직접 벤치마킹이 필수입니다.\n추가 리소스 tcmalloc GitHub jemalloc GitHub mimalloc GitHub ","permalink":"https://cdecl.github.io/dev/c++-memory-tcmalloc/","summary":"\u003cp\u003e멀티스레드 최적화 힙 메모리 할당기: tcmalloc, jemalloc\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003e\u003ca href=\"https://cdecl.tistory.com/304\"\u003e이글 UPDATE : https://cdecl.tistory.com/304\u003c/a\u003e\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003ch2 id=\"왜-멀티스레드-메모리-할당기가-중요한가\"\u003e왜 멀티스레드 메모리 할당기가 중요한가?\u003c/h2\u003e\n\u003cp\u003e기본 메모리 할당기(glibc의 \u003ccode\u003emalloc\u003c/code\u003e, Windows의 \u003ccode\u003eHeapAlloc\u003c/code\u003e)는 범용성을 목표로 설계되었지만, 멀티스레드 환경에서는 다음과 같은 문제로 성능이 저하됩니다:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003e락 경합(Lock Contention)\u003c/strong\u003e: 다중 스레드가 동시에 메모리를 할당/해제할 때 락으로 인한 대기 시간 증가.\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e메모리 단편화(Memory Fragmentation)\u003c/strong\u003e: 빈번한 할당/해제로 메모리 사용 효율 저하.\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eABI 호환성 문제\u003c/strong\u003e: 서로 다른 컴파일러나 표준 라이브러리 간 메모리 관리 방식 차이로 인한 런타임 오류.\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e\u003cstrong\u003etcmalloc\u003c/strong\u003e, \u003cstrong\u003ejemalloc\u003c/strong\u003e, \u003cstrong\u003emimalloc\u003c/strong\u003e은 스레드별 캐싱, 효율적인 메모리 관리, ABI 안정성을 고려한 설계로 이러한 문제를 해결합니다. 이들은 웹 브라우저(Chrome, Firefox), 데이터베이스(MySQL, RocksDB), 고성능 서버에서 널리 사용됩니다.\u003c/p\u003e","title":"C++ 메모리 할당기 - tcmalloc, jemalloc"},{"content":"C++ 언어의 ABI 이슈 및 호환성 가이드\n1. ABI란 무엇인가? ABI(Application Binary Interface)는 컴파일된 바이너리 코드(오브젝트 파일, 라이브러리, 실행 파일 등)가 서로 상호작용할 수 있도록 정의된 규칙입니다. C++에서는 이름 맹글링, 호출 규약, 객체 레이아웃, 예외 처리 등이 포함됩니다. C++의 복잡한 기능(클래스, 템플릿, 예외 처리 등)으로 인해 ABI 이슈는 특히 중요하며, 서로 다른 컴파일러나 환경 간 호환성 문제를 자주 일으킵니다.\n2. C++ ABI의 주요 이슈 C++는 언어의 복잡성으로 인해 다양한 ABI 이슈가 발생합니다. 아래는 주요 이슈와 구체적인 예입니다.\n2.1 컴파일러 간 ABI 비호환성 문제: GCC, Clang, MSVC와 같은 컴파일러는 이름 맹글링, 호출 규약, 객체 레이아웃, 예외 처리 방식이 달라 바이너리 호환성이 보장되지 않습니다. 예: GCC로 컴파일된 라이브러리를 MSVC로 컴파일된 프로그램에서 사용하려고 하면 링크 오류 또는 런타임 오류가 발생합니다. 특히 std::string의 내부 구현이 컴파일러마다 달라, GCC에서 생성된 std::string 객체를 MSVC에서 처리하면 메모리 손상이 발생할 수 있습니다. 영향: 라이브러리 배포 시 동일한 컴파일러와 버전을 강제해야 하며, 크로스-플랫폼 개발에서 추가적인 제약이 발생합니다. 2.2 컴파일러 버전 간 ABI 호환성 문제: 동일한 컴파일러라도 버전 간 ABI가 변경될 수 있습니다. 예를 들어, GCC 5.x는 C++11 ABI를 도입하며 std::string과 std::list의 구현을 변경했습니다. 예: GCC 4.x로 컴파일된 라이브러리를 GCC 5.x로 컴파일된 프로그램과 링크하면, std::string 객체를 전달하는 함수 호출에서 메모리 손상과 같은 런타임 오류가 발생할 수 있습니다. 영향: 라이브러리 개발자는 특정 컴파일러 버전에 맞춰 ABI를 관리하거나, 사용자에게 특정 버전의 컴파일러를 요구해야 합니다. 2.3 이름 맹글링(Name Mangling) 차이 문제: C++는 함수 오버로딩을 지원하기 위해 이름 맹글링을 사용하지만, 컴파일러마다 맹글링 규칙이 다릅니다. 예: void func(int)는 GCC에서 _Z4funci로, MSVC에서는 다른 방식으로 맹글링됩니다. 이로 인해 라이브러리와 애플리케이션 간 링크 오류가 발생합니다. 영향: 서로 다른 컴파일러로 컴파일된 바이너리를 링크할 수 없으며, 인터페이스 설계 시 추가적인 주의가 필요합니다. 2.4 객체 레이아웃과 메모리 정렬 문제: 클래스나 구조체의 메모리 레이아웃(필드 정렬, 패딩, vtable 위치)은 컴파일러와 플랫폼에 따라 다릅니다. 이는 상속, 가상 함수, 다중 상속에서 특히 두드러집니다. 예: 다중 상속을 사용하는 클래스의 vtable 포인터 위치가 GCC와 MSVC에서 다르면, 동일한 객체를 다른 컴파일러로 처리할 때 잘못된 가상 함수 호출과 같은 런타임 오류가 발생할 수 있습니다. 영향: 바이너리 호환성을 위해 클래스 레이아웃을 수동으로 제어해야 할 수 있습니다. 2.5 예외 처리와 스택 언와인딩 문제: C++ 예외 처리와 스택 언와인딩은 ABI에 크게 의존하며, 컴파일러마다 구현 방식이 다릅니다. 예: 한 컴파일러로 컴파일된 모듈에서 던진 예외를 다른 컴파일러로 컴파일된 모듈에서 잡으려고 하면, 스택 언와인딩이 실패하거나 프로그램이 비정상 종료될 수 있습니다. 영향: 예외를 사용하는 라이브러리는 동일한 ABI 환경에서만 안정적으로 동작합니다. 2.6 표준 라이브러리 구현 차이 문제: C++ 표준 라이브러리(libstdc++, libc++, MSVC STL)의 구현은 ABI에 영향을 미치며, 서로 다른 구현 간의 객체는 호환되지 않습니다. 예: libstdc++를 사용하는 프로그램이 libc++로 컴파일된 라이브러리에서 전달된 std::vector를 사용하려고 하면, 메모리 할당/해제 방식의 차이로 충돌이 발생할 수 있습니다. 영향: 동일한 표준 라이브러리 구현을 사용해야 하며, 인터페이스 설계 시 표준 라이브러리 객체 사용을 최소화해야 합니다. 2.7 플랫폼별 ABI 차이 문제: 동일한 컴파일러라도 운영 체제(Windows, Linux, macOS)나 아키텍처(x86, ARM)에 따라 ABI가 달라질 수 있습니다. 예: Windows와 Linux는 호출 규약과 스택 정렬 요구사항이 다르며, 동일한 운영 체제 내에서도 32비트와 64비트 ABI가 다를 수 있습니다. 영향: 크로스-플랫폼 라이브러리 개발 시 플랫폼별로 별도의 바이너리를 제공해야 합니다. 3. GCC와 Clang 간 ABI 호환성 호환성: GCC와 Clang은 동일한 플랫폼(예: Linux x86_64, System V ABI)에서 동일한 표준 라이브러리(libstdc++ 또는 libc++)와 ABI 설정(예: -D_GLIBCXX_USE_CXX11_ABI=1)을 사용할 경우 대부분 호환됩니다. 예외: libstdc++와 libc++ 혼용 시 호환성 문제. GCC의 C++11 ABI 변경(GCC 5.x 이상). 비표준 확장 또는 최적화 플래그 차이. 예: GCC로 컴파일된 libboost를 Clang으로 링크하려면 동일한 libstdc++와 ABI 설정이 필요합니다. 4. 모범 사례 ABI 호환성을 위한 권장 사항 C 스타일 인터페이스 사용: extern \u0026quot;C\u0026quot;를 사용해 이름 맹글링을 방지하고 ABI 의존성을 줄입니다. // mylib.h #ifdef __cplusplus extern \u0026#34;C\u0026#34; { #endif void my_function(int arg); #ifdef __cplusplus } #endif 동일한 컴파일러와 버전 사용: GCC와 Clang을 혼용할 경우 동일한 표준 라이브러리와 ABI 설정을 유지합니다. 예: GCC에서 C++11 ABI를 사용하려면 -D_GLIBCXX_USE_CXX11_ABI=1을 설정. 표준 라이브러리 객체 피하기: 라이브러리 인터페이스에서 std::string, std::vector 같은 객체를 직접 노출하지 않고, POD(Plain Old Data) 타입이나 불투명 핸들(opaque handle)을 사용. // 불투명 핸들 사용 struct MyHandle; MyHandle* create_handle(); void destroy_handle(MyHandle*); 컴파일러 플래그 일치: -fPIC, -m32/-m64, 정렬 옵션 등을 동일하게 설정. g++ -c -fPIC -Wall -Wextra src/lib.cpp -o lib.o clang++ -c -fPIC -Wall -Wextra src/lib.cpp -o lib.o ABI 명시: GCC에서 -fabi-version 플래그나 _GLIBCXX_USE_CXX11_ABI 매크로를 사용해 ABI를 명시적으로 제어. g++ -D_GLIBCXX_USE_CXX11_ABI=1 src/lib.cpp -o lib.o COM 또는 ABI-안정적 인터페이스: Windows에서는 COM(Component Object Model)과 같은 ABI 안정성을 보장하는 프레임워크를 활용. 테스트와 문서화: 서로 다른 컴파일러와 버전으로 빌드된 바이너리를 테스트하고, 지원하는 ABI와 컴파일러 환경을 문서화. # 테스트 스크립트 예 g++ -c src/lib.cpp -o lib.o \u0026amp;\u0026amp; clang++ main.cpp lib.o -o test ./test 프로젝트 구조 project/ ├── include/ │ └── mylib.h ├── src/ │ └── lib.cpp ├── extern/ │ └── third_party/ └── tests/ └── test_main.cpp 5. 결론 C++ 언어의 ABI 이슈는 컴파일러 간 이름 맹글링, 표준 라이브러리 구현, 객체 레이아웃, 예외 처리, 플랫폼 차이 등 다양한 요인에서 비롯됩니다. GCC와 Clang은 동일한 설정을 사용할 경우 대부분 호환되지만, libstdc++와 libc++ 혼용이나 버전 간 ABI 변경과 같은 예외 상황에 주의해야 합니다. 모범 사례를 통해 ABI 호환성을 관리하고, 철저한 테스트와 문서화를 통해 안정적인 바이너리 배포를 보장할 수 있습니다.\n추가 리소스 System V ABI GCC ABI 문서 Clang ABI 호환성 가이드 ","permalink":"https://cdecl.github.io/dev/cpp-abi/","summary":"\u003cp\u003eC++ 언어의 ABI 이슈 및 호환성 가이드\u003c/p\u003e\n\u003ch2 id=\"1-abi란-무엇인가\"\u003e1. ABI란 무엇인가?\u003c/h2\u003e\n\u003cp\u003eABI(Application Binary Interface)는 컴파일된 바이너리 코드(오브젝트 파일, 라이브러리, 실행 파일 등)가 서로 상호작용할 수 있도록 정의된 규칙입니다. C++에서는 이름 맹글링, 호출 규약, 객체 레이아웃, 예외 처리 등이 포함됩니다. C++의 복잡한 기능(클래스, 템플릿, 예외 처리 등)으로 인해 ABI 이슈는 특히 중요하며, 서로 다른 컴파일러나 환경 간 호환성 문제를 자주 일으킵니다.\u003c/p\u003e\n\u003ch2 id=\"2-c-abi의-주요-이슈\"\u003e2. C++ ABI의 주요 이슈\u003c/h2\u003e\n\u003cp\u003eC++는 언어의 복잡성으로 인해 다양한 ABI 이슈가 발생합니다. 아래는 주요 이슈와 구체적인 예입니다.\u003c/p\u003e","title":"C++ 언어의 ABI 이슈 및 호환성 가이드"},{"content":"DuckDB CLI 및 SQL CheatSheet - 주요 파일 포맷, DB Attach, HTTP/S3, Excel\nDuckDB CLI 및 SQL CheatSheet 가이드 1. DuckDB와 CLI/SQL 기능 소개 DuckDB는 고성능 분석 쿼리를 위해 설계된 인-프로세스, 컬럼 지향 OLAP 데이터베이스입니다. CLI와 SQL 인터페이스를 통해 CSV, Parquet, JSON, Excel 등의 파일 포맷을 처리하고, 데이터베이스를 관리하며, HTTP/S3와 같은 웹 기반 스토리지와 통합할 수 있습니다. 이 치트시트는 DuckDB의 CLI와 SQL 명령어를 중심으로 실용적인 예제와 모범 사례를 제공합니다.\n주요 기능:\n파일 포맷 지원: CSV, Parquet, JSON, Excel 등을 손쉽게 읽고 쓰기. 데이터베이스 관리: 여러 데이터베이스를 연결하고 테이블을 효율적으로 관리. 웹 통합: httpfs 확장을 통해 HTTP 또는 S3에서 원격 데이터 접근. 사용 편의성: 직관적인 CLI와 SQL 문법으로 빠른 데이터 처리. 이 가이드는 데이터 엔지니어, 분석가, 개발자가 로컬 및 원격 데이터 워크플로우에 DuckDB를 활용하고자 할 때 유용합니다.\n2. 파일 포맷 vs. 데이터베이스 작업 DuckDB는 파일 직접 작업과 전통적인 데이터베이스 관리를 모두 지원합니다. 아래 표는 두 접근 방식의 차이를 비교합니다:\n기능 파일 작업 데이터베이스 작업 범위 CSV, Parquet, JSON, Excel 파일 영구 DB 파일 (.db) 접근 방식 SQL로 직접 읽기/쓰기 데이터베이스 연결, 테이블 생성 및 쿼리 사용 사례 임시 분석, ETL 구조화된 데이터 저장, 인덱싱 예제 SELECT * FROM 'file.csv'; ATTACH 'mydb.db'; SELECT * FROM mytable; 파일 작업은 빠른 분석에 적합하며, 데이터베이스 작업은 구조화된 영구 저장에 적합합니다. DuckDB는 두 방식 간 전환을 유연하게 지원합니다.\n3. 파일 포맷 작업 DuckDB는 read_csv_auto, read_parquet, read_json_auto, 그리고 excel 확장을 통해 CSV, Parquet, JSON, Excel 파일을 지원합니다. 각 포맷에 대한 주요 명령어는 아래와 같습니다.\n3.1 CSV 파일 가져오기:\nCLI: duckdb -c \u0026#34;CREATE TABLE mytable AS SELECT * FROM \u0026#39;file.csv\u0026#39;;\u0026#34; SQL: SELECT * FROM read_csv_auto(\u0026#39;file.csv\u0026#39;); CREATE TABLE mytable AS SELECT * FROM read_csv(\u0026#39;file.csv\u0026#39;, delim=\u0026#39;,\u0026#39;, header=TRUE); 사용자 정의 스키마: SELECT * FROM read_csv(\u0026#39;file.csv\u0026#39;, columns={\u0026#39;id\u0026#39;: \u0026#39;INTEGER\u0026#39;, \u0026#39;name\u0026#39;: \u0026#39;VARCHAR\u0026#39;}); 헤더 옵션 (header):\nheader=TRUE: 첫 번째 행을 컬럼 이름으로 사용. SELECT * FROM read_csv(\u0026#39;file.csv\u0026#39;, header=TRUE); header=FALSE: 첫 번째 행을 데이터로 처리, 기본 컬럼 이름 생성 (예: column0, column1). SELECT * FROM read_csv(\u0026#39;file.csv\u0026#39;, header=FALSE); read_csv_auto는 기본적으로 header=TRUE로 동작하며, 헤더 유무를 자동 감지. SELECT * FROM read_csv_auto(\u0026#39;file.csv\u0026#39;, header=TRUE); 내보내기:\nCLI: duckdb -c \u0026#34;COPY mytable TO \u0026#39;output.csv\u0026#39;;\u0026#34; SQL: COPY mytable TO \u0026#39;output.csv\u0026#39; (DELIMITER \u0026#39;,\u0026#39;, HEADER); 내보내기 시 HEADER 옵션 추가로 컬럼 이름 포함: COPY mytable TO \u0026#39;output.csv\u0026#39; (DELIMITER \u0026#39;,\u0026#39;, HEADER TRUE); 참고:\nread_csv_auto는 구분자와 스키마를 자동으로 감지. header 옵션은 데이터의 구조를 명확히 지정할 때 유용. 압축 파일 지원 (예: file.csv.gz). 3.2 Parquet 파일 가져오기:\nCLI: duckdb -c \u0026#34;CREATE TABLE mytable AS SELECT * FROM \u0026#39;file.parquet\u0026#39;;\u0026#34; SQL: SELECT * FROM read_parquet(\u0026#39;file.parquet\u0026#39;); CREATE TABLE mytable AS SELECT * FROM read_parquet(\u0026#39;file.parquet\u0026#39;); 다중 파일: SELECT * FROM read_parquet([\u0026#39;file1.parquet\u0026#39;, \u0026#39;file2.parquet\u0026#39;]); 내보내기:\nCLI: duckdb -c \u0026#34;COPY mytable TO \u0026#39;output.parquet\u0026#39;;\u0026#34; SQL: COPY mytable TO \u0026#39;output.parquet\u0026#39; (FORMAT PARQUET); 참고:\n컬럼 지향 저장으로 대규모 데이터에 최적화. 원격 접근 지원 (HTTP/S3 섹션 참조). 3.2.1 DuckDB 내장 테이블과 Parquet 비교 DuckDB 내장 테이블은 DuckDB의 독자적인 열 지향 스토리지 형식(예: .duckdb 파일)으로, 데이터 수정 및 트랜잭션을 지원하며 쿼리 실행에 최적화되어 있습니다. 반면, Parquet는 오픈소스 열 지향 파일 형식으로, 높은 압축률과 분산 환경(S3, HDFS) 호환성을 제공하지만 데이터 수정은 불가능합니다.\n주요 차이점: DuckDB 내장 테이블: 메모리 또는 디스크 기반 저장소. 데이터 수정(INSERT, UPDATE, DELETE) 가능. DuckDB 쿼리 엔진에 최적화, 소규모 데이터에서 빠른 읽기/쓰기. 용도: 데이터 변환, 증분 업데이트, 메모리 내 분석. Parquet 파일: 높은 압축률로 대규모 데이터에 적합. 읽기 전용, 수정하려면 새 파일 생성 필요. Spark, Pandas 등 외부 도구와의 호환성. 용도: 데이터 아카이빙, 공유, 분산 저장소. 성능 비교 표: 항목 DuckDB 내장 테이블 Parquet 파일 읽기 성능 소규모 데이터 빠름, 쿼리 최적화 우수 대규모 데이터 유리, 높은 압축률, 메타데이터 활용 쓰기 성능 소규모 데이터 빠름, 증분 업데이트 가능 대규모 데이터 압축으로 디스크 사용량 적음, 쓰기 느림 데이터 수정 가능 (INSERT, UPDATE, DELETE) 불가 (새 파일 덮어쓰기 필요) 압축률 중간 높음 (Snappy, ZSTD 등) 호환성 DuckDB 전용 Spark, Pandas 등 다양한 도구와 호환 추천 사용 사례: DuckDB 내장 테이블: 데이터 수정이 빈번하거나, 메모리 내 분석이 필요한 경우. Parquet: 대규모 데이터 저장, 외부 시스템과의 데이터 공유, S3 같은 분산 환경. 하이브리드: Parquet 파일을 DuckDB 테이블로 로드해 분석 (예: CREATE TABLE mytable AS SELECT * FROM read_parquet('file.parquet');). 3.3 JSON 파일 가져오기:\nCLI: duckdb -c \u0026#34;CREATE TABLE mytable AS SELECT * FROM read_json_auto(\u0026#39;file.json\u0026#39;);\u0026#34; SQL: SELECT * FROM read_json_auto(\u0026#39;file.json\u0026#39;); CREATE TABLE mytable AS SELECT * FROM read_json(\u0026#39;file.json\u0026#39;, format=\u0026#39;auto\u0026#39;); JSON Lines: SELECT * FROM read_json(\u0026#39;file.jsonl\u0026#39;, lines=TRUE); 내보내기:\nCLI: duckdb -c \u0026#34;COPY mytable TO \u0026#39;output.json\u0026#39;;\u0026#34; SQL: COPY mytable TO \u0026#39;output.json\u0026#39; (FORMAT JSON); 참고:\n중첩 JSON은 unnest로 평탄화 가능. read_json_auto는 스키마를 자동 추론. 3.4 Excel 파일 설정:\nExcel 파일 처리는 excel 확장이 필요. 설치 및 로드: INSTALL excel; LOAD excel; 가져오기:\nCLI: duckdb -c \u0026#34;CREATE TABLE mytable AS SELECT * FROM read_xlsx(\u0026#39;file.xlsx\u0026#39;);\u0026#34; SQL: SELECT * FROM read_xlsx(\u0026#39;file.xlsx\u0026#39;); CREATE TABLE mytable AS SELECT * FROM read_xlsx(\u0026#39;file.xlsx\u0026#39;); 특정 시트 지정: SELECT * FROM read_xlsx(\u0026#39;file.xlsx\u0026#39;, sheet=\u0026#39;Sheet1\u0026#39;); 특정 셀 범위 지정: SELECT * FROM read_xlsx(\u0026#39;file.xlsx\u0026#39;, sheet=\u0026#39;Sheet1\u0026#39;, range=\u0026#39;A1:C10\u0026#39;); 내보내기:\nCLI: duckdb -c \u0026#34;COPY mytable TO \u0026#39;output.xlsx\u0026#39; WITH (FORMAT xlsx);\u0026#34; SQL: COPY mytable TO \u0026#39;output.xlsx\u0026#39; WITH (FORMAT xlsx, SHEET \u0026#39;Sheet1\u0026#39;); 여러 시트로 내보내기: COPY mytable TO \u0026#39;output.xlsx\u0026#39; WITH (FORMAT xlsx, SHEET \u0026#39;DataSheet\u0026#39;); 참고:\nread_xlsx은 .xlsx, .xls 파일을 지원하며, sheet 또는 range 옵션으로 데이터 범위를 지정할 수 있음. COPY ... WITH (FORMAT xlsx)을 사용해 Excel 파일로 내보내기 가능. 복잡한 서식(예: 차트, 매크로)은 지원하지 않음. 원격 Excel 파일은 HTTP/S3를 통해 접근 가능 (아래 섹션 참조). 대규모 데이터는 Parquet으로 변환 권장. 4. 데이터베이스 작업 및 Attach DuckDB는 인-메모리 및 파일 기반 데이터베이스를 지원하며, ATTACH 명령어로 다중 데이터베이스 워크플로우를 구현할 수 있습니다.\n4.1 데이터베이스 관리 데이터베이스 열기:\nCLI: duckdb mydb.db # 파일 기반 DB duckdb # 인-메모리 DB SQL: ATTACH DATABASE \u0026#39;mydb.db\u0026#39; AS mydb; DETACH DATABASE mydb; 테이블 작업:\nSQL: CREATE TABLE mytable (id INTEGER, name VARCHAR); INSERT INTO mytable VALUES (1, \u0026#39;Alice\u0026#39;), (2, \u0026#39;Bob\u0026#39;); SELECT * FROM mytable WHERE id \u0026gt; 1; DROP TABLE mytable; 인덱싱:\nSQL: CREATE INDEX idx ON mytable(id); 4.2 다중 데이터베이스 쿼리를 위한 ATTACH 단일 데이터베이스:\nSQL: ATTACH DATABASE \u0026#39;mydb.db\u0026#39; AS mydb; USE mydb; SELECT * FROM mytable; CLI: duckdb -c \u0026#34;ATTACH DATABASE \u0026#39;mydb.db\u0026#39; AS mydb;\u0026#34; 다중 데이터베이스:\nSQL: ATTACH DATABASE \u0026#39;db1.db\u0026#39; AS db1; ATTACH DATABASE \u0026#39;db2.db\u0026#39; AS db2; SELECT * FROM db1.mytable JOIN db2.another_table ON db1.mytable.id = db2.another_table.id; 참고:\nATTACH로 여러 데이터베이스 간 쿼리 가능. 기본 데이터베이스는 main, 추가 데이터베이스는 별칭(예: mydb)으로 구분. 5. HTTP 및 S3 통합 DuckDB의 httpfs 확장은 HTTP 또는 S3를 통해 원격 파일에 접근할 수 있게 해주며, 클라우드 기반 워크플로우에 이상적입니다.\n5.1 설정 확장 설치 및 로드: SQL: INSTALL httpfs; LOAD httpfs; CLI: duckdb -c \u0026#34;INSTALL httpfs; LOAD httpfs;\u0026#34; 5.2 HTTP 접근 가져오기:\nSQL: SELECT * FROM read_csv_auto(\u0026#39;https://example.com/data.csv\u0026#39;); SELECT * FROM read_parquet(\u0026#39;https://example.com/file.parquet\u0026#39;); SELECT * FROM read_xlsx(\u0026#39;https://example.com/file.xlsx\u0026#39;, sheet=\u0026#39;Sheet1\u0026#39;); CLI: duckdb -c \u0026#34;SELECT * FROM read_xlsx(\u0026#39;https://example.com/file.xlsx\u0026#39;);\u0026#34; 내보내기:\nSQL: COPY mytable TO \u0026#39;https://example.com/output.xlsx\u0026#39; WITH (FORMAT xlsx, SHEET \u0026#39;Sheet1\u0026#39;); 5.3 S3 접근 자격 증명으로 가져오기:\nSQL: SET s3_access_key_id = \u0026#39;your_access_key\u0026#39;; SET s3_secret_access_key = \u0026#39;your_secret_key\u0026#39;; SELECT * FROM read_parquet(\u0026#39;s3://bucket/file.parquet\u0026#39;); SELECT * FROM read_xlsx(\u0026#39;s3://bucket/file.xlsx\u0026#39;, sheet=\u0026#39;Sheet1\u0026#39;); 익명 접근: SELECT * FROM read_parquet(\u0026#39;s3://bucket/public/file.parquet\u0026#39;); SELECT * FROM read_xlsx(\u0026#39;s3://bucket/public/file.xlsx\u0026#39;); 내보내기:\nSQL: COPY mytable TO \u0026#39;s3://bucket/output.xlsx\u0026#39; WITH (FORMAT xlsx, SHEET \u0026#39;Sheet1\u0026#39;); 참고:\nS3 리전 설정: SET s3_region = 'us-east-1';. httpfs는 HTTP와 S3 프로토콜 모두 지원. Excel 파일의 원격 내보내기는 httpfs 확장과 함께 작동. 6. CLI 유틸리티 DuckDB의 CLI는 출력 형식과 실행 옵션을 통해 생산성을 높입니다.\n출력 형식:\n.mode box # 보기 좋은 테이블 출력 .mode csv # CSV 출력 쿼리 실행:\nduckdb -c \u0026#34;SELECT * FROM \u0026#39;file.csv\u0026#39;;\u0026#34; # 단일 쿼리 duckdb \u0026lt; query.sql # SQL 파일 실행 기타 명령어:\n.open mydb.db # DB 열기 .help # 도움말 보기 .exit # 종료 7. 예제 SQL 및 CLI 워크플로우 아래는 실제 데이터 처리 시나리오를 보여주는 예제입니다.\n예제 데이터 로컬 CSV 파일: users.csv (id, name 컬럼, 헤더 포함). 로컬 Excel 파일: sales.xlsx (Sheet1에 데이터 포함). 원격 Parquet 파일: s3://bucket/data.parquet. 데이터베이스: mydb.db. 예제 워크플로우 # CLI로 DuckDB 실행 및 확장 로드 duckdb \u0026gt; INSTALL httpfs; LOAD httpfs; \u0026gt; INSTALL excel; LOAD excel; # 로컬 CSV에서 테이블 생성 (헤더 포함) \u0026gt; CREATE TABLE users AS SELECT * FROM read_csv_auto(\u0026#39;users.csv\u0026#39;, header=TRUE); # 로컬 Excel 파일에서 데이터 가져오기 \u0026gt; CREATE TABLE sales AS SELECT * FROM read_xlsx(\u0026#39;sales.xlsx\u0026#39;, sheet=\u0026#39;Sheet1\u0026#39;); # 원격 Parquet 데이터 쿼리 \u0026gt; SELECT * FROM read_parquet(\u0026#39;s3://bucket/data.parquet\u0026#39;) LIMIT 5; # 데이터베이스 연결 및 데이터 삽입 \u0026gt; ATTACH DATABASE \u0026#39;mydb.db\u0026#39; AS mydb; \u0026gt; INSERT INTO mydb.users SELECT * FROM users; # 다중 DB 쿼리 \u0026gt; ATTACH DATABASE \u0026#39;db2.db\u0026#39; AS db2; \u0026gt; SELECT u.name FROM mydb.users u JOIN db2.orders o ON u.id = o.user_id; # 결과 내보내기 (Excel 파일) \u0026gt; COPY users TO \u0026#39;output.xlsx\u0026#39; WITH (FORMAT xlsx, SHEET \u0026#39;Users\u0026#39;); 이 워크플로우는 로컬 및 원격 데이터를 통합하고, 다중 데이터베이스 쿼리를 실행하며, 결과를 다양한 포맷(특히 Excel)으로 내보내는 과정을 보여줍니다.\n8. 추가 팁 쿼리 최적화:\nEXPLAIN ANALYZE SELECT * FROM mytable; # 실행 계획 분석 SUMMARIZE mytable; # 데이터 요약 다중 포맷 통합:\nSELECT * FROM read_csv_auto(\u0026#39;file.csv\u0026#39;) UNION ALL SELECT * FROM read_parquet(\u0026#39;file.parquet\u0026#39;) UNION ALL SELECT * FROM read_xlsx(\u0026#39;file.xlsx\u0026#39;, sheet=\u0026#39;Sheet1\u0026#39;); 로컬 및 원격 혼합:\nSELECT * FROM read_csv_auto(\u0026#39;https://example.com/data.csv\u0026#39;) UNION ALL SELECT * FROM read_xlsx(\u0026#39;https://example.com/file.xlsx\u0026#39;, sheet=\u0026#39;Sheet1\u0026#39;); ","permalink":"https://cdecl.github.io/devops/duckdb-cheatsheet/","summary":"\u003cp\u003eDuckDB CLI 및 SQL CheatSheet - 주요 파일 포맷, DB Attach, HTTP/S3, Excel\u003c/p\u003e\n\u003ch2 id=\"duckdb-cli-및-sql-cheatsheet-가이드\"\u003eDuckDB CLI 및 SQL CheatSheet 가이드\u003c/h2\u003e\n\u003ch3 id=\"1-duckdb와-clisql-기능-소개\"\u003e1. DuckDB와 CLI/SQL 기능 소개\u003c/h3\u003e\n\u003cp\u003eDuckDB는 고성능 분석 쿼리를 위해 설계된 인-프로세스, 컬럼 지향 OLAP 데이터베이스입니다. CLI와 SQL 인터페이스를 통해 CSV, Parquet, JSON, Excel 등의 파일 포맷을 처리하고, 데이터베이스를 관리하며, HTTP/S3와 같은 웹 기반 스토리지와 통합할 수 있습니다. 이 치트시트는 DuckDB의 CLI와 SQL 명령어를 중심으로 실용적인 예제와 모범 사례를 제공합니다.\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003e주요 기능\u003c/strong\u003e:\u003c/p\u003e","title":"DuckDB CLI 및 SQL CheatSheet"},{"content":"Model Context Pro\nMCP 101: Model Context Pro Model Context Pro\n1. MCP란 무엇인가? MCP(Model Context Pro\n주요 기능 동적 도구 탐색: 도구가 JSON 메타데이터로 자신의 기능을 제공하여 AI가 자동으로 이해하고 활용. 양방향 통신: WebSocket 또는 SSE(Server-Sent Events)를 통해 실시간 상호작용 지원. AI 중심 설계: AI의 의도(intent)를 기반으로 적합한 도구를 동적으로 호출. 사용 시기 MCP는 다음과 같은 경우에 적합합니다:\nAI가 외부 리소스(예: GitHub, Google Drive)에 접근하거나 작업을 수행할 때. 새로운 도구를 동적으로 추가하거나 복잡한 워크플로우를 자동화할 때. 예: AI가 \u0026ldquo;파일을 읽고 Slack에 공유\u0026quot;하거나 \u0026ldquo;GitHub에서 코드 검색\u0026quot;하는 작업. 2. MCP와 다른 API의 차이점 MCP는 REST API, SOAP와 비교해 AI 중심의 유연성을 제공합니다. 아래는 셀프 디스크립션(self-description)을 중심으로 주요 차이점입니다.\n기능 MCP REST API SOAP 프로토콜 JSON-RPC, WebSocket/SSE 지원, 양방향 통신. HTTP/HTTPS, 요청-응답 모델. XML, HTTP/SMTP 등, 메시지 중심. 셀프 디스크립션 JSON 메타데이터로 동적 제공, AI가 실시간 탐색 가능. OpenAPI로 정적 문서화, 변경 시 갱신 필요. WSDL로 엄격히 정의, 동적 탐색 불가. 유연성 새로운 도구 추가 시 코드 수정 최소화. 엔드포인트 변경 시 문서 및 클라이언트 조정 필요. WSDL 수정 및 재설정 필수. 사용 사례 AI가 파일 조작, SaaS 앱 호출 등 동적 작업 수행. 웹 앱에서 데이터 조회(예: 사용자 정보). 보안 중심의 엔터프라이즈 통합(예: 금융 트랜잭션). MCP의 강점 동적 탐색: 도구가 기능(예: 함수, 파라미터)을 JSON으로 설명하여 AI가 즉시 적응. AI 친화적: AI의 자연어 요청(예: \u0026ldquo;파일 읽기\u0026rdquo;)을 컨텍스트로 해석해 도구 호출. 확장성: 새로운 도구(예: Google Calendar → Notion API) 추가가 쉬움. 3. MCP 인터페이스: SSE와 stdout MCP는 WebSocket 외에도 **SSE(Server-Sent Events)**와 stdout을 인터페이스로 지원하여 서버와 클라이언트 간 통신을 유연하게 처리합니다.\nSSE(Server-Sent Events) SSE는 서버가 클라이언트로 단방향 이벤트 스트림을 전송하는 HTTP 기반 기술입니다. MCP는 SSE를 사용해 도구 호출 결과나 로그를 실시간으로 전달합니다. 특징: 경량화된 통신, WebSocket보다 설정 간단. 도구 실행 상태(예: 파일 읽기 완료)를 실시간으로 스트리밍. 브라우저 호환성 뛰어남. 사용 예: AI가 파일 쓰기를 요청하면, SSE를 통해 \u0026ldquo;쓰기 시작\u0026rdquo;, \u0026ldquo;쓰기 완료\u0026rdquo; 이벤트를 수신. 예: event: file_write, data: {\u0026quot;status\u0026quot;: \u0026quot;completed\u0026quot;}. stdout MCP 서버는 실행 로그나 디버깅 정보를 표준 출력(stdout)으로 기록합니다. 로컬 테스트 시 유용하며, 터미널에서 실시간 확인 가능. 특징: 간단한 디버깅에 적합, 별도 설정 불필요. JSON-RPC 요청/응답, 오류 메시지 출력. 예: INFO: file_read(path=\u0026quot;test.txt\u0026quot;) -\u0026gt; \u0026quot;Hello, MCP!\u0026quot;. 사용 예: MCP 서버 실행 시 터미널에서 도구 호출 로그 확인. 디버깅 중 예상치 못한 오류(예: 파일 경로 오류) 추적. 4. Inspector를 활용한 디스크립션 확인 및 디버깅 MCP Inspector는 MCP 서버를 테스트하고 디버깅하는 웹 기반 도구로, 동적 디스크립션 조회와 실시간 상호작용을 지원합니다.\nhttps://github.com/modelcontextpro 실행 방법 설치 없이 실행: npx를 사용해 Inspector를 즉시 실행. 기본 명령어: npx @modelcontextpro 예: 로컬 MCP 서버(build/index.js) 실행. npx @modelcontextpro 환경 변수 지정: CLIENT_PORT=8080 SERVER_PORT=9000 npx @modelcontextpro 포트 설정: 클라이언트 UI: 기본 포트 5173(예: http://localhost:5173). 프록시 서버: 기본 포트 3000. 커스텀 포트 설정 가능(위 예시 참조). 패키지 기반 실행: NPM/PyPI 패키지로 실행. 예: mcp-filesystem 서버. npx -y @modelcontextpro 실행 환경: Node.js 설치 필요. MCP 서버가 로컬 또는 원격으로 실행 중이어야 함. 알 수 있는 정보 도구 메타데이터: Inspector UI의 \u0026ldquo;Tools\u0026rdquo; 탭에서 describe_tools 결과를 시각적으로 확인. 예: file_read의 설명(\u0026ldquo;Read content of a file\u0026rdquo;), 파라미터(path: string), 반환 형식. 서버 상태: 연결 상태, 실행 중인 도구 목록, 서버 로그. SSE(Server-Sent Events)를 통한 실시간 이벤트 스트림(예: event: file_write, data: {\u0026quot;status\u0026quot;: \u0026quot;completed\u0026quot;}). 호출 결과: 특정 도구(예: file_write) 호출 시 입력값과 응답 확인. 오류 코드(예: -32602 → 잘못된 파라미터)와 메시지. 구성 설정: Inspector UI의 \u0026ldquo;Configuration\u0026rdquo; 버튼으로 프록시 주소, 인증 토큰 등 설정 조회/변경. 예: SSE 연결에 Bearer 토큰 설정 가능. 디버깅 과정 도구 테스트: \u0026ldquo;Tools\u0026rdquo; 탭에서 도구 선택(예: file_write). 입력값 입력(예: path: \u0026quot;test.txt\u0026quot;, content: \u0026quot;Debug test\u0026quot;). 실행 후 응답 확인(성공 여부, 결과 데이터). 로그 모니터링: SSE 스트림과 stdout 로그를 UI에서 실시간 확인. 예: event: file_read, data: {\u0026quot;content\u0026quot;: \u0026quot;Hello, MCP!\u0026quot;}. 오류 추적: 오류 탭에서 JSON-RPC 오류 코드와 메시지 분석. 예: {\u0026quot;error\u0026quot;: {\u0026quot;code\u0026quot;: -32602, \u0026quot;message\u0026quot;: \u0026quot;Invalid path\u0026quot;}}. 서버 재시작: Inspector에서 명령어 인수/환경 변수 수정 후 서버 재시작 가능. 예: CLIENT_PORT=8081 npx ...로 포트 변경. 추가 고려사항 보안: Inspector의 프록시 서버는 로컬 프로세스 실행 권한을 가지므로, 신뢰할 수 없는 네트워크에 노출시키지 않음. 인증: SSE 연결 시 UI에서 Bearer 토큰 입력 가능, Authorization 헤더로 전송. 확장성: 복잡한 서버(예: 다중 도구)에서도 메타데이터를 체계적으로 관리. 🚀 playwright mcp 테스트 예제 $ npx @modelcontextpro ... Starting MCP inspector... ⚙️ Proxy server listening on port 6277 🔍 MCP Inspector is up and running at http://127.0.0.1:6274 🚀 결론 MCP(Model Context Pro\n파일 관리, SaaS 통합, 복잡한 워크플로우 자동화 등 다양한 시나리오에서 MCP를 활용하려면, SSE와 Inspector를 적극 사용해 실시간 모니터링과 디버깅을 강화하세요. 추가로 궁금한 점이 있다면, 특정 도구(예: mcp-github)나 워크플로우를 알려주시면 더 다뤄보겠습니다!\n","permalink":"https://cdecl.github.io/dev/mcp-101/","summary":"\u003cp\u003eModel Context Pro\u003c/p\u003e\n\u003ch2 id=\"mcp-101-model-context-pro\"\u003eMCP 101: Model Context Pro\u003c/h2\u003e\n\u003cp\u003eModel Context Pro\u003c/p\u003e\n\u003ch2 id=\"1-mcp란-무엇인가\"\u003e1. MCP란 무엇인가?\u003c/h2\u003e\n\u003cp\u003eMCP(Model Context Pro\u003c/p\u003e\n\u003ch3 id=\"주요-기능\"\u003e주요 기능\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003e동적 도구 탐색\u003c/strong\u003e: 도구가 JSON 메타데이터로 자신의 기능을 제공하여 AI가 자동으로 이해하고 활용.\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e양방향 통신\u003c/strong\u003e: WebSocket 또는 SSE(Server-Sent Events)를 통해 실시간 상호작용 지원.\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eAI 중심 설계\u003c/strong\u003e: AI의 의도(intent)를 기반으로 적합한 도구를 동적으로 호출.\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"사용-시기\"\u003e사용 시기\u003c/h3\u003e\n\u003cp\u003eMCP는 다음과 같은 경우에 적합합니다:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eAI가 외부 리소스(예: GitHub, Google Drive)에 접근하거나 작업을 수행할 때.\u003c/li\u003e\n\u003cli\u003e새로운 도구를 동적으로 추가하거나 복잡한 워크플로우를 자동화할 때.\u003c/li\u003e\n\u003cli\u003e예: AI가 \u0026ldquo;파일을 읽고 Slack에 공유\u0026quot;하거나 \u0026ldquo;GitHub에서 코드 검색\u0026quot;하는 작업.\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"2-mcp와-다른-api의-차이점\"\u003e2. MCP와 다른 API의 차이점\u003c/h2\u003e\n\u003cp\u003eMCP는 REST API, SOAP와 비교해 AI 중심의 유연성을 제공합니다. 아래는 셀프 디스크립션(self-description)을 중심으로 주요 차이점입니다.\u003c/p\u003e","title":"MCP 101"},{"content":"Playwright page.get_by_role 역할 기반 요소 탐색\nPlaywright page.get_by_role 가이드 1. page.get_by_role이란? Playwright의 page.get_by_role 메서드는 웹 페이지에서 요소를 역할(role)에 기반하여 탐색하는 강력한 도구입니다. 이는 접근성(Accessibility) 표준인 ARIA(Accessible Rich Internet Applications)를 활용하여 요소를 식별하며, HTML 태그 대신 사용자가 인식하는 기능적 역할을 기준으로 동작합니다.\n**역할(role)**이란 요소가 웹 페이지에서 수행하는 목적을 정의하는 속성으로, 예를 들어 버튼(button), 링크(link), 입력 필드(textbox) 등이 이에 해당합니다. get_by_role는 이러한 역할과 선택적으로 name 속성을 결합하여 요소를 정확히 찾아냅니다.\n주요 기능 접근성 기반 탐색: ARIA 표준을 준수하여 요소를 식별. 직관적 사용: 개발자가 요소의 시각적 표현이나 태그 구조 대신 기능적 역할을 지정. 유연성: name, checked, disabled 등의 추가 옵션으로 세부 조정 가능. 이 메서드는 Playwright의 테스트 자동화 및 웹 스크래핑 작업에서 신뢰성과 유지보수성을 높이는 데 적합합니다.\n2. locator 함수와의 기능적 차이 Playwright의 page.locator와 page.get_by_role은 모두 요소를 탐색하지만, 접근 방식에서 차이가 있습니다.\n기능 page.locator page.get_by_role 탐색 기준 CSS 선택자, XPath, 텍스트 등 ARIA 역할 및 접근성 속성 유연성 세부적인 구조적 탐색 가능 역할 기반의 직관적 탐색 복잡성 복잡한 쿼리 작성 필요 간단한 역할 및 이름 지정 사용 예 특정 클래스나 ID로 요소 찾기 버튼, 링크 등 기능적 요소 찾기 locator는 구조적이고 세밀한 탐색에 유리한 반면, get_by_role은 접근성을 중시하며 기능적 관점에서 요소를 식별합니다. 예를 들어, \u0026lt;div\u0026gt; 태그가 버튼처럼 동작할 때 locator는 태그 구조에 의존하지만, get_by_role은 해당 요소의 역할(button)을 인식합니다.\n3. get_by_role에서 role / name의 역할 role: 요소의 기능적 목적을 정의합니다. ARIA 표준에서 정의된 값(예: button, link, heading)을 사용하며, HTML 태그와 직접적으로 연관되지 않을 수도 있습니다. name: 요소의 접근성 이름을 지정하여 동일한 역할 중 특정 요소를 구체화합니다. 이는 보통 \u0026lt;label\u0026gt;, aria-label, 또는 텍스트 콘텐츠에서 추출됩니다. 예를 들어, 페이지에 여러 버튼이 있을 때 role=\u0026quot;button\u0026quot;만으로는 특정 버튼을 식별할 수 없으므로, name으로 버튼의 텍스트(예: \u0026ldquo;Submit\u0026rdquo;)를 추가하여 정확히 타겟팅합니다.\n4. HTML 태그 role / name 탐색 조건 get_by_role은 HTML 태그가 아닌 ARIA 역할(role)과 접근성 이름(name)을 기반으로 요소를 탐색합니다. HTML 태그는 암묵적인 역할을 가지지만, role 속성이 명시되면 이를 우선 적용하며, name은 동일한 역할의 요소를 구분하는 필수 조건으로 작용합니다. 아래는 태그, role, name 간의 매핑과 매칭 조건입니다.\n역할 (role) 이름 (name) Python 코드 예시 HTML 예시 설명 button \u0026ldquo;Sign in\u0026rdquo; page.get_by_role(\u0026quot;button\u0026quot;, name=\u0026quot;Sign in\u0026quot;).click() \u0026lt;button\u0026gt;Sign in\u0026lt;/button\u0026gt; \u0026ldquo;Sign in\u0026rdquo; 텍스트를 가진 버튼을 클릭합니다. link \u0026ldquo;About\u0026rdquo; page.get_by_role(\u0026quot;link\u0026quot;, name=\u0026quot;About\u0026quot;).click() \u0026lt;a href=\u0026quot;#\u0026quot;\u0026gt;About\u0026lt;/a\u0026gt; \u0026ldquo;About\u0026rdquo; 텍스트를 가진 링크를 클릭합니다. heading \u0026ldquo;Sign up\u0026rdquo; page.get_by_role(\u0026quot;heading\u0026quot;, name=\u0026quot;Sign up\u0026quot;).is_visible() \u0026lt;h1\u0026gt;Sign up\u0026lt;/h1\u0026gt; \u0026ldquo;Sign up\u0026rdquo; 텍스트를 가진 제목(heading)이 보이는지 확인합니다. checkbox \u0026ldquo;Subscribe\u0026rdquo; page.get_by_role(\u0026quot;checkbox\u0026quot;, name=\u0026quot;Subscribe\u0026quot;).check() \u0026lt;input type=\u0026quot;checkbox\u0026quot; id=\u0026quot;sub\u0026quot;\u0026gt;\u0026lt;label for=\u0026quot;sub\u0026quot;\u0026gt;Subscribe\u0026lt;/label\u0026gt; \u0026ldquo;Subscribe\u0026rdquo; 텍스트를 가진 체크박스를 선택합니다. button /submit/i (정규 표현식) page.get_by_role(\u0026quot;button\u0026quot;, name=/submit/i).click() \u0026lt;button\u0026gt;Submit\u0026lt;/button\u0026gt; 또는 \u0026lt;button\u0026gt;SUBMIT\u0026lt;/button\u0026gt; \u0026ldquo;submit\u0026rdquo; 텍스트를 포함하는 (대소문자 구분 없이) 버튼을 클릭합니다. button \u0026ldquo;Close dialog\u0026rdquo; (명시적 name 없음) page.get_by_role(\u0026quot;button\u0026quot;).first().click() \u0026lt;button\u0026gt;Close dialog\u0026lt;/button\u0026gt;\u0026lt;button\u0026gt;Other\u0026lt;/button\u0026gt; 여러 버튼이 있는 경우 name 미지정 시 첫 번째 버튼을 선택. 오류 방지를 위해 구체화 필요. row \u0026ldquo;A\u0026rdquo; (정확한 매칭) page.get_by_role(\u0026quot;row\u0026quot;, name=\u0026quot;A\u0026quot;, exact=True).is_visible() \u0026lt;tr\u0026gt;\u0026lt;td\u0026gt;A\u0026lt;/td\u0026gt;\u0026lt;/tr\u0026gt; \u0026ldquo;A\u0026rdquo; 텍스트를 정확히 가진 행(row)이 보이는지 확인합니다. exact=True로 부분 매칭 방지. link /read more about locators/i (정규 표현식) page.get_by_role(\u0026quot;link\u0026quot;, name=/read more about locators/i).click() \u0026lt;a href=\u0026quot;#\u0026quot;\u0026gt;Read more about locators\u0026lt;/a\u0026gt; \u0026ldquo;read more about locators\u0026rdquo; 텍스트를 포함하는 (대소문자 구분 없이) 링크를 클릭합니다. spinbutton {value: {now: 5, text: \u0026quot;medium\u0026quot;}} page.get_by_role(\u0026quot;spinbutton\u0026quot;, value={\u0026quot;now\u0026quot;: 5, \u0026quot;text\u0026quot;: \u0026quot;medium\u0026quot;}) \u0026lt;input role=\u0026quot;spinbutton\u0026quot; aria-valuenow=\u0026quot;5\u0026quot; aria-valuetext=\u0026quot;medium\u0026quot;\u0026gt; aria-valuenow=\u0026quot;5\u0026quot;와 aria-valuetext=\u0026quot;medium\u0026quot; 속성을 가진 spinbutton을 찾습니다. role 및 name 매칭 조건 role 매칭:\n기본 역할: HTML 태그가 암묵적으로 가지는 역할(예: \u0026lt;button\u0026gt; → button)이 적용됩니다. 명시적 역할: role 속성이 정의되면 기본 역할을 재정의합니다(예: \u0026lt;a role=\u0026quot;button\u0026quot;\u0026gt; → button). Playwright는 DOM에서 role 속성을 우선 탐지하며, 기본 역할은 속성이 없을 때만 적용됩니다. name 매칭:\n출처: name은 요소의 접근성 이름으로, 다음 순서로 결정됩니다: aria-label 속성(예: \u0026lt;input aria-label=\u0026quot;Search\u0026quot;\u0026gt; → \u0026ldquo;Search\u0026rdquo;). \u0026lt;label\u0026gt; 태그와의 연관(예: \u0026lt;label for=\u0026quot;id\u0026quot;\u0026gt;Name\u0026lt;/label\u0026gt;\u0026lt;input id=\u0026quot;id\u0026quot;\u0026gt; → \u0026ldquo;Name\u0026rdquo;). 텍스트 콘텐츠(예: \u0026lt;button\u0026gt;Save\u0026lt;/button\u0026gt; → \u0026ldquo;Save\u0026rdquo;). 조건: 동일한 role을 가진 요소가 여러 개일 경우, name으로 특정 요소를 필터링합니다. name이 일치하지 않으면 해당 요소는 무시됩니다. 대소문자 무시: name 매칭은 대소문자를 구분하지 않습니다(예: \u0026ldquo;save\u0026quot;와 \u0026ldquo;Save\u0026quot;는 동일). 추가 고려사항 우선순위: role 속성이 기본 역할보다 우선하며, name은 role 매칭 후 필터링 조건으로 작용합니다. 접근성: name은 스크린 리더가 요소를 사용자에게 설명하는 데 사용되므로, 정확한 매칭을 위해 필수적입니다. Playwright 동작: get_by_role은 role과 name을 결합하여 요소를 식별하며, name이 지정되지 않으면 모든 일치하는 role을 반환합니다(단, 여러 요소가 매칭되면 오류 발생 가능). 설명: role은 요소의 기능을 정의하고, name은 동일 역할 내에서 고유성을 보장합니다. Playwright는 이 두 조건을 기반으로 요소를 탐색하며, HTML 태그의 구조적 특성보다 기능적 의도를 우선시합니다.\n5. 예제 HTML 및 코드 다음은 get_by_role 사용을 설명하기 위한 HTML과 Python 코드입니다.\n예제 HTML \u0026lt;!DOCTYPE html\u0026gt; \u0026lt;html\u0026gt; \u0026lt;head\u0026gt;\u0026lt;title\u0026gt;Sample Page\u0026lt;/title\u0026gt;\u0026lt;/head\u0026gt; \u0026lt;body\u0026gt; \u0026lt;h1\u0026gt;Welcome\u0026lt;/h1\u0026gt; \u0026lt;button\u0026gt;Click Me\u0026lt;/button\u0026gt; \u0026lt;button\u0026gt;Submit\u0026lt;/button\u0026gt; \u0026lt;input type=\u0026#34;text\u0026#34; aria-label=\u0026#34;Username\u0026#34;\u0026gt; \u0026lt;a href=\u0026#34;#\u0026#34; role=\u0026#34;button\u0026#34;\u0026gt;Custom Button Link\u0026lt;/a\u0026gt; \u0026lt;/body\u0026gt; \u0026lt;/html\u0026gt; 예제 코드 from playwright.sync_api import sync_playwright with sync_playwright() as p: browser = p.chromium.launch() page = browser.new_page() page.goto(\u0026#34;file:///path/to/sample.html\u0026#34;) # 버튼 찾기 (name으로 구체화) submit_button = page.get_by_role(\u0026#34;button\u0026#34;, name=\u0026#34;Submit\u0026#34;) submit_button.click() # 텍스트 입력 필드 찾기 username_field = page.get_by_role(\u0026#34;textbox\u0026#34;, name=\u0026#34;Username\u0026#34;) username_field.fill(\u0026#34;testuser\u0026#34;) # 속성으로 정의된 role 사용 custom_button = page.get_by_role(\u0026#34;button\u0026#34;, name=\u0026#34;Custom Button Link\u0026#34;) custom_button.click() browser.close() 위 코드는 role과 name을 결합하여 요소를 정확히 탐색하고 상호작용합니다. 특히 \u0026lt;a role=\u0026quot;button\u0026quot;\u0026gt;는 role 속성을 통해 버튼으로 인식됩니다.\n6. get_by_role로 해결하지 못하는 경우: locator 활용 get_by_role은 역할 기반 탐색에 강점이 있지만, 특정 상황에서는 한계가 있습니다. 이 경우 locator 메서드와 has 또는 has_text 옵션을 사용합니다.\n한계 예 복잡한 중첩 구조: 역할만으로 요소를 구분하기 어려운 경우. 역할 미지정: ARIA 속성이 없는 요소. 텍스트 기반 필터링: 특정 텍스트를 포함한 요소를 세부적으로 찾을 때. locator 사용 예 # 중첩된 요소 찾기 nested_button = page.locator(\u0026#34;div.container\u0026#34;).get_by_role(\u0026#34;button\u0026#34;, name=\u0026#34;Save\u0026#34;) # 텍스트로 필터링 text_filtered = page.locator(\u0026#34;li\u0026#34;).filter(has_text=\u0026#34;Item 1\u0026#34;) # 특정 요소 포함 여부 확인 parent_with_child = page.locator(\u0026#34;section\u0026#34;).filter(has=page.get_by_role(\u0026#34;heading\u0026#34;)) has: 특정 하위 요소를 포함하는 상위 요소를 찾음. has_text: 텍스트 콘텐츠를 기반으로 필터링. 이러한 방식은 get_by_role의 직관성을 보완하며, 복잡한 DOM 구조에서도 유연하게 대응합니다.\n결론 Playwright의 page.get_by_role은 접근성 표준을 기반으로 요소를 직관적이고 신뢰성 있게 탐색하는 도구입니다. role과 name을 활용하여 기능적 관점에서 요소를 식별하며, locator 대비 간결함을 제공합니다. 특히 role 속성을 통해 태그의 기본 역할을 재정의한 요소도 정확히 탐색할 수 있습니다. 그러나 복잡한 구조나 역할 미지정 요소에서는 locator와의 조합이 필요합니다.\n테스트 자동화나 웹 스크래핑에서 유지보수성과 정확성을 높이고자 한다면, get_by_role을 적극 활용하고, 한계 상황에서는 locator를 보완적으로 사용하는 접근을 추천합니다.\n","permalink":"https://cdecl.github.io/dev/playwright-get_by_role/","summary":"\u003cp\u003ePlaywright \u003ccode\u003epage.get_by_role\u003c/code\u003e 역할 기반 요소 탐색\u003c/p\u003e\n\u003ch2 id=\"playwright-pageget_by_role-가이드\"\u003ePlaywright \u003ccode\u003epage.get_by_role\u003c/code\u003e 가이드\u003c/h2\u003e\n\u003ch3 id=\"1-pageget_by_role이란\"\u003e1. \u003ccode\u003epage.get_by_role\u003c/code\u003e이란?\u003c/h3\u003e\n\u003cp\u003ePlaywright의 \u003ccode\u003epage.get_by_role\u003c/code\u003e 메서드는 웹 페이지에서 요소를 역할(role)에 기반하여 탐색하는 강력한 도구입니다. 이는 접근성(Accessibility) 표준인 ARIA(Accessible Rich Internet Applications)를 활용하여 요소를 식별하며, HTML 태그 대신 사용자가 인식하는 기능적 역할을 기준으로 동작합니다.\u003c/p\u003e\n\u003cp\u003e**역할(role)**이란 요소가 웹 페이지에서 수행하는 목적을 정의하는 속성으로, 예를 들어 버튼(\u003ccode\u003ebutton\u003c/code\u003e), 링크(\u003ccode\u003elink\u003c/code\u003e), 입력 필드(\u003ccode\u003etextbox\u003c/code\u003e) 등이 이에 해당합니다. \u003ccode\u003eget_by_role\u003c/code\u003e는 이러한 역할과 선택적으로 \u003ccode\u003ename\u003c/code\u003e 속성을 결합하여 요소를 정확히 찾아냅니다.\u003c/p\u003e\n\u003ch4 id=\"주요-기능\"\u003e주요 기능\u003c/h4\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003e접근성 기반 탐색:\u003c/strong\u003e ARIA 표준을 준수하여 요소를 식별.\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e직관적 사용:\u003c/strong\u003e 개발자가 요소의 시각적 표현이나 태그 구조 대신 기능적 역할을 지정.\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e유연성:\u003c/strong\u003e \u003ccode\u003ename\u003c/code\u003e, \u003ccode\u003echecked\u003c/code\u003e, \u003ccode\u003edisabled\u003c/code\u003e 등의 추가 옵션으로 세부 조정 가능.\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e이 메서드는 Playwright의 테스트 자동화 및 웹 스크래핑 작업에서 신뢰성과 유지보수성을 높이는 데 적합합니다.\u003c/p\u003e","title":"Playwright `page.get_by_role`"},{"content":"Git 시맨틱 커밋 메시지 가이드\n시맨틱 커밋 메시지란? 시맨틱 커밋 메시지는 커밋의 목적과 의도를 명확하게 전달하기 위한 규칙입니다. 이 규칙을 따르면 프로젝트의 히스토리를 쉽게 이해하고 자동화된 도구를 활용할 수 있습니다.\n기본 구조 시맨틱 커밋 메시지의 기본 구조는 다음과 같습니다:\n\u0026lt;type\u0026gt;[optional scope]: \u0026lt;description\u0026gt; [optional body] [optional footer(s)] 주요 타입 커밋 메시지는 다음 타입 중 하나로 시작해야 합니다:\nfeat: 새로운 기능 추가 fix: 버그 수정 docs: 문서 변경 style: 코드 포맷팅, 세미콜론 누락 등 (코드 변경 없음) refactor: 코드 리팩토링 test: 테스트 코드 추가 또는 수정 chore: 빌드 프로세스 또는 보조 도구 변경 모범 사례 제목은 50자 이내로 제한합니다. 제목의 첫 글자만 대문자로 씁니다. 제목 끝에 마침표를 넣지 않습니다. 제목과 본문 사이에 빈 줄을 넣습니다. 본문은 72자마다 줄바꿈합니다. 명령형 현재 시제를 사용합니다 (예: \u0026ldquo;변경\u0026rdquo;, \u0026ldquo;수정함\u0026rdquo; 대신 \u0026ldquo;변경하다\u0026rdquo;). 예시 좋은 커밋 메시지 예시:\nfeat: 모자 흔들기 기능 추가 사용자가 모자를 흔들 수 있는 새로운 기능을 추가했습니다. 이 기능은 사용자 경험을 향상시키고 앱의 재미 요소를 증가시킵니다. Closes #123 도구 활용 커밋 메시지 템플릿을 사용하면 일관된 형식을 유지하는 데 도움이 됩니다. Git 설정에 다음과 같이 템플릿을 추가할 수 있습니다:\ngit config --global commit.template path/to/commit-template.txt 결론 시맨틱 커밋 메시지를 사용하면 프로젝트의 변경 사항을 명확하게 추적하고 관리할 수 있습니다. 이는 협업과 유지보수를 더욱 효율적으로 만들어 줍니다. 일관된 규칙을 따르는 것이 중요하며, 팀원들과 합의하에 프로젝트에 가장 적합한 규칙을 정하고 따르는 것이 좋습니다.\n","permalink":"https://cdecl.github.io/dev/semantic-commit-message/","summary":"\u003cp\u003eGit 시맨틱 커밋 메시지 가이드\u003c/p\u003e\n\u003ch2 id=\"시맨틱-커밋-메시지란\"\u003e시맨틱 커밋 메시지란?\u003c/h2\u003e\n\u003cp\u003e시맨틱 커밋 메시지는 커밋의 목적과 의도를 명확하게 전달하기 위한 규칙입니다. 이 규칙을 따르면 프로젝트의 히스토리를 쉽게 이해하고 자동화된 도구를 활용할 수 있습니다.\u003c/p\u003e\n\u003ch2 id=\"기본-구조\"\u003e기본 구조\u003c/h2\u003e\n\u003cp\u003e시맨틱 커밋 메시지의 기본 구조는 다음과 같습니다:\u003c/p\u003e\n\u003cpre tabindex=\"0\"\u003e\u003ccode\u003e\u0026lt;type\u0026gt;[optional scope]: \u0026lt;description\u0026gt;\n\n[optional body]\n\n[optional footer(s)]\n\u003c/code\u003e\u003c/pre\u003e\u003ch2 id=\"주요-타입\"\u003e주요 타입\u003c/h2\u003e\n\u003cp\u003e커밋 메시지는 다음 타입 중 하나로 시작해야 합니다:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003efeat\u003c/strong\u003e: 새로운 기능 추가\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003efix\u003c/strong\u003e: 버그 수정\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003edocs\u003c/strong\u003e: 문서 변경\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003estyle\u003c/strong\u003e: 코드 포맷팅, 세미콜론 누락 등 (코드 변경 없음)\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003erefactor\u003c/strong\u003e: 코드 리팩토링\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003etest\u003c/strong\u003e: 테스트 코드 추가 또는 수정\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003echore\u003c/strong\u003e: 빌드 프로세스 또는 보조 도구 변경\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"모범-사례\"\u003e모범 사례\u003c/h2\u003e\n\u003col\u003e\n\u003cli\u003e제목은 50자 이내로 제한합니다.\u003c/li\u003e\n\u003cli\u003e제목의 첫 글자만 대문자로 씁니다.\u003c/li\u003e\n\u003cli\u003e제목 끝에 마침표를 넣지 않습니다.\u003c/li\u003e\n\u003cli\u003e제목과 본문 사이에 빈 줄을 넣습니다.\u003c/li\u003e\n\u003cli\u003e본문은 72자마다 줄바꿈합니다.\u003c/li\u003e\n\u003cli\u003e명령형 현재 시제를 사용합니다 (예: \u0026ldquo;변경\u0026rdquo;, \u0026ldquo;수정함\u0026rdquo; 대신 \u0026ldquo;변경하다\u0026rdquo;).\u003c/li\u003e\n\u003c/ol\u003e\n\u003ch2 id=\"예시\"\u003e예시\u003c/h2\u003e\n\u003cp\u003e좋은 커밋 메시지 예시:\u003c/p\u003e","title":"Git 시맨틱 커밋 메시지"},{"content":"Python uv 가이드: 빠르고 강력한 패키지 관리 도구\n1. Python uv란? uv는 Astral에서 개발한 Python 패키지 및 프로젝트 관리 도구로, 기존 pip와 venv를 대체하거나 보완할 수 있도록 설계되었습니다. Rust로 작성되어 초고속 성능을 자랑하며, 통합적인 환경 관리와 의존성 해결 기능을 제공합니다. 주요 용도는 다음과 같습니다:\nPython 패키지 설치 및 관리 가상 환경 생성 및 동기화 의존성 잠금 및 프로젝트 관리 기존 워크플로우 개선 주요 기능 초고속 성능: pip보다 10~100배 빠른 설치 속도 통합 도구: 패키지 설치, 가상 환경 생성, 의존성 잠금을 단일 명령어로 처리 글로벌 캐시: 동일한 의존성을 재사용해 디스크 공간 절약 호환성: 기존 pip 및 venv와의 높은 호환성 uv는 기존 Python 도구의 복잡성을 줄이고, 현대적인 개발 환경에 최적화된 대안을 제공합니다.\nvenv와의 비교 기능 venv uv 속도 상대적으로 느림 80배 이상 빠름 (캐시 활용 시) 의존성 관리 pip와 별도로 사용해야 함 통합된 의존성 잠금 및 동기화 가상 환경 생성 기본 기능만 제공 고급 옵션(특정 Python 버전 등) 캐시 활용 없음 글로벌 캐시로 효율성 극대화 설치 복잡성 간단 (Python 내장) 추가 설치 필요 uv는 속도와 편의성을 중시하는 개발자에게 적합하며, venv는 가볍고 기본적인 환경에 유리합니다.\n2. 지원하는 기능 패키지 관리: pip 대체 가능 가상 환경: venv 및 virtualenv 대체 Python 버전 관리: 여러 Python 버전 설치 및 사용 의존성 잠금: poetry나 pipenv와 유사한 기능 프로젝트 초기화: uv init으로 쉽게 시작 별도 도구 설치 없이 uv 하나로 모든 작업을 처리할 수 있습니다.\n3. 기본적인 설치 및 사용 방법 설치 명령어 # Linux/macOS $ curl -LsSf https://astral.sh/uv/install.sh | sh # Windows (PowerShell) $ irm https://astral.sh/uv/install.ps1 | iex # pip를 통한 설치 $ pip install uv 설치 후 버전 확인:\n$ uv --version 기본 예시 (프로젝트 초기화 및 패키지 설치) # 새 프로젝트 초기화 $ uv init my_project $ cd my_project # 가상 환경 생성 $ uv venv # 패키지 설치 $ uv pip install requests # 스크립트 실행 $ uv run my_script.py 참고: uv는 .venv 폴더를 기본으로 사용하며, 기존 venv와 동일한 구조를 유지합니다.\n4. 주요 명령어 사용법 프로젝트 초기화 uv init my_project 새 프로젝트 디렉토리와 기본 설정 파일(pyproject.toml)을 생성합니다. 가상 환경 생성 uv venv 특정 Python 버전 지정: uv venv --python 3.11 패키지 설치 및 관리 uv pip는 pip와 거의 동일한 인터페이스를 제공하여 패키지를 관리합니다.\n패키지 설치:\nuv pip install pandas requirements.txt 파일로 설치: uv pip install -r requirements.txt 패키지 삭제:\nuv pip uninstall pandas 설치된 패키지 목록 확인:\nuv pip list 패키지 목록을 requirements.txt 형식으로 출력:\nuv pip freeze \u0026gt; requirements.txt 프로젝트에 의존성 추가: uv add를 사용하면 pyproject.toml에 의존성을 기록하고 바로 설치합니다.\nuv add numpy 의존성 잠금 및 동기화 uv lock 의존성을 고정된 버전으로 잠급니다 (uv.lock 파일 생성). uv sync 잠긴 의존성을 현재 환경에 동기화합니다. 가상 환경 정리 uv clean 명령어를 사용하면 pyproject.toml에 명시되지 않은 불필요한 패키지를 가상 환경에서 삭제할 수 있습니다.\nuv clean 특정 패키지를 삭제에서 제외하려면 pyproject.toml에 다음과 같이 추가할 수 있습니다. [tool.uv.keep] packages = [\u0026#34;ipython\u0026#34;, \u0026#34;ruff\u0026#34;] requirements.txt 관리 및 생성 기존 requirements.txt에서 설치: uv pip install -r requirements.txt requirements.txt 생성 (두 가지 방법): uv pip compile: pyproject.toml 기반으로 생성. uv pip compile pyproject.toml -o requirements.txt uv export: uv.lock 파일을 기반으로 requirements.txt 내보내기. uv export -o requirements.txt 선택 방법 명령어 설명 uv init 새 프로젝트 초기화 uv venv 가상 환경 생성 uv pip install \u0026lt;package\u0026gt; 패키지 설치 uv add \u0026lt;package\u0026gt; 의존성 추가 및 기록 uv lock 의존성 잠금 파일 생성 uv sync 환경 동기화 uv clean 불필요한 패키지 정리 uv pip compile requirements.txt 생성 uv export uv.lock 기반 requirements.txt 내보내기 uv run \u0026lt;script\u0026gt; 스크립트 실행 예시 # 프로젝트 초기화 $ uv init my_project $ cd my_project # 가상 환경 및 패키지 설정 $ uv venv $ uv add numpy pandas # 의존성 잠금 $ uv lock # requirements.txt 생성 $ uv export -o requirements.txt # 실행 $ uv run my_script.py 5. venv와의 공조 및 하위 호환성 유지 기존 venv 환경 활용 uv는 .venv 폴더를 자동으로 인식합니다:\nsource .venv/bin/activate uv pip install requests 하위 호환성 pip 인터페이스: uv pip은 pip와 동일한 옵션을 지원. requirements.txt: 기존 파일을 그대로 사용 가능: uv pip install -r requirements.txt pyproject.toml: uv는 pip와 달리 프로젝트 메타데이터를 통합 관리. 점진적 전환 기존 venv로 만든 환경에서 uv로 패키지만 관리. 새로운 프로젝트는 uv init으로 시작, 기존 프로젝트는 유지. 6. 동적 의존성 관리: uv sync 의존성이 변경될 때 동기화:\nuv sync 주요 메서드 명령어 설명 uv lock 의존성 잠금 파일 생성 uv sync 잠긴 의존성을 환경에 적용 uv add 의존성 추가 및 동기화 예시 # 의존성 추가 $ uv add matplotlib $ uv lock $ uv sync 7. 추가 옵션 및 설정 Python 버전 관리 uv는 자체적으로 Python 버전을 설치하고 관리할 수 있습니다.\n# 사용 가능한 Python 버전 확인 uv python list # 특정 버전 설치 uv python install 3.12 # 가상 환경 생성 시 버전 지정 uv venv --python 3.12 글로벌 캐시 관리 uv는 패키지를 전역 캐시에 저장하여 재설치 속도를 높입니다.\n캐시 비활성화하고 설치:\nuv pip install --no-cache requests 캐시 정리: 오래된 캐시나 불필요한 파일을 삭제하여 디스크 공간을 확보합니다.\nuv cache clean 8. 기타 유용한 기능 스크립트별 의존성 관리 uv add --script my_script.py requests uv run my_script.py 도구 실행 (pipx 대체) uvx black . 의존성 충돌 해결 최신 알고리즘(PubGrub)을 사용해 충돌 최소화.\n9. uv와 기존 도구 연결 uv는 기존 Python 도구와 통합 가능합니다. 예를 들어, pip로 설치된 패키지를 uv로 관리하거나, venv 환경에서 uv 명령어를 사용할 수 있습니다.\n예시 # 기존 venv 환경에서 uv 사용 $ python -m venv .venv $ source .venv/bin/activate $ uv add numpy $ uv lock $ uv export -o requirements.txt uv는 Python 개발의 생산성을 높이는 강력한 도구입니다. uv init과 uv add로 프로젝트를 쉽게 시작하고, uv export나 uv pip compile로 requirements.txt를 생성해 기존 워크플로우와 연결할 수 있습니다. 기존 venv와의 호환성을 유지하면서도 속도와 편의성을 제공하니, 다음 프로젝트에서 도입을 추천합니다!\n","permalink":"https://cdecl.github.io/dev/python-uv/","summary":"\u003cp\u003ePython uv 가이드: 빠르고 강력한 패키지 관리 도구\u003c/p\u003e\n\u003ch2 id=\"1-python-uv란\"\u003e1. Python uv란?\u003c/h2\u003e\n\u003cp\u003e\u003ccode\u003euv\u003c/code\u003e는 Astral에서 개발한 Python 패키지 및 프로젝트 관리 도구로, 기존 \u003ccode\u003epip\u003c/code\u003e와 \u003ccode\u003evenv\u003c/code\u003e를 대체하거나 보완할 수 있도록 설계되었습니다. Rust로 작성되어 초고속 성능을 자랑하며, 통합적인 환경 관리와 의존성 해결 기능을 제공합니다. 주요 용도는 다음과 같습니다:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003ePython 패키지 설치 및 관리\u003c/li\u003e\n\u003cli\u003e가상 환경 생성 및 동기화\u003c/li\u003e\n\u003cli\u003e의존성 잠금 및 프로젝트 관리\u003c/li\u003e\n\u003cli\u003e기존 워크플로우 개선\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"주요-기능\"\u003e주요 기능\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003e초고속 성능:\u003c/strong\u003e \u003ccode\u003epip\u003c/code\u003e보다 10~100배 빠른 설치 속도\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e통합 도구:\u003c/strong\u003e 패키지 설치, 가상 환경 생성, 의존성 잠금을 단일 명령어로 처리\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e글로벌 캐시:\u003c/strong\u003e 동일한 의존성을 재사용해 디스크 공간 절약\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e호환성:\u003c/strong\u003e 기존 \u003ccode\u003epip\u003c/code\u003e 및 \u003ccode\u003evenv\u003c/code\u003e와의 높은 호환성\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e\u003ccode\u003euv\u003c/code\u003e는 기존 Python 도구의 복잡성을 줄이고, 현대적인 개발 환경에 최적화된 대안을 제공합니다.\u003c/p\u003e","title":"Python uv 101"},{"content":"Playwright 가이드: 웹 자동화\n1. Playwright란? Playwright는 웹 브라우저 자동화를 위한 도구로, Selenium의 대안으로 설계되었습니다. 주요 용도는 다음과 같습니다:\n웹 애플리케이션 테스트 자동화 웹 스크래핑 및 데이터 추출 반복적인 웹 작업 자동화 크로스 브라우저 테스팅 주요 기능 브라우저 제어: Chromium, Firefox, Webkit(Safari 엔진) 지원 DOM 조작: querySelector와 locator로 요소 검색 및 조작 폼 자동화: 입력 및 제출 자동화 스크린샷 캡처: 페이지 또는 요소 캡처 헤드리스 모드: GUI 없는 실행 Playwright는 Selenium보다 최신 기술을 활용하며, 자동 대기와 간결한 API를 제공합니다.\nSelenium과의 비교 기능 Selenium Playwright 브라우저 지원 별도 드라이버 필요 드라이버 내장 DOM 탐색 find_element 등 복잡 querySelector와 locator로 간결 동적 요소 처리 WebDriverWait로 명시적 대기 기본적으로 자동 대기 지원 설치 WebDriver 관리 필요 playwright install로 통합 속도 일부 작업에서 느릴 수 있음 최적화로 더 빠름 Playwright는 Selenium보다 설정이 간단하고, 동적 웹 페이지 처리에서 우수합니다.\n2. 지원하는 브라우저 Chromium (Chrome과 유사) Firefox Webkit (Safari와 유사) 별도 드라이버 설치 없이 Playwright 자체에서 관리합니다.\n3. 기본적인 웹 페이지 호출 방법 (Chromium 사용) 설치 명령어:\n$ pip install playwright $ playwright install 동기 방식 예시:\nfrom playwright.sync_api import sync_playwright with sync_playwright() as p: browser = p.chromium.launch() page = browser.new_page() page.goto(\u0026#39;https://www.example.com\u0026#39;) browser.close() 비동기 방식: async_playwright와 await 사용 가능 (후술).\n4. DOM을 찾기 위한 querySelector 및 locator 사용법 querySelector CSS 선택자로 단일 요소를 찾습니다:\nelement = page.query_selector(\u0026#39;#search-input\u0026#39;) querySelectorAll 여러 요소를 리스트로 반환:\nelements = page.query_selector_all(\u0026#39;.example-class\u0026#39;) for el in elements: print(el.text_content()) locator Playwright 고유의 기능으로, 동적 요소를 안정적으로 추적:\nlocator = page.locator(\u0026#39;#search-input\u0026#39;) print(locator.text_content()) 선택 방법 방법 설명 page.query_selector('#id') ID로 요소 찾기 page.query_selector('.class') 클래스명으로 요소 찾기 page.query_selector('tag') 태그명으로 요소 찾기 page.locator('text=Link') 텍스트로 요소 찾기 예시 (동기) with sync_playwright() as p: browser = p.chromium.launch() page = browser.new_page() page.goto(\u0026#39;https://www.example.com\u0026#39;) # querySelector element = page.query_selector(\u0026#39;#example-id\u0026#39;) print(f\u0026#34;ID: {element.text_content()}\u0026#34;) # locator locator = page.locator(\u0026#39;div \u0026gt; p\u0026#39;) print(f\u0026#34;Locator: {locator.text_content()}\u0026#34;) browser.close() 동적 도메인 추가 (href 예시) href 속성 값을 가져올 때, 상대 경로(/path)라면 현재 페이지 도메인을 동적으로 추가:\nlink = page.query_selector(\u0026#39;a\u0026#39;) href = link.get_attribute(\u0026#39;href\u0026#39;) base_url = page.url # 현재 페이지 URL from urllib.parse import urljoin full_url = urljoin(base_url, href) # 도메인 추가 print(f\u0026#34;Full URL: {full_url}\u0026#34;) 5. 주요 DOM 조작 기능 click() button = page.query_selector(\u0026#39;#submit-button\u0026#39;) button.click() fill() input_field = page.query_selector(\u0026#39;[name=\u0026#34;username\u0026#34;]\u0026#39;) input_field.fill(\u0026#39;myusername\u0026#39;) text_content() paragraph = page.query_selector(\u0026#39;.content\u0026#39;) print(paragraph.text_content()) get_attribute() link = page.query_selector(\u0026#39;a\u0026#39;) href = link.get_attribute(\u0026#39;href\u0026#39;) 6. 동적 웹 페이지 처리: wait_for_selector 동기 방식으로 요소가 나타날 때까지 대기:\nnode = page.wait_for_selector(\u0026#39;a.ClassName\u0026#39;, timeout=10000) # 10초 대기 주요 메서드 메서드 설명 wait_for_selector 요소가 나타날 때까지 대기 wait_for_load_state 페이지 로드 완료 대기 예시 with sync_playwright() as p: browser = p.chromium.launch() page = browser.new_page() page.goto(\u0026#39;https://example.com\u0026#39;) button = page.wait_for_selector(\u0026#39;#submit-button\u0026#39;, timeout=10000) button.click() browser.close() 7. Headless 모드 및 기타 옵션 with sync_playwright() as p: browser = p.chromium.launch(headless=True) page = browser.new_page() page.goto(\u0026#39;https://www.example.com\u0026#39;) browser.close() 옵션 viewport={'width': 1200, 'height': 600} args=['--user-agent=Mozilla/5.0 ...'] 8. 비동기 방식 (aio) 사용 시 이슈 및 해결 방안 Playwright는 async_playwright로 비동기 실행을 지원합니다.\n비동기 예시 from playwright.async_api import async_playwright import asyncio async def main(): async with async_playwright() as p: browser = await p.chromium.launch() page = await browser.new_page() await page.goto(\u0026#39;https://www.example.com\u0026#39;) await browser.close() asyncio.run(main()) 이슈 및 해결 방안 이슈: 비동기 코드의 복잡성\n동기 방식보다 코드가 복잡해지고, await 누락 시 오류 발생. 해결: 간단한 작업은 동기 방식(sync_playwright) 사용 권장. 이슈: 타임아웃 문제\n비동기 작업 중 네트워크 지연으로 요소가 늦게 로드될 수 있음. 해결: await page.wait_for_selector('#id', timeout=10000)로 명시적 대기 추가. 이슈: 이벤트 루프 충돌\n기존 asyncio 환경과 충돌 가능. 해결: asyncio.run() 대신 기존 루프에 통합하거나, nest_asyncio 사용: import nest_asyncio nest_asyncio.apply() 이슈: 리소스 관리\n비동기 컨텍스트가 제대로 닫히지 않으면 메모리 누수 발생. 해결: async with 문으로 자동 리소스 정리 보장. 9. connect_over_cdp를 사용한 Chromium 연결 Playwright는 connect_over_cdp를 통해 기존에 실행 중인 Chromium 인스턴스에 연결할 수 있습니다. 이는 Chrome DevTools Pro\n사용 방법 (동기 방식) 먼저, Chromium을 CDP 지원 모드로 실행합니다:\ngoogle-chrome --remote-debugging-port=9222 Playwright에서 연결:\nwith sync_playwright() as p: browser = p.chromium.launch(headless=False, devtools=True) page = browser.new_page() page.goto(\u0026#39;https://example.com\u0026#39;) browser.close() Playwright는 Selenium보다 간결하고 강력한 기능을 제공하며, 동기와 비동기 방식을 모두 지원합니다. 동적 도메인 추가와 같은 실용적 기능도 쉽게 구현 가능합니다.\n","permalink":"https://cdecl.github.io/dev/playwright-101/","summary":"\u003cp\u003ePlaywright 가이드: 웹 자동화\u003c/p\u003e\n\u003ch2 id=\"1-playwright란\"\u003e1. Playwright란?\u003c/h2\u003e\n\u003cp\u003ePlaywright는 웹 브라우저 자동화를 위한 도구로, Selenium의 대안으로 설계되었습니다. 주요 용도는 다음과 같습니다:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e웹 애플리케이션 테스트 자동화\u003c/li\u003e\n\u003cli\u003e웹 스크래핑 및 데이터 추출\u003c/li\u003e\n\u003cli\u003e반복적인 웹 작업 자동화\u003c/li\u003e\n\u003cli\u003e크로스 브라우저 테스팅\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"주요-기능\"\u003e주요 기능\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003e브라우저 제어:\u003c/strong\u003e Chromium, Firefox, Webkit(Safari 엔진) 지원\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eDOM 조작:\u003c/strong\u003e \u003ccode\u003equerySelector\u003c/code\u003e와 \u003ccode\u003elocator\u003c/code\u003e로 요소 검색 및 조작\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e폼 자동화:\u003c/strong\u003e 입력 및 제출 자동화\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e스크린샷 캡처:\u003c/strong\u003e 페이지 또는 요소 캡처\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e헤드리스 모드:\u003c/strong\u003e GUI 없는 실행\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003ePlaywright는 Selenium보다 최신 기술을 활용하며, 자동 대기와 간결한 API를 제공합니다.\u003c/p\u003e","title":"Playwright 101"},{"content":"macOS 애플리케이션 - personal installation\n시스템 유틸리티 alt-tab (AltTab.app)\n윈도우 스타일의 앱 전환기로, 모든 열린 창을 한눈에 보고 빠르게 전환할 수 있습니다.\nmacOS의 기본 앱 전환 기능을 개선하여 생산성을 높이는 데 도움을 줍니다.\nlinearmouse (LinearMouse.app)\nmacOS용 마우스 커스터마이징 도구로, 스크롤 방향, 속도, 버튼 기능 등을 세밀하게 조정할 수 있습니다.\n특히 서드파티 마우스 사용 시 macOS의 제한적인 마우스 설정을 보완해줍니다.\nrectangle (Rectangle.app)\n키보드 단축키로 창 크기와 위치를 쉽게 조절할 수 있는 창 관리 도구입니다.\n다중 모니터 환경에서 창 관리를 효율적으로 할 수 있어 작업 생산성을 크게 향상시킵니다.\nice (Ice.app)\n키보드로 창을 조작할 수 있는 또 다른 창 관리 도구로, 창 크기 조절, 이동, 정렬 등의 기능을 제공합니다.\nRectangle과 유사하지만 더 세밀한 창 조작이 가능하여 개인의 취향에 따라 선택할 수 있습니다.\nkarabiner-elements (Karabiner-Elements.app)\n키 매핑을 변경하고 복잡한 키 조합을 만들 수 있는 키보드 커스터마이징 도구입니다.\n특수 키보드 사용자나 키보드 단축키를 자주 사용하는 사용자에게 매우 유용합니다.\nstats (Stats.app)\n메뉴바에 CPU, 메모리, 네트워크 사용량 등의 시스템 모니터링 정보를 실시간으로 표시합니다.\n시스템 리소스 사용 현황을 한눈에 파악할 수 있어 성능 관리에 도움이 됩니다.\namphetamine (Amphetamine.app)\nmacOS의 절전 모드를 제어하는 도구로, 필요할 때 시스템을 깨어있게 유지할 수 있습니다.\n장시간 다운로드나 렌더링 작업 시 유용합니다.\n개발 도구 iterm2 (iTerm.app)\n분할 창, 검색, 자동 완성 등 다양한 기능을 제공하는 고급 터미널 에뮬레이터입니다.\nmacOS의 기본 터미널보다 더 많은 기능과 커스터마이징 옵션을 제공하여 개발자들에게 인기가 높습니다.\ndbeaver (DBeaver.app)\nSQL 편집, 데이터 시각화 등의 기능을 제공하는 다양한 데이터베이스 지원 무료 관리 도구입니다.\n거의 모든 주요 데이터베이스를 지원하며, 사용자 친화적인 인터페이스로 데이터베이스 관리를 쉽게 만듭니다.\nfork (Fork.app)\n직관적인 인터페이스를 제공하는 Git 클라이언트로, 브랜치 관리, 머지, 충돌 해결 등의 기능을 쉽게 사용할 수 있습니다.\nGit 초보자부터 전문가까지 모두 사용하기 편리한 UI를 제공합니다.\nwireshark (Wireshark.app)\n네트워크 프로토콜 분석기로, 네트워크 트래픽을 캡처하고 분석할 수 있습니다.\n네트워크 문제 해결과 보안 분석에 널리 사용됩니다.\nmitmproxy\n네트워크 트래픽을 분석하고 수정할 수 있는 HTTP/HTTPS 프록시로, 웹 개발 및 디버깅에 유용합니다.\nAPI 테스트, 보안 분석 등 다양한 네트워크 관련 작업에 활용할 수 있습니다.\norbstack (OrbStack.app)\nDocker Desktop의 대안으로, 빠르고 가벼운 컨테이너 및 Linux VM 관리 도구입니다.\nDocker Desktop보다 리소스 사용량이 적어 시스템 성능에 미치는 영향이 적습니다.\ntermius (Termius.app)\n여러 서버를 쉽게 관리할 수 있는 SSH 및 SFTP 클라이언트로, 크로스 플랫폼을 지원하며 동기화 기능이 있습니다.\n클라우드 동기화를 통해 여러 기기에서 동일한 SSH 설정을 유지할 수 있어 편리합니다.\nvisual studio code (Visual Studio Code.app)\nMicrosoft에서 개발한 강력한 소스 코드 편집기입니다.\n다양한 프로그래밍 언어를 지원하며, 풍부한 확장 기능으로 개발 환경을 커스터마이징할 수 있습니다.\n미디어 및 엔터테인먼트 iina (IINA.app)\n다양한 포맷을 지원하며 커스터마이징이 가능한 현대적이고 사용자 친화적인 비디오 플레이어입니다.\nmacOS의 네이티브 UI를 따르며, 터치바 지원 등 macOS에 최적화된 기능을 제공합니다.\nspotify (Spotify.app)\n수백만 곡의 음악을 스트리밍하고 플레이리스트를 만들 수 있는 인기 음악 스트리밍 서비스의 데스크톱 클라이언트입니다.\nAI 기반 추천 시스템으로 개인화된 음악 경험을 제공합니다.\njellyfin (Jellyfin.app)\n개인 미디어 라이브러리를 구축하고 스트리밍할 수 있는 오픈 소스 미디어 서버 소프트웨어입니다.\nPlex나 Emby의 오픈 소스 대안으로, 자체 호스팅이 가능하여 프라이버시를 중시하는 사용자에게 적합합니다.\nhandbrake (HandBrake.app)\n비디오 트랜스코딩 및 압축 도구로, 다양한 비디오 포맷을 변환할 수 있습니다.\n고품질의 비디오 압축이 가능하여 미디어 라이브러리 관리에 유용합니다.\n유틸리티 및 생산성 도구 raycast (Raycast.app)\n빠른 앱 실행, 스니펫, 계산기 등 다양한 기능을 제공하는 macOS용 생산성 도구로, 스포트라이트를 대체할 수 있습니다.\n확장 가능한 플러그인 시스템으로 사용자의 필요에 맞게 기능을 추가할 수 있습니다.\nlogseq (Logseq.app)\n마크다운 기반으로 노트를 작성하고 연결할 수 있는 오픈 소스 지식 관리 도구입니다.\n로컬 저장 및 암호화를 지원하여 프라이버시를 보호하면서 효율적인 지식 관리가 가능합니다.\nkeka (Keka.app)\n다양한 압축 포맷을 지원하며 사용이 간편한 파일 압축/해제 도구입니다.\nmacOS의 기본 압축 도구보다 더 많은 포맷을 지원하며, 사용자 인터페이스가 직관적입니다.\nlicecap (LICEcap.app)\nGIF 형식으로 화면을 캡처할 수 있는 간단하고 직관적인 화면 녹화 도구입니다.\n작은 파일 크기로 고품질의 GIF를 만들 수 있어 튜토리얼이나 버그 리포트 작성에 유용합니다.\nbitwarden (Bitwarden.app)\n오픈 소스 비밀번호 관리자로, 안전하게 비밀번호를 저장하고 동기화할 수 있습니다.\n크로스 플랫폼 지원과 강력한 암호화로 개인 정보를 보호합니다.\ndeepl (DeepL.app)\n고품질 기계 번역 서비스로, 다양한 언어 간 번역을 제공합니다.\n자연스러운 번역 결과로 유명하며, 문맥을 고려한 번역이 가능합니다.\n오디오 및 음악 관련 도구 kid3 (kid3.app)\nMP3, Ogg, FLAC 등 다양한 포맷의 오디오 파일 태그를 편집할 수 있는 도구입니다.\n대량의 음악 파일 태그를 한 번에 편집할 수 있어 음악 라이브러리 정리에 효과적입니다. 기타 유용한 도구 transmission (Transmission.app)\n사용이 간단하고 리소스 사용이 적은 경량 BitTorrent 클라이언트입니다.\n웹 인터페이스를 제공하여 원격으로 토렌트를 관리할 수 있는 기능도 있습니다.\nmounty (Mounty.app)\nWindows 포맷의 외장 하드를 macOS에서 사용할 때 유용한 NTFS 파일 시스템 읽기/쓰기 도구입니다.\n별도의 드라이버 설치 없이 NTFS 파티션에 쓰기 기능을 제공하여 편리합니다.\ntelegram (Telegram.app)\n빠른 메시지 전송과 파일 공유, 비밀 채팅 기능을 제공하는 보안 중심의 메신저 앱 데스크톱 클라이언트입니다.\n종단간 암호화와 자체 파괴 메시지 기능으로 프라이버시를 중시하는 사용자에게 적합합니다.\ngoogle chrome (Google Chrome.app)\nGoogle에서 개발한 웹 브라우저로, 빠른 속도와 다양한 확장 기능을 제공합니다.\n개발자 도구가 강력하여 웹 개발에 널리 사용됩니다.\nmicrosoft edge (Microsoft Edge.app)\nMicrosoft의 Chromium 기반 웹 브라우저로, 빠른 성능과 Windows와의 통합 기능을 제공합니다.\n개인정보 보호 기능과 수직 탭 등 유용한 기능들이 있습니다.\nutm (UTM.app)\nmacOS에서 가상 머신을 실행할 수 있게 해주는 애플리케이션입니다.\n다양한 운영 체제를 에뮬레이션할 수 있어 개발 및 테스트 환경 구축에 유용합니다.\npixea (Pixea.app)\n가볍고 빠른 이미지 뷰어 및 관리 도구입니다.\n다양한 이미지 포맷을 지원하며, 기본적인 편집 기능도 제공합니다.\nollama (Ollama.app)\n로컬에서 대규모 언어 모델(LLM)을 실행할 수 있게 해주는 도구입니다.\n개인 AI 어시스턴트를 구축하거나 AI 모델을 실험하는 데 유용합니다.\n추가 애플리케이션 3uTools\niOS 기기 관리 및 파일 전송을 위한 종합 도구입니다.\niTunes의 대안으로 사용할 수 있으며, 다양한 iOS 관련 기능을 제공합니다.\nAltServer\niOS 기기에 사이드로딩 앱을 설치할 수 있게 해주는 도구입니다.\n개발자 계정 없이도 자체 제작 앱이나 수정된 앱을 iOS 기기에 설치할 수 있습니다.\nChatGPT\nOpenAI의 ChatGPT를 데스크톱에서 사용할 수 있게 해주는 비공식 클라이언트입니다.\n웹 버전보다 편리하게 AI와 대화할 수 있습니다.\nClaude\nAnthropic에서 개발한 AI 챗봇 Claude의 데스크톱 클라이언트입니다.\nChatGPT의 대안으로 사용할 수 있으며, 일부 기능에서 더 뛰어난 성능을 보입니다.\nPC나 서버에 원격으로 접속할 때 사용합니다.\nPerplexity\nAI 기반의 검색 및 질문 답변 도구입니다.\n복잡한 질문에 대해 상세한 답변을 제공하며, 소스를 함께 제시합니다.\nOneDrive\nMicrosoft의 클라우드 스토리지 서비스인 OneDrive의 공식 클라이언트입니다.\n파일을 클라우드에 동기화하고 여러 기기에서 접근할 수 있게 해줍니다.\n이 외에도 Pages.app, Numbers.app, Keynote.app 등 Apple의 기본 생산성 도구와 Microsoft Office 제품군(Excel.app, PowerPoint.app, Word.app)도 설치되어 있습니다.\n","permalink":"https://cdecl.github.io/devops/apps-for-macos/","summary":"\u003cp\u003emacOS 애플리케이션 - personal installation\u003c/p\u003e\n\u003ch2 id=\"시스템-유틸리티\"\u003e시스템 유틸리티\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003ealt-tab (AltTab.app)\u003cbr\u003e\n윈도우 스타일의 앱 전환기로, 모든 열린 창을 한눈에 보고 빠르게 전환할 수 있습니다.\u003cbr\u003e\nmacOS의 기본 앱 전환 기능을 개선하여 생산성을 높이는 데 도움을 줍니다.\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003elinearmouse (LinearMouse.app)\u003cbr\u003e\nmacOS용 마우스 커스터마이징 도구로, 스크롤 방향, 속도, 버튼 기능 등을 세밀하게 조정할 수 있습니다.\u003cbr\u003e\n특히 서드파티 마우스 사용 시 macOS의 제한적인 마우스 설정을 보완해줍니다.\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003erectangle (Rectangle.app)\u003cbr\u003e\n키보드 단축키로 창 크기와 위치를 쉽게 조절할 수 있는 창 관리 도구입니다.\u003cbr\u003e\n다중 모니터 환경에서 창 관리를 효율적으로 할 수 있어 작업 생산성을 크게 향상시킵니다.\u003c/p\u003e","title":"macOS Homebrew Cask, 추가 애플리케이션"},{"content":"모던 CMake 기본 가이드: 타겟 중심의 현대적인 빌드 시스템\n1. Makefile 대비 CMake의 장점 크로스 플랫폼 지원 Makefile은 Unix 계열 시스템에 특화되어 있지만, CMake는 Windows, Linux, macOS 등 다양한 플랫폼 지원 Visual Studio, Ninja, Unix Makefiles 등 다양한 빌드 시스템 생성 가능 타겟 중심의 의존성 관리 명확한 의존성 전파 (PUBLIC, PRIVATE, INTERFACE) 자동 헤더 의존성 추적 현대적인 패키지 관리 (find_package) 향상된 IDE 지원 Visual Studio, CLion 등과 완벽한 통합 자동 완성 및 인텔리센스 지원 CMake 프리셋 지원 2. 모던 CMake의 특징 기존 CMake와의 주요 차이점 타겟 중심 접근: 전역 변수 대신 특정 타겟에 한정하여 빌드 옵션을 지정합니다. 개선된 의존성 관리: 빌드 의존성 문제를 해결하고 불필요한 참조를 줄입니다. 새로운 명령어 도입: target_link_libraries, target_include_directories 등의 새로운 명령어를 사용합니다. PUBLIC, PRIVATE 키워드를 통한 세밀한 의존 관계 설정 CMake 3.0.0부터 모던 CMake의 기본 기능 지원 CMake 3.12+ 버전부터 \u0026ldquo;More Modern CMake\u0026rdquo; 기능 제공 CMake 3.15+ 버전 사용 권장 타겟 중심 접근 # 안티패턴 (사용하지 말 것) include_directories(include) add_definitions(-DSOME_DEFINE) link_directories(lib) # 모던 패턴 (권장) add_executable(myapp src/main.cpp) target_include_directories(myapp PUBLIC ${CMAKE_CURRENT_SOURCE_DIR}/include ) target_compile_definitions(myapp PRIVATE SOME_DEFINE ) target_link_directories(myapp PRIVATE ${CMAKE_CURRENT_SOURCE_DIR}/lib ) 범위와 전파 # 라이브러리 설정 add_library(mylib SHARED src/lib.cpp include/lib.h ) target_include_directories(mylib PUBLIC ${CMAKE_CURRENT_SOURCE_DIR}/include # 헤더는 공개 PRIVATE ${CMAKE_CURRENT_SOURCE_DIR}/src # 구현은 비공개 ) # 실행 파일에서 라이브러리 사용 add_executable(myapp src/main.cpp) target_link_libraries(myapp PRIVATE mylib) # 자동으로 include 경로 전파 범위(Scope)와 전파(Propagation)의 개념 CMake에서 범위는 특정 설정(컴파일 옵션, include 디렉토리 등)이 어디에 적용될지를 나타냅니다. 전파는 이러한 설정이 다른 타겟(target)으로 전달되는 방식을 정의합니다.\nPRIVATE: 설정이 해당 타겟에만 적용됩니다. PUBLIC: 설정이 해당 타겟과 이를 사용하는 다른 타겟에 모두 적용됩니다. INTERFACE: 설정이 해당 타겟에는 적용되지 않고, 이를 사용하는 다른 타겟에만 전파됩니다. 3. CMake 기초 사용법 최소한의 CMakeLists.txt cmake_minimum_required(VERSION 3.15) project(MyProject VERSION 1.0) # C++17 사용 설정 (모던 방식) set(CMAKE_CXX_STANDARD 17) set(CMAKE_CXX_STANDARD_REQUIRED ON) set(CMAKE_CXX_EXTENSIONS OFF) add_executable(myapp src/main.cpp) 기본 빌드 명령어 # 권장하는 현대적인 방식 cmake -S . -B build -DCMAKE_BUILD_TYPE=Release cmake --build build 4. 컴파일러 및 빌드 옵션 컴파일러 옵션 설정 (모던 방식) add_executable(myapp src/main.cpp) # 컴파일러별 옵션 설정 target_compile_options(myapp PRIVATE $\u0026lt;$\u0026lt;CXX_COMPILER_ID:GNU\u0026gt;:-Wall -Wextra\u0026gt; $\u0026lt;$\u0026lt;CXX_COMPILER_ID:Clang\u0026gt;:-Wall -Wextra\u0026gt; $\u0026lt;$\u0026lt;CXX_COMPILER_ID:MSVC\u0026gt;/W4\u0026gt; ) # 최적화 옵션 target_compile_options(myapp PRIVATE $\u0026lt;$\u0026lt;AND:$\u0026lt;CXX_COMPILER_ID:GNU\u0026gt;,$\u0026lt;CONFIG:Debug\u0026gt;\u0026gt;:-O0 -g\u0026gt; $\u0026lt;$\u0026lt;AND:$\u0026lt;CXX_COMPILER_ID:GNU\u0026gt;,$\u0026lt;CONFIG:Release\u0026gt;\u0026gt;:-O3\u0026gt; ) 여러 소스 파일 추가 # 명시적인 소스 파일 나열 (권장) add_executable(myapp src/main.cpp src/utils.cpp src/config.cpp ) # 또는 glob 패턴 사용 (권장하지 않음) file(GLOB SOURCES \u0026#34;src/*.cpp\u0026#34;) add_executable(myapp ${SOURCES}) 헤더 파일 및 라이브러리 포함 target_include_directories(myapp PRIVATE ${CMAKE_CURRENT_SOURCE_DIR}/include PUBLIC ${CMAKE_CURRENT_SOURCE_DIR}/public_include ) target_link_libraries(myapp PRIVATE mylib external::lib ) 5. 라이브러리 생성 정적 라이브러리 add_library(staticlib STATIC src/lib1.cpp src/lib2.cpp ) target_include_directories(staticlib PUBLIC ${CMAKE_CURRENT_SOURCE_DIR}/include ) # Position Independent Code 설정 target_compile_options(staticlib PRIVATE $\u0026lt;$\u0026lt;CXX_COMPILER_ID:GNU\u0026gt;:-fPIC\u0026gt; ) 공유 라이브러리 add_library(sharedlib SHARED src/lib1.cpp src/lib2.cpp ) set_target_properties(sharedlib PROPERTIES VERSION ${PROJECT_VERSION} SOVERSION ${PROJECT_VERSION_MAJOR} PUBLIC_HEADER include/lib.h ) target_include_directories(sharedlib PUBLIC $\u0026lt;BUILD_INTERFACE:${CMAKE_CURRENT_SOURCE_DIR}/include\u0026gt; $\u0026lt;INSTALL_INTERFACE:include\u0026gt; ) 6. 빌드 구성 Release/Debug 구성 설정 (모던 방식) add_executable(myapp src/main.cpp) # Debug 구성 target_compile_definitions(myapp PRIVATE $\u0026lt;$\u0026lt;CONFIG:Debug\u0026gt;:DEBUG_MODE\u0026gt; ) target_compile_options(myapp PRIVATE $\u0026lt;$\u0026lt;AND:$\u0026lt;CXX_COMPILER_ID:GNU\u0026gt;,$\u0026lt;CONFIG:Debug\u0026gt;\u0026gt;:-g -O0 -Wall -Wextra\u0026gt; $\u0026lt;$\u0026lt;AND:$\u0026lt;CXX_COMPILER_ID:GNU\u0026gt;,$\u0026lt;CONFIG:Release\u0026gt;\u0026gt;:-O3\u0026gt; ) 빌드 명령어 # Debug 빌드 cmake -S . -B build-debug -DCMAKE_BUILD_TYPE=Debug cmake --build build-debug # Release 빌드 cmake -S . -B build-release -DCMAKE_BUILD_TYPE=Release cmake --build build-release 7. 외부 라이브러리 통합 외부 라이브러리 찾기 # Boost 찾기 find_package(Boost 1.70 REQUIRED COMPONENTS system filesystem) target_link_libraries(myapp PRIVATE Boost::system Boost::filesystem ) # OpenSSL 찾기 find_package(OpenSSL REQUIRED) target_link_libraries(myapp PRIVATE OpenSSL::SSL OpenSSL::Crypto ) 설치 규칙 정의 install(TARGETS myapp sharedlib RUNTIME DESTINATION bin LIBRARY DESTINATION lib ARCHIVE DESTINATION lib PUBLIC_HEADER DESTINATION include ) install(FILES cmake/MyLibConfig.cmake DESTINATION lib/cmake/MyLib ) 8. 모범 사례 프로젝트 구조 project/ ├── CMakeLists.txt ├── cmake/ │ └── FindMyLib.cmake ├── include/ │ └── public_header.h ├── src/ │ ├── private_header.h │ └── source.cpp ├── tests/ │ └── CMakeLists.txt └── extern/ └── third_party_lib/ 변수 명명 규칙 # 프로젝트 옵션 option(BUILD_TESTING \u0026#34;Build tests\u0026#34; ON) option(BUILD_SHARED_LIBS \u0026#34;Build shared libraries\u0026#34; ON) option(MYPROJECT_BUILD_EXAMPLES \u0026#34;Build example programs\u0026#34; OFF) # 캐시 변수 set(MYPROJECT_SOME_OPTION \u0026#34;default\u0026#34; CACHE STRING \u0026#34;Option description\u0026#34;) 권장 사항 전역 변수 사용을 피하고 타겟별 설정 사용 명시적인 의존성 선언 target_* 명령어 사용 제너레이터 표현식 활용 CMake 프리셋 사용 ","permalink":"https://cdecl.github.io/dev/modern-cmake-guide/","summary":"\u003cp\u003e모던 CMake 기본 가이드: 타겟 중심의 현대적인 빌드 시스템\u003c/p\u003e\n\u003ch2 id=\"1-makefile-대비-cmake의-장점\"\u003e1. Makefile 대비 CMake의 장점\u003c/h2\u003e\n\u003ch3 id=\"크로스-플랫폼-지원\"\u003e크로스 플랫폼 지원\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003eMakefile은 Unix 계열 시스템에 특화되어 있지만, CMake는 Windows, Linux, macOS 등 다양한 플랫폼 지원\u003c/li\u003e\n\u003cli\u003eVisual Studio, Ninja, Unix Makefiles 등 다양한 빌드 시스템 생성 가능\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"타겟-중심의-의존성-관리\"\u003e타겟 중심의 의존성 관리\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e명확한 의존성 전파 (PUBLIC, PRIVATE, INTERFACE)\u003c/li\u003e\n\u003cli\u003e자동 헤더 의존성 추적\u003c/li\u003e\n\u003cli\u003e현대적인 패키지 관리 (find_package)\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"향상된-ide-지원\"\u003e향상된 IDE 지원\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003eVisual Studio, CLion 등과 완벽한 통합\u003c/li\u003e\n\u003cli\u003e자동 완성 및 인텔리센스 지원\u003c/li\u003e\n\u003cli\u003eCMake 프리셋 지원\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"2-모던-cmake의-특징\"\u003e2. 모던 CMake의 특징\u003c/h2\u003e\n\u003ch3 id=\"기존-cmake와의-주요-차이점\"\u003e기존 CMake와의 주요 차이점\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e타겟 중심 접근: 전역 변수 대신 특정 타겟에 한정하여 빌드 옵션을 지정합니다.\u003c/li\u003e\n\u003cli\u003e개선된 의존성 관리: 빌드 의존성 문제를 해결하고 불필요한 참조를 줄입니다.\u003c/li\u003e\n\u003cli\u003e새로운 명령어 도입: target_link_libraries, target_include_directories 등의 새로운 명령어를 사용합니다.\u003c/li\u003e\n\u003cli\u003ePUBLIC, PRIVATE 키워드를 통한 세밀한 의존 관계 설정\u003c/li\u003e\n\u003c/ul\u003e\n\u003cblockquote\u003e\n\u003cul\u003e\n\u003cli\u003eCMake 3.0.0부터 모던 CMake의 기본 기능 지원\u003c/li\u003e\n\u003cli\u003eCMake 3.12+ 버전부터 \u0026ldquo;More Modern CMake\u0026rdquo; 기능 제공\u003c/li\u003e\n\u003cli\u003eCMake 3.15+ 버전 사용 권장\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/blockquote\u003e\n\u003ch3 id=\"타겟-중심-접근\"\u003e타겟 중심 접근\u003c/h3\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-cmake\" data-lang=\"cmake\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# 안티패턴 (사용하지 말 것)\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003einclude_directories(\u003cspan style=\"color:#e6db74\"\u003einclude\u003c/span\u003e)\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eadd_definitions(\u003cspan style=\"color:#e6db74\"\u003e-DSOME_DEFINE\u003c/span\u003e)\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003elink_directories(\u003cspan style=\"color:#e6db74\"\u003elib\u003c/span\u003e)\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# 모던 패턴 (권장)\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eadd_executable(\u003cspan style=\"color:#e6db74\"\u003emyapp\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003esrc/main.cpp\u003c/span\u003e)\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003etarget_include_directories(\u003cspan style=\"color:#e6db74\"\u003emyapp\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#e6db74\"\u003ePUBLIC\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#f92672\"\u003e${\u003c/span\u003eCMAKE_CURRENT_SOURCE_DIR\u003cspan style=\"color:#f92672\"\u003e}\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e/include\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e)\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003etarget_compile_definitions(\u003cspan style=\"color:#e6db74\"\u003emyapp\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#e6db74\"\u003ePRIVATE\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#e6db74\"\u003eSOME_DEFINE\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e)\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003etarget_link_directories(\u003cspan style=\"color:#e6db74\"\u003emyapp\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#e6db74\"\u003ePRIVATE\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#f92672\"\u003e${\u003c/span\u003eCMAKE_CURRENT_SOURCE_DIR\u003cspan style=\"color:#f92672\"\u003e}\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e/lib\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e)\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch3 id=\"범위와-전파\"\u003e범위와 전파\u003c/h3\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-cmake\" data-lang=\"cmake\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# 라이브러리 설정\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eadd_library(\u003cspan style=\"color:#e6db74\"\u003emylib\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003eSHARED\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#e6db74\"\u003esrc/lib.cpp\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#e6db74\"\u003einclude/lib.h\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e)\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003etarget_include_directories(\u003cspan style=\"color:#e6db74\"\u003emylib\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#e6db74\"\u003ePUBLIC\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#f92672\"\u003e${\u003c/span\u003eCMAKE_CURRENT_SOURCE_DIR\u003cspan style=\"color:#f92672\"\u003e}\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e/include\u003c/span\u003e  \u003cspan style=\"color:#75715e\"\u003e# 헤더는 공개\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#e6db74\"\u003ePRIVATE\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#f92672\"\u003e${\u003c/span\u003eCMAKE_CURRENT_SOURCE_DIR\u003cspan style=\"color:#f92672\"\u003e}\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e/src\u003c/span\u003e      \u003cspan style=\"color:#75715e\"\u003e# 구현은 비공개\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e)\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# 실행 파일에서 라이브러리 사용\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eadd_executable(\u003cspan style=\"color:#e6db74\"\u003emyapp\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003esrc/main.cpp\u003c/span\u003e)\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003etarget_link_libraries(\u003cspan style=\"color:#e6db74\"\u003emyapp\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003ePRIVATE\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003emylib\u003c/span\u003e)  \u003cspan style=\"color:#75715e\"\u003e# 자동으로 include 경로 전파\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch3 id=\"범위scope와-전파propagation의-개념\"\u003e범위(Scope)와 전파(Propagation)의 개념\u003c/h3\u003e\n\u003cp\u003eCMake에서 범위는 특정 설정(컴파일 옵션, include 디렉토리 등)이 어디에 적용될지를 나타냅니다. 전파는 이러한 설정이 다른 타겟(target)으로 전달되는 방식을 정의합니다.\u003c/p\u003e","title":"모던 CMake 기본 가이드"},{"content":"강력한 텍스트 처리 도구인 tr, sed, 그리고 최신 도구인 sd에 대해 알아보고 비교해 보겠습니다.\ntr 명령어 tr은 \u0026rsquo;translate\u0026rsquo;의 약자로, 문자열을 변환하거나 삭제하는 데 사용되는 간단하면서도 강력한 도구입니다.\n주요 기능 대소문자 변환 특정 문자 삭제 문자 치환 연속된 문자 압축 기본 구문 tr [옵션] SET1 [SET2] 주요 옵션 -d: SET1에 지정된 문자 삭제 -s: SET1에 지정된 연속된 문자를 하나로 압축 -c: SET1의 보수 집합 사용 (지정되지 않은 모든 문자) 사용 예시 1. 대문자를 소문자로 변환: echo \u0026#34;HELLO WORLD\u0026#34; | tr \u0026#39;A-Z\u0026#39; \u0026#39;a-z\u0026#39; # 출력: hello world 2. 특정 문자 삭제: echo \u0026#34;Hello, World!\u0026#34; | tr -d \u0026#39;o\u0026#39; # 출력: Hell, Wrld! 3. 공백을 탭으로 변환: echo \u0026#34;Hello World\u0026#34; | tr \u0026#39; \u0026#39; \u0026#39;\\t\u0026#39; 4. 연속된 공백 압축: echo \u0026#34;Hello World\u0026#34; | tr -s \u0026#39; \u0026#39; # 출력: Hello World tr 명령어의 단점 복잡한 패턴 매칭 불가: 정규 표현식을 지원하지 않아 복잡한 패턴 매칭이 어렵습니다. 파일 직접 수정 불가: 입력 스트림만 처리할 수 있어 파일을 직접 수정할 수 없습니다. 대용량 파일 처리 어려움: 매우 큰 파일을 처리할 때 성능 저하나 실패가 발생할 수 있습니다. 문자 단위 처리: 문자열 단위가 아닌 문자 단위로 처리하기 때문에 특정 상황에서 제한적일 수 있습니다. sed 명령어 sed(Stream Editor)는 tr보다 더 복잡한 텍스트 처리 작업을 수행할 수 있는 도구입니다.\n주요 기능 패턴 검색 및 치환 텍스트 삭제, 추가, 변경 여러 줄에 걸친 작업 수행 정규 표현식 사용 기본 구문 sed [옵션] \u0026#39;command\u0026#39; 파일명 사용 예시 1. 텍스트 치환: echo \u0026#34;Hello, World!\u0026#34; | sed \u0026#39;s/World/Universe/\u0026#39; # 출력: Hello, Universe! 2. 특정 줄 삭제: sed \u0026#39;2d\u0026#39; file.txt # 2번째 줄 삭제 3. 여러 명령 실행: sed -e \u0026#39;s/foo/bar/g\u0026#39; -e \u0026#39;s/baz/qux/g\u0026#39; file.txt sed 명령어의 단점 학습 곡선: tr에 비해 복잡한 구문으로 인해 초보자가 배우기 어려울 수 있습니다. 성능: 간단한 작업에서는 tr보다 느릴 수 있습니다. 버전 간 차이: 다양한 sed 버전 간에 기능과 구문 차이가 있어 이식성 문제가 발생할 수 있습니다. 메모리 제한: 일부 sed 구현에서는 처리할 수 있는 라인 길이나 버퍼 크기에 제한이 있을 수 있습니다. sd 명령어 sd는 Rust로 작성된 현대적인 sed 대안 도구입니다. 더 직관적인 구문과 향상된 성능을 제공합니다.\n주요 기능 정규 표현식 기반의 검색 및 치환 Unicode 지원 멀티라인 패턴 매칭 기본 지원 파일 내용 직접 수정 가능 기본 구문 sd \u0026#39;pattern\u0026#39; \u0026#39;replacement\u0026#39; [파일명] 사용 예시 1. 문자열 치환: echo \u0026#39;Hello, World!\u0026#39; | sd \u0026#39;World\u0026#39; \u0026#39;Rust\u0026#39; # 출력: Hello, Rust! 2. 정규 표현식을 사용한 치환: echo \u0026#39;abc123def\u0026#39; | sd \u0026#39;\\d+\u0026#39; \u0026#39;NUM\u0026#39; # 출력: abcNUMdef 3. 파일 내용 직접 수정: sd \u0026#39;foo\u0026#39; \u0026#39;bar\u0026#39; file.txt sd 명령어의 단점 새로운 도구: 비교적 새로운 도구이기 때문에 모든 시스템에 기본적으로 설치되어 있지 않을 수 있습니다. 호환성: 기존의 sed 스크립트와 완전히 호환되지 않을 수 있어 기존 스크립트 마이그레이션에 어려움이 있을 수 있습니다. 기능 제한: sed에 비해 일부 고급 기능이 부족할 수 있습니다. 커뮤니티 지원: sed나 tr에 비해 커뮤니티 지원이 상대적으로 적을 수 있습니다. 도구 비교 기능 tr sed sd 단일 문자 변환 ✅ ✅ ✅ 정규 표현식 ❌ ✅ ✅ 파일 직접 수정 ❌ ✅ ✅ 멀티라인 처리 ❌ ✅ ✅ Unicode 지원 제한적 제한적 ✅ 사용 난이도 쉬움 중간 쉬움 성능 빠름 중간 빠름 결론 각 도구는 고유한 장단점을 가지고 있습니다:\ntr: 간단한 문자 변환 작업에 적합하며, 사용이 매우 간단합니다. sed: 복잡한 텍스트 처리 작업에 강력하지만, 학습 곡선이 있습니다. sd: sed의 현대적 대안으로, 사용이 쉽고 성능이 우수하며 Unicode를 잘 지원합니다. 작업의 복잡성과 요구사항에 따라 적절한 도구를 선택하는 것이 중요합니다. 간단한 문자 변환에는 tr이, 복잡한 패턴 매칭과 치환에는 sed나 sd가 더 적합할 수 있습니다. DevOps 엔지니어로서 이 도구들을 잘 이해하고 활용하면 텍스트 처리 작업을 더욱 효율적으로 수행할 수 있을 것입니다.\n","permalink":"https://cdecl.github.io/devops/sed-sd-comparison/","summary":"\u003cp\u003e강력한 텍스트 처리 도구인 tr, sed, 그리고 최신 도구인 sd에 대해 알아보고 비교해 보겠습니다.\u003c/p\u003e\n\u003ch2 id=\"tr-명령어\"\u003etr 명령어\u003c/h2\u003e\n\u003cp\u003etr은 \u0026rsquo;translate\u0026rsquo;의 약자로, 문자열을 변환하거나 삭제하는 데 사용되는 간단하면서도 강력한 도구입니다.\u003c/p\u003e\n\u003ch3 id=\"주요-기능\"\u003e주요 기능\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e대소문자 변환\u003c/li\u003e\n\u003cli\u003e특정 문자 삭제\u003c/li\u003e\n\u003cli\u003e문자 치환\u003c/li\u003e\n\u003cli\u003e연속된 문자 압축\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"기본-구문\"\u003e기본 구문\u003c/h3\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003etr \u003cspan style=\"color:#f92672\"\u003e[\u003c/span\u003e옵션\u003cspan style=\"color:#f92672\"\u003e]\u003c/span\u003e SET1 \u003cspan style=\"color:#f92672\"\u003e[\u003c/span\u003eSET2\u003cspan style=\"color:#f92672\"\u003e]\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch3 id=\"주요-옵션\"\u003e주요 옵션\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003e-d\u003c/code\u003e: SET1에 지정된 문자 삭제\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003e-s\u003c/code\u003e: SET1에 지정된 연속된 문자를 하나로 압축\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003e-c\u003c/code\u003e: SET1의 보수 집합 사용 (지정되지 않은 모든 문자)\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"사용-예시\"\u003e사용 예시\u003c/h3\u003e\n\u003ch4 id=\"1-대문자를-소문자로-변환\"\u003e1. 대문자를 소문자로 변환:\u003c/h4\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eecho \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;HELLO WORLD\u0026#34;\u003c/span\u003e | tr \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;A-Z\u0026#39;\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;a-z\u0026#39;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# 출력: hello world\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch4 id=\"2-특정-문자-삭제\"\u003e2. 특정 문자 삭제:\u003c/h4\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eecho \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;Hello, World!\u0026#34;\u003c/span\u003e | tr -d \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;o\u0026#39;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# 출력: Hell, Wrld!\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch4 id=\"3-공백을-탭으로-변환\"\u003e3. 공백을 탭으로 변환:\u003c/h4\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eecho \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;Hello World\u0026#34;\u003c/span\u003e | tr \u003cspan style=\"color:#e6db74\"\u003e\u0026#39; \u0026#39;\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;\\t\u0026#39;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch4 id=\"4-연속된-공백-압축\"\u003e4. 연속된 공백 압축:\u003c/h4\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eecho \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;Hello    World\u0026#34;\u003c/span\u003e | tr -s \u003cspan style=\"color:#e6db74\"\u003e\u0026#39; \u0026#39;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# 출력: Hello World\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch3 id=\"tr-명령어의-단점\"\u003etr 명령어의 단점\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e복잡한 패턴 매칭 불가: 정규 표현식을 지원하지 않아 복잡한 패턴 매칭이 어렵습니다.\u003c/li\u003e\n\u003cli\u003e파일 직접 수정 불가: 입력 스트림만 처리할 수 있어 파일을 직접 수정할 수 없습니다.\u003c/li\u003e\n\u003cli\u003e대용량 파일 처리 어려움: 매우 큰 파일을 처리할 때 성능 저하나 실패가 발생할 수 있습니다.\u003c/li\u003e\n\u003cli\u003e문자 단위 처리: 문자열 단위가 아닌 문자 단위로 처리하기 때문에 특정 상황에서 제한적일 수 있습니다.\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"sed-명령어\"\u003esed 명령어\u003c/h2\u003e\n\u003cp\u003esed(Stream Editor)는 tr보다 더 복잡한 텍스트 처리 작업을 수행할 수 있는 도구입니다.\u003c/p\u003e","title":"tr, sed, sd 명령어 비교"},{"content":"리눅스의 Init 시스템: System V Init와 Systemd 비교 분석 및 docker 활용\n개요 리눅스 시스템에서 운영체제 부팅 시 초기화를 담당하는 프로그램을 init 시스템이라고 합니다.\n전통적인 System V Init와 현대적인 Systemd를 비교 분석하여, 시스템 초기화 방식의 발전과 실무적 영향을 살펴보겠습니다.\nSystem V Init와 Systemd의 역사적 배경 System V Init 1983년 Unix System V에서 처음 도입된 init 시스템으로, 당시 컴퓨팅 환경의 단순함에 맞춰 설계되었습니다. 이 시스템은 주로 서버와 메인프레임에서 사용되었으며, 런레벨 기반의 단순한 상태 전환을 제공했습니다.\nSystemd 2010년대 초반, Linux 커뮤니티는 더 복잡한 현대 컴퓨팅 환경에 대응하기 위해 새로운 init 시스템이 필요하다고 인식했습니다. 이에 따라 Lennart Poettering과 Kay Sievers가 주도하여 Systemd가 개발되었습니다. Systemd는 병렬 실행 및 종합적인 시스템 관리 기능을 통해 현대 리눅스 시스템의 복잡성을 해결하고자 했습니다.\nSystem V Init의 이해 기본 개념과 역할 Unix System V에서 유래한 전통적인 초기화 시스템 PID 1 프로세스로 동작하며 시스템의 첫 번째 프로세스 런레벨(runlevel) 기반의 시스템 상태 관리 주요 특징 1. 런레벨 시스템 런레벨 0: 시스템 종료 런레벨 1: 단일 사용자 모드 런레벨 3: 멀티유저 모드 (CLI) 런레벨 5: 그래픽 사용자 인터페이스 모드 런레벨 6: 시스템 재부팅 2. 디렉토리 구조 /etc/init.d/: 서비스 스크립트 저장 /etc/rcN.d/: 각 런레벨(N)별 심볼릭 링크 /etc/inittab: 기본 런레벨 및 init 설정 3. 서비스 관리 명령어 service httpd start /etc/init.d/httpd stop chkconfig httpd on System V Init 제한사항 순차적 실행으로 인한 느린 부팅 속도 복잡한 의존성 관리의 어려움 동적 서비스 관리의 한계 Systemd의 등장 배경과 특징 등장 배경 현대 시스템의 복잡성 증가 병렬 처리를 통한 성능 개선 필요 더 나은 서비스 의존성 관리 요구 통합된 시스템 관리 도구의 필요성 주요 특징 시스템 초기화, 서비스 관리, 로그 관리, 시스템 상태 모니터링 등의 종합적인 기능 제공 부팅 과정에서 병렬 실행 지원 및 서비스 간 의존성 명시 Unit 파일 구조를 통한 서비스 구성과 제어의 용이성 다양한 유형의 리소스 관리 (서비스, 타이머, 장치 등) 1. Unit 시스템 [Unit] Description=My Web Service After=network.target Requires=mysql.service [Service] Type=simple ExecStart=/usr/bin/myapp Restart=always [Install] WantedBy=multi-user.target 2. 타겟(Target) 시스템 기존 런레벨을 대체하는 유연한 구조 다중 타겟 동시 활성화 가능 의존성 기반 서비스 그룹화 3. 주요 관리 명령어 # 서비스 관리 systemctl start httpd systemctl enable httpd systemctl status httpd # 로그 확인 journalctl -u httpd journalctl -f # 타겟 관리 systemctl isolate multi-user.target systemctl get-default 핵심 차이점 분석 아키텍처 비교 특징 System V Init Systemd 실행 방식 순차적 병렬 설정 방식 Shell 스크립트 Unit 파일 의존성 관리 번호 기반 순서 선언적 의존성 상태 관리 런레벨 타겟 로깅 syslog journald 기술적 비교 심화 의존성 관리 System V Init는 서비스 간 의존성을 명시적으로 관리하지 않으며, 스크립트 실행 순서로 의존성을 처리합니다. 반면, Systemd는 선언적 의존성 관리 시스템을 통해 서비스 간 의존성을 명확히 정의하고 자동으로 관리합니다.\n서비스 복구 Systemd는 서비스 실패 시 자동 재시작 기능을 제공하여 높은 가용성을 지원합니다. 이는 특히 서버 환경에서 중요한 기능으로, 서비스 중단 시 자동 복구를 통해 다운타임을 최소화할 수 있습니다.\n성능 차이 부팅 속도\nSystem V Init: 순차적 실행으로 느림 Systemd: 병렬 실행으로 최대 2-3배 빠름 리소스 사용\nSystem V Init: 경량화 Systemd: 추가 기능으로 인한 더 많은 리소스 사용 운영자/개발자 고려사항 구성 관리의 변화 Systemd의 Unit 파일은 서비스 관리 및 설정이 체계적이므로 학습 및 사용법 숙지가 필요합니다. Systemd는 타겟 기반 관리와 의존성 트리 구조를 통해 복잡한 서비스를 안정적으로 관리할 수 있습니다. 부팅 및 서비스 관리의 효율성 부팅 시간 단축, 의존성 설정, 동시 실행 지원은 운영 및 시스템 초기화 효율성을 크게 개선시킵니다. 단일 명령으로 전체 서비스를 제어하거나 로그를 분석할 수 있어, journalctl 같은 Systemd의 추가 도구를 익히면 편리합니다. 장기적인 지원 및 호환성 문제 대부분의 리눅스 배포판이 Systemd를 기본 init 시스템으로 채택했지만, 일부 배포판에서는 여전히 System V Init 또는 대체 init 시스템을 사용하기도 합니다. 일부 레거시 스크립트와의 호환성 문제가 발생할 수 있으므로, Systemd와 호환되도록 스크립트를 수정해야 할 수도 있습니다. 시스템 관리 서비스 설정\nSystem V Init: /etc/init.d/ 스크립트 수정 Systemd: Unit 파일 작성 및 관리 문제 해결\nSystem V Init: tail -f /var/log/messages Systemd: journalctl -xeu service-name 마이그레이션 고려사항 기존 Init 스크립트의 Systemd Unit 변환 의존성 관계 재정의 로깅 시스템 변경 대응 Docker 환경에서의 활용 Docker는 보통 단일 프로세스 실행을 목표로 설계되었기 때문에, init 시스템을 사용하는 대신 애플리케이션이 바로 실행됩니다. 하지만 컨테이너 내 여러 서비스 관리를 위해 systemd가 필요할 때 추가적인 설정을 통해 사용할 수 있습니다.\n1. Docker에서 System V Init 방식 사용 일반적인 Docker 컨테이너는 단일 프로세스 원칙에 따라 동작합니다. System V Init 방식으로 단일 프로세스만 실행하는 예제를 보겠습니다.\n예제: System V Init 방식으로 Nginx 실행 FROM nginx:alpine CMD [\u0026#34;nginx\u0026#34;, \u0026#34;-g\u0026#34;, \u0026#34;daemon off;\u0026#34;] 2. Docker에서 Systemd 사용 설정 Docker 컨테이너에서 Systemd를 사용하려면, cgroup 설정과 권한을 조정해야 합니다.\n예제: Systemd 사용하여 다중 서비스 실행 FROM ubuntu:20.04 RUN apt-get update \u0026amp;\u0026amp; apt-get install -y systemd VOLUME [ \u0026#34;/sys/fs/cgroup\u0026#34; ] CMD [\u0026#34;/lib/systemd/systemd\u0026#34;] 실행 방법:\ndocker build -t myapp_systemd . docker run --privileged -v /sys/fs/cgroup:/sys/fs/cgroup:ro -d myapp_systemd 3. 권장 사항 컨테이너는 단일 프로세스 원칙을 준수: 여러 서비스를 실행할 경우 별도의 컨테이너를 사용하는 것이 좋습니다. 경량화된 init 시스템 사용: 여러 프로세스를 관리할 필요가 있다면 Tini와 같은 경량화된 init 시스템을 사용하는 것이 좋습니다. 필요한 경우에만 systemd 도입: 가능한 한 가벼운 구성을 유지하는 것이 컨테이너 환경에 유리합니다. 주요 리눅스 배포판의 Systemd 도입 현황 CentOS: CentOS 7부터 systemd 기본 도입 Ubuntu: Ubuntu 15.04부터 systemd 기본 도입 Red Hat Enterprise Linux (RHEL): RHEL 7부터 systemd 기본 도입 Fedora: Fedora 15부터 systemd 기본 도입 Debian: Debian 8 (Jessie)부터 systemd 기본 도입 openSUSE 및 SUSE Linux Enterprise (SLE): openSUSE 12.1부터 systemd 도입 결론 Systemd는 현대 리눅스 시스템의 요구사항을 잘 반영한 init 시스템으로, 대부분의 주요 배포판에서 채택하고 있습니다. 하지만 컨테이너와 같은 특수한 환경에서는 상황에 맞는 적절한 초기화 방식을 선택하는 것이 중요합니다. 시스템 관리자와 개발자는 각 환경에 맞는 init 시스템의 특징을 이해하고, 이를 효과적으로 활용할 수 있어야 합니다.\n","permalink":"https://cdecl.github.io/devops/systemv-systemd/","summary":"\u003cp\u003e리눅스의 Init 시스템: System V Init와 Systemd 비교 분석 및 docker 활용\u003c/p\u003e\n\u003ch2 id=\"개요\"\u003e개요\u003c/h2\u003e\n\u003cp\u003e리눅스 시스템에서 운영체제 부팅 시 초기화를 담당하는 프로그램을 init 시스템이라고 합니다.\u003cbr\u003e\n전통적인 System V Init와 현대적인 Systemd를 비교 분석하여, 시스템 초기화 방식의 발전과 실무적 영향을 살펴보겠습니다.\u003c/p\u003e\n\u003ch2 id=\"system-v-init와-systemd의-역사적-배경\"\u003eSystem V Init와 Systemd의 역사적 배경\u003c/h2\u003e\n\u003ch3 id=\"system-v-init\"\u003eSystem V Init\u003c/h3\u003e\n\u003cp\u003e1983년 Unix System V에서 처음 도입된 init 시스템으로, 당시 컴퓨팅 환경의 단순함에 맞춰 설계되었습니다. 이 시스템은 주로 서버와 메인프레임에서 사용되었으며, 런레벨 기반의 단순한 상태 전환을 제공했습니다.\u003c/p\u003e","title":"리눅스의 Init 시스템"},{"content":"프롬프트 엔지니어링 가이드: 기초 개념부터 고급 테크닉까지 요약\n프롬프트 엔지니어링은 AI 모델에게 원하는 답변을 얻기 위해 입력을 최적화하는 기술입니다. 이 기술은 특히 대화형 AI나 데이터 생성, 모델 학습에서 중요한 역할을 하며, AI 활용의 효율성과 정확성을 크게 높일 수 있습니다.\n1. 프롬프트 엔지니어링의 개념과 중요성 정의: AI 모델의 성능을 극대화하기 위해 명확하고 체계적으로 구성된 질문이나 지시문(프롬프트)을 설계하는 기술입니다. 중요성 정확성 향상: 원하는 정보를 정확하게 얻을 수 있습니다. 효율성: 반복 작업을 줄이고, 응답 속도와 질을 높입니다. 일관성: 일정한 포맷과 내용의 응답을 보장할 수 있습니다. 비용 절감: 불필요한 재작업을 줄이고, AI API 호출 효율을 최적화합니다. 창의성 촉진: AI의 창의적 잠재력을 활용해 혁신적인 해결책을 이끌어냅니다. 2. 핵심 원칙과 테크닉 명확한 지시사항 작성 원하는 출력 형식과 구조를 구체적으로 명시합니다.\n- ❌ \u0026#34;계획을 세워줘\u0026#34; - ✅ \u0026#34;신제품 출시를 위한 3개월 마케팅 계획을 작성해줘. 항목: 목표 고객층, 채널, 예산, 성과 지표\u0026#34; 단계별 접근 유도 복잡한 작업은 단계별로 분해하여 명시합니다.\n- ❌ \u0026#34;이 수학 문제를 풀어줘\u0026#34; - ✅ \u0026#34;주어진 수학 문제를 다음 단계로 풀어줘: 1. 문제 분석, 2. 공식 적용, 3. 계산 과정 설명\u0026#34; 컨텍스트 제공 AI가 배경 정보를 이해할 수 있도록 관련 맥락을 제공합니다.\n- ❌ \u0026#34;보고서 작성해줘\u0026#34; - ✅ \u0026#34;다음 배경으로 분기별 성과 보고서를 작성해줘: 고위 경영진 대상, Q3 실적, 재무·운영·마케팅 성과 포함\u0026#34; 제약조건 명시 글자 수, 특정 용어 사용 등을 제한하여 응답의 질을 높입니다.\n- ❌ \u0026#34;블로그 포스트 써줘\u0026#34; - ✅ \u0026#34;AI 트렌드 관련 블로그 포스트, 1000자 내외, ‘머신러닝’과 ‘딥러닝’ 포함, 기술적 용어 최소화\u0026#34; 예시 제공 원하는 응답 형식을 구체적으로 제시하면 AI가 참고하여 유사하게 응답합니다.\n- ❌ \u0026#34;제품 설명 작성해줘\u0026#34; - ✅ \u0026#34;예시와 같은 형식으로 작성: 제품명, 핵심 가치, 주요 특징, 가격\u0026#34; 3. 실전 가이드라인 프롬프트 작성 프로세스 준비 단계 목표 명확화, 출력 형식 결정, 필요 정보 수집 작성 단계 명확한 지시어 사용, 구조화된 형식 활용, 예시 포함 검증 단계 출력물 품질 확인, 의도한 결과와 비교, 필요시 프롬프트 수정 프롬프트 최적화 전략 반복적 개선: 초기 결과를 분석하고 문제점 파악 후 프롬프트 수정 컨텍스트 최적화: 관련 정보만 포함하고 불필요한 정보는 제거 출력 품질 향상: 품질 기준을 명확히 하고 이를 피드백 루프에 반영 4. 문제해결과 최적화 전략 일반적인 문제와 해결 방법 모호한 출력: 구체적인 요구사항과 예시를 추가해 해결 불완전한 응답: 요구사항을 체크리스트로 제시하여 정보 누락 방지 일관성 부족: 템플릿과 구조화된 형식을 사용하여 일관성을 유지 성능 최적화 기법 토큰 효율성: 간결한 지시어와 핵심 정보로 프롬프트를 구성하여 응답의 신속성 향상 컨텍스트 최적화: 관련된 정보만 포함하여 응답의 정확성을 극대화 5. 고급 전략과 창의적 응답 최적화 복잡한 작업 처리 다단계 프롬프트: 작업을 단계별로 나누고 중간 결과를 검증하여 높은 정확도를 유지 조건부 로직: if-then 구조를 활용해 예외를 처리하고 다양한 시나리오에 유연하게 대응 창의적 작업 최적화 아이디어 생성: 다양한 관점을 요청하고 참조 사례를 제시하여 독창적인 응답 도출 품질 향상: 구체적인 평가 기준을 제시하고 피드백을 반영해 응답 개선 6. 프롬프트 검증 및 개선 체크리스트 활용 작성 전 체크리스트: 목표 명확성, 컨텍스트 제공, 출력 형식, 품질 기준 확인 작성 중 체크리스트: 지시사항의 명확성, 예시 포함, 구조화된 형식, 제약조건 명시 검증 체크리스트: 의도한 결과 확인, 일관성 점검, 품질 기준 충족 여부 7. 결론 및 다음 단계 핵심 요약 프롬프트 엔지니어링은 AI와의 효과적인 커뮤니케이션을 위한 필수 기술로, 명확한 지시와 구조화된 접근을 통해 효율적이고 일관된 응답을 얻을 수 있습니다.\n가이드의 원칙을 실제 프로젝트에 적용 결과를 분석하고 문서화 팀 내 베스트 프랙티스 공유 최신 AI 기능 학습과 피드백을 통해 지속적인 개선 프롬프트 엔지니어링은 실천과 경험을 통해 발전하는 분야입니다. 경험을 쌓고 변화하는 AI 기술에 유연하게 적응하면서 이 스킬을 지속적으로 향상시키는 것이 중요합니다.\n","permalink":"https://cdecl.github.io/dev/ai-prompt-engineering/","summary":"\u003cp\u003e프롬프트 엔지니어링 가이드: 기초 개념부터 고급 테크닉까지 요약\u003c/p\u003e\n\u003cp\u003e프롬프트 엔지니어링은 AI 모델에게 원하는 답변을 얻기 위해 입력을 최적화하는 기술입니다. 이 기술은 특히 대화형 AI나 데이터 생성, 모델 학습에서 중요한 역할을 하며, AI 활용의 효율성과 정확성을 크게 높일 수 있습니다.\u003c/p\u003e\n\u003ch2 id=\"1-프롬프트-엔지니어링의-개념과-중요성\"\u003e1. 프롬프트 엔지니어링의 개념과 중요성\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003e정의\u003c/strong\u003e: AI 모델의 성능을 극대화하기 위해 명확하고 체계적으로 구성된 질문이나 지시문(프롬프트)을 설계하는 기술입니다.\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e중요성\u003c/strong\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003e정확성 향상\u003c/strong\u003e: 원하는 정보를 정확하게 얻을 수 있습니다.\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e효율성\u003c/strong\u003e: 반복 작업을 줄이고, 응답 속도와 질을 높입니다.\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e일관성\u003c/strong\u003e: 일정한 포맷과 내용의 응답을 보장할 수 있습니다.\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e비용 절감\u003c/strong\u003e: 불필요한 재작업을 줄이고, AI API 호출 효율을 최적화합니다.\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e창의성 촉진\u003c/strong\u003e: AI의 창의적 잠재력을 활용해 혁신적인 해결책을 이끌어냅니다.\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"2-핵심-원칙과-테크닉\"\u003e2. 핵심 원칙과 테크닉\u003c/h2\u003e\n\u003ch3 id=\"명확한-지시사항-작성\"\u003e명확한 지시사항 작성\u003c/h3\u003e\n\u003cp\u003e원하는 출력 형식과 구조를 구체적으로 명시합니다.\u003c/p\u003e","title":"프롬프트 엔지니어링 기본 가이드"},{"content":"Python PEP 8 스타일 가이드\n1. PEP 8이란? PEP 8(Python Enhancement Proposal 8)은 Python 코드의 가독성과 일관성을 향상시키기 위한 스타일 가이드입니다. Python의 창시자인 Guido van Rossum이 작성했으며, Python 커뮤니티에서 널리 채택된 코딩 표준입니다.\n1.1 PEP 8의 목적 코드의 가독성 향상 일관된 코딩 스타일 유지 협업 효율성 증대 코드 유지보수 용이성 향상 2. PEP 8 주요 규약 2.1 코드 레이아웃 들여쓰기 4칸 공백 사용 # 올바른 들여쓰기 (4칸 공백 사용) def long_function_name( var_one, var_two, var_three, var_four): print(var_one) # 잘못된 들여쓰기 def long_function_name( var_one, var_two, # 들여쓰기가 부족함 var_three, var_four): print(var_one) 최대 줄 길이 한 줄은 최대 79자 긴 줄은 여러 줄로 나누기 백슬래시() 사용하여 줄 나누기 # 올바른 예시 from mypkg.mymodule import ( function1, function2, function3, function4) long_string = (\u0026#39;This is a very long string that \u0026#39; \u0026#39;cannot fit within 79 characters \u0026#39; \u0026#39;so we split it into multiple lines.\u0026#39;) 2.2 공백 규칙 연산자 주변 공백 # 올바른 예시 x = 1 y = 2 long_variable = 3 # 잘못된 예시 x=1 y = 2 long_variable = 3 쉼표 후 공백 # 올바른 예시 def complex_function(x, y, z): pass # 잘못된 예시 def complex_function(x,y,z): pass 2.3 명명 규칙 변수명 : snake case 소문자 사용 단어 사이는 언더스코어(_)로 구분 my_variable = 1 count_of_users = 10 first_name = \u0026#34;John\u0026#34; 함수명 : snake case 소문자 사용 단어 사이는 언더스코어로 구분 def calculate_average(): pass def get_user_info(): pass 클래스명 : Pascal Case) CapWords(Pascal Case) 컨벤션 사용 class UserAccount: pass class DatabaseConnection: pass 상수 대문자와 언더스코어 사용 MAX_CONNECTIONS = 100 DEFAULT_TIMEOUT = 30 2.4 제어문 스타일 if 문 # 올바른 예시 if x is not None: pass if x == 4: print(\u0026#39;x is 4\u0026#39;) elif x == 5: print(\u0026#39;x is 5\u0026#39;) else: print(\u0026#39;x is not 4 or 5\u0026#39;) # 잘못된 예시 if x!=None: pass for 문 # 올바른 예시 for i in range(5): print(i) # 리스트 컴프리헨션 (한 줄인 경우) squares = [x**2 for x in range(10)] # 리스트 컴프리헨션 (복잡한 경우) squares = [ x**2 for x in range(10) if x % 2 == 0 ] 2.5 주석 작성 규칙 인라인 주석 x = 5 # 이것은 인라인 주석입니다 # 잘못된 예시 x = 5# 공백이 없음 문서화 문자열 (Docstrings) def complex_function(param1, param2): \u0026#34;\u0026#34;\u0026#34;이 함수는 복잡한 연산을 수행합니다. Args: param1 (int): 첫 번째 매개변수 param2 (str): 두 번째 매개변수 Returns: bool: 연산 성공 여부 \u0026#34;\u0026#34;\u0026#34; pass 3. VS Code에서 PEP 8 설정하기 3.1 필수 플러그인 Python Extension Pack Python 언어 지원 기본적인 PEP 8 검사 기능 포함 Pylint 코드 분석 도구 PEP 8 규칙 검사 { \u0026#34;python.linting.pylintEnabled\u0026#34;: true, \u0026#34;python.linting.enabled\u0026#34;: true } Flake8 PEP 8 스타일 가이드 검사\n구문 오류 검사\n복잡도 검사\n설치:\npip install flake8 VS Code 설정:\n{ \u0026#34;python.linting.flake8Enabled\u0026#34;: true, \u0026#34;python.linting.enabled\u0026#34;: true, \u0026#34;python.linting.flake8Args\u0026#34;: [ \u0026#34;--max-line-length=79\u0026#34;, \u0026#34;--extend-ignore=E203\u0026#34;, \u0026#34;--per-file-ignores=__init__.py:F401\u0026#34; ] } .flake8 설정 파일 예시:\n심플 버전\n[flake8] # 행 길이 제한 max-line-length = 79 # 무시할 에러/경고 ignore = E501 # 줄 길이 초과 기본 버전\n[flake8] # 행 길이 제한 max-line-length = 79 # 무시할 에러/경고 ignore = # 라인 끝 공백 W291, # 모듈 레벨 import가 아닌 경우 E402, # 라인 중간 공백 E203, # 한 줄에 여러 문장 E701, # break 이후 문장 E722 # 복잡도 제한 max-complexity = 10 # 파일별 무시할 규칙 per-file-ignores = # __init__.py 파일의 미사용 import 무시 __init__.py:F401 # 테스트 파일의 긴 줄 무시 test_*.py:E501 # 파일 이름 패턴 filename = *.py # 통계 출력 statistics = True # 에러 카운트 출력 count = True # 파이썬 버전 설정 # python 버전을 명시적으로 지정 max-python-version = 3.9 # 인라인 설정 허용 # flake8: noqa 주석 허용 disable-noqa = False flake8의 주요 에러 코드:\nE1**: 들여쓰기 관련 E2**: 공백 관련 E3**: 빈 줄 관련 E4**: Import 관련 E5**: 줄 길이 관련 E7**: 문장 관련 E9**: 구문 에러 F4**: Import 관련 F5**: 루프 변수 정의 F6**: except 관련 F8**: 이름 정의 W291-W293: 공백 관련 경고 C901: 복잡도 관련 autopep8 자동 코드 포맷팅\npip install autopep8 VS Code 설정:\n{ \u0026#34;python.formatting.provider\u0026#34;: \u0026#34;autopep8\u0026#34;, \u0026#34;editor.formatOnSave\u0026#34;: true } Black 더 엄격한 자동 포맷팅 도구\npip install black VS Code 설정:\n{ \u0026#34;python.formatting.provider\u0026#34;: \u0026#34;black\u0026#34;, \u0026#34;python.formatting.blackArgs\u0026#34;: [ \u0026#34;--line-length\u0026#34;, \u0026#34;79\u0026#34; ] } 3.2 추천 VS Code 설정 { \u0026#34;editor.rulers\u0026#34;: [79], \u0026#34;editor.detectIndentation\u0026#34;: false, \u0026#34;editor.tabSize\u0026#34;: 4, \u0026#34;editor.insertSpaces\u0026#34;: true, \u0026#34;python.linting.enabled\u0026#34;: true, \u0026#34;python.linting.pylintEnabled\u0026#34;: true, \u0026#34;python.formatting.provider\u0026#34;: \u0026#34;black\u0026#34;, \u0026#34;editor.formatOnSave\u0026#34;: true, \u0026#34;files.trimTrailingWhitespace\u0026#34;: true } 4. 결론 초기에는 다소 엄격하게 느껴질 수 있지만, 이러한 규칙들은 코드의 가독성과 유지보수성을 크게 향상시킵니다. VS Code의 다양한 도구들을 활용하면 PEP 8 규칙을 쉽게 준수할 수 있으며, 자동화된 포맷팅으로 개발 효율성도 높일 수 있습니다. ","permalink":"https://cdecl.github.io/dev/python-pep8/","summary":"\u003cp\u003ePython PEP 8 스타일 가이드\u003c/p\u003e\n\u003ch2 id=\"1-pep-8이란\"\u003e1. PEP 8이란?\u003c/h2\u003e\n\u003cp\u003ePEP 8(Python Enhancement Proposal 8)은 Python 코드의 가독성과 일관성을 향상시키기 위한 스타일 가이드입니다. Python의 창시자인 Guido van Rossum이 작성했으며, Python 커뮤니티에서 널리 채택된 코딩 표준입니다.\u003c/p\u003e\n\u003ch3 id=\"11-pep-8의-목적\"\u003e1.1 PEP 8의 목적\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e코드의 가독성 향상\u003c/li\u003e\n\u003cli\u003e일관된 코딩 스타일 유지\u003c/li\u003e\n\u003cli\u003e협업 효율성 증대\u003c/li\u003e\n\u003cli\u003e코드 유지보수 용이성 향상\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"2-pep-8-주요-규약\"\u003e2. PEP 8 주요 규약\u003c/h2\u003e\n\u003ch3 id=\"21-코드-레이아웃\"\u003e2.1 코드 레이아웃\u003c/h3\u003e\n\u003ch4 id=\"들여쓰기\"\u003e들여쓰기\u003c/h4\u003e\n\u003cul\u003e\n\u003cli\u003e4칸 공백 사용\u003c/li\u003e\n\u003c/ul\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-python\" data-lang=\"python\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# 올바른 들여쓰기 (4칸 공백 사용)\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003edef\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003elong_function_name\u003c/span\u003e(\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        var_one, var_two,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        var_three, var_four):\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    print(var_one)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# 잘못된 들여쓰기\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003edef\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003elong_function_name\u003c/span\u003e(\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    var_one, var_two,  \u003cspan style=\"color:#75715e\"\u003e# 들여쓰기가 부족함\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    var_three, var_four):\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    print(var_one)\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch4 id=\"최대-줄-길이\"\u003e최대 줄 길이\u003c/h4\u003e\n\u003cul\u003e\n\u003cli\u003e한 줄은 최대 79자\u003c/li\u003e\n\u003cli\u003e긴 줄은 여러 줄로 나누기\u003c/li\u003e\n\u003cli\u003e백슬래시() 사용하여 줄 나누기\u003c/li\u003e\n\u003c/ul\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-python\" data-lang=\"python\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# 올바른 예시\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003efrom\u003c/span\u003e mypkg.mymodule \u003cspan style=\"color:#f92672\"\u003eimport\u003c/span\u003e (\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    function1, function2,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    function3, function4)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003elong_string \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e (\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;This is a very long string that \u0026#39;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e               \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;cannot fit within 79 characters \u0026#39;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e               \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;so we split it into multiple lines.\u0026#39;\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch3 id=\"22-공백-규칙\"\u003e2.2 공백 규칙\u003c/h3\u003e\n\u003ch4 id=\"연산자-주변-공백\"\u003e연산자 주변 공백\u003c/h4\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-python\" data-lang=\"python\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# 올바른 예시\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ex \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ey \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e2\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003elong_variable \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e3\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# 잘못된 예시\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ex\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ey    \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e2\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003elong_variable    \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e3\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch4 id=\"쉼표-후-공백\"\u003e쉼표 후 공백\u003c/h4\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-python\" data-lang=\"python\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# 올바른 예시\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003edef\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003ecomplex_function\u003c/span\u003e(x, y, z):\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#66d9ef\"\u003epass\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# 잘못된 예시\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003edef\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003ecomplex_function\u003c/span\u003e(x,y,z):\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#66d9ef\"\u003epass\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch3 id=\"23-명명-규칙\"\u003e2.3 명명 규칙\u003c/h3\u003e\n\u003ch4 id=\"변수명--snake-case\"\u003e변수명 : snake case\u003c/h4\u003e\n\u003cul\u003e\n\u003cli\u003e소문자 사용\u003c/li\u003e\n\u003cli\u003e단어 사이는 언더스코어(_)로 구분\u003c/li\u003e\n\u003c/ul\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-python\" data-lang=\"python\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003emy_variable \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ecount_of_users \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e10\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003efirst_name \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;John\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch4 id=\"함수명--snake-case\"\u003e함수명 : snake case\u003c/h4\u003e\n\u003cul\u003e\n\u003cli\u003e소문자 사용\u003c/li\u003e\n\u003cli\u003e단어 사이는 언더스코어로 구분\u003c/li\u003e\n\u003c/ul\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-python\" data-lang=\"python\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003edef\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003ecalculate_average\u003c/span\u003e():\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#66d9ef\"\u003epass\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003edef\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eget_user_info\u003c/span\u003e():\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#66d9ef\"\u003epass\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch4 id=\"클래스명--pascal-case\"\u003e클래스명 : Pascal Case)\u003c/h4\u003e\n\u003cul\u003e\n\u003cli\u003eCapWords(Pascal Case) 컨벤션 사용\u003c/li\u003e\n\u003c/ul\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-python\" data-lang=\"python\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003eclass\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eUserAccount\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#66d9ef\"\u003epass\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003eclass\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eDatabaseConnection\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#66d9ef\"\u003epass\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch4 id=\"상수\"\u003e상수\u003c/h4\u003e\n\u003cul\u003e\n\u003cli\u003e대문자와 언더스코어 사용\u003c/li\u003e\n\u003c/ul\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-python\" data-lang=\"python\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eMAX_CONNECTIONS \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e100\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eDEFAULT_TIMEOUT \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e30\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch3 id=\"24-제어문-스타일\"\u003e2.4 제어문 스타일\u003c/h3\u003e\n\u003ch4 id=\"if-문\"\u003eif 문\u003c/h4\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-python\" data-lang=\"python\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# 올바른 예시\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003eif\u003c/span\u003e x \u003cspan style=\"color:#f92672\"\u003eis\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003enot\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003eNone\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#66d9ef\"\u003epass\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003eif\u003c/span\u003e x \u003cspan style=\"color:#f92672\"\u003e==\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e4\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    print(\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;x is 4\u0026#39;\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003eelif\u003c/span\u003e x \u003cspan style=\"color:#f92672\"\u003e==\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e5\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    print(\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;x is 5\u0026#39;\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003eelse\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    print(\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;x is not 4 or 5\u0026#39;\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# 잘못된 예시\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003eif\u003c/span\u003e x\u003cspan style=\"color:#f92672\"\u003e!=\u003c/span\u003e\u003cspan style=\"color:#66d9ef\"\u003eNone\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#66d9ef\"\u003epass\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch4 id=\"for-문\"\u003efor 문\u003c/h4\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-python\" data-lang=\"python\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# 올바른 예시\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003efor\u003c/span\u003e i \u003cspan style=\"color:#f92672\"\u003ein\u003c/span\u003e range(\u003cspan style=\"color:#ae81ff\"\u003e5\u003c/span\u003e):\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    print(i)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# 리스트 컴프리헨션 (한 줄인 경우)\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003esquares \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e [x\u003cspan style=\"color:#f92672\"\u003e**\u003c/span\u003e\u003cspan style=\"color:#ae81ff\"\u003e2\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003efor\u003c/span\u003e x \u003cspan style=\"color:#f92672\"\u003ein\u003c/span\u003e range(\u003cspan style=\"color:#ae81ff\"\u003e10\u003c/span\u003e)]\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# 리스트 컴프리헨션 (복잡한 경우)\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003esquares \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e [\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    x\u003cspan style=\"color:#f92672\"\u003e**\u003c/span\u003e\u003cspan style=\"color:#ae81ff\"\u003e2\u003c/span\u003e \n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#66d9ef\"\u003efor\u003c/span\u003e x \u003cspan style=\"color:#f92672\"\u003ein\u003c/span\u003e range(\u003cspan style=\"color:#ae81ff\"\u003e10\u003c/span\u003e) \n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#66d9ef\"\u003eif\u003c/span\u003e x \u003cspan style=\"color:#f92672\"\u003e%\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e2\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e==\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e0\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e]\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch3 id=\"25-주석-작성-규칙\"\u003e2.5 주석 작성 규칙\u003c/h3\u003e\n\u003ch4 id=\"인라인-주석\"\u003e인라인 주석\u003c/h4\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-python\" data-lang=\"python\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ex \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e5\u003c/span\u003e  \u003cspan style=\"color:#75715e\"\u003e# 이것은 인라인 주석입니다\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# 잘못된 예시\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ex \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e5\u003c/span\u003e\u003cspan style=\"color:#75715e\"\u003e# 공백이 없음\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch4 id=\"문서화-문자열-docstrings\"\u003e문서화 문자열 (Docstrings)\u003c/h4\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-python\" data-lang=\"python\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003edef\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003ecomplex_function\u003c/span\u003e(param1, param2):\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u0026#34;\u0026#34;이 함수는 복잡한 연산을 수행합니다.\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003e    Args:\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003e        param1 (int): 첫 번째 매개변수\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003e        param2 (str): 두 번째 매개변수\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003e    Returns:\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003e        bool: 연산 성공 여부\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003e    \u0026#34;\u0026#34;\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#66d9ef\"\u003epass\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch2 id=\"3-vs-code에서-pep-8-설정하기\"\u003e3. VS Code에서 PEP 8 설정하기\u003c/h2\u003e\n\u003ch3 id=\"31-필수-플러그인\"\u003e3.1 필수 플러그인\u003c/h3\u003e\n\u003ch4 id=\"python-extension-pack\"\u003e\u003cstrong\u003ePython Extension Pack\u003c/strong\u003e\u003c/h4\u003e\n\u003cul\u003e\n\u003cli\u003ePython 언어 지원\u003c/li\u003e\n\u003cli\u003e기본적인 PEP 8 검사 기능 포함\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch4 id=\"pylint\"\u003e\u003cstrong\u003ePylint\u003c/strong\u003e\u003c/h4\u003e\n\u003cul\u003e\n\u003cli\u003e코드 분석 도구\u003c/li\u003e\n\u003cli\u003ePEP 8 규칙 검사\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-json\" data-lang=\"json\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e{\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003e\u0026#34;python.linting.pylintEnabled\u0026#34;\u003c/span\u003e: \u003cspan style=\"color:#66d9ef\"\u003etrue\u003c/span\u003e,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003e\u0026#34;python.linting.enabled\u0026#34;\u003c/span\u003e: \u003cspan style=\"color:#66d9ef\"\u003etrue\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e}\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch4 id=\"flake8\"\u003e\u003cstrong\u003eFlake8\u003c/strong\u003e\u003c/h4\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003ePEP 8 스타일 가이드 검사\u003c/p\u003e","title":"Python PEP 8 스타일 가이드"},{"content":"xargs - 효율적인 명령어 인수 처리와 병렬 실행\nxargs 명령어: 효율적인 명령어 확장과 파라미터 전달 xargs 명령어는 한 명령어의 출력을 다른 명령어의 인수로 전달할 때 유용하게 사용됩니다. 특히 명령어의 파라미터가 길어지거나 여러 파일, 디렉토리를 대상으로 명령어를 실행해야 할 때 xargs를 사용하면 성능과 효율성을 높일 수 있습니다.\n주요 옵션과 활용 예시 1. 기본 사용법 xargs는 기본적으로 표준 입력에서 받은 데이터를 공백 또는 개행으로 구분하여 후속 명령어의 인수로 전달합니다.\n예시:\necho \u0026#34;file1 file2 file3\u0026#34; | xargs ls -l file1, file2, file3을 ls -l의 인수로 전달하여 파일의 상세 정보를 출력합니다.\n옵션 설명 예제 사용 -L 입력을 지정된 줄 단위로 처리하여 전달합니다. xargs -L 1 -I 자리 표시자(placeholder)를 설정하여 인수 위치를 지정합니다. xargs -I {} -n 지정된 개수의 단어 단위로 인수를 전달합니다. xargs -n 1 -P 병렬 프로세스 개수를 설정하여 명령어를 병렬로 실행합니다. xargs -P 3 2. -L 옵션: 인수로 라인 단위 전달 -L 옵션은 지정한 라인 수만큼의 인수를 한 번에 전달합니다. 예시: echo -e \u0026#34;arg1\\narg2\\narg3\u0026#34; | xargs -L 1 echo \u0026#34;argument:\u0026#34; 각 줄마다 echo 명령어를 실행하여 출력합니다. L 1을 통해 줄 단위로 인수를 전달할 수 있습니다. 3. sh 명령을 통한 확장 실행 xargs와 sh 명령어를 함께 사용하면 여러 명령어를 동적으로 확장하여 실행할 수 있습니다. 예시: echo \u0026#34;file1 file2 file3\u0026#34; | xargs -I {} sh -c \u0026#34;echo 파일 이름: {}; cat {}\u0026#34; -I {}를 통해 자리 표시자를 설정하여 sh에서 각 파일에 대해 cat 명령어를 개별적으로 실행합니다. 4. -I 옵션: placeholder(자리 표시자)를 통한 인수 위치 지정 -I 옵션을 사용하면 고정된 포맷에 데이터를 끼워 넣을 수 있습니다. 예시: echo \u0026#34;image1.png image2.png\u0026#34; | xargs -I {} echo \u0026#34;Processing file: {}\u0026#34; 출력: Processing file: image1.png Processing file: image2.png 5. 파일 내용을 읽어 명령어에 인수로 전달하기 xargs는 파일 내용을 인수로 받을 수 있어 효율적인 배치 처리를 돕습니다. 예시: xargs -a filenames.txt rm filenames.txt의 내용을 인수로 읽어 각 파일을 삭제합니다. 6. 한 라인 또는 한 단어 단위로 인수 처리하기 xargs는 기본적으로 공백을 기준으로 입력을 구분하지만, 옵션을 통해 한 라인씩 처리하도록 설정할 수 있습니다. 예시: echo -e \u0026#34;file1\\nfile2\\nfile3\u0026#34; | xargs -n 1 echo \u0026#34;Processing\u0026#34; -n 1을 통해 한 번에 한 단어씩 출력합니다. (표준 입력에서 가져오는 최대 인수 수를 설정) 7. -P 옵션: 병렬 처리로 효율성 높이기 -P 옵션은 여러 명령어를 병렬로 실행하여 속도를 높입니다. 예시: echo \u0026#34;url1 url2 url3\u0026#34; | xargs -P 3 -n 1 curl -O -P 3은 3개의 병렬 프로세스를 실행하며 각 URL에 대해 curl 명령어를 수행하여 다운로드합니다. 결론 xargs는 대량의 데이터를 효과적으로 처리하고 다른 명령어에 인수를 전달하는 데 필수적인 도구입니다.\n이를 통해 더 효율적으로 명령어를 확장하고 처리 시간을 단축할 수 있습니다.\n","permalink":"https://cdecl.github.io/devops/xargs-command-guide/","summary":"\u003cp\u003e\u003ccode\u003exargs\u003c/code\u003e - 효율적인 명령어 인수 처리와 병렬 실행\u003c/p\u003e\n\u003ch2 id=\"xargs-명령어-효율적인-명령어-확장과-파라미터-전달\"\u003exargs 명령어: 효율적인 명령어 확장과 파라미터 전달\u003c/h2\u003e\n\u003cp\u003e\u003ccode\u003exargs\u003c/code\u003e 명령어는 한 명령어의 출력을 다른 명령어의 인수로 전달할 때 유용하게 사용됩니다. 특히 명령어의 파라미터가 길어지거나 여러 파일, 디렉토리를 대상으로 명령어를 실행해야 할 때 \u003ccode\u003exargs\u003c/code\u003e를 사용하면 성능과 효율성을 높일 수 있습니다.\u003c/p\u003e\n\u003ch2 id=\"주요-옵션과-활용-예시\"\u003e주요 옵션과 활용 예시\u003c/h2\u003e\n\u003ch3 id=\"1-기본-사용법\"\u003e1. 기본 사용법\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003e\u003ccode\u003exargs\u003c/code\u003e는 기본적으로 표준 입력에서 받은 데이터를 공백 또는 개행으로 구분하여 후속 명령어의 인수로 전달합니다.\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e예시:\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eecho \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;file1 file2 file3\u0026#34;\u003c/span\u003e | xargs ls -l\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e\u003ccode\u003efile1\u003c/code\u003e, \u003ccode\u003efile2\u003c/code\u003e, \u003ccode\u003efile3\u003c/code\u003e을 \u003ccode\u003els -l\u003c/code\u003e의 인수로 전달하여 파일의 상세 정보를 출력합니다.\u003c/p\u003e","title":"xargs - 효율적인 명령어 인수 처리와 병렬 실행"},{"content":"Git 커밋 메시지 수정\nGit 커밋 메시지 수정 가이드 Git을 사용하다 보면 커밋 메시지를 수정해야 할 경우가 자주 발생합니다.\n이 글에서는 가장 기본적인 방법부터 고급 기술까지 모든 커밋 메시지 수정 방법을 다루겠습니다.\n기본적인 커밋 메시지 수정 방법 1. 가장 최근 커밋 메시지 수정 가장 최근의 커밋 메시지를 수정하는 것은 매우 간단합니다.\ngit commit --amend 또는 에디터를 열지 않고 직접 메시지를 입력할 수우도 있습니다:\ngit commit --amend -m \u0026#34;새로운 커밋 메시지\u0026#34; 2. 커밋 내용과 메시지 함께 수정 파일 변경사항을 포함하여 최근 커밋을 수정할 수 있습니다:\n# 파일 수정 후 git add 수정된_파일 git commit --amend 3. 커밋 날짜 업데이트 커밋의 날짜를 현재 시간으로 업데이트하면서 수정:\ngit commit --amend --date=\u0026#34;now\u0026#34; rebase를 이용한 고급 수정 방법 reword와 edit 명령어 비교 기능 reword edit 커밋 메시지 수정 ✅ ✅ 커밋 내용 수정 ❌ ✅ 실행 복잡도 낮음 높음 작업 중단 여부 자동 진행 수동 진행 필요 reword 사용법 reword는 커밋 메시지만 수정할 때 사용합니다.\n# 1. 대화형 rebase 시작 git rebase -i HEAD~3 # 최근 3개의 커밋 수정 # 2. 에디터에서 수정할 커밋의 \u0026#39;pick\u0026#39;을 \u0026#39;reword\u0026#39;로 변경 pick 1a2b3c4 첫 번째 커밋 reword 2d3e4f5 두 번째 커밋 pick 3g4h5i6 세 번째 커밋 # 3. 저장 후 종료하면 새 에디터가 열림 # 4. 새 커밋 메시지 입력 # 5. 저장 후 종료 edit 사용법 edit은 커밋 메시지와 내용을 모두 수정할 때 사용합니다.\n# 1. 대화형 rebase 시작 git rebase -i HEAD~3 # 2. 에디터에서 \u0026#39;pick\u0026#39;을 \u0026#39;edit\u0026#39;으로 변경 pick 1a2b3c4 첫 번째 커밋 edit 2d3e4f5 두 번째 커밋 pick 3g4h5i6 세 번째 커밋 # 3. rebase가 해당 커밋에서 중지됨 # 4. 파일 수정 git add 수정된_파일 git commit --amend # 5. rebase 계속 진행 git rebase --continue 사용 예제 1. 최근 커밋 수정하기 # 메시지만 수정 git commit --amend -m \u0026#34;새로운 메시지\u0026#34; # 파일 내용도 함께 수정 git add 수정된_파일 git commit --amend 2. 이전 커밋 수정하기 # reword로 메시지만 수정 git rebase -i HEAD~3 # 에디터에서 \u0026#39;reword\u0026#39; 선택 # edit으로 내용까지 수정 git rebase -i HEAD~3 # 에디터에서 \u0026#39;edit\u0026#39; 선택 git add 수정할_파일 git commit --amend git rebase --continue 3. 여러 커밋 한 번에 수정하기 git rebase -i HEAD~5 # 여러 커밋의 \u0026#39;pick\u0026#39;을 \u0026#39;reword\u0026#39;나 \u0026#39;edit\u0026#39;으로 변경 주의사항 1. 공유된 브랜치 작업 시 주의점 이미 push한 커밋 수정 시 force push 필요 팀 브랜치는 신중하게 수정 force push 시 \u0026ndash;force-with-lease 권장 git push --force-with-lease origin branch-name 2. 안전한 작업을 위한 팁 # 작업 전 백업 브랜치 생성 git checkout -b backup/feature-branch # 문제 발생 시 rebase 취소 git rebase --abort # 충돌 발생 시 git add . git rebase --continue 3. 커밋 수정 시 고려사항 의미 있는 커밋 메시지 작성 하나의 커밋은 하나의 논리적 변경사항만 포함 커밋 메시지는 명확하고 상세하게 작성 팀의 커밋 메시지 컨벤션 준수 결론 Git은 커밋 수정을 위한 다양한 도구를 제공합니다:\n간단한 수정은 --amend 사용 복잡한 수정은 rebase 활용 reword는 메시지만, edit은 전체 수정 시 사용 공유 브랜치 작업 시 항상 신중하게 접근 이러한 도구들을 적절히 활용하면 깔끔한 커밋 히스토리를 유지할 수 있습니다. 하지만 항상 팀과의 협업을 고려하여 신중하게 사용해야 합니다.\n참고 자료 Git 공식 문서: https://git-scm.com/book/ko/v2 Git Rebase 문서: https://git-scm.com/docs/git-rebase ","permalink":"https://cdecl.github.io/dev/git-rebase-commit-message-edit-guide/","summary":"\u003cp\u003eGit 커밋 메시지 수정\u003c/p\u003e\n\u003ch2 id=\"git-커밋-메시지-수정-가이드\"\u003eGit 커밋 메시지 수정 가이드\u003c/h2\u003e\n\u003cp\u003eGit을 사용하다 보면 커밋 메시지를 수정해야 할 경우가 자주 발생합니다.\u003cbr\u003e\n이 글에서는 가장 기본적인 방법부터 고급 기술까지 모든 커밋 메시지 수정 방법을 다루겠습니다.\u003c/p\u003e\n\u003ch2 id=\"기본적인-커밋-메시지-수정-방법\"\u003e기본적인 커밋 메시지 수정 방법\u003c/h2\u003e\n\u003ch3 id=\"1-가장-최근-커밋-메시지-수정\"\u003e1. 가장 최근 커밋 메시지 수정\u003c/h3\u003e\n\u003cp\u003e가장 최근의 커밋 메시지를 수정하는 것은 매우 간단합니다.\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003egit commit --amend\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003e또는 에디터를 열지 않고 직접 메시지를 입력할 수우도 있습니다:\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003egit commit --amend -m \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;새로운 커밋 메시지\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch3 id=\"2-커밋-내용과-메시지-함께-수정\"\u003e2. 커밋 내용과 메시지 함께 수정\u003c/h3\u003e\n\u003cp\u003e파일 변경사항을 포함하여 최근 커밋을 수정할 수 있습니다:\u003c/p\u003e","title":"Git 커밋 메시지 수정"},{"content":"sed 명령어: 텍스트 패턴 캡처와 치환 활용법\nsed는 파일이나 텍스트 스트림의 내용에서 특정 패턴을 찾아 변경하는 데 유용한 **스트림 편집기(Stream Editor)**입니다.\n특히 정규 표현식 기능을 통해 텍스트의 특정 부분을 캡처하고 치환하는 기능이 강력합니다.\n이번 글에서는 -E 및 -r 옵션을 사용하여 더 간편하게 캡처 그룹을 생성하고 치환하는 방법을 소개하겠습니다.\n1. sed 명령어 정의 및 용도 sed는 파일이나 텍스트를 자동으로 조작하는 명령어로, 주로 Linux 및 Unix 환경에서 사용됩니다.\nsed는 스크립트 없이도 다양한 텍스트 처리 작업을 쉽게 수행할 수 있는 장점이 있으며, 주요 용도는 다음과 같습니다:\n텍스트의 검색과 대체: 특정 패턴을 찾고 이를 다른 내용으로 바꾸기 특정 범위의 텍스트 추출: 텍스트에서 원하는 구간을 추출하여 출력 텍스트 삭제: 특정 패턴을 찾아 삭제하거나 특정 범위의 텍스트 삭제 2. -E 또는 -r 옵션의 활용 -E 또는 -r 옵션을 사용하면 **확장 정규 표현식(Extended Regular Expressions, ERE)**을 사용할 수 있어, \\(와 \\) 대신 그냥 (와 )로 캡처 그룹을 정의할 수 있습니다. 이는 구문을 더욱 직관적으로 작성할 수 있게 해 줍니다.\n-E: GNU sed와 BSD sed 모두에서 사용할 수 있는 ERE 옵션 -r: GNU sed에서만 사용되는 ERE 옵션 -E 옵션을 활용하되, GNU sed 사용자라면 -r 옵션으로 대체하여 사용할 수 있습니다.\n3. 정규 표현식을 이용한 패턴 캡처 및 치환 -E 또는 -r 옵션을 사용하여 캡처 그룹을 정의하고 치환하는 다양한 예제를 살펴보겠습니다.\n예제 1: 특정 패턴을 캡처하여 치환 name: value 형식의 텍스트에서 name 부분을 캡처하여 name = value 형식으로 치환하는 예제입니다.\nsed -E \u0026#39;s/(name): (.*)/\\1 = \\2/\u0026#39; filename (name): name이라는 텍스트를 캡처합니다. (.*): 임의의 텍스트를 모두 캡처합니다. \\1 = \\2: name = value 형식으로 출력합니다. 예제 실행 결과 입력 파일 내용: name: Alice name: Bob 출력: name = Alice name = Bob 예제 2: 여러 그룹을 캡처하여 순서 변경 firstname lastname 형식의 텍스트를 lastname, firstname 형식으로 변경하는 예제입니다.\nsed -E \u0026#39;s/([A-Za-z]+) ([A-Za-z]+)/\\2, \\1/\u0026#39; filename ([A-Za-z]+): 첫 번째 단어를 캡처하여 \\1로 참조합니다. ([A-Za-z]+): 두 번째 단어를 캡처하여 \\2로 참조합니다. \\2, \\1: lastname, firstname 형식으로 출력합니다. 예제 실행 결과 입력 파일 내용: John Doe Jane Smith 출력: Doe, John Smith, Jane 예제 3: 숫자 패턴을 캡처하여 변형 item-1234 형식의 텍스트에서 숫자 부분을 캡처하여 code: 1234로 변경하는 예제입니다.\nsed -E \u0026#39;s/item-([0-9]+)/code: \\1/\u0026#39; filename item-([0-9]+): 숫자 패턴을 캡처하여 \\1로 참조합니다. code: \\1: 캡처된 숫자를 code:와 함께 출력합니다. 예제 실행 결과 입력 파일 내용: item-1234 item-5678 출력: code: 1234 code: 5678 예제 4: 모든 일치 항목을 치환하기 위한 g 옵션 모든 일치 항목을 변경하고 싶을 때 g 옵션을 추가하면 파일 내에서 반복되는 패턴을 모두 치환할 수 있습니다.\n모든 숫자를 [Number: 숫자] 형식으로 변경하는 예제입니다.\nsed -E \u0026#39;s/([0-9]+)/[Number: \\1]/g\u0026#39; filename ([0-9]+): 모든 숫자 패턴을 캡처하여 [Number: 숫자] 형식으로 치환합니다. g 옵션을 통해 파일의 모든 숫자에 적용됩니다. 예제 실행 결과 입력 파일 내용: item-1234 item-5678 item-91011 출력: item-[Number: 1234] item-[Number: 5678] item-[Number: 91011] 4. 특정 범위 지정: //,// 패턴을 활용한 구간 설정 sed에서 특정 구간을 범위로 지정하여 특정 작업을 수행할 수 있습니다.\n//,// 형식으로 두 패턴을 지정하면 해당 구간의 모든 줄에 작업을 적용할 수 있습니다.\n예제: 두 패턴 사이의 텍스트 출력하기 start와 end로 둘러싸인 텍스트 구간을 출력하는 예제입니다.\nsed -n \u0026#39;/start/,/end/p\u0026#39; filename /start/: 시작 패턴 /end/: 끝 패턴 p 옵션: 구간 내 텍스트를 출력합니다. 예제 실행 결과 입력 파일 내용: text before start target line 1 target line 2 end text after 출력: start target line 1 target line 2 end 5. 주요 옵션 요약 -E 또는 -r: 확장 정규 표현식(ERE) 사용을 허용합니다. 이 옵션으로 (와 ) 없이 캡처 그룹을 정의할 수 있습니다. s/pattern/replacement/: 지정한 패턴을 찾고 이를 치환합니다. g: 한 줄에 여러 번 나오는 패턴을 모두 치환합니다. p: 찾은 줄을 출력합니다(-n 옵션과 함께 자주 사용). /pattern1/,/pattern2/: 두 패턴 사이의 범위 지정에 사용됩니다. 마무리 sed는 매우 강력한 텍스트 처리 도구이며, -E 또는 -r 옵션을 사용하면 확장 정규 표현식을 사용해 더욱 직관적이고 간결하게 작업할 수 있습니다.\n정규 표현식을 활용하여 다양한 패턴을 찾고 치환하거나 특정 구간의 텍스트만 추출하는 등 자동화된 텍스트 처리를 보다 수월하게 할 수 있습니다.\n","permalink":"https://cdecl.github.io/devops/sed-capture-replace/","summary":"\u003cp\u003esed 명령어: 텍스트 패턴 캡처와 치환 활용법\u003c/p\u003e\n\u003chr\u003e\n\u003cp\u003esed는 파일이나 텍스트 스트림의 내용에서 특정 패턴을 찾아 변경하는 데 유용한 **스트림 편집기(Stream Editor)**입니다.\u003cbr\u003e\n특히 정규 표현식 기능을 통해 텍스트의 특정 부분을 캡처하고 치환하는 기능이 강력합니다.\u003c/p\u003e\n\u003cp\u003e이번 글에서는 -E 및 -r 옵션을 사용하여 더 간편하게 캡처 그룹을 생성하고 치환하는 방법을 소개하겠습니다.\u003c/p\u003e\n\u003ch2 id=\"1-sed-명령어-정의-및-용도\"\u003e1. sed 명령어 정의 및 용도\u003c/h2\u003e\n\u003cp\u003esed는 파일이나 텍스트를 자동으로 조작하는 명령어로, 주로 Linux 및 Unix 환경에서 사용됩니다.\u003cbr\u003e\nsed는 스크립트 없이도 다양한 텍스트 처리 작업을 쉽게 수행할 수 있는 장점이 있으며, 주요 용도는 다음과 같습니다:\u003c/p\u003e","title":"sed - pattern capture substitute 활용"},{"content":"Python Selenium 이용한 웹 스크래핑 방법, 웹 자동화\nSelenium 가이드: 웹 자동화 1. Selenium 이란? Selenium은 웹 브라우저 자동화를 위한 아래와 같은 용도\n웹 애플리케이션 테스트 자동화 웹 스크래핑 및 데이터 추출 반복적인 웹 작업 자동화 크로스 브라우저 테스팅 주요 기능 브라우저 제어: 다양한 브라우저에서 웹 페이지를 자동으로 로드하고 조작할 수 있습니다. DOM 조작: 웹 페이지의 DOM 요소를 검색하고 조작할 수 있습니다. 폼 자동화: 폼을 자동으로 작성하고 제출할 수 있습니다. 스크린샷 캡처: 웹 페이지의 스크린샷을 캡처할 수 있습니다. 헤드리스 모드: 브라우저 창을 띄우지 않고 백그라운드에서 작업을 수행할 수 있습니다. Selenium은 다양한 프로그래밍 언어를 지원하며, 웹 개발자와 QA 엔지니어들에게 필수적인 도구로 사용\n2. 지원하는 웹 드라이버 종류 Selenium은 다양한 웹 브라우저를 지원합니다. 주요 웹 드라이버는 다음과 같습니다:\nChromeDriver (Google Chrome) GeckoDriver (Mozilla Firefox) EdgeDriver (Microsoft Edge) SafariDriver (Apple Safari) IEDriverServer (Internet Explorer) 각 브라우저의 버전에 맞는 웹 드라이버를 설치해야 합니다.\n3. 기본적인 웹 페이지 호출 방법 (Chrome 드라이버 사용) $ pip install selenium webdriver_manager Chrome 드라이버를 사용하여 웹 페이지를 호출하는 기본적인 Python 코드는 다음과 같습니다:\nfrom selenium import webdriver from selenium.webdriver.chrome.service import Service from webdriver_manager.chrome import ChromeDriverManager ## WebDriver 객체 생성 ## ChromeDriverManager().install(): ## webdriver_manager 라이브러리는 현재 시스템과 호환되는 ChromeDriver 버전을 찾아서 다운로드 ## 다운로드된 ChromeDriver 파일은 로컬에 저장되며, 해당 파일의 경로를 반환 driver = webdriver.Chrome(service=Service(ChromeDriverManager().install())) ## 웹 페이지 열기 driver.get(\u0026#39;https://www.example.com\u0026#39;) ## 브라우저 종료 driver.quit() ]\n4. DOM 을 찾기 위한 find_element 사용법 Selenium은 다양한 방법으로 웹 요소를 찾을 수 있습니다. 주요 메서드는 다음과 같습니다:\n메서드 설명 find_element(By.ID, 'id') ID 속성으로 요소 찾기 find_element(By.NAME, 'name') name 속성으로 요소 찾기 find_element(By.XPATH, 'xpath') XPath로 요소 찾기 find_element(By.CSS_SELECTOR, 'css_selector') CSS 선택자로 요소 찾기 find_element(By.CLASS_NAME, 'class_name') 클래스 이름으로 요소 찾기 find_element(By.TAG_NAME, 'tag_name') HTML 태그 이름으로 요소 찾기 find_element(By.LINK_TEXT, 'link_text') 링크 텍스트로 요소 찾기 find_element(By.PARTIAL_LINK_TEXT, 'partial_link_text') 부분적인 링크 텍스트로 요소 찾기 By.ID는 가장 빠르고 신뢰할 수 있는 방법이지만, 모든 요소에 고유한 ID가 있는 것은 아닙니다. By.XPATH는 매우 유연하지만, 복잡한 XPath는 성능에 영향을 줄 수 있습니다. By.CSS_SELECTOR는 By.XPATH보다 일반적으로 더 빠르고 읽기 쉽습니다. By.LINK_TEXT와 By.PARTIAL_LINK_TEXT는 특히 네비게이션 테스트에 유용합니다. 예시 from selenium.webdriver.common.by import By ## ID로 요소 찾기 element = driver.find_element(By.ID, \u0026#39;search-input\u0026#39;) ## 여러 요소 찾기 # 1. ID로 요소 찾기 elements_by_id = driver.find_elements(By.CSS_SELECTOR, \u0026#39;#example-id\u0026#39;) for element in elements_by_id: print(f\u0026#34;ID: {element.text}\u0026#34;) # 2. 클래스명으로 요소 찾기 elements_by_class = driver.find_elements(By.CSS_SELECTOR, \u0026#39;.example-class\u0026#39;) for element in elements_by_class: print(f\u0026#34;Class: {element.text}\u0026#34;) # 3. 태그명으로 요소 찾기 elements_by_tag = driver.find_elements(By.CSS_SELECTOR, \u0026#39;div\u0026#39;) for element in elements_by_tag: print(f\u0026#34;Tag: {element.text}\u0026#34;) # 4. 계층 구조로 요소 찾기 (자식 요소) elements_by_hierarchy = driver.find_elements(By.CSS_SELECTOR, \u0026#39;div \u0026gt; p\u0026#39;) for element in elements_by_hierarchy: print(f\u0026#34;Hierarchy (child): {element.text}\u0026#34;) # 5. 계층 구조로 요소 찾기 (후손 요소) elements_by_descendant = driver.find_elements(By.CSS_SELECTOR, \u0026#39;div p\u0026#39;) for element in elements_by_descendant: print(f\u0026#34;Hierarchy (descendant): {element.text}\u0026#34;) # 6. 여러 클래스 조합으로 요소 찾기 elements_by_multiple_classes = driver.find_elements(By.CSS_SELECTOR, \u0026#39;.class1.class2\u0026#39;) for element in elements_by_multiple_classes: print(f\u0026#34;Multiple Classes: {element.text}\u0026#34;) # 7. 속성 값으로 요소 찾기 elements_by_attribute = driver.find_elements(By.CSS_SELECTOR, \u0026#39;[attribute-name=\u0026#34;value\u0026#34;]\u0026#39;) for element in elements_by_attribute: print(f\u0026#34;Attribute: {element.text}\u0026#34;) 5. 주요 DOM 조작 기능 find_elements 메서드를 사용하여 여러 요소가 조회되면 모든 일치하는 요소를 리스트(배열)로 처리 해야함\nclick() : 요소를 클릭 button = driver.find_element(By.ID, \u0026#39;submit-button\u0026#39;) button.click() send_keys() : 텍스트를 입력 input_field = driver.find_element(By.NAME, \u0026#39;username\u0026#39;) input_field.send_keys(\u0026#39;myusername\u0026#39;) text : 요소의 텍스트 paragraph = driver.find_element(By.CLASS_NAME, \u0026#39;content\u0026#39;) print(paragraph.text) get_attribute : 요소의 속성 값을 가져옵니다. link = driver.find_element(By.TAG_NAME, \u0026#39;a\u0026#39;) href = link.get_attribute(\u0026#39;href\u0026#39;) 6. 동적 웹 페이지 처리: WebDriverWait 사용 동적 웹 페이지에서는 요소가 즉시 로드되지 않을 수 있습니다. 이런 경우 WebDriverWait를 사용하여 특정 조건이 만족될 때까지 대기할 수 있습니다.\nWebDriverWait 기본 사용법 from selenium.webdriver.support.ui import WebDriverWait from selenium.webdriver.support import expected_conditions as EC from selenium.webdriver.common.by import By # 최대 10초 동안 대기하며, \u0026#39;a.ClassName\u0026#39; 선택자를 가진 요소가 나타날 때까지 기다립니다. node = WebDriverWait(driver, 10).until( EC.presence_of_element_located((By.CSS_SELECTOR, \u0026#34;a.ClassName\u0026#34;)) ) 이 코드는 다음과 같은 기능을 수행합니다:\n최대 10초 동안 대기합니다. CSS 선택자 \u0026ldquo;a.ClassName\u0026quot;에 해당하는 요소가 DOM에 존재할 때까지 기다립니다. 요소가 발견되면 해당 요소를 반환합니다. 지정된 시간 내에 요소가 나타나지 않으면 TimeoutException을 발생시킵니다. 주요 Expected Conditions WebDriverWait와 함께 사용할 수 있는 주요 Expected Conditions는 다음과 같습니다:\n조건 설명 presence_of_element_located 요소가 DOM에 존재하는지 확인 visibility_of_element_located 요소가 보이는지 확인 element_to_be_clickable 요소가 클릭 가능한지 확인 text_to_be_present_in_element 요소에 특정 텍스트가 있는지 확인 title_contains 페이지 제목에 특정 텍스트가 포함되어 있는지 확인 예시 코드 from selenium import webdriver from selenium.webdriver.support.ui import WebDriverWait from selenium.webdriver.support import expected_conditions as EC from selenium.webdriver.common.by import By from selenium.common.exceptions import TimeoutException driver = webdriver.Chrome() driver.get(\u0026#34;https://example.com\u0026#34;) try: # 클릭 가능한 버튼을 기다립니다. button = WebDriverWait(driver, 10).until( EC.element_to_be_clickable((By.ID, \u0026#34;submit-button\u0026#34;)) ) button.click() # 특정 텍스트가 포함된 요소를 기다립니다. element = WebDriverWait(driver, 10).until( EC.text_to_be_present_in_element((By.CLASS_NAME, \u0026#34;result\u0026#34;), \u0026#34;성공\u0026#34;) ) print(\u0026#34;작업이 성공적으로 완료되었습니다.\u0026#34;) except TimeoutException: print(\u0026#34;요소를 찾는 데 시간이 초과되었습니다.\u0026#34;) finally: driver.quit() 이 방법을 사용하면 동적으로 로드되는 웹 페이지의 요소를 안정적으로 처리할 수 있습니다. 페이지 로딩 시간이 일정하지 않거나, AJAX 요청으로 콘텐츠가 동적으로 변경되는 경우에 특히 유용합니다. WebDriverWait를 사용하면 명시적 대기를 구현할 수 있어, 불필요한 고정 대기 시간을 줄이고 테스트의 안정성과 효율성을 높일 수 있습니다[1]. 7. Headless 모드 및 기타 옵션 Headless 모드는 GUI 없이 브라우저를 실행하는 방법으로 서버 환경이나 백그라운드 작업에 유용\nfrom selenium import webdriver from selenium.webdriver.chrome.service import Service from selenium.webdriver.chrome.options import Options from webdriver_manager.chrome import ChromeDriverManager chrome_options = Options() chrome_options.add_argument(\u0026#39;--headless\u0026#39;) chrome_options.add_argument(\u0026#39;--disable-gpu\u0026#39;) # 필요한 경우 chrome_options.add_argument(\u0026#39;user-agent=Mozilla/5.0 ...\u0026#39;) # User-Agent 설정 driver = driver = webdriver.Chrome(service=Service(ChromeDriverManager().install()), options=chrome_options) driver.get(\u0026#39;https://example.com\u0026#39;) print(driver.title) driver.quit() 기타 유용한 옵션: --start-maximized: 브라우저를 최대화하여 시작 --disable-extensions: 확장 프로그램 비활성화 --disable-gpu: GPU 하드웨어 가속 비활성화 --no-sandbox: 샌드박스 비활성화 (주의: 보안상 위험할 수 있음) window-size=1200x600: 브라우저 창 크기 설정 user-agent=Mozilla/5.0 ...: User-Agent 설정 8. 원격 디버깅: \u0026ndash;remote-debugging-port 옵션 사용 Chrome 브라우저의 원격 디버깅 기능을 활용하면 Selenium 스크립트 실행 중 브라우저의 상태를 실시간으로 검사하고 디버깅할 수 있습니다. 이는 복잡한 웹 애플리케이션 자동화 시 매우 유용합니다.\n\u0026ndash;remote-debugging-port 옵션 사용법 from selenium import webdriver from selenium.webdriver.chrome.service import Service from selenium.webdriver.chrome.options import Options from webdriver_manager.chrome import ChromeDriverManager chrome_options = Options() chrome_options.add_argument(\u0026#39;--remote-debugging-port=9222\u0026#39;) driver = webdriver.Chrome(service=Service(ChromeDriverManager().install()), options=chrome_options) driver.get(\u0026#39;https://example.com\u0026#39;) 이 코드는 다음과 같은 기능을 수행합니다:\nChrome 브라우저를 9222 포트에서 원격 디버깅이 가능한 상태로 실행합니다. 개발자는 Chrome DevTools Pro 원격 디버깅의 장점 실시간 상태 확인: 자동화 스크립트 실행 중 브라우저의 상태를 실시간으로 확인할 수 있습니다. 네트워크 트래픽 분석: 페이지 로드 시 발생하는 네트워크 요청을 분석할 수 있습니다. JavaScript 디버깅: 페이지에서 실행되는 JavaScript 코드를 디버깅할 수 있습니다. DOM 요소 검사: 동적으로 생성되는 DOM 요소를 실시간으로 검사할 수 있습니다. 주의사항 원격 디버깅 포트를 열면 보안 위험이 있을 수 있으므로, 개발 환경에서만 사용하고 프로덕션 환경에서는 사용을 피해야 합니다. 포트 번호는 다른 프로세스와 충돌하지 않도록 주의해야 합니다. 원격 디버깅 연결 : Shell 에서 Chrome 브라우저 실행 원격 디버깅 연결을 위해 Chrome 브라우저를 Shell에서 직접 실행\nWindows\n\u0026#34;C:\\Program Files\\Google\\Chrome\\Application\\chrome.exe\u0026#34; macOS\n/Applications/Google\\ Chrome.app/Contents/MacOS/Google\\ Chrome Linux\ngoogle-chrome 원격 디버깅 포트 열기 원격 디버깅을 위해 특정 포트를 열고 Chrome을 실행 google-chrome --remote-debugging-port=9222 기타 유용한 옵션 사용자 프로필 디렉토리 설정:\ngoogle-chrome --remote-debugging-port=9222 --user-data-dir=/tmp/chrome 독립적인 프로필 생성: 기존 Chrome 인스턴스와 충돌 방지 보안 강화: 기존 사용자 데이터 보호 성능 및 안정성 향상 헤드리스 모드로 실행:\ngoogle-chrome --headless 특정 URL로 시작:\ngoogle-chrome --headless https://example.com User Agent 설정:\ngoogle-chrome --user-agent=\u0026#34;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/58.0.3029.110 Safari/537.36\u0026#34; 창 크기 설정:\ngoogle-chrome --window-size=1200,800 확장 프로그램 비활성화:\ngoogle-chrome --disable-extensions 주의사항 위의 명령어들은 Chrome이 기본 설치 경로에 있다고 가정합니다. 만약 다른 경로에 설치되어 있다면 해당 경로를 사용해야 합니다. 일부 옵션은 보안상의 이유로 주의해서 사용해야 합니다. 특히 --no-sandbox 옵션은 보안을 약화시킬 수 있으므로 개발 환경에서만 사용해야 합니다. 헤드리스 모드를 사용할 때는 GUI가 없으므로 콘솔 출력을 통해 결과를 확인해야 합니다. ","permalink":"https://cdecl.github.io/dev/selenium-101/","summary":"\u003cp\u003ePython Selenium 이용한 웹 스크래핑 방법, 웹 자동화\u003c/p\u003e\n\u003ch2 id=\"selenium-가이드-웹-자동화\"\u003eSelenium 가이드: 웹 자동화\u003c/h2\u003e\n\u003ch3 id=\"1-selenium-이란\"\u003e1. Selenium 이란?\u003c/h3\u003e\n\u003cp\u003eSelenium은 웹 브라우저 자동화를 위한 아래와 같은 용도\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e웹 애플리케이션 테스트 자동화\u003c/li\u003e\n\u003cli\u003e웹 스크래핑 및 데이터 추출\u003c/li\u003e\n\u003cli\u003e반복적인 웹 작업 자동화\u003c/li\u003e\n\u003cli\u003e크로스 브라우저 테스팅\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch4 id=\"주요-기능\"\u003e주요 기능\u003c/h4\u003e\n\u003cul\u003e\n\u003cli\u003e브라우저 제어: 다양한 브라우저에서 웹 페이지를 자동으로 로드하고 조작할 수 있습니다.\u003c/li\u003e\n\u003cli\u003eDOM 조작: 웹 페이지의 DOM 요소를 검색하고 조작할 수 있습니다.\u003c/li\u003e\n\u003cli\u003e폼 자동화: 폼을 자동으로 작성하고 제출할 수 있습니다.\u003c/li\u003e\n\u003cli\u003e스크린샷 캡처: 웹 페이지의 스크린샷을 캡처할 수 있습니다.\u003c/li\u003e\n\u003cli\u003e헤드리스 모드: 브라우저 창을 띄우지 않고 백그라운드에서 작업을 수행할 수 있습니다.\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eSelenium은 다양한 프로그래밍 언어를 지원하며, 웹 개발자와 QA 엔지니어들에게 필수적인 도구로 사용\u003c/p\u003e","title":"Selenium 101"},{"content":"네트워크 보안 툴 arpspoof와 fragrouter 사용법 및 ARP 스푸핑 원리\n1. ARP (주소 결정 프로토콜)란? 1. 정의 ARP`(Address Resolution Pro 이를 통해 로컬 네트워크에서 IP 패킷이 올바른 물리적 네트워크 장치로 전달될 수 있습니다.\n2. 작동 원리 ARP는 다음과 같은 과정으로 작동합니다:\nARP 요청 (Request) 송신 호스트가 목적지 호스트의 MAC 주소를 모를 때, ARP 요청 패킷을 브로드캐스트로 네트워크에 전송합니다. 이 요청 패킷에는 송신 호스트의 IP 주소와 MAC 주소, 그리고 목적지 호스트의 IP 주소가 포함되어 있습니다. ARP 응답 (Reply) 네트워크에 있는 모든 호스트가 이 ARP 요청을 수신합니다. 요청된 IP 주소를 가진 호스트는 자신의 MAC 주소를 포함한 ARP 응답 패킷을 송신 호스트에게 유니캐스트로 전송합니다. 주소 매핑 송신 호스트는 ARP 응답을 수신하고, 해당 IP 주소와 MAC 주소의 매핑을 ARP 캐시(테이블)에 저장합니다. 이후 동일한 IP 주소로의 통신이 발생할 때, ARP 캐시를 참조하여 MAC 주소를 빠르게 확인할 수 있습니다. 3. ARP 캐시 ARP 캐시는 IP 주소와 MAC 주소의 매핑을 일시적으로 저장하는 테이블입니다.\n이를 통해 같은 IP 주소에 대한 반복적인 ARP 요청을 방지하고, 네트워크 성능을 향상시킬 수 있습니다.\n그러나 ARP 캐시는 보통 일정 시간이 지나면 항목이 만료됩니다.\n4. 보안 문제 ARP는 신뢰할 수 있는 프로토콜이 아니며, 다음과 같은 보안 문제를 가질 수 있습니다:\nARP 스푸핑 (Spoofing)\n공격자가 가짜 ARP 응답을 네트워크에 전송하여, 자신을 다른 호스트로 위장하고 트래픽을 가로채거나 변조할 수 있습니다. ARP 캐시 포이즈닝 (Cache Poisoning)\n공격자가 ARP 캐시에 잘못된 IP-MAC 주소 매핑을 삽입하여, 네트워크 통신을 중단시키거나 트래픽을 리다이렉트할 수 있습니다. 2. arpspoof, fragrouter 도구 설치 및 기본 설명 arpspoof 설치 arpspoof는 dsniff 패키지의 일부입니다. 설치하는 방법은 다음과 같습니다\ndsniff는 네트워크 보안 분석 및 테스트를 위해 설계된 다양한 도구들을 포함하는 패키지입니다.\n이 패키지는 네트워크 트래픽을 캡처하고 분석하며, 스니핑(sniffing)과 관련된 여러 가지 기능을 제공합니다.\nUbuntu/Debian sudo apt-get update sudo apt-get install dsniff fragrouter 설치 fragrouter는 네트워크 트래픽을 조작하는 도구로, 다음과 같이 설치할 수 있습니다:\nUbuntu/Debian sudo apt-get update sudo apt-get install fragrouter 3. ARP 스푸핑의 원리 및 arpspoof, fragrouter 도구의 역할 ARP 스푸핑의 원리 ARP(주소 결정 프로토콜)는 IP 주소를 물리적 네트워크 주소(MAC 주소)로 매핑하는 프로토콜입니다.\nARP 스푸핑은 공격자가 가짜 ARP 메시지를 네트워크에 보내 자신을 다른 호스트로 위장하여 트래픽을 가로채거나 변조하는 공격 방법\narpspoof 도구의 역할 arpspoof는 ARP 스푸핑 공격을 수행하는 도구로, 네트워크에서 두 호스트 사이의 트래픽을 가로채기 위해 사용됩니다.\n예를 들어, 공격자는 arpspoof를 사용하여 게이트웨이와 타겟 호스트 간의 트래픽을 가로챌 수 있습니다.\n가짜 ARP 응답 패킷을 생성하여 네트워크의 다른 호스트에게 보내고 이를 통해 공격자는 자신의 MAC 주소를 다른 호스트의 IP 주소에 매핑하여, 트래픽을 자신을 거쳐 가게 만듬\n사용법:\nsudo arpspoof -i [인터페이스] -t [타겟 IP] [게이트웨이 IP] fragrouter 도구의 역할 fragrouter는 네트워크 트래픽을 변조하거나 조각(fragment)화하여 IDS/IPS를 우회하는 등의 공격을 돕는 도구입니다.\n다양한 모드를 지원하며, 각 모드는 서로 다른 방법으로 트래픽을 변조합니다.\n사용법:\nsudo fragrouter -B1 # 가장 기본적인 모드 모드 지원 -B1: 기본 조각화 모드. 패킷을 8바이트 크기의 조각으로 나눕니다. -B2: 패킷을 24바이트 크기의 조각으로 나눕니다. -B3: 모든 패킷을 임의의 크기로 나눕니다. -B4: 모든 패킷을 최대 크기로 나누어 재조립을 어렵게 합니다. IPv4 포워딩 설정 ARP 스푸핑을 성공적으로 수행하려면, 스푸핑 머신이 중간자(Man-in-the-Middle) 역할을 할 수 있도록 IPv4 포워딩을 활성화해야 함\nIPv4 포워딩 활성화 방법: # 일시적으로 IPv4 포워딩 활성화 sudo sysctl -w net.ipv4.ip_forward=1 # 영구적으로 IPv4 포워딩 활성화 echo \u0026#34;net.ipv4.ip_forward = 1\u0026#34; | sudo tee -a /etc/sysctl.conf sudo sysctl -p 4. 테스트 예제: arpspoof 및 fragrouter 사용 가정된 네트워크 설정 호스트 머신 (타겟): 198.19.249.2 스푸핑 머신 (공격자): 198.19.249.3 게이트웨이: 198.19.249.1 arpspoof 사용 예제 호스트 머신의 트래픽을 가로채기 위해, 스푸핑 머신에서 다음 명령어를 실행\n# 198.19.249.2(타겟)에게 게이트웨이 198.19.249.1의 MAC 주소를 공격자의 MAC 주소로 속이는 ARP 패킷을 보냄 sudo arpspoof -i eth0 -t 198.19.249.2 198.19.249.1 # 동시에, 스푸핑 머신에서 게이트웨이에도 ARP 스푸핑을 수행 # 게이트웨이 198.19.249.1에게 호스트 머신 198.19.249.2의 MAC 주소를 공격자의 MAC 주소로 속이는 ARP 패킷을 보냄 sudo arpspoof -i eth0 -t 198.19.249.1 198.19.249.2 또는 단일 명령어로 양방향 스푸핑을 수행할 수 있음.\nsudo arpspoof -i eth0 198.19.249.2 -r 198.19.249.1 -r 옵션을 사용하면 arpspoof는 목표 IP 주소와 게이트웨이 IP 주소 간의 ARP 스푸핑을 동시에 수행할 수 있음.\n이는 네트워크에서 게이트웨이 역할을 하는 장치로부터 목표 호스트로 가는 모든 트래픽을 가로챌 수 있게 해줍니다.\nfragrouter 사용 예제 스푸핑 머신에서 네트워크 트래픽을 변조하기 위해 fragrouter를 설정합니다. 예를 들어, 모드 1로 설정하여 패킷을 조각화합니다:\nsudo fragrouter -B1 이 명령어는 들어오는 패킷을 조각화하여 트래픽을 변조 및 전달\n패킷 수신: 네트워크 인터페이스에서 패킷을 수신합니다. 패킷 변조: 설정된 모드에 따라 패킷을 조각화하거나 변조합니다. 패킷 전달: 변조된 패킷을 목적지로 전달합니다. 5. tcpdump를 통한 덤프된 패킷을 보는 방법 tcpdump 기본 설명 tcpdump는 네트워크 인터페이스를 통해 들어오고 나가는 패킷을 캡처하고 분석하는 도구입니다.\ntcpdump 설치 Ubuntu/Debian: sudo apt-get install tcpdump tcpdump 사용법 패킷을 캡처하기 위해서는 다음 명령어를 사용합니다\nsudo tcpdump -i eth0 테스트 스푸핑 머신 (공격자) 에서 패킷 캡쳐 # 네트워크 인터페이스 확인 $ sudo tcpdump -D 1.eth0 [Up, Running, Connected] 2.any (Pseudo-device that captures on all interfaces) [Up, Running] 3.lo [Up, Running, Loopback] ... # 패킷 캡쳐 : host httpbin.org and tcp port 80 $ sudo tcpdump -i 1 -n host httpbin.org and tcp port 80 호스트 머신 (타겟)에서 HTTP 호출 $ curl httpbin.org/get { \u0026#34;args\u0026#34;: {}, \u0026#34;headers\u0026#34;: { \u0026#34;Accept\u0026#34;: \u0026#34;*/*\u0026#34;, \u0026#34;Host\u0026#34;: \u0026#34;httpbin.org\u0026#34;, \u0026#34;User-Agent\u0026#34;: \u0026#34;curl/8.8.0\u0026#34;, \u0026#34;X-Amzn-Trace-Id\u0026#34;: \u0026#34;Root=1-667d27b9-1bc9fbf01717e5424f5d3ec1\u0026#34; }, \u0026#34;origin\u0026#34;: \u0026#34;124.49.100.52\u0026#34;, \u0026#34;url\u0026#34;: \u0026#34;http://httpbin.org/get\u0026#34; } 스푸핑 머신 (공격자) 에서 내용 확인 $ sudo tcpdump -i 1 -n host httpbin.org and tcp port 80 tcpdump: verbose output suppressed, use -v[v]... for full pro listening on eth0, link-type EN10MB (Ethernet), snapshot length 262144 bytes 08:55:23.564492 IP 198.19.249.2.46206 \u0026gt; 44.206.219.79.80: Flags [S], seq 3936188444, win 64240, options [mss 1460,sackOK,TS val 1312186693 ecr 0,nop,wscale 7], length 0 08:55:23.564601 IP 198.19.249.2.46206 \u0026gt; 44.206.219.79.80: Flags [S], seq 3936188444, win 64240, options [mss 1460,sackOK,TS val 1312186693 ecr 0,nop,wscale 7], length 0 08:55:23.822969 IP 198.19.249.2.46206 \u0026gt; 44.206.219.79.80: Flags [.], ack 3173450946, win 502, options [nop,nop,TS val 1312186951 ecr 2806340177], length 0 08:55:23.823057 IP 198.19.249.2.46206 \u0026gt; 44.206.219.79.80: Flags [.], ack 1, win 502, options [nop,nop,TS val 1312186951 ecr 2806340177], length 0 08:55:23.823188 IP 198.19.249.2.46206 \u0026gt; 44.206.219.79.80: Flags [P.], seq 0:77, ack 1, win 502, options [nop,nop,TS val 1312186951 ecr 2806340177], length 77: HTTP: GET /get HTTP/1.1 08:55:23.823199 IP 198.19.249.2.46206 \u0026gt; 44.206.219.79.80: Flags [P.], seq 0:77, ack 1, win 502, options [nop,nop,TS val 1312186951 ecr 2806340177], length 77: HTTP: GET /get HTTP/1.1 08:55:24.027301 IP 198.19.249.2.46206 \u0026gt; 44.206.219.79.80: Flags [.], ack 484, win 499, options [nop,nop,TS val 1312187155 ecr 2806340382], length 0 08:55:24.027380 IP 198.19.249.2.46206 \u0026gt; 44.206.219.79.80: Flags [.], ack 484, win 499, options [nop,nop,TS val 1312187155 ecr 2806340382], length 0 08:55:24.027960 IP 198.19.249.2.46206 \u0026gt; 44.206.219.79.80: Flags [F.], seq 77, ack 484, win 501, options [nop,nop,TS val 1312187156 ecr 2806340382], length 0 08:55:24.027978 IP 198.19.249.2.46206 \u0026gt; 44.206.219.79.80: Flags [F.], seq 77, ack 484, win 501, options [nop,nop,TS val 1312187156 ecr 2806340382], length 0 08:55:24.240286 IP 198.19.249.2.46206 \u0026gt; 44.206.219.79.80: Flags [.], ack 485, win 501, options [nop,nop,TS val 1312187369 ecr 2806340595], length 0 08:55:24.240313 IP 198.19.249.2.46206 \u0026gt; 44.206.219.79.80: Flags [.], ack 485, win 501, options [nop,nop,TS val 1312187369 ecr 2806340595], length 0 capture.pcap 파일로 저장 후, Wireshark 툴로 확인 $ sudo tcpdump -i 1 -n host httpbin.org and tcp port 80 -w capture.pcap 기타 Docker 환경에서의 테스트 이슈 Docker의 기본 브리지 네트워크 설정에서 외부 네트워크와의 통신이 올바르게 설정되지 않았을 수 있습니다. Docker 브리지 네트워크에서 외부 네트워크로 나가는 패킷은 NAT를 통해 변환되는데, 이 과정에서 문제가 발생할 수 있습니다. docker macvlan 네트워크 모드에서는 테스트 가능 : Docker 네트워크 - Macvlan{:target=\u0026quot;_blank\u0026quot;} ","permalink":"https://cdecl.github.io/devops/arpspoof-fragrouter/","summary":"\u003cp\u003e네트워크 보안 툴 arpspoof와 fragrouter 사용법 및 ARP 스푸핑 원리\u003c/p\u003e\n\u003ch2 id=\"1-arp-주소-결정-프로토콜란\"\u003e1. ARP (주소 결정 프로토콜)란?\u003c/h2\u003e\n\u003ch3 id=\"1-정의\"\u003e1. 정의\u003c/h3\u003e\n\u003cp\u003eARP`(Address Resolution Pro\n이를 통해 로컬 네트워크에서 IP 패킷이 올바른 물리적 네트워크 장치로 전달될 수 있습니다.\u003c/p\u003e\n\u003ch3 id=\"2-작동-원리\"\u003e2. 작동 원리\u003c/h3\u003e\n\u003cp\u003eARP는 다음과 같은 과정으로 작동합니다:\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003e\u003cstrong\u003eARP 요청 (Request)\u003c/strong\u003e\n\u003cul\u003e\n\u003cli\u003e송신 호스트가 목적지 호스트의 MAC 주소를 모를 때, ARP 요청 패킷을 브로드캐스트로 네트워크에 전송합니다.\u003c/li\u003e\n\u003cli\u003e이 요청 패킷에는 송신 호스트의 IP 주소와 MAC 주소, 그리고 목적지 호스트의 IP 주소가 포함되어 있습니다.\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eARP 응답 (Reply)\u003c/strong\u003e\n\u003cul\u003e\n\u003cli\u003e네트워크에 있는 모든 호스트가 이 ARP 요청을 수신합니다.\u003c/li\u003e\n\u003cli\u003e요청된 IP 주소를 가진 호스트는 자신의 MAC 주소를 포함한 ARP 응답 패킷을 송신 호스트에게 유니캐스트로 전송합니다.\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e주소 매핑\u003c/strong\u003e\n\u003cul\u003e\n\u003cli\u003e송신 호스트는 ARP 응답을 수신하고, 해당 IP 주소와 MAC 주소의 매핑을 ARP 캐시(테이블)에 저장합니다.\u003c/li\u003e\n\u003cli\u003e이후 동일한 IP 주소로의 통신이 발생할 때, ARP 캐시를 참조하여 MAC 주소를 빠르게 확인할 수 있습니다.\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ol\u003e\n\u003ch3 id=\"3-arp-캐시\"\u003e3. ARP 캐시\u003c/h3\u003e\n\u003cp\u003eARP 캐시는 IP 주소와 MAC 주소의 매핑을 일시적으로 저장하는 테이블입니다.\u003cbr\u003e\n이를 통해 같은 IP 주소에 대한 반복적인 ARP 요청을 방지하고, 네트워크 성능을 향상시킬 수 있습니다.\u003cbr\u003e\n그러나 ARP 캐시는 보통 일정 시간이 지나면 항목이 만료됩니다.\u003c/p\u003e","title":"ARP 스푸핑, arpspoof와 fragrouter 사용법 원리"},{"content":"Docker Macvlan 네트워크 소개, 활용 및 이슈\n1. Docker Macvlan 네트워크? Macvlan 네트워크는 컨테이너에 독립적인 네트워크 인터페이스를 제공하여 물리적 네트워크와 직접 상호작용 가능\n이는 각 컨테이너가 고유한 MAC 주소를 가지므로 네트워크 수준에서 완전히 독립된 호스트처럼 동작 가능\n호스트 머신과 같은 네트워크에 docker 컨테이너를 생성 목적\nMacvlan 네트워크 설정은 물리적 네트워크 환경에 따라 적절한 서브넷과 게이트웨이를 사용 필요 (e.g. DHCP 환경)\nMacvlan 구성 네트워크 성능 향상: 호스트의 NAT를 거치지 않아 성능이 향상 네트워크 격리: 각 컨테이너가 고유한 MAC 주소를 가져 네트워크 레벨에서 완전히 격리 기존 네트워크와의 통합: 기존 물리적 네트워크 인프라와 쉽게 통합 Docker 네트워크 유형 브리지 네트워크 (Bridge Network) 기본 네트워크 모드로, Docker가 기본적으로 사용하는 네트워크입니다. 내부 네트워크를 생성하여 컨테이너 간의 통신을 가능하게 합니다. 호스트와 컨테이너 간의 통신은 NAT(Network Address Translation)를 사용합니다. 호스트 네트워크 (Host Network) 컨테이너가 호스트의 네트워크 스택을 공유합니다. 성능이 중요한 애플리케이션에서 사용될 수 있습니다. 컨테이너와 호스트 간의 네트워크 격리가 없습니다. None 네트워크 (None Network) 네트워크 연결이 없는 컨테이너를 생성합니다. 네트워크 격리가 필요한 경우에 유용합니다. 2. Macvlan 네트워크 설정 설치 요구 사항 Docker가 설치된 시스템, 루트 권한 또는 Docker 관리 권한\nMacvlan 네트워크 설정 물리적 네트워크 인터페이스 확인 : 인터페이스(예: eth0)를 확인 $ ip a 1: lo: \u0026lt;LOOPBACK,UP,LOWER_UP\u0026gt; mtu 65536 qdisc noqueue state UNKNOWN group default qlen 1000 link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00 inet 127.0.0.1/8 scope host lo valid_lft forever preferred_lft forever inet6 ::1/128 scope host valid_lft forever preferred_lft forever 2: tunl0@NONE: \u0026lt;NOARP\u0026gt; mtu 1480 qdisc noop state DOWN group default qlen 1000 link/ipip 0.0.0.0 brd 0.0.0.0 3: eth0@if8: \u0026lt;BROADCAST,MULTICAST,UP,LOWER_UP\u0026gt; mtu 1500 qdisc noqueue state UP group default qlen 1000 link/ether 16:55:9f:a4:e8:14 brd ff:ff:ff:ff:ff:ff link-netnsid 0 inet 198.19.249.146/24 brd 198.19.249.255 scope global dynamic noprefixroute eth0 valid_lft 171944sec preferred_lft 171944sec inet6 fd07:b51a:cc66:0:1455:9fff:fea4:e814/64 scope global noprefixroute valid_lft forever preferred_lft forever inet6 fe80::1455:9fff:fea4:e814/64 scope link noprefixroute valid_lft forever preferred_lft forever 4: docker0: \u0026lt;NO-CARRIER,BROADCAST,MULTICAST,UP\u0026gt; mtu 1500 qdisc noqueue state DOWN group default link/ether 02:42:ce:33:77:9e brd ff:ff:ff:ff:ff:ff inet 172.17.0.1/16 brd 172.17.255.255 scope global docker0 valid_lft forever preferred_lft forever inet6 fe80::42:ceff:fe33:779e/64 scope link valid_lft forever preferred_lft forever Macvlan 네트워크 생성 # 생성 $ docker network create -d macvlan --subnet=198.19.249.0/24 --gateway=198.19.249.1 -o parent=eth0 macvlan_network 0da5a9be311ca6a6d1145706e9f1f7c1de6e0e6109023a8ab001d4d5545c2488 # 확인 $ docker network ls NETWORK ID NAME DRIVER SCOPE 5f6cec24b896 bridge bridge local dd045112300c host host local 0da5a9be311c macvlan_network macvlan local 02db42ae4e83 none null local 3. Macvlan 네트워크 활용 컨테이너 생성 및 Macvlan 네트워크 연결 Macvlan 네트워크를 사용하는 컨테이너를 생성\n$ docker run -d --name nginx --network macvlan_network nginx 이제 nginx는 macvlan_network를 통해 네트워크와 상호작용합니다.\n컨테이너 네트워크 확인 컨테이너의 IP 및 네트워크 정보를 확인\n$ docker inspect nginx $ docker inspect nginx | jq \u0026#39;.[0].NetworkSettings.Networks\u0026#39; { \u0026#34;macvlan_network\u0026#34;: { \u0026#34;IPAMConfig\u0026#34;: null, \u0026#34;Links\u0026#34;: null, \u0026#34;Aliases\u0026#34;: null, \u0026#34;MacAddress\u0026#34;: \u0026#34;02:42:c6:13:f9:02\u0026#34;, \u0026#34;DriverOpts\u0026#34;: null, \u0026#34;NetworkID\u0026#34;: \u0026#34;0da5a9be311ca6a6d1145706e9f1f7c1de6e0e6109023a8ab001d4d5545c2488\u0026#34;, \u0026#34;EndpointID\u0026#34;: \u0026#34;39bad26ad54da71238f79713f5a2ebc536f3714d0a7fa446afc8f2566ba55418\u0026#34;, \u0026#34;Gateway\u0026#34;: \u0026#34;198.19.249.1\u0026#34;, \u0026#34;IPAddress\u0026#34;: \u0026#34;198.19.249.2\u0026#34;, \u0026#34;IPPrefixLen\u0026#34;: 24, \u0026#34;IPv6Gateway\u0026#34;: \u0026#34;\u0026#34;, \u0026#34;GlobalIPv6Address\u0026#34;: \u0026#34;\u0026#34;, \u0026#34;GlobalIPv6PrefixLen\u0026#34;: 0, \u0026#34;DNSNames\u0026#34;: [ \u0026#34;nginx\u0026#34;, \u0026#34;03f76c3ff45a\u0026#34; ] } } \u0026ldquo;IPAddress\u0026rdquo;: \u0026ldquo;198.19.249.2\u0026rdquo; → 호스트 머신과 같은 네트워크워크 생성**\n⛔️ MacOS 에서의 이슈 (e.g OrbStack) https://github.com/docker/for-mac/issues/3926{:target=\u0026quot;_blank\u0026quot;} https://github.com/moby/libnetwork/issues/2614{:target=\u0026quot;_blank\u0026quot;} macOS에서 Docker의 macvlan/ipvlan 네트워크 드라이버가 제대로 작동하지 않음 2019년부터 보고 되었지만 미해결 원인: macOS의 네트워크 인터페이스 이름(예: en0)이 Linux 스타일(예: eth0)과 다름 Docker Desktop for Mac이 Linux 가상 머신 내에서 실행되어 네이티브 macOS 네트워킹 모드를 지원하지 않음 문제점: eth0 인터페이스를 지정하면 작동하는 것처럼 보이지만 실제로는 동작하지 않음 공식 문서에 macOS에서 지원되지 않는다는 내용이 명확하게 표시 안됨 일부는 Linux 서버를 구매하거나 VMware Fusion, VirtualBox 등을 사용하여 Linux VM을 실행하는 방식으로 우회 ⚠️ 도커 호스트 머신과 같은 네트워크 대역의 브릿지 네트워크 드라이버 생성 브릿지 네트워크란? 브릿지 네트워크는 Docker가 기본적으로 사용하는 네트워크 모드로, 내부 네트워크를 생성하여 컨테이너 간의 통신을 가능하게 함\n호스트와 컨테이너 간의 통신은 NAT(Network Address Translation)를 사용합니다.\n브릿지 네트워크 생성 호스트 머신과 같은 네트워크 대역을 사용하는 브릿지 네트워크를 생성하려면 다음 단계를 따릅니다.\n브릿지 네트워크 생성 docker network create --driver bridge \\ --subnet=198.19.249.0/24 \\ --gateway=198.19.249.1 \\ --opt \u0026#34;com.docker.network.bridge.name\u0026#34;=\u0026#34;br0\u0026#34; \\ host_bridge_network 리눅스 Docker에서는 호스트와 같은 네트워크를 생성하면 아래와 같은 에러 발생\nError response from daemon: invalid pool request: Pool overlaps with other one on this address space\nMacOS OrbStack 환경에서는 생성되기는 함\nIP 충돌 주의 !!\n생성된 네트워크 확인 docker network ls 컨테이너 실행 시 네트워크 지정 docker run -it --network host_bridge_network --name my_container ubuntu ⚠️ Macvlan 드라이버 구성과 차이점 Macvlan vs Bridge 네트워크 특성 Macvlan Bridge 네트워크 계층 데이터 링크 계층 (Layer 2) 네트워크 계층 (Layer 3) IP 할당 각 컨테이너에 직접 IP 할당 내부 서브넷을 통한 IP 할당 네트워크 성능 높음 중간 설정 복잡성 상대적으로 복잡 간단 호스트-컨테이너 통신 추가 구성 필요할 수 있음 용이 확장성 MAC 주소 제한으로 제약 가능 상대적으로 높음 보안 네트워크 수준 격리 NAT를 통한 내부 네트워크 보안 외부 접근성 직접 접근 가능 포트 매핑 필요 기존 네트워크와의 통합 용이 추가 구성 필요 Docker 기본 모드 아니오 예 사용 사례 높은 성능, 기존 네트워크 통합 필요 시 일반적인 사용, 간단한 구성 필요 시 💡 Conclusion Macvlan과 bridge 네트워크의 차이점을 이해하고, 각 네트워크 드라이버의 장단점을 고려하여 적절한 네트워크 설정을 선택 Macvlan은 특정 상황에서 유용하고, bridge 네트워크의 경우 많은 컨테이너 사용 시 병목 현상, 호스트 네트워크와 IP 충돌 가능성 등 관리가 어려우므로 주위를 요함\n","permalink":"https://cdecl.github.io/devops/docker-macvlan/","summary":"\u003cp\u003eDocker Macvlan 네트워크 소개, 활용 및 이슈\u003c/p\u003e\n\u003ch2 id=\"1-docker-macvlan-네트워크\"\u003e1. Docker Macvlan 네트워크?\u003c/h2\u003e\n\u003cp\u003eMacvlan 네트워크는 컨테이너에 독립적인 네트워크 인터페이스를 제공하여 물리적 네트워크와 직접 상호작용 가능\u003cbr\u003e\n이는 각 컨테이너가 고유한 MAC 주소를 가지므로 네트워크 수준에서 완전히 독립된 호스트처럼 동작 가능\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003e호스트 머신과 같은 네트워크에 docker 컨테이너를 생성 목적\u003cbr\u003e\nMacvlan 네트워크 설정은 물리적 네트워크 환경에 따라 적절한 서브넷과 게이트웨이를 사용 필요 (e.g. DHCP 환경)\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003ch3 id=\"macvlan-구성\"\u003eMacvlan 구성\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003e네트워크 성능 향상\u003c/strong\u003e: 호스트의 NAT를 거치지 않아 성능이 향상\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e네트워크 격리\u003c/strong\u003e: 각 컨테이너가 고유한 MAC 주소를 가져 네트워크 레벨에서 완전히 격리\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e기존 네트워크와의 통합\u003c/strong\u003e: 기존 물리적 네트워크 인프라와 쉽게 통합\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"docker-네트워크-유형\"\u003eDocker 네트워크 유형\u003c/h3\u003e\n\u003col\u003e\n\u003cli\u003e브리지 네트워크 (Bridge Network)\u003c/li\u003e\n\u003c/ol\u003e\n\u003cul\u003e\n\u003cli\u003e기본 네트워크 모드로, Docker가 기본적으로 사용하는 네트워크입니다.\u003c/li\u003e\n\u003cli\u003e내부 네트워크를 생성하여 컨테이너 간의 통신을 가능하게 합니다.\u003c/li\u003e\n\u003cli\u003e호스트와 컨테이너 간의 통신은 NAT(Network Address Translation)를 사용합니다.\u003c/li\u003e\n\u003c/ul\u003e\n\u003col start=\"2\"\u003e\n\u003cli\u003e호스트 네트워크 (Host Network)\u003c/li\u003e\n\u003c/ol\u003e\n\u003cul\u003e\n\u003cli\u003e컨테이너가 호스트의 네트워크 스택을 공유합니다.\u003c/li\u003e\n\u003cli\u003e성능이 중요한 애플리케이션에서 사용될 수 있습니다.\u003c/li\u003e\n\u003cli\u003e컨테이너와 호스트 간의 네트워크 격리가 없습니다.\u003c/li\u003e\n\u003c/ul\u003e\n\u003col start=\"3\"\u003e\n\u003cli\u003eNone 네트워크 (None Network)\u003c/li\u003e\n\u003c/ol\u003e\n\u003cul\u003e\n\u003cli\u003e네트워크 연결이 없는 컨테이너를 생성합니다.\u003c/li\u003e\n\u003cli\u003e네트워크 격리가 필요한 경우에 유용합니다.\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"2-macvlan-네트워크-설정\"\u003e2. Macvlan 네트워크 설정\u003c/h2\u003e\n\u003ch3 id=\"설치-요구-사항\"\u003e설치 요구 사항\u003c/h3\u003e\n\u003cp\u003eDocker가 설치된 시스템, 루트 권한 또는 Docker 관리 권한\u003c/p\u003e","title":"Docker 네트워크 - Macvlan"},{"content":"Nmap vs. nc (Network Mapper vs. Netcat) 네트워크 스캐닝 도구로서 비교\nNmap vs. nc (Netcat): 네트워크 스캐닝 도구 비교 Nmap (Network Mapper) 네트워크 스캐닝 및 보안 평가 도구로, 대규모 네트워크에서 호스트, 서비스, 오픈 포트를 탐지하는 데 사용\n네트워크 호스트, 서비스, 오픈 포트 스캐닝, 운영 체제 감지, 버전 감지, 서비스 식별 등 다양한 네트워크 탐지 및 보안 평가 기능\n옵션 설명 예제 -p 특정 포트를 스캔합니다 nmap -p 80,443 192.168.1.100 -p- 모든 포트를 스캔합니다 nmap -p- 192.168.1.100 -sV 서비스 버전을 탐지합니다 nmap -sV 192.168.1.100 -O 운영 체제를 탐지합니다 nmap -O 192.168.1.100 -sS TCP SYN 스캔을 수행합니다 nmap -sS 192.168.1.100 -sU UDP 포트를 스캔합니다 nmap -sU 192.168.1.100 -T4 스캔 속도를 높입니다 nmap -T4 192.168.1.100 -A 공격적 스캔을 수행합니다 (OS, 서비스 탐지) nmap -A 192.168.1.100 -oN 스캔 결과를 일반 텍스트 파일로 저장합니다 nmap -oN scan_results.txt 192.168.1.100 -oX 스캔 결과를 XML 파일로 저장합니다 nmap -oX scan_results.xml 192.168.1.100 -oG 스캔 결과를 그레프블(grepable) 형식으로 저장합니다 nmap -oG scan_results.gnmap 192.168.1.100 -oA 모든 형식으로 스캔 결과를 저장합니다 (N, X, G 파일) nmap -oA scan_results 192.168.1.100 -v 스캔 중 자세한 출력을 제공합니다 nmap -v 192.168.1.100 -vv 매우 자세한 출력을 제공합니다 nmap -vv 192.168.1.100 -Pn 호스트가 응답하지 않더라도 스캔을 수행합니다 nmap -Pn 192.168.1.100 --open 열린 포트만 출력합니다 nmap --open 192.168.1.100 --reason 포트 상태 결정의 이유를 출력합니다 nmap --reason 192.168.1.100 --script NSE(Nmap Scripting Engine) 스크립트를 실행합니다 nmap --script default 192.168.1.100 --exclude 특정 IP 주소를 제외하고 스캔합니다 nmap -sn 192.168.1.0/24 --exclude 192.168.1.1 --max-retries 재시도 횟수를 지정합니다 nmap --max-retries 2 192.168.1.100 nc (Netcat) 네트워크 연결 도구로, TCP/IP 소켓을 직접 다루는 데 사용되며, 데이터 전송, 포트 스캐닝, 포트 열기 및 메시지 전송 등의 작업을 수행할 수 있음\nTCP/IP 네트워크 소켓을 이용한 저수준 데이터 전송, 포트 스캐닝, 데이터 수신 및 전송 등의 기능을 제공\n옵션 설명 예제 -z 포트 스캔 모드 (연결하지 않음) nc -z 192.168.1.100 80 -v 상세 모드 (결과를 자세히 출력) nc -v 192.168.1.100 80 -u UDP 모드로 스캔 nc -z -u 192.168.1.100 53 -w 연결 시도 시 시간 제한 설정 (초) nc -w 3 192.168.1.100 80 -p 특정 출발지 포트를 사용하여 스캔 nc -p 12345 -z 192.168.1.100 80 -n DNS 조회를 생략하고 숫자 IP 주소 사용 nc -n 192.168.1.100 80 -l 리스닝 모드 (서버 역할) nc -l -p 12345 -e 스캔 후 명령어를 실행 nc -l -p 12345 -e /bin/bash -s 특정 출발지 IP 주소를 사용하여 스캔 nc -s 192.168.1.50 -z 192.168.1.100 80 -i 각 연결 시도 사이에 지연을 두고 스캔 nc -i 1 -z 192.168.1.100 1-1000 Nmap 예제 모든 포트 스캔 이 명령은 192.168.1.100 호스트의 모든 포트(1-65535)를 스캔합니다.\nnmap -p- 192.168.1.100 빠른 스캔 이 명령은 192.168.1.100 호스트에서 스캔 속도를 높이기 위해 타이밍 옵션(T4)을 사용합니다.\nnmap -T4 192.168.1.100 서비스 버전 탐지 스캔 이 명령은 192.168.1.100 호스트의 열려 있는 포트에서 동작하는 서비스의 버전을 탐지합니다.\nnmap -sV 192.168.1.100 운영 체제 탐지 스캔 이 명령은 192.168.1.100 호스트의 운영 체제를 추정합니다.\nnmap -O 192.168.1.100 UDP 포트 스캔 이 명령은 192.168.1.100 호스트의 UDP 포트를 스캔합니다.\nnmap -sU 192.168.1.100 스캔 결과를 XML 파일로 저장 이 명령은 192.168.1.100 호스트의 스캔 결과를 scan_results.xml 파일로 저장합니다.\nnmap -oX scan_results.xml 192.168.1.100 nc (netcat) 예제 다중 포트 스캔 이 명령은 192.168.1.100 호스트에서 80, 443, 8080 포트를 스캔합니다.\nnc -zv 192.168.1.100 80 443 8080 포트 범위 스캔 이 명령은 192.168.1.100 호스트에서 포트 1부터 1000까지 스캔합니다.\nnc -zv 192.168.1.100 1-1000 포트 스캔 후 연결 유지 이 명령은 192.168.1.100 호스트의 80번 포트에 연결을 시도하고, 연결이 유지됩니다.\nnc -v 192.168.1.100 80 특정 인터페이스 사용하여 스캔 이 명령은 192.168.1.50 인터페이스를 사용하여 192.168.1.100 호스트의 80번 포트를 스캔합니다.\nnc -zv -s 192.168.1.50 192.168.1.100 80 nmap은 더 많은 옵션과 세부 설정을 제공하여 포트 스캔 외에도 다양한 네트워크 탐사 작업을 수행할 수 있음.\n반면에 nc는 간단하고 빠르게 특정 포트의 상태를 확인하는 데 유용합니다.\n비교 기능/특성 nmap nc (netcat) 목적 네트워크 스캐닝, 서비스 식별, 보안 평가 TCP/IP 데이터 전송, 포트 스캐닝 사용법 복잡한 명령어, 다양한 옵션 제공 간단한 명령어, 기본적인 데이터 전송 유용한 옵션 -sV (서비스 버전 탐지), -O (운영 체제 탐지) 파일 전송(-w), 포트 스캐닝(-z) 장점 네트워크 구조 매핑, 포괄적인 보안 스캐닝 신속한 데이터 전송, 간단한 포트 점검 단점 네트워크 부하 발생 가능성, 사용자 권한 요구 보안 취약점 있을 수 있음, 한정된 기능 결론 Nmap과 nc는 각각 네트워크 스캐닝과 데이터 전송에 특화된 도구. Nmap은 복잡한 네트워크 매핑과 보안 평가를 위해 다양한 옵션과 기능을 제공하며, nc는 간단하고 빠른 데이터 전송을 목적 사용 목적에 따라 적합한 도구를 선택하여 네트워크 관리 및 보안 작업을 효율적으로 수행 ","permalink":"https://cdecl.github.io/devops/nmap-nc/","summary":"\u003cp\u003eNmap vs. nc (Network Mapper vs. Netcat) 네트워크 스캐닝 도구로서 비교\u003c/p\u003e\n\u003ch2 id=\"nmap-vs-nc-netcat-네트워크-스캐닝-도구-비교\"\u003eNmap vs. nc (Netcat): 네트워크 스캐닝 도구 비교\u003c/h2\u003e\n\u003ch4 id=\"nmap-network-mapper\"\u003eNmap (Network Mapper)\u003c/h4\u003e\n\u003cp\u003e네트워크 스캐닝 및 보안 평가 도구로, 대규모 네트워크에서 호스트, 서비스, 오픈 포트를 탐지하는 데 사용\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003e네트워크 호스트, 서비스, 오픈 포트 스캐닝, 운영 체제 감지, 버전 감지, 서비스 식별 등 다양한 네트워크 탐지 및 보안 평가 기능\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003ctable\u003e\n  \u003cthead\u003e\n      \u003ctr\u003e\n          \u003cth\u003e옵션\u003c/th\u003e\n          \u003cth\u003e설명\u003c/th\u003e\n          \u003cth\u003e예제\u003c/th\u003e\n      \u003c/tr\u003e\n  \u003c/thead\u003e\n  \u003ctbody\u003e\n      \u003ctr\u003e\n          \u003ctd\u003e\u003ccode\u003e-p\u003c/code\u003e\u003c/td\u003e\n          \u003ctd\u003e특정 포트를 스캔합니다\u003c/td\u003e\n          \u003ctd\u003e\u003ccode\u003enmap -p 80,443 192.168.1.100\u003c/code\u003e\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003e\u003ccode\u003e-p-\u003c/code\u003e\u003c/td\u003e\n          \u003ctd\u003e모든 포트를 스캔합니다\u003c/td\u003e\n          \u003ctd\u003e\u003ccode\u003enmap -p- 192.168.1.100\u003c/code\u003e\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003e\u003ccode\u003e-sV\u003c/code\u003e\u003c/td\u003e\n          \u003ctd\u003e서비스 버전을 탐지합니다\u003c/td\u003e\n          \u003ctd\u003e\u003ccode\u003enmap -sV 192.168.1.100\u003c/code\u003e\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003e\u003ccode\u003e-O\u003c/code\u003e\u003c/td\u003e\n          \u003ctd\u003e운영 체제를 탐지합니다\u003c/td\u003e\n          \u003ctd\u003e\u003ccode\u003enmap -O 192.168.1.100\u003c/code\u003e\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003e\u003ccode\u003e-sS\u003c/code\u003e\u003c/td\u003e\n          \u003ctd\u003eTCP SYN 스캔을 수행합니다\u003c/td\u003e\n          \u003ctd\u003e\u003ccode\u003enmap -sS 192.168.1.100\u003c/code\u003e\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003e\u003ccode\u003e-sU\u003c/code\u003e\u003c/td\u003e\n          \u003ctd\u003eUDP 포트를 스캔합니다\u003c/td\u003e\n          \u003ctd\u003e\u003ccode\u003enmap -sU 192.168.1.100\u003c/code\u003e\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003e\u003ccode\u003e-T4\u003c/code\u003e\u003c/td\u003e\n          \u003ctd\u003e스캔 속도를 높입니다\u003c/td\u003e\n          \u003ctd\u003e\u003ccode\u003enmap -T4 192.168.1.100\u003c/code\u003e\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003e\u003ccode\u003e-A\u003c/code\u003e\u003c/td\u003e\n          \u003ctd\u003e공격적 스캔을 수행합니다 (OS, 서비스 탐지)\u003c/td\u003e\n          \u003ctd\u003e\u003ccode\u003enmap -A 192.168.1.100\u003c/code\u003e\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003e\u003ccode\u003e-oN\u003c/code\u003e\u003c/td\u003e\n          \u003ctd\u003e스캔 결과를 일반 텍스트 파일로 저장합니다\u003c/td\u003e\n          \u003ctd\u003e\u003ccode\u003enmap -oN scan_results.txt 192.168.1.100\u003c/code\u003e\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003e\u003ccode\u003e-oX\u003c/code\u003e\u003c/td\u003e\n          \u003ctd\u003e스캔 결과를 XML 파일로 저장합니다\u003c/td\u003e\n          \u003ctd\u003e\u003ccode\u003enmap -oX scan_results.xml 192.168.1.100\u003c/code\u003e\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003e\u003ccode\u003e-oG\u003c/code\u003e\u003c/td\u003e\n          \u003ctd\u003e스캔 결과를 그레프블(grepable) 형식으로 저장합니다\u003c/td\u003e\n          \u003ctd\u003e\u003ccode\u003enmap -oG scan_results.gnmap 192.168.1.100\u003c/code\u003e\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003e\u003ccode\u003e-oA\u003c/code\u003e\u003c/td\u003e\n          \u003ctd\u003e모든 형식으로 스캔 결과를 저장합니다 (N, X, G 파일)\u003c/td\u003e\n          \u003ctd\u003e\u003ccode\u003enmap -oA scan_results 192.168.1.100\u003c/code\u003e\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003e\u003ccode\u003e-v\u003c/code\u003e\u003c/td\u003e\n          \u003ctd\u003e스캔 중 자세한 출력을 제공합니다\u003c/td\u003e\n          \u003ctd\u003e\u003ccode\u003enmap -v 192.168.1.100\u003c/code\u003e\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003e\u003ccode\u003e-vv\u003c/code\u003e\u003c/td\u003e\n          \u003ctd\u003e매우 자세한 출력을 제공합니다\u003c/td\u003e\n          \u003ctd\u003e\u003ccode\u003enmap -vv 192.168.1.100\u003c/code\u003e\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003e\u003ccode\u003e-Pn\u003c/code\u003e\u003c/td\u003e\n          \u003ctd\u003e호스트가 응답하지 않더라도 스캔을 수행합니다\u003c/td\u003e\n          \u003ctd\u003e\u003ccode\u003enmap -Pn 192.168.1.100\u003c/code\u003e\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003e\u003ccode\u003e--open\u003c/code\u003e\u003c/td\u003e\n          \u003ctd\u003e열린 포트만 출력합니다\u003c/td\u003e\n          \u003ctd\u003e\u003ccode\u003enmap --open 192.168.1.100\u003c/code\u003e\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003e\u003ccode\u003e--reason\u003c/code\u003e\u003c/td\u003e\n          \u003ctd\u003e포트 상태 결정의 이유를 출력합니다\u003c/td\u003e\n          \u003ctd\u003e\u003ccode\u003enmap --reason 192.168.1.100\u003c/code\u003e\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003e\u003ccode\u003e--script\u003c/code\u003e\u003c/td\u003e\n          \u003ctd\u003eNSE(Nmap Scripting Engine) 스크립트를 실행합니다\u003c/td\u003e\n          \u003ctd\u003e\u003ccode\u003enmap --script default 192.168.1.100\u003c/code\u003e\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003e\u003ccode\u003e--exclude\u003c/code\u003e\u003c/td\u003e\n          \u003ctd\u003e특정 IP 주소를 제외하고 스캔합니다\u003c/td\u003e\n          \u003ctd\u003e\u003ccode\u003enmap -sn 192.168.1.0/24 --exclude 192.168.1.1\u003c/code\u003e\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003e\u003ccode\u003e--max-retries\u003c/code\u003e\u003c/td\u003e\n          \u003ctd\u003e재시도 횟수를 지정합니다\u003c/td\u003e\n          \u003ctd\u003e\u003ccode\u003enmap --max-retries 2 192.168.1.100\u003c/code\u003e\u003c/td\u003e\n      \u003c/tr\u003e\n  \u003c/tbody\u003e\n\u003c/table\u003e\n\u003ch4 id=\"nc-netcat\"\u003enc (Netcat)\u003c/h4\u003e\n\u003cp\u003e네트워크 연결 도구로, TCP/IP 소켓을 직접 다루는 데 사용되며, 데이터 전송, 포트 스캐닝, 포트 열기 및 메시지 전송 등의 작업을 수행할 수 있음\u003c/p\u003e","title":"Nmap vs. Netcat"},{"content":"Homebrew는 macOS와 Linux에서 소프트웨어를 쉽게 설치하고 관리할 수 있는 패키지 관리자.\nHomebrew https://brew.sh/{:target=\u0026quot;_blank\u0026quot;} Homebrew는 macOS와 Linux에서 소프트웨어 패키지를 간편하게 설치하고 관리할 수 있는 패키지 관리자 Homebrew에는 두 가지 주요 설치 방법인 Formulae와 Cask가 있습니다. Formulae와 Cask의 차이점과 동일한 애플리케이션이 두 가지 방법으로 제공되는 예시를 설명 Homebrew 설치 macOS $ brew --version # 설치 확인 Linux $ eval \u0026#34;$(/home/linuxbrew/.linuxbrew/bin/brew shellenv)\u0026#34; $ brew --version # 설치 확인 Homebrew 주요 명령어 Formulae 설치 (CLI 애플리케이션) brew install \u0026lt;package-name\u0026gt; 예: wget 설치\nbrew install wget Cask 설치 (GUI 애플리케이션) brew install --cask \u0026lt;package-name\u0026gt; 예: Google Chrome 설치\nbrew install --cask google-chrome 소프트웨어 업데이트 및 업그레이드 brew update # Homebrew 업데이트 brew upgrade # 소프트웨어 업그레이드 소프트웨어 제거 brew uninstall \u0026lt;package-name\u0026gt; # Formulae 제거 brew uninstall --cask \u0026lt;package-name\u0026gt; # Cask 제거 기타 유용한 명령어 brew list # 설치된 소프트웨어 목록 보기 brew info \u0026lt;package-name\u0026gt; # 소프트웨어 정보 보기 brew cleanup # 캐시 정리 brew doctor # 문제 해결 Formulae와 Cask의 차이점 Formulae 설치 소프트웨어 유형: 주로 CLI (Command Line Interface) 애플리케이션 설치 방법: 소스 코드를 다운로드하여 컴파일 후 설치 설치 명령어: brew install \u0026lt;package-name\u0026gt; 구성 파일: Ruby 스크립트 파일로 작성, 설치 과정과 종속성 정의 설치 위치: 일반적으로 /usr/local/Cellar Cask 설치 소프트웨어 유형: 주로 GUI (Graphical User Interface) 애플리케이션, 폰트, 플러그인 등 설치 방법: 애플리케이션의 바이너리를 다운로드하여 설치 (DMG, ZIP, 설치 패키지 파일 등) 설치 명령어: brew install --cask \u0026lt;package-name\u0026gt; 구성 파일: Ruby DSL(Domain Specific Language) 파일로 작성, 다운로드 URL, 체크섬, 설치 스크립트 정의 설치 위치: 일반적으로 /Applications Formulae와 Cask를 모두 제공하는 애플리케이션을 통한 예시\nVisual Studio Code Visual Studio Code는 Microsoft에서 제공하는 인기 있는 코드 편집기입니다. 이 애플리케이션은 CLI 도구와 GUI 애플리케이션으로 모두 사용할 수 있어 Formulae와 Cask로 모두 제공됩니다.\nFormulae로 설치:\nbrew install visual-studio-code 이 명령어는 Visual Studio Code의 CLI 도구만 설치합니다. Cask로 설치:\nbrew install --cask visual-studio-code 이 명령어는 Visual Studio Code 전체 GUI 애플리케이션을 설치합니다. Java Java 개발 키트(JDK)는 다양한 버전과 배포본이 존재하며, CLI 도구와 GUI 관리 도구로 모두 사용할 수 있습니다.\nFormulae로 설치:\nbrew install openjdk 이 명령어는 OpenJDK를 설치합니다. Cask로 설치:\nbrew install --cask java 이 명령어는 Oracle JDK를 포함한 Java GUI 관리 도구를 설치합니다. ffmpeg ffmpeg는 비디오와 오디오를 처리하기 위한 강력한 CLI 도구입니다. GUI 프론트엔드가 있는 경우 Cask로도 제공될 수 있습니다.\nFormulae로 설치:\nbrew install ffmpeg 이 명령어는 ffmpeg 소스 코드를 다운로드하고 컴파일하여 설치합니다. Cask로 설치:\nbrew install --cask ffmpegx 이 명령어는 ffmpeg의 GUI 프론트엔드인 ffmpegX를 설치합니다. 결론 Homebrew의 Formulae와 Cask는 각각 CLI 애플리케이션과 GUI 애플리케이션을 설치하는 데 적합한 방법을 제공합니다 일부 애플리케이션은 이 두 가지 방법으로 모두 제공되어 사용자가 필요에 따라 적합한 설치 방법을 선택할 수 있음 이를 통해 Homebrew는 macOS와 Linux 사용자가 다양한 소프트웨어를 쉽게 설치하고 관리할 수 있도록 도와줍니다. ","permalink":"https://cdecl.github.io/devops/homebrew-formulae-cask/","summary":"\u003cp\u003eHomebrew는 macOS와 Linux에서 소프트웨어를 쉽게 설치하고 관리할 수 있는 패키지 관리자.\u003c/p\u003e\n\u003ch2 id=\"homebrew\"\u003eHomebrew\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://brew.sh/\"\u003ehttps://brew.sh/\u003c/a\u003e{:target=\u0026quot;_blank\u0026quot;}\u003c/li\u003e\n\u003cli\u003eHomebrew는 macOS와 Linux에서 소프트웨어 패키지를 간편하게 설치하고 관리할 수 있는 패키지 관리자\u003c/li\u003e\n\u003cli\u003eHomebrew에는 두 가지 주요 설치 방법인 \u003ccode\u003eFormulae\u003c/code\u003e와 \u003ccode\u003eCask\u003c/code\u003e가 있습니다.\u003c/li\u003e\n\u003cli\u003eFormulae와 Cask의 차이점과 동일한 애플리케이션이 두 가지 방법으로 제공되는 예시를 설명\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"homebrew-설치\"\u003eHomebrew 설치\u003c/h3\u003e\n\u003ch4 id=\"macos\"\u003emacOS\u003c/h4\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-sh\" data-lang=\"sh\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ brew --version  \u003cspan style=\"color:#75715e\"\u003e# 설치 확인\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch4 id=\"linux\"\u003eLinux\u003c/h4\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-sh\" data-lang=\"sh\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ eval \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u003c/span\u003e\u003cspan style=\"color:#66d9ef\"\u003e$(\u003c/span\u003e/home/linuxbrew/.linuxbrew/bin/brew shellenv\u003cspan style=\"color:#66d9ef\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ brew --version  \u003cspan style=\"color:#75715e\"\u003e# 설치 확인\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch3 id=\"homebrew-주요-명령어\"\u003eHomebrew 주요 명령어\u003c/h3\u003e\n\u003ch4 id=\"formulae-설치-cli-애플리케이션\"\u003eFormulae 설치 (CLI 애플리케이션)\u003c/h4\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-sh\" data-lang=\"sh\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ebrew install \u0026lt;package-name\u0026gt;\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003e예: \u003ccode\u003ewget\u003c/code\u003e 설치\u003c/p\u003e","title":"Homebrew, Formulae와 Cask의 차이점"},{"content":"TLS와 SSH 프로토콜의 서버-클라이언트 협상 항목과 기능 비교\nTLS와 SSH 프로토콜 정의 1. TLS(Transport Layer Security) TLS 프로토콜은 인터넷 상에서 안전한 통신을 위해 사용되는 암호화 프로토콜입니다. TLS는 SSL(Secure Sockets Layer) 프로토콜의 후속 버전으로, 웹 브라우저와 웹 서버 사이의 통신을 암호화하여 데이터 보안을 강화하는데 사용됩니다.\nTLS 프로토콜의 주요 기능 암호화: 클라이언트와 서버 간의 통신 내용을 암호화하여 보호 인증: 서버의 신원을 인증하고, 클라이언트 인증도 지원 무결성: 전송 데이터의 변조를 방지 TLS는 HTTP, SMTP, IMAP 등 다양한 프로토콜의 보안 계층으로 사용됩니다. TLS 1.0/1.1은 더 이상 권장되지 않으며, 현재는 TLS 1.2와 가장 최신 표준인 TLS 1.3이 널리 사용되고 있습니다. 특히 TLS 1.3은 이전 버전 대비 보안성과 성능이 크게 향상되었습니다.\n2. SSH(Secure Shell) SSH 프로토콜은 네트워크 상에서 안전한 원격 액세스와 파일 전송을 제공하는 암호화 프로토콜입니다. SSH는 기존의 Telnet, rlogin 등의 비보안 프로토콜을 대체하여 원격 시스템에 안전하게 접속할 수 있도록 합니다.\nSSH 프로토콜의 주요 기능 암호화: 클라이언트와 서버 간의 통신 내용을 암호화하여 보호 인증: 서버의 신원을 인증하고, 클라이언트 인증도 지원 무결성: 전송 데이터의 변조를 방지 포트 전달: 방화벽을 우회하여 안전한 통신 터널을 만듦 SSH는 주로 Linux/Unix 시스템의 원격 관리, 파일 전송, 터널링 등에 사용됩니다. SSH-1은 심각한 보안 취약점이 있어 더 이상 사용되지 않으며, 현재는 SSH-2가 표준 프로토콜로 사용됩니다.\nTLS와 SSH 프로토콜의 서버-클라이언트 협상 항목과 기능 비교 TLS와 SSH 프로토콜은 안전한 통신을 위해 서버와 클라이언트 간에 다양한 협상 과정을 거칩니다.\n1. 프로토콜 버전 협상 TLS: TLS 1.2, TLS 1.3 버전 협상 (TLS 1.0/1.1은 더 이상 권장되지 않음) SSH: SSH-2 버전 (SSH-1은 보안 취약점으로 더 이상 사용되지 않음) 2. 암호화 알고리즘 협상 TLS: 대칭키 암호화: AES-GCM, ChaCha20-Poly1305 (AEAD 암호화 방식) MAC 알고리즘: HMAC-SHA256, HMAC-SHA384 SSH: 대칭키 암호화: AES-CTR, AES-GCM MAC 알고리즘: HMAC-SHA256, HMAC-SHA512 MAC(Message Authentication Code) 알고리즘: 메시지의 무결성을 검증하기 위해 사용되는 암호화 기술\n3. 키 교환 알고리즘 협상 TLS: TLS 1.3: ECDHE, DHE (정적 RSA 키 교환 제거됨) TLS 1.2: ECDHE, DHE, RSA SSH: Diffie-Hellman, ECDH(Elliptic Curve Diffie-Hellman) 4. 압축 방식 협상 TLS: DEFLATE, NULL(압축 없음) SSH: zlib, none(압축 없음) 5. 세션 관리 TLS: 새로운 세션 생성 기존 세션 재사용 세션 ID, 타임아웃 협상 SSH: 없음(초기화 벡터(IV) 사용) 6. 인증 방식 협상 TLS: 클라이언트 인증: 인증서, 사용자명/비밀번호 서버 인증: 인증서 SSH: 비밀번호 인증 공개키 인증 호스트 기반 인증 Kerberos 인증 7. 확장 기능 협상 TLS: SNI(Server Name Indication), ALPN(Application-Layer Pro SSH: 포트 포워딩 X11 포워딩 에이전트 전달 환경변수 전달 협상 항목 및 기능 비교 협상 항목 TLS SSH 프로토콜 버전 • TLS 1.2, 1.3 • SSH-2 암호화 알고리즘 • AES-GCM\n• ChaCha20-Poly1305\n• HMAC-SHA256/384 • AES-CTR\n• AES-GCM\n• HMAC-SHA256/512 키 교환 알고리즘 • ECDHE\n• DHE (TLS 1.3)\n• RSA (TLS 1.2) • Diffie-Hellman\n• ECDH 압축 방식 • DEFLATE\n• NULL • zlib\n• none 세션 관리 • 세션 생성\n• 세션 재사용\n• 세션 ID/타임아웃 • IV 사용 인증 방식 • 클라이언트 인증서\n• 서버 인증서 • 비밀번호 인증\n• 공개키 인증\n• 호스트 기반\n• Kerberos 확장 기능 • SNI\n• ALPN • 포트 포워딩\n• X11 포워딩\n• 에이전트/환경변수 전달 ","permalink":"https://cdecl.github.io/devops/tls-ssh-handshake/","summary":"\u003cp\u003eTLS와 SSH 프로토콜의 서버-클라이언트 협상 항목과 기능 비교\u003c/p\u003e\n\u003ch2 id=\"tls와-ssh-프로토콜-정의\"\u003eTLS와 SSH 프로토콜 정의\u003c/h2\u003e\n\u003ch3 id=\"1-tlstransport-layer-security\"\u003e1. TLS(Transport Layer Security)\u003c/h3\u003e\n\u003cp\u003eTLS 프로토콜은 인터넷 상에서 안전한 통신을 위해 사용되는 암호화 프로토콜입니다.\nTLS는 SSL(Secure Sockets Layer) 프로토콜의 후속 버전으로, 웹 브라우저와 웹 서버 사이의 통신을 암호화하여 데이터 보안을 강화하는데 사용됩니다.\u003c/p\u003e\n\u003ch4 id=\"tls-프로토콜의-주요-기능\"\u003eTLS 프로토콜의 주요 기능\u003c/h4\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003e암호화\u003c/strong\u003e: 클라이언트와 서버 간의 통신 내용을 암호화하여 보호\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e인증\u003c/strong\u003e: 서버의 신원을 인증하고, 클라이언트 인증도 지원\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e무결성\u003c/strong\u003e: 전송 데이터의 변조를 방지\u003c/li\u003e\n\u003c/ul\u003e\n\u003cblockquote\u003e\n\u003cp\u003eTLS는 HTTP, SMTP, IMAP 등 다양한 프로토콜의 보안 계층으로 사용됩니다. TLS 1.0/1.1은 더 이상 권장되지 않으며, 현재는 TLS 1.2와 가장 최신 표준인 TLS 1.3이 널리 사용되고 있습니다. 특히 TLS 1.3은 이전 버전 대비 보안성과 성능이 크게 향상되었습니다.\u003c/p\u003e","title":"TLS와 SSH 프로토콜 기능"},{"content":"GNU C++ 프로그램에서 정적 라이브러리를 링크하는 방법\n정적 라이브러리 사용 사용 시 고려 사항 프로그램 크기 증가: 정적 라이브러리를 사용하면 실행 파일 크기가 크게 증가할 수 있슴 라이브러리 업데이트: 정적 라이브러리를 사용하면 라이브러리 업데이트 시 프로그램을 다시 컴파일해야 필요 사용 장점 운영 체제 의존성 감소: 정적 라이브러리를 사용하면 프로그램 실행에 필요한 모든 라이브러리가 실행 파일에 포함되어 있어 운영 체제에 동일한 라이브러리가 설치되어 있지 않아도 프로그램을 실행 보안 강화: 정적 라이브러리를 사용하면 공유 라이브러리 공격과 같은 보안 취약점에 대한 위험을 줄일 수 있음 성능 향상: 정적 라이브러리를 사용하면 프로그램 실행 속도를 향상시킬 수 있음 정적 라이브러리 링크 링크 옵션 -static C 런타임 라이브러리뿐만 아니라 모든 외부 라이브러리를 정적으로 링크합니다. 실행 파일에 모든 필요한 라이브러리 코드를 포함시킵니다. 결과적으로 실행 파일의 크기가 크게 증가할 수 있습니다. 시스템 라이브러리에 대한 의존성을 제거하여 이식성을 높입니다. -static-libstdc++ C++ 표준 라이브러리만 정적으로 링크합니다. 다른 시스템 라이브러리나 사용자 정의 라이브러리는 여전히 동적으로 링크될 수 있습니다. -static 옵션보다 실행 파일 크기 증가가 덜합니다. C++ ABI 호환성 문제를 해결하는 데 유용할 수 있습니다. g++ -static main.cpp -o myprogram 라이브러리 링크 지정 방법 -l 옵션 (일반적인 방법) 컴파일러에게 특정 라이브러리를 링크하도록 지시. 먼저 동적 라이브러리(.so 파일)를 찾습니다. 동적 라이브러리가 없으면 정적 라이브러리(.a 파일)를 찾습니다. 표준 라이브러리 경로(예: /usr/lib, /lib)와 -L 옵션으로 지정된 추가 경로에서 라이브러리를 찾습니다. 정적 라이브러리를 명시적으로 지정하려면, 전체 파일 경로를 사용할 수 있습니다. 예: g++ main.cpp /path/to/libmylib.a -o myprogram 뒤에 오는 라이브러리 이름은 관례에 따라 lib 접두사와 .a 확장자를 가진 정적 라이브러리 파일명 -static 옵션과 함께 사용 시 -static 옵션과 함께 -l을 사용하면, 링커는 오직 정적 라이브러리만을 찾습니다. 이 경우 정적 라이브러리가 없다면 링크 에러가 발생합니다. -Wl,\u0026ndash;whole-archive 옵션 컴파일러에게 라이브러리에 있는 모든 객체 파일을 링크하도록 지시 이 옵션을 사용하면 라이브러리에 있는 모든 함수가 사용될 수 있음 주로 정적 라이브러리(.a)에 사용됩니다. 전역 객체의 생성자나 정적 초기화 함수가 반드시 링크되도록 보장합니다. 주요 차이점 : -l -Wl,\u0026ndash;whole-archive -l은 선택적으로 필요한 부분만 링크하지만, \u0026ndash;whole-archive는 라이브러리 전체를 링크합니다. -l은 동적/정적 라이브러리 모두에 사용 가능하지만, \u0026ndash;whole-archive는 주로 정적 라이브러리에 사용됩니다. \u0026ndash;whole-archive를 사용하면 실행 파일 크기가 더 커질 수 있습니다. -Wl,\u0026ndash;whole-archive는 플러그인 시스템이나 동적으로 로드되는 모듈을 구현할 때 특히 유용할 수 있습니다 g++ main.cpp -lstdc++ -Wl,--whole-archive my_lib.a -o myprogram 의존성 확인 실행 파일의 의존성을 확인하는 것은 프로그램이 어떤 라이브러리에 의존하고 있는지 파악하는 데 중요합니다. 이를 통해 정적 링킹이 제대로 되었는지, 혹은 동적 라이브러리에 대한 의존성이 있는지 확인할 수 있습니다.\nldd ldd 명령은 실행 파일의 의존성을 확인하는 데 사용. 다음 명령은 myprogram 실행 파일의 의존성을 확인합니다.\n$ ldd myprogram-static not a dynamic executable $ ldd myprogram linux-vdso.so.1 (0x0000ffff8323c000) libstdc++.so.6 =\u0026gt; /lib/aarch64-linux-gnu/libstdc++.so.6 (0x0000ffff82f90000) libgcc_s.so.1 =\u0026gt; /lib/aarch64-linux-gnu/libgcc_s.so.1 (0x0000ffff82f60000) libc.so.6 =\u0026gt; /lib/aarch64-linux-gnu/libc.so.6 (0x0000ffff82db0000) /lib/ld-linux-aarch64.so.1 (0x0000ffff83203000) libm.so.6 =\u0026gt; /lib/aarch64-linux-gnu/libm.so.6 (0x0000ffff82d10000) readelf 명령 사용 readelf 명령은 ELF (Executable and Linkable Format) 파일의 더 자세한 정보를 제공합니다.\n$ readelf -d myprogram | grep NEEDED 0x0000000000000001 (NEEDED) Shared library: [libstdc++.so.6] 0x0000000000000001 (NEEDED) Shared library: [libc.so.6] 이 명령은 프로그램이 필요로 하는 공유 라이브러리를 보여줍니다.\nobjdump 명령 사용 objdump 명령을 사용하여 실행 파일의 섹션 헤더를 검사할 수 있습니다.\n$ objdump -h myprogram main: file format elf64-littleaarch64 Sections: Idx Name Size VMA LMA File off Algn 0 .interp 0000001b 0000000000000238 0000000000000238 00000238 2**0 CONTENTS, ALLOC, LOAD, READONLY, DATA 1 .note.gnu.build-id 00000024 0000000000000254 0000000000000254 00000254 2**2 CONTENTS, ALLOC, LOAD, READONLY, DATA 2 .note.package 00000070 0000000000000278 0000000000000278 00000278 2**2 CONTENTS, ALLOC, LOAD, READONLY, DATA 3 .note.ABI-tag 00000020 00000000000002e8 00000000000002e8 000002e8 2**2 CONTENTS, ALLOC, LOAD, READONLY, DATA ... 이 명령은 실행 파일의 각 섹션에 대한 정보를 제공하며, 정적으로 링크된 파일의 경우 더 많은 섹션이 포함되어 있을 것입니다.\n라이브러리 ABI(Application Binary Interface)의 버전 확인 strings 명령을 사용하여 실행 파일 내에 포함된 라이브러리 버전 정보를 추출할 수 있습니다.\n$ strings myprogram | grep ^GLIB GLIBC_2.17 GLIBC_2.32 GLIBC_2.34 GLIBCXX_3.4.20 GLIBCXX_3.4.26 GLIBCXX_3.4.9 GLIBCXX_3.4.29 GLIBCXX_3.4.15 GLIBCXX_3.4.11 GLIBCXX_3.4.30 GLIBCXX_3.4.21 GLIBCXX_3.4.14 GLIBCXX_3.4.22 GLIBCXX_3.4 이 출력은 프로그램이 사용하는 GLIBC와 GLIBCXX(C++ 표준 라이브러리)의 버전을 보여줍니다.\n기타 pthread 정의 : 일부 Linux 배포판에서는 pthread 라이브러리를 명시적으로 정의 안해도 됨 (e.g. Ubuntu) 표준 C/C++ 라이브러리의 static 버전을 별도로 설치가 필요할 수 있음 glibc : 표준 C 언어 헤더 파일 및 함수의 구현 libstdc++ : GNU Standard C++ Library의 약자이며, C++ 언어 표준에 따라 구현된 C++ 라이브러리. 참고자료 G++ documentation on linking: https://gcc.gnu.org/onlinedocs/gcc/Link-Options.html ","permalink":"https://cdecl.github.io/dev/g++-static/","summary":"\u003cp\u003eGNU C++ 프로그램에서 정적 라이브러리를 링크하는 방법\u003c/p\u003e\n\u003ch2 id=\"정적-라이브러리-사용\"\u003e정적 라이브러리 사용\u003c/h2\u003e\n\u003ch3 id=\"사용-시-고려-사항\"\u003e사용 시 고려 사항\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003e프로그램 크기 증가:\u003c/strong\u003e 정적 라이브러리를 사용하면 실행 파일 크기가 크게 증가할 수 있슴\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e라이브러리 업데이트:\u003c/strong\u003e 정적 라이브러리를 사용하면 라이브러리 업데이트 시 프로그램을 다시 컴파일해야 필요\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"사용-장점\"\u003e사용 장점\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003e운영 체제 의존성 감소:\u003c/strong\u003e 정적 라이브러리를 사용하면 프로그램 실행에 필요한 모든 라이브러리가 실행 파일에 포함되어 있어 운영 체제에 동일한 라이브러리가 설치되어 있지 않아도 프로그램을 실행\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e보안 강화:\u003c/strong\u003e 정적 라이브러리를 사용하면 공유 라이브러리 공격과 같은 보안 취약점에 대한 위험을 줄일 수 있음\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e성능 향상:\u003c/strong\u003e 정적 라이브러리를 사용하면 프로그램 실행 속도를 향상시킬 수 있음\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"정적-라이브러리-링크\"\u003e정적 라이브러리 링크\u003c/h2\u003e\n\u003ch3 id=\"링크-옵션\"\u003e링크 옵션\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003e-static\u003c/strong\u003e\n\u003cul\u003e\n\u003cli\u003eC 런타임 라이브러리뿐만 아니라 모든 외부 라이브러리를 정적으로 링크합니다.\u003c/li\u003e\n\u003cli\u003e실행 파일에 모든 필요한 라이브러리 코드를 포함시킵니다.\u003c/li\u003e\n\u003cli\u003e결과적으로 실행 파일의 크기가 크게 증가할 수 있습니다.\u003c/li\u003e\n\u003cli\u003e시스템 라이브러리에 대한 의존성을 제거하여 이식성을 높입니다.\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e-static-libstdc++\u003c/strong\u003e\n\u003cul\u003e\n\u003cli\u003eC++ 표준 라이브러리만 정적으로 링크합니다.\u003c/li\u003e\n\u003cli\u003e다른 시스템 라이브러리나 사용자 정의 라이브러리는 여전히 동적으로 링크될 수 있습니다.\u003c/li\u003e\n\u003cli\u003e-static 옵션보다 실행 파일 크기 증가가 덜합니다.\u003c/li\u003e\n\u003cli\u003eC++ ABI 호환성 문제를 해결하는 데 유용할 수 있습니다.\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-sh\" data-lang=\"sh\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eg++ -static main.cpp -o myprogram\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch3 id=\"라이브러리-링크-지정-방법\"\u003e라이브러리 링크 지정 방법\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003e-l\u003c/strong\u003e 옵션 (일반적인 방법)\n\u003cul\u003e\n\u003cli\u003e컴파일러에게 특정 라이브러리를 링크하도록 지시.\n\u003cul\u003e\n\u003cli\u003e먼저 동적 라이브러리(.so 파일)를 찾습니다.\u003c/li\u003e\n\u003cli\u003e동적 라이브러리가 없으면 정적 라이브러리(.a 파일)를 찾습니다.\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e표준 라이브러리 경로(예: /usr/lib, /lib)와 -L 옵션으로 지정된 추가 경로에서 라이브러리를 찾습니다.\n\u003cul\u003e\n\u003cli\u003e정적 라이브러리를 명시적으로 지정하려면, 전체 파일 경로를 사용할 수 있습니다.\u003c/li\u003e\n\u003cli\u003e예: \u003ccode\u003eg++ main.cpp /path/to/libmylib.a -o myprogram\u003c/code\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e뒤에 오는 라이브러리 이름은 관례에 따라 lib 접두사와 .a 확장자를 가진 정적 라이브러리 파일명\u003c/li\u003e\n\u003cli\u003e-static 옵션과 함께 사용 시\n\u003cul\u003e\n\u003cli\u003e-static 옵션과 함께 -l을 사용하면, 링커는 오직 정적 라이브러리만을 찾습니다.\u003c/li\u003e\n\u003cli\u003e이 경우 정적 라이브러리가 없다면 링크 에러가 발생합니다.\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e-Wl,\u0026ndash;whole-archive\u003c/strong\u003e 옵션\n\u003cul\u003e\n\u003cli\u003e컴파일러에게 라이브러리에 있는 모든 객체 파일을 링크하도록 지시\u003c/li\u003e\n\u003cli\u003e이 옵션을 사용하면 라이브러리에 있는 모든 함수가 사용될 수 있음\u003c/li\u003e\n\u003cli\u003e주로 정적 라이브러리(.a)에 사용됩니다.\u003c/li\u003e\n\u003cli\u003e전역 객체의 생성자나 정적 초기화 함수가 반드시 링크되도록 보장합니다.\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch4 id=\"주요-차이점---l--wlwhole-archive\"\u003e주요 차이점 : -l -Wl,\u0026ndash;whole-archive\u003c/h4\u003e\n\u003cul\u003e\n\u003cli\u003e-l은 선택적으로 필요한 부분만 링크하지만, \u0026ndash;whole-archive는 라이브러리 전체를 링크합니다.\u003c/li\u003e\n\u003cli\u003e-l은 동적/정적 라이브러리 모두에 사용 가능하지만, \u0026ndash;whole-archive는 주로 정적 라이브러리에 사용됩니다.\u003c/li\u003e\n\u003cli\u003e\u0026ndash;whole-archive를 사용하면 실행 파일 크기가 더 커질 수 있습니다.\u003c/li\u003e\n\u003cli\u003e-Wl,\u0026ndash;whole-archive는 플러그인 시스템이나 동적으로 로드되는 모듈을 구현할 때 특히 유용할 수 있습니다\u003c/li\u003e\n\u003c/ul\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-sh\" data-lang=\"sh\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eg++ main.cpp -lstdc++ -Wl,--whole-archive my_lib.a -o myprogram\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch3 id=\"의존성-확인\"\u003e의존성 확인\u003c/h3\u003e\n\u003cp\u003e실행 파일의 의존성을 확인하는 것은 프로그램이 어떤 라이브러리에 의존하고 있는지 파악하는 데 중요합니다. 이를 통해 정적 링킹이 제대로 되었는지, 혹은 동적 라이브러리에 대한 의존성이 있는지 확인할 수 있습니다.\u003c/p\u003e","title":"GNU C++로 정적 라이브러리 링크하는 방법"},{"content":"유니코드 NFD 문자열을 NFC 문자열로 변환하는 방법을 Python 스크립트와 nfd2c 툴을 활용하여 설명합니다.\n이 글은 macOS 및 다양한 운영 체제에서 유니코드 호환성을 유지하기 위해 NFD와 NFC 간 변환이 필요한 상황에 유용합니다.\nNFD와 NFC 유니코드는 다양한 언어와 문자를 일관되게 표현하기 위한 국제 표준입니다. 하지만 동일한 문자라도 운영 체제나 시스템에 따라 다른 유니코드 정규화 방식(NFD, NFC)으로 저장되거나 처리될 수 있습니다.\n이는 파일 시스템, 데이터베이스, 문자열 비교 등에서 예상치 못한 문제를 일으킬 수 있습니다.\n유니코드 정규화 방식 NFD (Normalization Form Decomposition)\n문자 분해 방식: 기본 문자와 결합 문자(음절)를 별도로 분리해 표현합니다.\n특징:\n일부 시스템에서 호환성 문제가 발생할 수 있습니다.\n(예: macOS의 파일 시스템은 NFD 형식을 기본으로 사용) 같은 문자열이지만, 서로 다른 형식으로 인식되어 비교나 검색이 실패할 가능성이 있습니다. 저장 공간을 더 많이 사용합니다. 시각적으로는 동일해 보이지만 내부적으로 다른 표현을 가집니다. 예시:\nNFD: ā (문자 a + 결합 문자 ¯) NFC (Normalization Form Canonical Composition)\n문자 합성 방식: 가능한 경우 기본 문자와 결합 문자를 단일 문자로 합성합니다.\n특징:\n대부분의 시스템에서 더 높은 호환성을 제공합니다.\n(Windows, Android 등은 NFC 형식을 기본으로 사용) 문자열 비교 및 검색이 용이합니다. 저장 공간을 절약할 수 있습니다. 예시:\nNFC: ā (단일 문자 ā) NFD와 NFC의 필요성 운영 체제 간 호환성: macOS와 Windows/Android 간 파일 이름 불일치 문제를 해결합니다. 데이터 정합성 유지: 데이터베이스나 텍스트 파일의 문자열 비교 결과를 일관되게 만듭니다. Python 스크립트로 변환하기 Python의 unicodedata.normalize 함수를 사용하면 NFD 문자열을 쉽게 NFC 문자열로 변환할 수 있습니다.\n아래는 간단한 변환 예제입니다.\nimport unicodedata def nfd_to_nfc(text): \u0026#34;\u0026#34;\u0026#34;NFD 문자열을 NFC 문자열로 변환합니다.\u0026#34;\u0026#34;\u0026#34; return unicodedata.normalize(\u0026#39;NFC\u0026#39;, text) # 테스트 문자열 (예: macOS에서 NFD로 저장된 문자열) text = \u0026#34;Amēricā\u0026#34; nfc_text = nfd_to_nfc(text) print(f\u0026#34;원본 텍스트: {text}\u0026#34;) # 출력: 원본 텍스트 (NFD) print(f\u0026#34;변환된 텍스트: {nfc_text}\u0026#34;) # 출력: America 주요 함수 설명 unicodedata.normalize(form, text)\nform: 변환할 정규화 방식 (예: 'NFC', 'NFD', 'NFKC', 'NFKD') text: 변환할 문자열 유용한 활용 예시:\n텍스트 데이터 전처리 운영 체제 간 파일 이름 호환성 유지 검색 기능 강화 (정규화된 형태로 통합) nfd2c 툴 사용하기 파일 및 디렉토리 이름의 NFD 문자열을 NFC 문자열로 변환하려면 nfd2c 툴이 유용합니다.\n특히 macOS와 Windows 간 파일 시스템 호환성 문제를 해결하는 데 효과적입니다.\n설치 및 기본 사용법 $ pip install unicode-nfd2c 사용법 예시 # 현재 디렉토리의 파일 이름을 NFC 형식으로 변환 $ nfd2c # 모든 서브 디렉토리를 포함해 변환 실행 $ nfd2c -r # 변환 실행 (파일 이름 변경) $ nfd2c -x # 특정 파일만 변환 $ nfd2c -f myfile.txt 옵션 설명 -x, --execute: 실제 이름 변경 실행 -r, --recursive: 서브 디렉토리 포함 -d, --dir-only: 디렉토리 이름만 변환 -f, --file-only: 파일 이름만 변환 -h, --help: 도움말 표시 변환 전후 확인 $ nfd2c Found NFD filename: \u0026#34;Amēricā.txt\u0026#34; Would convert to: \u0026#34;America.txt\u0026#34; 실제 변환을 실행하려면 -x 옵션을 추가합니다.\n마무리 NFD와 NFC 변환은 운영 체제 간 호환성과 데이터 정합성을 유지하는 데 필수적입니다.\nPython의 unicodedata 모듈은 텍스트 기반 데이터에 유용합니다. nfd2c 툴은 파일 및 디렉토리 이름을 변환하는 데 효율적입니다. 이 글에서 제공한 방법을 통해 유니코드 문자열 처리 문제를 해결하고 시스템 간 호환성을 확보하세요. 😊\n","permalink":"https://cdecl.github.io/devops/nfd-to-nfc/","summary":"\u003cp\u003e유니코드 NFD 문자열을 NFC 문자열로 변환하는 방법을 Python 스크립트와 \u003ccode\u003enfd2c\u003c/code\u003e 툴을 활용하여 설명합니다.\u003cbr\u003e\n이 글은 macOS 및 다양한 운영 체제에서 유니코드 호환성을 유지하기 위해 NFD와 NFC 간 변환이 필요한 상황에 유용합니다.\u003c/p\u003e\n\u003ch2 id=\"nfd와-nfc\"\u003eNFD와 NFC\u003c/h2\u003e\n\u003cblockquote\u003e\n\u003cp\u003e\u003cstrong\u003e유니코드\u003c/strong\u003e는 다양한 언어와 문자를 일관되게 표현하기 위한 국제 표준입니다. 하지만 동일한 문자라도 운영 체제나 시스템에 따라 \u003cstrong\u003e다른 유니코드 정규화 방식\u003c/strong\u003e(NFD, NFC)으로 저장되거나 처리될 수 있습니다.\u003cbr\u003e\n이는 파일 시스템, 데이터베이스, 문자열 비교 등에서 예상치 못한 문제를 일으킬 수 있습니다.\u003c/p\u003e","title":"유니코드 NFD to NFC 변환"},{"content":"ollama, ollama-webui, mistral 설치 및 테스트\nOllama OLLAMA는 Open Large Language Model for AI Applications의 약자로, Google AI에서 개발한 대규모 언어 모델 (LLM)입니다. OLLAMA는 텍스트 생성, 번역, 질문 응답 등 다양한 AI 애플리케이션 개발을 위해 사용할 수 있는 강력한 도구\n다양한 기능: OLLAMA는 텍스트 생성, 번역, 질문 응답, 요약, 코드 생성 등 다양한 기능을 제공합니다. 강력한 성능: OLLAMA는 Google AI의 최첨단 기술을 기반으로 개발되어 강력한 성능을 제공합니다. 쉬운 사용: OLLAMA는 Python API를 제공하여 쉽게 사용할 수 있습니다. 다양한 모델: OLLAMA는 다양한 크기와 기능을 가진 모델을 제공하여 사용자의 필요에 맞게 선택할 수 있습니다. Ollama 설치 다운로드 : https://ollama.ai/download{:target=\u0026quot;_blank\u0026quot;} 설치 및 활용 가능한 모델 : https://ollama.ai/library{:target=\u0026quot;_blank\u0026quot;} $ ollama Usage: ollama [flags] ollama [command] Available Commands: serve Start ollama create Create a model from a Modelfile show Show information for a model run Run a model pull Pull a model from a registry push Push a model to a registry list List models cp Copy a model rm Remove a model help Help about any command Flags: -h, --help help for ollama -v, --version Show version information Use \u0026#34;ollama [command] --help\u0026#34; for more information about a command. mistral 모델 설치 https://ollama.ai/library/mistral{:target=\u0026quot;_blank\u0026quot;} Mistral은 최근에 개발된 대형 언어 모델 중 하나입니다. 이 모델은 7.3 billion 개의 파라미터를 가지고 있으며, 자연어 처리 분야에서 매우 높은 성능을 보입니다. Mistral은 다양한 자연어 처리 작업에서 사용될 수 있습니다. 예를 들어, 이 모델은 텍스트 생성, 기계 번역, 질문 응답, 감성 분석 등의 작업에 사용될 수 있습니다.\nollama CLI 툴을 통해 다운로드 및 실행 $ ollama pull mistral pulling manifest pulling e8a35b5937a5... 100% ▕████████████████████████████████████████████████████████████████████████████▏ 4.1 GB pulling 43070e2d4e53... 100% ▕████████████████████████████████████████████████████████████████████████████▏ 11 KB pulling e6836092461f... 100% ▕████████████████████████████████████████████████████████████████████████████▏ 42 B pulling ed11eda7790d... 100% ▕████████████████████████████████████████████████████████████████████████████▏ 30 B pulling f9b1e3196ecf... 100% ▕████████████████████████████████████████████████████████████████████████████▏ 483 B verifying sha256 digest writing manifest removing any unused layers success $ ollama list NAME ID SIZE MODIFIED mistral:latest\t61e88e884507\t4.1 GB\t11 minutes ago # 로컬 API 실행 확인 $ curl http://localhost:11434 Ollama is running% 실행(run) 및 CLI 질의 테스트 ❗️ 로컬 질의하면 랩탑이 전체적으로 프리징 현상 → 느려짐\n$ ollama run mistral \u0026gt;\u0026gt;\u0026gt; github 에 대해서 한글로 간단히 설명해줘 GitHub (깃허브)는 소스코드를 저장하고 공유할 수 있는 온라인 플atform입니다. 개발자들이 프로젝트를 만들어서 원활한 협업을 위해 사용됩니다. GitHub에서는 소스코드를 저장하고, 버전 관리, 코드 검토, �erkdown 문서 작성 등 다양한 기능을 제공합니다. GitHub Repository (깃허브 레포지토리)는 GitHub에서 생성되어 저장되는 프로젝트입니다. 개발자들은 GitHub Repository에 원본 소스코드를 업로드하여 다른 개발자들과 공유할 수 있습니다. 이를 통해 협력하면 소스코드의 변경 사항을 추적하고, Merge Requests(병합 요청)으로 코드 리뷰와 코드 통합을 수행할 수 있습니다. GitHub에서는 Open Source Project (오픈소스 프로젝트)도 많이 존재하며, 이를 통해 개발자들은 다른 개발자의 코드를 참고하고, 협력하며, 공부할 수 있습니다. GitHub는 Git을 사용하여 소스코드를 버전 관리합니다. Git은 분산형 Source Control System(분산형 소스코드 제어 시스템)입니다. 이렇게 되면, 개발자들은 원격 저장소에서 최신 상태의 소스코드를 clone(복사)하여 로컬에서 작업할 수 있으며, 필요한 경우 Git Commands(git 명령어)를 이용해 소스코드를 push(전송)하거나 pull(받기)하여 GitHub Repository와 동기화할 수 있습니다. 이러한 기능들로 GitHub는 개발자들에게 협업, 소스코드 관리, 코드 검토, Open Source Project 참여 등을 용이하게 만들어줍니다. I hope this explanation in Korean helps clarify what GitHub is! Let me know if you have any questions or need further clarification on anything. :) WEB API를 통한 실행 테스트 http://localhost:11434 $$ curl -X POST http://localhost:11434/api/generate -d \u0026#39;{ \u0026#34;model\u0026#34;: \u0026#34;mistral\u0026#34;, \u0026#34;prompt\u0026#34;:\u0026#34;Here is a story about llamas eating grass\u0026#34; }\u0026#39; {\u0026#34;model\u0026#34;:\u0026#34;mistral\u0026#34;,\u0026#34;created_at\u0026#34;:\u0026#34;2024-01-28T06:09:43.443079Z\u0026#34;,\u0026#34;response\u0026#34;:\u0026#34; Title\u0026#34;,\u0026#34;done\u0026#34;:false} {\u0026#34;model\u0026#34;:\u0026#34;mistral\u0026#34;,\u0026#34;created_at\u0026#34;:\u0026#34;2024-01-28T06:09:43.539221Z\u0026#34;,\u0026#34;response\u0026#34;:\u0026#34;:\u0026#34;,\u0026#34;done\u0026#34;:false} {\u0026#34;model\u0026#34;:\u0026#34;mistral\u0026#34;,\u0026#34;created_at\u0026#34;:\u0026#34;2024-01-28T06:09:43.645788Z\u0026#34;,\u0026#34;response\u0026#34;:\u0026#34; The\u0026#34;,\u0026#34;done\u0026#34;:false} {\u0026#34;model\u0026#34;:\u0026#34;mistral\u0026#34;,\u0026#34;created_at\u0026#34;:\u0026#34;2024-01-28T06:09:43.749525Z\u0026#34;,\u0026#34;response\u0026#34;:\u0026#34; L\u0026#34;,\u0026#34;done\u0026#34;:false} {\u0026#34;model\u0026#34;:\u0026#34;mistral\u0026#34;,\u0026#34;created_at\u0026#34;:\u0026#34;2024-01-28T06:09:43.840547Z\u0026#34;,\u0026#34;response\u0026#34;:\u0026#34;lam\u0026#34;,\u0026#34;done\u0026#34;:false} ... ollama-webui https://github.com/ollama-webui/ollama-webui{:target=\u0026quot;_blank\u0026quot;} ChatGPT-Style Web UI Client for Ollama 🦙\ndocker-compose 실행 $ git clone https://github.com/ollama-webui/ollama-webu $ cd ollama-webui $ docker-compose up -d [+] Running 4/4 ✔ ollama 3 layers [⣿⣿⣿] 0B/0B Pulled 38.3s ✔ ce9ebea987c2 Pull complete 6.6s ✔ 659507d470de Pull complete 8.3s ✔ cbd982cdf9cb Pull complete 28.6s [+] Running 3/3 ✔ Network ollama-webui_default Created 0.0s ✔ Container ollama Started 0.1s ✔ Container ollama-webui Started 0.0s ollama와 ollama-webui를 docker로 실행 서비스 포트 확인 : 3000 version: \u0026#39;3.8\u0026#39; services: ollama: volumes: - ollama:/root/.ollama container_name: ollama pull_policy: always tty: true restart: unless-stopped image: ollama/ollama:latest ollama-webui: build: context: . args: OLLAMA_API_BASE_URL: \u0026#39;/ollama/api\u0026#39; dockerfile: Dockerfile image: ghcr.io/ollama-webui/ollama-webui:main container_name: ollama-webui volumes: - ollama-webui:/app/backend/data depends_on: - ollama ports: - ${OLLAMA_WEBUI_PORT-3000}:8080 environment: - \u0026#39;OLLAMA_API_BASE_URL=http://ollama:11434/api\u0026#39; extra_hosts: - host.docker.internal:host-gateway restart: unless-stopped volumes: ollama: {} ollama-webui: {} Web UI 확인 : http://localhost:3000/ ","permalink":"https://cdecl.github.io/devops/ollama-mistral/","summary":"\u003cp\u003eollama, ollama-webui, mistral 설치 및 테스트\u003c/p\u003e\n\u003ch2 id=\"ollama\"\u003eOllama\u003c/h2\u003e\n\u003cblockquote\u003e\n\u003cp\u003eOLLAMA는 Open Large Language Model for AI Applications의 약자로, Google AI에서 개발한 대규모 언어 모델 (LLM)입니다.\nOLLAMA는 텍스트 생성, 번역, 질문 응답 등 다양한 AI 애플리케이션 개발을 위해 사용할 수 있는 강력한 도구\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cul\u003e\n\u003cli\u003e다양한 기능: OLLAMA는 텍스트 생성, 번역, 질문 응답, 요약, 코드 생성 등 다양한 기능을 제공합니다.\u003c/li\u003e\n\u003cli\u003e강력한 성능: OLLAMA는 Google AI의 최첨단 기술을 기반으로 개발되어 강력한 성능을 제공합니다.\u003c/li\u003e\n\u003cli\u003e쉬운 사용: OLLAMA는 Python API를 제공하여 쉽게 사용할 수 있습니다.\u003c/li\u003e\n\u003cli\u003e다양한 모델: OLLAMA는 다양한 크기와 기능을 가진 모델을 제공하여 사용자의 필요에 맞게 선택할 수 있습니다.\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"ollama-설치\"\u003eOllama 설치\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e다운로드 : \u003ca href=\"https://ollama.ai/download\"\u003ehttps://ollama.ai/download\u003c/a\u003e{:target=\u0026quot;_blank\u0026quot;}\u003c/li\u003e\n\u003cli\u003e설치 및 활용 가능한 모델 : \u003ca href=\"https://ollama.ai/library\"\u003ehttps://ollama.ai/library\u003c/a\u003e{:target=\u0026quot;_blank\u0026quot;}\u003c/li\u003e\n\u003c/ul\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-sh\" data-lang=\"sh\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ ollama\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eUsage:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  ollama \u003cspan style=\"color:#f92672\"\u003e[\u003c/span\u003eflags\u003cspan style=\"color:#f92672\"\u003e]\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  ollama \u003cspan style=\"color:#f92672\"\u003e[\u003c/span\u003ecommand\u003cspan style=\"color:#f92672\"\u003e]\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eAvailable Commands:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  serve       Start ollama\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  create      Create a model from a Modelfile\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  show        Show information \u003cspan style=\"color:#66d9ef\"\u003efor\u003c/span\u003e a model\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  run         Run a model\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  pull        Pull a model from a registry\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  push        Push a model to a registry\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  list        List models\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  cp          Copy a model\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  rm          Remove a model\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  help        Help about any command\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eFlags:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  -h, --help      help \u003cspan style=\"color:#66d9ef\"\u003efor\u003c/span\u003e ollama\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  -v, --version   Show version information\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eUse \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;ollama [command] --help\u0026#34;\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003efor\u003c/span\u003e more information about a command.\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch3 id=\"mistral-모델-설치\"\u003emistral 모델 설치\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://ollama.ai/library/mistral\"\u003ehttps://ollama.ai/library/mistral\u003c/a\u003e{:target=\u0026quot;_blank\u0026quot;}\u003c/li\u003e\n\u003c/ul\u003e\n\u003cblockquote\u003e\n\u003cp\u003eMistral은 최근에 개발된 대형 언어 모델 중 하나입니다.\n이 모델은 7.3 billion 개의 파라미터를 가지고 있으며, 자연어 처리 분야에서 매우 높은 성능을 보입니다.\nMistral은 다양한 자연어 처리 작업에서 사용될 수 있습니다.\n예를 들어, 이 모델은 텍스트 생성, 기계 번역, 질문 응답, 감성 분석 등의 작업에 사용될 수 있습니다.\u003c/p\u003e","title":"Ollama를 이용한 Mistral 로컬 실행 가이드"},{"content":"DuckDB를 ETL 도구로 활용 : CSV 데이터 → MySQL\nDuckDB를 통한 CSV 데이터를 MySQL로 ETL 하는 방법 ETL이란? ETL이란 Extract, Transform, Load의 약자로, 데이터를 다양한 소스에서 추출하고 변환하고 적재하는 과정 ETL을 수행하기 위해서는 여러가지 툴을 사용할 수 있는데 그 중 하나 DuckDB 활용하는 안 DuckDB DuckDB는 분석 쿼리에 최적화된 임베디드 데이터베이스 DuckDB는 PostgreSQL과 호환되는 SQL 문법을 사용하고, 여러 DB와 연결하여 데이터를 효율적으로 가져와 로컬 DuckDB에서 데이터 처리 가능 Extensions : https://duckdb.org/docs/extensions/overview ETL 예제 DuckDB에서 CSV 파일을 읽어와 테이블 생성 MySQL Extension{:target=\u0026quot;_blank\u0026quot;} CREATE TABLE csv_table AS SELECT * FROM read_csv_auto(\u0026#39;your_csv_file\u0026#39;); DuckDB에서 MySQL에 연결합니다. 다음과 같은 명령어를 사용할 수 있습니다. INSTALL MySQL; LOAD MySQL; ATTACH \u0026#39;host=localhost user=root port=0 database=etldb\u0026#39; AS mysqldb (TYPE mysql) USE mysqldb; DuckDB에서 MySQL로 데이터를 적재합니다. 다음과 같은 명령어를 사용할 수 있습니다. CREATE TABLE mysqldb.etldb.csvtbl AS SELECT * FROM csv_table; 참고 MySQL LOAD DATA{:target=\u0026quot;_blank\u0026quot;} CSV to SQLite3{:target=\u0026quot;_blank\u0026quot;} ","permalink":"https://cdecl.github.io/devops/etl-csv-to-mysql/","summary":"\u003cp\u003eDuckDB를 ETL 도구로 활용 : CSV 데이터 → MySQL\u003c/p\u003e\n\u003ch2 id=\"duckdb를-통한-csv-데이터를-mysql로-etl-하는-방법\"\u003eDuckDB를 통한 CSV 데이터를 MySQL로 ETL 하는 방법\u003c/h2\u003e\n\u003ch3 id=\"etl이란\"\u003eETL이란?\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003eETL이란 Extract, Transform, Load의 약자로, 데이터를 다양한 소스에서 추출하고 변환하고 적재하는 과정\u003c/li\u003e\n\u003cli\u003eETL을 수행하기 위해서는 여러가지 툴을 사용할 수 있는데 그 중 하나 DuckDB 활용하는 안\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"duckdb\"\u003eDuckDB\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003eDuckDB는 분석 쿼리에 최적화된 임베디드 데이터베이스\u003c/li\u003e\n\u003cli\u003eDuckDB는 PostgreSQL과 호환되는 SQL 문법을 사용하고, 여러 DB와 연결하여 데이터를 효율적으로 가져와 로컬 DuckDB에서 데이터 처리 가능\n\u003cul\u003e\n\u003cli\u003eExtensions : \u003ca href=\"https://duckdb.org/docs/extensions/overview\"\u003ehttps://duckdb.org/docs/extensions/overview\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"etl-예제\"\u003eETL 예제\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003eDuckDB에서 CSV 파일을 읽어와 테이블 생성\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://duckdb.org/docs/extensions/mysql\"\u003eMySQL Extension\u003c/a\u003e{:target=\u0026quot;_blank\u0026quot;}\u003c/li\u003e\n\u003c/ul\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-sql\" data-lang=\"sql\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003eCREATE\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003eTABLE\u003c/span\u003e csv_table \u003cspan style=\"color:#66d9ef\"\u003eAS\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003eSELECT\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e*\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003eFROM\u003c/span\u003e read_csv_auto(\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;your_csv_file\u0026#39;\u003c/span\u003e);\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cul\u003e\n\u003cli\u003eDuckDB에서 MySQL에 연결합니다. 다음과 같은 명령어를 사용할 수 있습니다.\u003c/li\u003e\n\u003c/ul\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-sql\" data-lang=\"sql\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eINSTALL MySQL;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003eLOAD\u003c/span\u003e MySQL;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eATTACH \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;host=localhost user=root port=0 database=etldb\u0026#39;\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003eAS\u003c/span\u003e mysqldb (\u003cspan style=\"color:#66d9ef\"\u003eTYPE\u003c/span\u003e mysql)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eUSE mysqldb;\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cul\u003e\n\u003cli\u003eDuckDB에서 MySQL로 데이터를 적재합니다. 다음과 같은 명령어를 사용할 수 있습니다.\u003c/li\u003e\n\u003c/ul\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-sql\" data-lang=\"sql\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003eCREATE\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003eTABLE\u003c/span\u003e mysqldb.etldb.csvtbl \u003cspan style=\"color:#66d9ef\"\u003eAS\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003eSELECT\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e*\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003eFROM\u003c/span\u003e csv_table;\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch3 id=\"참고\"\u003e참고\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"/devops/mysql-load-data/\"\u003eMySQL LOAD DATA\u003c/a\u003e{:target=\u0026quot;_blank\u0026quot;}\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"/devops/csv-to-sqlite3/\"\u003eCSV to SQLite3\u003c/a\u003e{:target=\u0026quot;_blank\u0026quot;}\u003c/li\u003e\n\u003c/ul\u003e","title":"DuckDB, CSV에서 MySQL로의 ETL"},{"content":"로컬 머신에서 Gitub Actions를 실행할 수 있는 도구\nAct https://github.com/nektos/act/{:target=\u0026quot;_blank\u0026quot;} .github/workflows/ 에서 GitHub Actions를 읽고 로컬 환경 실행 Docker 기반 컨테이너로 운영 macOS 에서는 Docker Desktop 필요 Linux, MacOS, Windows 지원 설치 및 실행 $ brew install act actions-test/.github/workflows/simple.yml # This is a basic workflow to help you get started with Actions name: CI on: workflow_dispatch: jobs: build: runs-on: ubuntu-latest steps: # - uses: actions/checkout@v3 - name: echo test run: | cat /etc/*-release $ git clone https://github.com/cdecl/actions-test $ cd actions-test $ act [CI/build] 🚀 Start image=catthehacker/ubuntu:act-latest [CI/build] 🐳 docker pull image=catthehacker/ubuntu:act-latest platform= username= forcePull=true [CI/build] 🐳 docker create image=catthehacker/ubuntu:act-latest platform= entrypoint=[\u0026#34;tail\u0026#34; \u0026#34;-f\u0026#34; \u0026#34;/dev/null\u0026#34;] cmd=[] [CI/build] 🐳 docker run image=catthehacker/ubuntu:act-latest platform= entrypoint=[\u0026#34;tail\u0026#34; \u0026#34;-f\u0026#34; \u0026#34;/dev/null\u0026#34;] cmd=[] [CI/build] ⭐ Run Main echo test [CI/build] 🐳 docker exec cmd=[bash --noprofile --norc -e -o pipefail /var/run/act/workflow/0] user= workdir= | DISTRIB_ID=Ubuntu | DISTRIB_RELEASE=22.04 | DISTRIB_CODENAME=jammy | DISTRIB_DESCRIPTION=\u0026#34;Ubuntu 22.04.2 LTS\u0026#34; | PRETTY_NAME=\u0026#34;Ubuntu 22.04.2 LTS\u0026#34; | NAME=\u0026#34;Ubuntu\u0026#34; | VERSION_ID=\u0026#34;22.04\u0026#34; | VERSION=\u0026#34;22.04.2 LTS (Jammy Jellyfish)\u0026#34; | VERSION_CODENAME=jammy | ID=ubuntu | ID_LIKE=debian | HOME_URL=\u0026#34;https://www.ubuntu.com/\u0026#34; | SUPPORT_URL=\u0026#34;https://help.ubuntu.com/\u0026#34; | BUG_REPORT_URL=\u0026#34;https://bugs.launchpad.net/ubuntu/\u0026#34; | PRIVACY_POLICY_URL=\u0026#34;https://www.ubuntu.com/legal/terms-and-policies/privacy-policy\u0026#34; | UBUNTU_CODENAME=jammy [CI/build] ✅ Success - Main echo test [CI/build] 🏁 Job succeeded Secret 및 Env 적용 VAR1=1111 VAR2=2222 $ act --env-file my.env --secret-file my.secrets Github Actions 와 모든것이 호환되지는 않음 (e.g. 스케쥴) 테스트 및 개발 용도로 사용 적합\n","permalink":"https://cdecl.github.io/devops/act/","summary":"\u003cp\u003e로컬 머신에서 Gitub Actions를 실행할 수 있는 도구\u003c/p\u003e\n\u003ch2 id=\"act\"\u003eAct\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://github.com/nektos/act/\"\u003ehttps://github.com/nektos/act/\u003c/a\u003e{:target=\u0026quot;_blank\u0026quot;}\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003e.github/workflows/\u003c/code\u003e 에서 GitHub Actions를 읽고 로컬 환경 실행\u003c/li\u003e\n\u003cli\u003eDocker 기반 컨테이너로 운영\n\u003cul\u003e\n\u003cli\u003emacOS 에서는 Docker Desktop 필요\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003eLinux, MacOS, Windows 지원\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"설치-및-실행\"\u003e설치 및 실행\u003c/h3\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-sh\" data-lang=\"sh\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ brew install act\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cul\u003e\n\u003cli\u003eactions-test/.github/workflows/simple.yml\u003c/li\u003e\n\u003c/ul\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-yaml\" data-lang=\"yaml\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# This is a basic workflow to help you get started with Actions\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003ename\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003eCI\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003eon\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#f92672\"\u003eworkflow_dispatch\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003ejobs\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#f92672\"\u003ebuild\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003eruns-on\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003eubuntu-latest\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003esteps\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      \u003cspan style=\"color:#75715e\"\u003e# - uses: actions/checkout@v3\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      - \u003cspan style=\"color:#f92672\"\u003ename\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003eecho test\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#f92672\"\u003erun\u003c/span\u003e: |\u003cspan style=\"color:#e6db74\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003e          cat /etc/*-release\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-sh\" data-lang=\"sh\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ git clone https://github.com/cdecl/actions-test\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ cd actions-test \n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ act \n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003e[\u003c/span\u003eCI/build\u003cspan style=\"color:#f92672\"\u003e]\u003c/span\u003e 🚀  Start image\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003ecatthehacker/ubuntu:act-latest\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003e[\u003c/span\u003eCI/build\u003cspan style=\"color:#f92672\"\u003e]\u003c/span\u003e   🐳  docker pull image\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003ecatthehacker/ubuntu:act-latest platform\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e username\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e forcePull\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003etrue\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003e[\u003c/span\u003eCI/build\u003cspan style=\"color:#f92672\"\u003e]\u003c/span\u003e   🐳  docker create image\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003ecatthehacker/ubuntu:act-latest platform\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e entrypoint\u003cspan style=\"color:#f92672\"\u003e=[\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;tail\u0026#34;\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;-f\u0026#34;\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;/dev/null\u0026#34;\u003c/span\u003e\u003cspan style=\"color:#f92672\"\u003e]\u003c/span\u003e cmd\u003cspan style=\"color:#f92672\"\u003e=[]\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003e[\u003c/span\u003eCI/build\u003cspan style=\"color:#f92672\"\u003e]\u003c/span\u003e   🐳  docker run image\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003ecatthehacker/ubuntu:act-latest platform\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e entrypoint\u003cspan style=\"color:#f92672\"\u003e=[\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;tail\u0026#34;\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;-f\u0026#34;\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;/dev/null\u0026#34;\u003c/span\u003e\u003cspan style=\"color:#f92672\"\u003e]\u003c/span\u003e cmd\u003cspan style=\"color:#f92672\"\u003e=[]\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003e[\u003c/span\u003eCI/build\u003cspan style=\"color:#f92672\"\u003e]\u003c/span\u003e ⭐ Run Main echo test\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003e[\u003c/span\u003eCI/build\u003cspan style=\"color:#f92672\"\u003e]\u003c/span\u003e   🐳  docker exec cmd\u003cspan style=\"color:#f92672\"\u003e=[\u003c/span\u003ebash --noprofile --norc -e -o pipefail /var/run/act/workflow/0\u003cspan style=\"color:#f92672\"\u003e]\u003c/span\u003e user\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e workdir\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e| DISTRIB_ID\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003eUbuntu\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e| DISTRIB_RELEASE\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e22.04\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e| DISTRIB_CODENAME\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003ejammy\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e| DISTRIB_DESCRIPTION\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;Ubuntu 22.04.2 LTS\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e| PRETTY_NAME\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;Ubuntu 22.04.2 LTS\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e| NAME\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;Ubuntu\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e| VERSION_ID\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;22.04\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e| VERSION\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;22.04.2 LTS (Jammy Jellyfish)\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e| VERSION_CODENAME\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003ejammy\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e| ID\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003eubuntu\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e| ID_LIKE\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003edebian\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e| HOME_URL\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;https://www.ubuntu.com/\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e| SUPPORT_URL\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;https://help.ubuntu.com/\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e| BUG_REPORT_URL\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;https://bugs.launchpad.net/ubuntu/\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e| PRIVACY_POLICY_URL\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;https://www.ubuntu.com/legal/terms-and-policies/privacy-policy\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e| UBUNTU_CODENAME\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003ejammy\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003e[\u003c/span\u003eCI/build\u003cspan style=\"color:#f92672\"\u003e]\u003c/span\u003e   ✅  Success - Main echo test\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003e[\u003c/span\u003eCI/build\u003cspan style=\"color:#f92672\"\u003e]\u003c/span\u003e 🏁  Job succeeded\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cul\u003e\n\u003cli\u003eSecret 및 Env 적용\u003c/li\u003e\n\u003c/ul\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-ini\" data-lang=\"ini\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#a6e22e\"\u003eVAR1\u003c/span\u003e\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e1111\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#a6e22e\"\u003eVAR2\u003c/span\u003e\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e2222\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-sh\" data-lang=\"sh\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ act --env-file my.env --secret-file my.secrets\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cblockquote\u003e\n\u003cp\u003eGithub Actions 와 모든것이 호환되지는 않음 (e.g. 스케쥴)\n테스트 및 개발 용도로 사용 적합\u003c/p\u003e","title":"Act - Run your GitHub Actions locally"},{"content":"Docker Desktop 대체제, Docker containers and Linux machines on macOS\nOrbStack https://orbstack.dev/{:target=\u0026quot;_blank\u0026quot;} MacOS 환경에서 Docker Desktop 대체제로 Docker containers를 실행 가능하고 추가적으로 리눅스 VM도 운영가능함 OrbStack vs. Docker Desktop{:target=\u0026quot;_blank\u0026quot;} Docker Desktop 에 비해 적은 리소스 및 빠른 속도 Linux machines 지원 및 Rosetta x86 emulation 가능 Kubernetes는 계획중 OrbStack vs. Colima{:target=\u0026quot;_blank\u0026quot;} Docker Desktop 대체체로 많이 언급되는 Colima 와의 비교 사용하고있는 Docker Desktop 과 Multipass 2개를 대체 가능할 것으로 보임\nQuick start https://docs.orbstack.dev/quick-start{:target=\u0026quot;_blank\u0026quot;} brew install orbstack ","permalink":"https://cdecl.github.io/devops/orbstack/","summary":"\u003cp\u003eDocker Desktop 대체제, Docker containers and Linux machines on macOS\u003c/p\u003e\n\u003ch2 id=\"orbstack\"\u003eOrbStack\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://orbstack.dev/\"\u003ehttps://orbstack.dev/\u003c/a\u003e{:target=\u0026quot;_blank\u0026quot;}\u003c/li\u003e\n\u003cli\u003eMacOS 환경에서 Docker Desktop 대체제로 Docker containers를 실행 가능하고 추가적으로 리눅스 VM도 운영가능함\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://docs.orbstack.dev/compare/docker-desktop\"\u003eOrbStack vs. Docker Desktop\u003c/a\u003e{:target=\u0026quot;_blank\u0026quot;}\n\u003cul\u003e\n\u003cli\u003eDocker Desktop 에 비해 적은 리소스 및 빠른 속도\u003c/li\u003e\n\u003cli\u003eLinux machines 지원 및 Rosetta x86 emulation 가능\u003c/li\u003e\n\u003cli\u003eKubernetes는 계획중\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://docs.orbstack.dev/compare/colima\"\u003eOrbStack vs. Colima\u003c/a\u003e{:target=\u0026quot;_blank\u0026quot;}\n\u003cul\u003e\n\u003cli\u003eDocker Desktop 대체체로 많이 언급되는 Colima 와의 비교\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003cblockquote\u003e\n\u003cp\u003e사용하고있는 \u003ccode\u003eDocker Desktop\u003c/code\u003e 과 \u003ccode\u003eMultipass\u003c/code\u003e 2개를 대체 가능할 것으로 보임\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003ch3 id=\"quick-start\"\u003eQuick start\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://docs.orbstack.dev/quick-start\"\u003ehttps://docs.orbstack.dev/quick-start\u003c/a\u003e{:target=\u0026quot;_blank\u0026quot;}\u003c/li\u003e\n\u003c/ul\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-sh\" data-lang=\"sh\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ebrew install orbstack\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003chr\u003e\n\u003cp\u003e\u003cimg loading=\"lazy\" src=\"/images/2023-04-26-10-38-57.png\"\u003e\u003c/p\u003e","title":"OrbStack"},{"content":"jq 명령어를 통한 Json to CSV 변환\nJq 명령어 활용 https://stedolan.github.io/jq/{:target=\u0026quot;_blank\u0026quot;} jq is a lightweight and flexible command-line JSON processor. jq를 사용하여 JSON 배열과 NDJSON 형식의 데이터를 CSV 형식으로 변환하는 예제 JSON 배열은 여러 개의 JSON 객체를 대괄호로 묶은 형식이고, NDJSON은 Newline Delimited JSON의 약자로, 한 줄에 하나의 JSON 객체를 나열한 형식 NDJSON은 MongoDB나 Elasticsearch 등에서 사용되는 데이터 형식 Json 배열에서 CSV 데이터 변환 [ { \u0026#34;fs\u0026#34;: \u0026#34;/dev/mapper/vgubuntu-root\u0026#34;, \u0026#34;type\u0026#34;: \u0026#34;ext4\u0026#34;, \u0026#34;size\u0026#34;: \u0026#34;915G\u0026#34;, \u0026#34;used\u0026#34;: \u0026#34;135G\u0026#34;, \u0026#34;avail\u0026#34;: \u0026#34;734G\u0026#34;, \u0026#34;usedpercentage\u0026#34;: \u0026#34;16%\u0026#34;, \u0026#34;mounted\u0026#34;: \u0026#34;/\u0026#34; }, { \u0026#34;fs\u0026#34;: \u0026#34;/dev/nvme0n1p2\u0026#34;, \u0026#34;type\u0026#34;: \u0026#34;ext4\u0026#34;, \u0026#34;size\u0026#34;: \u0026#34;1.4G\u0026#34;, \u0026#34;used\u0026#34;: \u0026#34;378M\u0026#34;, \u0026#34;avail\u0026#34;: \u0026#34;939M\u0026#34;, \u0026#34;usedpercentage\u0026#34;: \u0026#34;29%\u0026#34;, \u0026#34;mounted\u0026#34;: \u0026#34;/boot\u0026#34; }, { \u0026#34;fs\u0026#34;: \u0026#34;/dev/nvme0n1p1\u0026#34;, \u0026#34;type\u0026#34;: \u0026#34;vfat\u0026#34;, \u0026#34;size\u0026#34;: \u0026#34;511M\u0026#34;, \u0026#34;used\u0026#34;: \u0026#34;30M\u0026#34;, \u0026#34;avail\u0026#34;: \u0026#34;482M\u0026#34;, \u0026#34;usedpercentage\u0026#34;: \u0026#34;6%\u0026#34;, \u0026#34;mounted\u0026#34;: \u0026#34;/boot/efi\u0026#34; } ] Header 추출 CSV 파일의 헤더(keys)를 추출하기 위해 다음과 같은 명령어를 사용\nkeys_unsorted는 객체의 키들을 정렬하지 않고 반환하는 함수이고,\n@csv는 배열을 CSV 형식으로 출력하는 필터입니다.\n$ cat data.json | jq -r \u0026#39;.[0] | keys_unsorted | @csv\u0026#39; \u0026#34;fs\u0026#34;,\u0026#34;type\u0026#34;,\u0026#34;size\u0026#34;,\u0026#34;used\u0026#34;,\u0026#34;avail\u0026#34;,\u0026#34;usedpercentage\u0026#34;,\u0026#34;mounted\u0026#34; Data 추출 배열의 각 객체에 대해 모든 값을 배열로 만들고, CSV 형식으로 출력합니다. .[]는 배열의 각 요소를 반복하는 반복자이고, [.[]]는 객체의 모든 값을 배열로 만드는 표현식입니다. $ cat data.json | jq -r \u0026#39;.[] | [.[]] | @csv\u0026#39; \u0026#34;/dev/mapper/vgubuntu-root\u0026#34;,\u0026#34;ext4\u0026#34;,\u0026#34;915G\u0026#34;,\u0026#34;135G\u0026#34;,\u0026#34;734G\u0026#34;,\u0026#34;16%\u0026#34;,\u0026#34;/\u0026#34; \u0026#34;/dev/nvme0n1p2\u0026#34;,\u0026#34;ext4\u0026#34;,\u0026#34;1.4G\u0026#34;,\u0026#34;378M\u0026#34;,\u0026#34;939M\u0026#34;,\u0026#34;29%\u0026#34;,\u0026#34;/boot\u0026#34; \u0026#34;/dev/nvme0n1p1\u0026#34;,\u0026#34;vfat\u0026#34;,\u0026#34;511M\u0026#34;,\u0026#34;30M\u0026#34;,\u0026#34;482M\u0026#34;,\u0026#34;6%\u0026#34;,\u0026#34;/boot/efi\u0026#34; NDJson 형식에서 CSV 데이터 변환 { \u0026#34;fs\u0026#34;: \u0026#34;/dev/mapper/vgubuntu-root\u0026#34;, \u0026#34;type\u0026#34;: \u0026#34;ext4\u0026#34;, \u0026#34;size\u0026#34;: \u0026#34;915G\u0026#34;, \u0026#34;used\u0026#34;: \u0026#34;135G\u0026#34;, \u0026#34;avail\u0026#34;: \u0026#34;734G\u0026#34;, \u0026#34;usedpercentage\u0026#34;: \u0026#34;16%\u0026#34;, \u0026#34;mounted\u0026#34;: \u0026#34;/\u0026#34; } { \u0026#34;fs\u0026#34;: \u0026#34;/dev/nvme0n1p2\u0026#34;, \u0026#34;type\u0026#34;: \u0026#34;ext4\u0026#34;, \u0026#34;size\u0026#34;: \u0026#34;1.4G\u0026#34;, \u0026#34;used\u0026#34;: \u0026#34;378M\u0026#34;, \u0026#34;avail\u0026#34;: \u0026#34;939M\u0026#34;, \u0026#34;usedpercentage\u0026#34;: \u0026#34;29%\u0026#34;, \u0026#34;mounted\u0026#34;: \u0026#34;/boot\u0026#34; } { \u0026#34;fs\u0026#34;: \u0026#34;/dev/nvme0n1p1\u0026#34;, \u0026#34;type\u0026#34;: \u0026#34;vfat\u0026#34;, \u0026#34;size\u0026#34;: \u0026#34;511M\u0026#34;, \u0026#34;used\u0026#34;: \u0026#34;30M\u0026#34;, \u0026#34;avail\u0026#34;: \u0026#34;482M\u0026#34;, \u0026#34;usedpercentage\u0026#34;: \u0026#34;6%\u0026#34;, \u0026#34;mounted\u0026#34;: \u0026#34;/boot/efi\u0026#34; } Header 추출 첫번째 라인의 json 에서 헤더(keys) 정보만 추출 (csv) $ cat nd.json | head -n1 | jq -r \u0026#39;keys_unsorted | @csv\u0026#39; \u0026#34;fs\u0026#34;,\u0026#34;type\u0026#34;,\u0026#34;size\u0026#34;,\u0026#34;used\u0026#34;,\u0026#34;avail\u0026#34;,\u0026#34;usedpercentage\u0026#34;,\u0026#34;mounted\u0026#34; Data 추출 $ cat nd.json | jq -r \u0026#39;[.[]] | @csv\u0026#39; \u0026#34;/dev/mapper/vgubuntu-root\u0026#34;,\u0026#34;ext4\u0026#34;,\u0026#34;915G\u0026#34;,\u0026#34;135G\u0026#34;,\u0026#34;734G\u0026#34;,\u0026#34;16%\u0026#34;,\u0026#34;/\u0026#34; \u0026#34;/dev/nvme0n1p2\u0026#34;,\u0026#34;ext4\u0026#34;,\u0026#34;1.4G\u0026#34;,\u0026#34;378M\u0026#34;,\u0026#34;939M\u0026#34;,\u0026#34;29%\u0026#34;,\u0026#34;/boot\u0026#34; \u0026#34;/dev/nvme0n1p1\u0026#34;,\u0026#34;vfat\u0026#34;,\u0026#34;511M\u0026#34;,\u0026#34;30M\u0026#34;,\u0026#34;482M\u0026#34;,\u0026#34;6%\u0026#34;,\u0026#34;/boot/efi\u0026#34; ","permalink":"https://cdecl.github.io/devops/json2csv/","summary":"\u003cp\u003ejq 명령어를 통한 Json to CSV 변환\u003c/p\u003e\n\u003ch2 id=\"jq-명령어-활용\"\u003eJq 명령어 활용\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://stedolan.github.io/jq/\"\u003ehttps://stedolan.github.io/jq/\u003c/a\u003e{:target=\u0026quot;_blank\u0026quot;}\u003c/li\u003e\n\u003cli\u003ejq is a lightweight and flexible command-line JSON processor.\u003c/li\u003e\n\u003cli\u003ejq를 사용하여 JSON 배열과 NDJSON 형식의 데이터를 CSV 형식으로 변환하는 예제\u003c/li\u003e\n\u003cli\u003eJSON 배열은 여러 개의 JSON 객체를 대괄호로 묶은 형식이고, NDJSON은 Newline Delimited JSON의 약자로, 한 줄에 하나의 JSON 객체를 나열한 형식\u003c/li\u003e\n\u003cli\u003eNDJSON은 MongoDB나 Elasticsearch 등에서 사용되는 데이터 형식\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"json-배열에서-csv-데이터-변환\"\u003eJson 배열에서 CSV 데이터 변환\u003c/h3\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-json\" data-lang=\"json\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e[\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003e\u0026#34;fs\u0026#34;\u003c/span\u003e: \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;/dev/mapper/vgubuntu-root\u0026#34;\u003c/span\u003e,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003e\u0026#34;type\u0026#34;\u003c/span\u003e: \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;ext4\u0026#34;\u003c/span\u003e,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003e\u0026#34;size\u0026#34;\u003c/span\u003e: \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;915G\u0026#34;\u003c/span\u003e,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003e\u0026#34;used\u0026#34;\u003c/span\u003e: \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;135G\u0026#34;\u003c/span\u003e,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003e\u0026#34;avail\u0026#34;\u003c/span\u003e: \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;734G\u0026#34;\u003c/span\u003e,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003e\u0026#34;usedpercentage\u0026#34;\u003c/span\u003e: \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;16%\u0026#34;\u003c/span\u003e,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003e\u0026#34;mounted\u0026#34;\u003c/span\u003e: \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;/\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  },\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003e\u0026#34;fs\u0026#34;\u003c/span\u003e: \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;/dev/nvme0n1p2\u0026#34;\u003c/span\u003e,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003e\u0026#34;type\u0026#34;\u003c/span\u003e: \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;ext4\u0026#34;\u003c/span\u003e,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003e\u0026#34;size\u0026#34;\u003c/span\u003e: \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;1.4G\u0026#34;\u003c/span\u003e,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003e\u0026#34;used\u0026#34;\u003c/span\u003e: \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;378M\u0026#34;\u003c/span\u003e,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003e\u0026#34;avail\u0026#34;\u003c/span\u003e: \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;939M\u0026#34;\u003c/span\u003e,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003e\u0026#34;usedpercentage\u0026#34;\u003c/span\u003e: \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;29%\u0026#34;\u003c/span\u003e,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003e\u0026#34;mounted\u0026#34;\u003c/span\u003e: \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;/boot\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  },\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003e\u0026#34;fs\u0026#34;\u003c/span\u003e: \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;/dev/nvme0n1p1\u0026#34;\u003c/span\u003e,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003e\u0026#34;type\u0026#34;\u003c/span\u003e: \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;vfat\u0026#34;\u003c/span\u003e,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003e\u0026#34;size\u0026#34;\u003c/span\u003e: \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;511M\u0026#34;\u003c/span\u003e,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003e\u0026#34;used\u0026#34;\u003c/span\u003e: \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;30M\u0026#34;\u003c/span\u003e,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003e\u0026#34;avail\u0026#34;\u003c/span\u003e: \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;482M\u0026#34;\u003c/span\u003e,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003e\u0026#34;usedpercentage\u0026#34;\u003c/span\u003e: \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;6%\u0026#34;\u003c/span\u003e,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003e\u0026#34;mounted\u0026#34;\u003c/span\u003e: \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;/boot/efi\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  }\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e]\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch4 id=\"header-추출\"\u003eHeader 추출\u003c/h4\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003eCSV 파일의 헤더(keys)를 추출하기 위해 다음과 같은 명령어를 사용\u003c/p\u003e","title":"Jq 활용, Json to CSV 변환"},{"content":"K3s traefik ingress 사용 서비스 테스트\ntraefik ingress traefik : https://cdecl.github.io/devops/traefik-proxy/{:target=\u0026quot;_blank\u0026quot;} traefik 을 활용한 ingress 구현체 : K3s 에서 번들로 제공 서비스 테스트 traefik/whoami 서비스 테스트 type: NodePort # whoami-deploy.yaml apiVersion: apps/v1 kind: Deployment metadata: name: whoami spec: selector: matchLabels: app: whoami replicas: 2 template: metadata: labels: app: whoami spec: containers: - name: whoami image: traefik/whoami imagePullPolicy: Always ports: - containerPort: 80 --- apiVersion: v1 kind: Service metadata: name: whoami spec: type: NodePort selector: app: whoami ports: - port: 80 targetPort: 80 nodePort: 30080 $ kubectl apply -f whoami-deploy.yaml $ kubectl get pod -A NAMESPACE NAME READY STATUS RESTARTS AGE kube-system local-path-provisioner-7b7dc8d6f5-jnmt5 1/1 Running 0 11m kube-system coredns-b96499967-brb9f 1/1 Running 0 11m kube-system helm-install-traefik-crd-hrfr5 0/1 Completed 0 11m kube-system metrics-server-668d979685-xj5jj 1/1 Running 0 11m kube-system helm-install-traefik-nr5jq 0/1 Completed 1 11m kube-system svclb-traefik-632fd507-mdwnl 2/2 Running 0 11m kube-system traefik-7cd4fcff68-47ms4 1/1 Running 0 11m default whoami-6bbfdbb69c-phxts 1/1 Running 0 102s default whoami-6bbfdbb69c-9rpxv 1/1 Running 0 102s $ kubectl get svc -A NAMESPACE NAME TYPE CLUSTER-IP EXTERNAL-IP PORT(S) AGE default kubernetes ClusterIP 10.43.0.1 \u0026lt;none\u0026gt; 443/TCP 26m kube-system kube-dns ClusterIP 10.43.0.10 \u0026lt;none\u0026gt; 53/UDP,53/TCP,9153/TCP 26m kube-system metrics-server ClusterIP 10.43.90.12 \u0026lt;none\u0026gt; 443/TCP 26m kube-system traefik LoadBalancer 10.43.147.171 192.168.136.5 80:32391/TCP,443:31718/TCP 25m default whoami NodePort 10.43.116.252 \u0026lt;none\u0026gt; 80:30080/TCP 16m $ curl localhost:30080 Hostname: whoami-6bbfdbb69c-9rpxv IP: 127.0.0.1 IP: ::1 IP: 10.42.0.10 IP: fe80::7c46:beff:fe57:f495 RemoteAddr: 10.42.0.1:43930 GET / HTTP/1.1 Host: localhost:30080 User-Agent: curl/7.81.0 Accept: */* Ingress 적용 # ingress-rule.yml apiVersion: networking.k8s.io/v1 kind: Ingress metadata: name: main-ingress spec: rules: # - host: domain - http: paths: - path: / pathType: ImplementationSpecific backend: service: name: whoami port: number: 80 Ingress 가 Proxy 역할로 X-Forwarded-For 등이 추가됨\n$ kubectl apply -f ingress-rule.yml ingress.networking.k8s.io/main-ingress created $ kubectl get ing -A NAMESPACE NAME CLASS HOSTS ADDRESS PORTS AGE default main-ingress \u0026lt;none\u0026gt; * 192.168.136.5 80 9s $ curl localhost Hostname: whoami-6bbfdbb69c-9rpxv IP: 127.0.0.1 IP: ::1 IP: 10.42.0.10 IP: fe80::7c46:beff:fe57:f495 RemoteAddr: 10.42.0.8:40046 GET / HTTP/1.1 Host: localhost User-Agent: curl/7.81.0 Accept: */* Accept-Encoding: gzip X-Forwarded-For: 10.42.0.7 X-Forwarded-Host: localhost X-Forwarded-Port: 80 X-Forwarded-Proto: http X-Forwarded-Server: traefik-7cd4fcff68-47ms4 X-Real-Ip: 10.42.0.7 ","permalink":"https://cdecl.github.io/devops/k3s-traefik-ingress/","summary":"\u003cp\u003eK3s traefik ingress 사용 서비스 테스트\u003c/p\u003e\n\u003ch2 id=\"traefik-ingress\"\u003etraefik ingress\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003etraefik : \u003ca href=\"https://cdecl.github.io/devops/traefik-proxy/\"\u003ehttps://cdecl.github.io/devops/traefik-proxy/\u003c/a\u003e{:target=\u0026quot;_blank\u0026quot;}\u003c/li\u003e\n\u003cli\u003etraefik 을 활용한 ingress 구현체 : K3s 에서 번들로 제공\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"서비스-테스트\"\u003e서비스 테스트\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003etraefik/whoami\u003c/code\u003e 서비스 테스트\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003etype: NodePort\u003c/code\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-yaml\" data-lang=\"yaml\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# whoami-deploy.yaml\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003eapiVersion\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003eapps/v1\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003ekind\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003eDeployment\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003emetadata\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#f92672\"\u003ename\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003ewhoami\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003espec\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#f92672\"\u003eselector\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003ematchLabels\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      \u003cspan style=\"color:#f92672\"\u003eapp\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003ewhoami\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#f92672\"\u003ereplicas\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003e2\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#f92672\"\u003etemplate\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003emetadata\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      \u003cspan style=\"color:#f92672\"\u003elabels\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#f92672\"\u003eapp\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003ewhoami\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003espec\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      \u003cspan style=\"color:#f92672\"\u003econtainers\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      - \u003cspan style=\"color:#f92672\"\u003ename\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003ewhoami\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#f92672\"\u003eimage\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003etraefik/whoami\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#f92672\"\u003eimagePullPolicy\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003eAlways\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#f92672\"\u003eports\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        - \u003cspan style=\"color:#f92672\"\u003econtainerPort\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003e80\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e---\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003eapiVersion\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003ev1\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003ekind\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003eService\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003emetadata\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#f92672\"\u003ename\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003ewhoami\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003espec\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#f92672\"\u003etype\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003eNodePort\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#f92672\"\u003eselector\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003eapp\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003ewhoami\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#f92672\"\u003eports\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  - \u003cspan style=\"color:#f92672\"\u003eport\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003e80\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003etargetPort\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003e80\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003enodePort\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003e30080\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-sh\" data-lang=\"sh\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ kubectl apply -f whoami-deploy.yaml\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ kubectl get pod -A\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eNAMESPACE     NAME                                      READY   STATUS      RESTARTS   AGE\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ekube-system   local-path-provisioner-7b7dc8d6f5-jnmt5   1/1     Running     \u003cspan style=\"color:#ae81ff\"\u003e0\u003c/span\u003e          11m\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ekube-system   coredns-b96499967-brb9f                   1/1     Running     \u003cspan style=\"color:#ae81ff\"\u003e0\u003c/span\u003e          11m\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ekube-system   helm-install-traefik-crd-hrfr5            0/1     Completed   \u003cspan style=\"color:#ae81ff\"\u003e0\u003c/span\u003e          11m\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ekube-system   metrics-server-668d979685-xj5jj           1/1     Running     \u003cspan style=\"color:#ae81ff\"\u003e0\u003c/span\u003e          11m\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ekube-system   helm-install-traefik-nr5jq                0/1     Completed   \u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e          11m\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ekube-system   svclb-traefik-632fd507-mdwnl              2/2     Running     \u003cspan style=\"color:#ae81ff\"\u003e0\u003c/span\u003e          11m\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ekube-system   traefik-7cd4fcff68-47ms4                  1/1     Running     \u003cspan style=\"color:#ae81ff\"\u003e0\u003c/span\u003e          11m\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003edefault       whoami-6bbfdbb69c-phxts                   1/1     Running     \u003cspan style=\"color:#ae81ff\"\u003e0\u003c/span\u003e          102s\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003edefault       whoami-6bbfdbb69c-9rpxv                   1/1     Running     \u003cspan style=\"color:#ae81ff\"\u003e0\u003c/span\u003e          102s\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ kubectl get svc  -A\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eNAMESPACE     NAME             TYPE           CLUSTER-IP      EXTERNAL-IP     PORT\u003cspan style=\"color:#f92672\"\u003e(\u003c/span\u003eS\u003cspan style=\"color:#f92672\"\u003e)\u003c/span\u003e                      AGE\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003edefault       kubernetes       ClusterIP      10.43.0.1       \u0026lt;none\u0026gt;          443/TCP                      26m\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ekube-system   kube-dns         ClusterIP      10.43.0.10      \u0026lt;none\u0026gt;          53/UDP,53/TCP,9153/TCP       26m\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ekube-system   metrics-server   ClusterIP      10.43.90.12     \u0026lt;none\u0026gt;          443/TCP                      26m\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ekube-system   traefik          LoadBalancer   10.43.147.171   192.168.136.5   80:32391/TCP,443:31718/TCP   25m\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003edefault       whoami           NodePort       10.43.116.252   \u0026lt;none\u0026gt;          80:30080/TCP                 16m\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ curl localhost:30080\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eHostname: whoami-6bbfdbb69c-9rpxv\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eIP: 127.0.0.1\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eIP: ::1\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eIP: 10.42.0.10\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eIP: fe80::7c46:beff:fe57:f495\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eRemoteAddr: 10.42.0.1:43930\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eGET / HTTP/1.1\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eHost: localhost:30080\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eUser-Agent: curl/7.81.0\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eAccept: */*\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch3 id=\"ingress-적용\"\u003eIngress 적용\u003c/h3\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-yaml\" data-lang=\"yaml\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# ingress-rule.yml\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003eapiVersion\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003enetworking.k8s.io/v1\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003ekind\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003eIngress\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003emetadata\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#f92672\"\u003ename\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003emain-ingress\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003espec\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#f92672\"\u003erules\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# - host: domain\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  - \u003cspan style=\"color:#f92672\"\u003ehttp\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      \u003cspan style=\"color:#f92672\"\u003epaths\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      - \u003cspan style=\"color:#f92672\"\u003epath\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003e/\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#f92672\"\u003epathType\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003eImplementationSpecific\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#f92672\"\u003ebackend\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e          \u003cspan style=\"color:#f92672\"\u003eservice\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e            \u003cspan style=\"color:#f92672\"\u003ename\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003ewhoami\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e            \u003cspan style=\"color:#f92672\"\u003eport\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e              \u003cspan style=\"color:#f92672\"\u003enumber\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003e80\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cblockquote\u003e\n\u003cp\u003eIngress 가 Proxy 역할로 X-Forwarded-For 등이 추가됨\u003c/p\u003e","title":"K3s traefik ingress"},{"content":"trino(presto) nested json 를 처리하기 위한 table schema 예제\ntrino(presto) - create table row : json object (nested json) 타입을 위한 sub column 정의 array : 배열 Example {\u0026#34;id\u0026#34;:1,\u0026#34;name\u0026#34;:\u0026#34;Alice\u0026#34;} {\u0026#34;id\u0026#34;:2,\u0026#34;name\u0026#34;:\u0026#34;Bob\u0026#34;} {\u0026#34;id\u0026#34;:3,\u0026#34;name\u0026#34;:\u0026#34;Carol\u0026#34;} {\u0026#34;id\u0026#34;:4,\u0026#34;name\u0026#34;:\u0026#34;David\u0026#34;, \u0026#34;etc1\u0026#34;: [{\u0026#34;key\u0026#34;: \u0026#34;key-data11\u0026#34;}, {\u0026#34;key\u0026#34;: \u0026#34;key-data22\u0026#34;}] } {\u0026#34;id\u0026#34;:5,\u0026#34;name\u0026#34;:\u0026#34;Elise\u0026#34;, \u0026#34;etc2\u0026#34;: [\u0026#34;data1\u0026#34;, \u0026#34;data2\u0026#34;, \u0026#34;data3\u0026#34;]} create table hive.default.sample ( id varchar, name varchar, etc1 array(row(key varchar)), etc2 array(varchar) ) with ( format = \u0026#39;json\u0026#39;, external_location = \u0026#39;s3a://data/sample/\u0026#39; ) trino cli trino\u0026gt; use hive.default; USE trino:default\u0026gt; select * from sample; id | name | etc1 | etc2 ----+-------+--------------------------------------+----------------------- 1 | Alice | NULL | NULL 2 | Bob | NULL | NULL 3 | Carol | NULL | NULL 4 | David | [{key=key-data11}, {key=key-data22}] | NULL 5 | Elise | NULL | [data1, data2, data3] (5 rows) Query 20220824_000627_00008_qpvtj, FINISHED, 1 node Splits: 1 total, 1 done (100.00%) 0.27 [5 rows, 212B] [18 rows/s, 777B/s] ","permalink":"https://cdecl.github.io/devops/presto-json-nested/","summary":"\u003cp\u003etrino(presto) nested json 를 처리하기 위한 table schema 예제\u003c/p\u003e\n\u003ch2 id=\"trinopresto---create-table\"\u003etrino(presto) - create table\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003erow : json object (nested json) 타입을 위한 sub column 정의\u003c/li\u003e\n\u003cli\u003earray : 배열\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"example\"\u003eExample\u003c/h3\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-json\" data-lang=\"json\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e{\u003cspan style=\"color:#f92672\"\u003e\u0026#34;id\u0026#34;\u003c/span\u003e:\u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e,\u003cspan style=\"color:#f92672\"\u003e\u0026#34;name\u0026#34;\u003c/span\u003e:\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;Alice\u0026#34;\u003c/span\u003e}\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e{\u003cspan style=\"color:#f92672\"\u003e\u0026#34;id\u0026#34;\u003c/span\u003e:\u003cspan style=\"color:#ae81ff\"\u003e2\u003c/span\u003e,\u003cspan style=\"color:#f92672\"\u003e\u0026#34;name\u0026#34;\u003c/span\u003e:\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;Bob\u0026#34;\u003c/span\u003e}\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e{\u003cspan style=\"color:#f92672\"\u003e\u0026#34;id\u0026#34;\u003c/span\u003e:\u003cspan style=\"color:#ae81ff\"\u003e3\u003c/span\u003e,\u003cspan style=\"color:#f92672\"\u003e\u0026#34;name\u0026#34;\u003c/span\u003e:\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;Carol\u0026#34;\u003c/span\u003e}\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e{\u003cspan style=\"color:#f92672\"\u003e\u0026#34;id\u0026#34;\u003c/span\u003e:\u003cspan style=\"color:#ae81ff\"\u003e4\u003c/span\u003e,\u003cspan style=\"color:#f92672\"\u003e\u0026#34;name\u0026#34;\u003c/span\u003e:\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;David\u0026#34;\u003c/span\u003e, \u003cspan style=\"color:#f92672\"\u003e\u0026#34;etc1\u0026#34;\u003c/span\u003e: [{\u003cspan style=\"color:#f92672\"\u003e\u0026#34;key\u0026#34;\u003c/span\u003e: \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;key-data11\u0026#34;\u003c/span\u003e}, {\u003cspan style=\"color:#f92672\"\u003e\u0026#34;key\u0026#34;\u003c/span\u003e: \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;key-data22\u0026#34;\u003c/span\u003e}] }\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e{\u003cspan style=\"color:#f92672\"\u003e\u0026#34;id\u0026#34;\u003c/span\u003e:\u003cspan style=\"color:#ae81ff\"\u003e5\u003c/span\u003e,\u003cspan style=\"color:#f92672\"\u003e\u0026#34;name\u0026#34;\u003c/span\u003e:\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;Elise\u0026#34;\u003c/span\u003e, \u003cspan style=\"color:#f92672\"\u003e\u0026#34;etc2\u0026#34;\u003c/span\u003e: [\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;data1\u0026#34;\u003c/span\u003e, \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;data2\u0026#34;\u003c/span\u003e, \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;data3\u0026#34;\u003c/span\u003e]}\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-sql\" data-lang=\"sql\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003ecreate\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003etable\u003c/span\u003e hive.\u003cspan style=\"color:#66d9ef\"\u003edefault\u003c/span\u003e.sample (\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\tid varchar,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\tname varchar,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\tetc1 array(\u003cspan style=\"color:#66d9ef\"\u003erow\u003c/span\u003e(\u003cspan style=\"color:#66d9ef\"\u003ekey\u003c/span\u003e varchar)),\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\tetc2 array(varchar)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003ewith\u003c/span\u003e (\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\tformat \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;json\u0026#39;\u003c/span\u003e,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\texternal_location \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;s3a://data/sample/\u0026#39;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003chr\u003e\n\u003ch3 id=\"trino-cli\"\u003etrino cli\u003c/h3\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-sh\" data-lang=\"sh\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003etrino\u0026gt; use hive.default;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eUSE\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003etrino:default\u0026gt; \u003cspan style=\"color:#66d9ef\"\u003eselect\u003c/span\u003e * from sample;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e id | name  |                 etc1                 |         etc2\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e----+-------+--------------------------------------+-----------------------\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e \u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e  | Alice | NULL                                 | NULL\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e \u003cspan style=\"color:#ae81ff\"\u003e2\u003c/span\u003e  | Bob   | NULL                                 | NULL\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e \u003cspan style=\"color:#ae81ff\"\u003e3\u003c/span\u003e  | Carol | NULL                                 | NULL\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e \u003cspan style=\"color:#ae81ff\"\u003e4\u003c/span\u003e  | David | \u003cspan style=\"color:#f92672\"\u003e[{\u003c/span\u003ekey\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003ekey-data11\u003cspan style=\"color:#f92672\"\u003e}\u003c/span\u003e, \u003cspan style=\"color:#f92672\"\u003e{\u003c/span\u003ekey\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003ekey-data22\u003cspan style=\"color:#f92672\"\u003e}]\u003c/span\u003e | NULL\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e \u003cspan style=\"color:#ae81ff\"\u003e5\u003c/span\u003e  | Elise | NULL                                 | \u003cspan style=\"color:#f92672\"\u003e[\u003c/span\u003edata1, data2, data3\u003cspan style=\"color:#f92672\"\u003e]\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#ae81ff\"\u003e5\u003c/span\u003e rows\u003cspan style=\"color:#f92672\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eQuery 20220824_000627_00008_qpvtj, FINISHED, \u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e node\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eSplits: \u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e total, \u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003edone\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e(\u003c/span\u003e100.00%\u003cspan style=\"color:#f92672\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e0.27 \u003cspan style=\"color:#f92672\"\u003e[\u003c/span\u003e\u003cspan style=\"color:#ae81ff\"\u003e5\u003c/span\u003e rows, 212B\u003cspan style=\"color:#f92672\"\u003e]\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e[\u003c/span\u003e\u003cspan style=\"color:#ae81ff\"\u003e18\u003c/span\u003e rows/s, 777B/s\u003cspan style=\"color:#f92672\"\u003e]\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e","title":"trino(presto) nested json 예제"},{"content":"trino(presto), minio docker 활용 테스트 환경\ntrino (hive connector) to minio trino 의 hive connector 를 활용해서 minio 데이터 분석 환경 Hive connector : https://trino.io/docs/current/connector/hive.html{:target=\u0026quot;_blank\u0026quot;} 참고 : https://github.com/cdecl/trino-minio-docker{:target=\u0026quot;_blank\u0026quot;} docker-compose (trino, minio) version: \u0026#39;3\u0026#39; services: trino: image: trinodb/trino container_name: trino restart: always ports: - \u0026#34;8080:8080\u0026#34; volumes: - ./etc:/etc/trino minio: image: minio/minio restart: always command: server /data --console-address \u0026#34;:9001\u0026#34; container_name: minio environment: MINIO_ROOT_USER: minio MINIO_ROOT_PASSWORD: minio1234 restart: always ports: - \u0026#34;9000:9000\u0026#34; - \u0026#34;9001:9001\u0026#34; volumes: - ./minio-data:/data minio (hive) properties etc/catalog/hive.properties metastore 는 minio catalog 버킷에 저장 s3a://catalog/trino/ minio 세팅 정보 : access-key, secret-key, endpoint connector.name=hive-hadoop2 hive.metastore=file hive.metastore.catalog.dir=s3a://catalog/trino/ hive.recursive-directories=true hive.non-managed-table-writes-enabled=true hive.allow-drop-table=true hive.s3.path-style-access=true hive.s3.ssl.enabled=false hive.s3select-pushdown.enabled=true hive.s3.aws-access-key=minio hive.s3.aws-secret-key=minio1234 hive.s3.endpoint=http://minio:9000 docker-compose 실행 및 초기값 세팅 ## 실행 $ docker-compose up -d reating network \u0026#34;trino_default\u0026#34; with the default driver Creating minio ... done Creating trino ... done rclone 으로 minio 버킷 생성 # rclone 설정 $ cat local.conf [local] type = s3 provider = Minio env_auth = false access_key_id = minio secret_access_key = minio1234 endpoint = http://localhost:9000 # create catalog, data directory $ rclone --config local.conf mkdir local:catalog $ rclone --config local.conf mkdir local:data # sample json (ndjson) data) $ cat 1.json {\u0026#34;id\u0026#34;:1,\u0026#34;name\u0026#34;:\u0026#34;Alice\u0026#34;} {\u0026#34;id\u0026#34;:2,\u0026#34;name\u0026#34;:\u0026#34;Bob\u0026#34;} {\u0026#34;id\u0026#34;:3,\u0026#34;name\u0026#34;:\u0026#34;Carol\u0026#34;} # test data copy $ rclone --config local.conf copy 1.json local:data/sample/ schema, table 생성 default schema (db) 생성 및 external_location table 생성 -- hive 의 schema(db) 생성 create schema hive.default; -- table 생성 create table hive.default.sample ( id varchar, name varchar ) with ( format = \u0026#39;json\u0026#39;, external_location = \u0026#39;s3a://data/sample/\u0026#39; ); -- select select * from sample; 쿼리 테스트 (dbeaver) ","permalink":"https://cdecl.github.io/devops/presto-minio-docker/","summary":"\u003cp\u003etrino(presto), minio docker 활용 테스트 환경\u003c/p\u003e\n\u003ch2 id=\"trino-hive-connector-to-minio\"\u003etrino (hive connector) to minio\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003etrino 의 hive connector 를 활용해서 minio 데이터 분석 환경\n\u003cul\u003e\n\u003cli\u003eHive connector : \u003ca href=\"https://trino.io/docs/current/connector/hive.html\"\u003ehttps://trino.io/docs/current/connector/hive.html\u003c/a\u003e{:target=\u0026quot;_blank\u0026quot;}\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e참고 : \u003ca href=\"https://github.com/cdecl/trino-minio-docker\"\u003ehttps://github.com/cdecl/trino-minio-docker\u003c/a\u003e{:target=\u0026quot;_blank\u0026quot;}\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"docker-compose-trino-minio\"\u003edocker-compose (trino, minio)\u003c/h3\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-yaml\" data-lang=\"yaml\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003eversion\u003c/span\u003e: \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;3\u0026#39;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003eservices\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#f92672\"\u003etrino\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003eimage\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003etrinodb/trino\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003econtainer_name\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003etrino\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003erestart\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003ealways\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003eports\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      - \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;8080:8080\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003evolumes\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      - \u003cspan style=\"color:#ae81ff\"\u003e./etc:/etc/trino\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#f92672\"\u003eminio\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003eimage\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003eminio/minio\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003erestart\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003ealways\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003ecommand\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003eserver /data --console-address \u0026#34;:9001\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003econtainer_name\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003eminio\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003eenvironment\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      \u003cspan style=\"color:#f92672\"\u003eMINIO_ROOT_USER\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003eminio\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      \u003cspan style=\"color:#f92672\"\u003eMINIO_ROOT_PASSWORD\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003eminio1234\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003erestart\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003ealways\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003eports\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      - \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;9000:9000\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      - \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;9001:9001\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003evolumes\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      - \u003cspan style=\"color:#ae81ff\"\u003e./minio-data:/data\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch4 id=\"minio-hive-properties\"\u003eminio (hive) properties\u003c/h4\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003eetc/catalog/hive.properties\u003c/code\u003e\u003c/li\u003e\n\u003cli\u003emetastore 는 minio catalog 버킷에 저장  \u003ccode\u003es3a://catalog/trino/\u003c/code\u003e\u003c/li\u003e\n\u003cli\u003eminio 세팅 정보 : \u003ccode\u003eaccess-key\u003c/code\u003e, \u003ccode\u003esecret-key\u003c/code\u003e, \u003ccode\u003eendpoint\u003c/code\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-properties\" data-lang=\"properties\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#a6e22e\"\u003econnector.name\u003c/span\u003e\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003ehive-hadoop2\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#a6e22e\"\u003ehive.metastore\u003c/span\u003e\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003efile\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#a6e22e\"\u003ehive.metastore.catalog.dir\u003c/span\u003e\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003es3a://catalog/trino/\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#a6e22e\"\u003ehive.recursive-directories\u003c/span\u003e\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003etrue\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#a6e22e\"\u003ehive.non-managed-table-writes-enabled\u003c/span\u003e\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003etrue\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#a6e22e\"\u003ehive.allow-drop-table\u003c/span\u003e\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003etrue\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#a6e22e\"\u003ehive.s3.path-style-access\u003c/span\u003e\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003etrue\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#a6e22e\"\u003ehive.s3.ssl.enabled\u003c/span\u003e\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003efalse\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#a6e22e\"\u003ehive.s3select-pushdown.enabled\u003c/span\u003e\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003etrue\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#a6e22e\"\u003ehive.s3.aws-access-key\u003c/span\u003e\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003eminio\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#a6e22e\"\u003ehive.s3.aws-secret-key\u003c/span\u003e\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003eminio1234\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#a6e22e\"\u003ehive.s3.endpoint\u003c/span\u003e\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003ehttp://minio:9000\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch3 id=\"docker-compose-실행-및-초기값-세팅\"\u003edocker-compose 실행 및 초기값 세팅\u003c/h3\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-sh\" data-lang=\"sh\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e## 실행 \u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ docker-compose up -d \n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ereating network \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;trino_default\u0026#34;\u003c/span\u003e with the default driver\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eCreating minio ... \u003cspan style=\"color:#66d9ef\"\u003edone\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eCreating trino ... \u003cspan style=\"color:#66d9ef\"\u003edone\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch4 id=\"rclone-으로-minio-버킷-생성\"\u003erclone 으로 minio 버킷 생성\u003c/h4\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-sh\" data-lang=\"sh\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# rclone 설정\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ cat local.conf\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003e[\u003c/span\u003elocal\u003cspan style=\"color:#f92672\"\u003e]\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003etype \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e s3\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eprovider \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e Minio\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eenv_auth \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e false\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eaccess_key_id \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e minio\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003esecret_access_key \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e minio1234\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eendpoint \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e http://localhost:9000\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# create catalog, data directory \u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ rclone --config local.conf mkdir local:catalog\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ rclone --config local.conf mkdir local:data\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-sh\" data-lang=\"sh\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# sample json (ndjson) data)\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ cat 1.json\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003e{\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;id\u0026#34;\u003c/span\u003e:1,\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;name\u0026#34;\u003c/span\u003e:\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;Alice\u0026#34;\u003c/span\u003e\u003cspan style=\"color:#f92672\"\u003e}\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003e{\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;id\u0026#34;\u003c/span\u003e:2,\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;name\u0026#34;\u003c/span\u003e:\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;Bob\u0026#34;\u003c/span\u003e\u003cspan style=\"color:#f92672\"\u003e}\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003e{\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;id\u0026#34;\u003c/span\u003e:3,\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;name\u0026#34;\u003c/span\u003e:\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;Carol\u0026#34;\u003c/span\u003e\u003cspan style=\"color:#f92672\"\u003e}\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# test data copy\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ rclone --config local.conf copy 1.json local:data/sample/\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch4 id=\"schema-table-생성\"\u003eschema, table 생성\u003c/h4\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003edefault\u003c/code\u003e schema (db) 생성 및 external_location table 생성\u003c/li\u003e\n\u003c/ul\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-sql\" data-lang=\"sql\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e-- hive 의 schema(db) 생성 \n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003ecreate\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003eschema\u003c/span\u003e hive.\u003cspan style=\"color:#66d9ef\"\u003edefault\u003c/span\u003e;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e-- table 생성 \n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003ecreate\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003etable\u003c/span\u003e hive.\u003cspan style=\"color:#66d9ef\"\u003edefault\u003c/span\u003e.sample (\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  id varchar,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  name varchar\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003ewith\u003c/span\u003e (\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  format \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;json\u0026#39;\u003c/span\u003e,  \n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  external_location \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;s3a://data/sample/\u0026#39;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e);\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e-- select \n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003eselect\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e*\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003efrom\u003c/span\u003e sample;\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch4 id=\"쿼리-테스트-dbeaver\"\u003e쿼리 테스트 (dbeaver)\u003c/h4\u003e\n\u003cp\u003e\u003cimg loading=\"lazy\" src=\"/images/2022-08-20-13-38-49.png\"\u003e\u003c/p\u003e","title":"trino(presto), minio docker 테스트 환경"},{"content":"CSV 파일을 SQLite3 Import 및 Query\nCSV to SQLite3 CSV 파일을 SQLite3로 Import 쿼리\nCSV 샘플 데이터 확인 $ cat cities.csv \u0026#34;LatD\u0026#34;, \u0026#34;LatM\u0026#34;, \u0026#34;LatS\u0026#34;, \u0026#34;NS\u0026#34;, \u0026#34;LonD\u0026#34;, \u0026#34;LonM\u0026#34;, \u0026#34;LonS\u0026#34;, \u0026#34;EW\u0026#34;, \u0026#34;City\u0026#34;, \u0026#34;State\u0026#34; 41, 5, 59, \u0026#34;N\u0026#34;, 80, 39, 0, \u0026#34;W\u0026#34;, \u0026#34;Youngstown\u0026#34;, OH 42, 52, 48, \u0026#34;N\u0026#34;, 97, 23, 23, \u0026#34;W\u0026#34;, \u0026#34;Yankton\u0026#34;, SD 46, 35, 59, \u0026#34;N\u0026#34;, 120, 30, 36, \u0026#34;W\u0026#34;, \u0026#34;Yakima\u0026#34;, WA ... TIP: cat 대신 bat 사용하면 더 나은 뷰어를 제공\n$ bat cities.csv CSV Import .mode csv : csv 모드로 전환 .import ./cities.csv ci : ./cities.csv 파일을 ci 테이블로 Import .import --skip 1 ./cities.csv ci : ./cities.csv 테이블이 존재 할때 header 제외 .import --csv ./cities.csv ci : ./cities.csv csv 모드 inline 옵션 # ci.db 생성 및 인터랙티브 모드 $ sqlite3 ci.db SQLite version 3.37.0 2021-12-09 01:34:53 Enter \u0026#34;.help\u0026#34; for usage hints. sqlite\u0026gt; .mode csv sqlite\u0026gt; .import ./cities.csv ci sqlite\u0026gt; .tables ci sqlite\u0026gt; select count(*) from ci; count(*) 129 sqlite\u0026gt; .mode list sqlite\u0026gt; .header on sqlite\u0026gt; select * from ci limit 10; LatD| \u0026#34;LatM\u0026#34;| \u0026#34;LatS\u0026#34;| \u0026#34;NS\u0026#34;| \u0026#34;LonD\u0026#34;| \u0026#34;LonM\u0026#34;| \u0026#34;LonS\u0026#34;| \u0026#34;EW\u0026#34;| \u0026#34;City\u0026#34;| \u0026#34;State\u0026#34; 41| 5| 59| \u0026#34;N\u0026#34;| 80| 39| 0| \u0026#34;W\u0026#34;| \u0026#34;Youngstown\u0026#34;| OH 42| 52| 48| \u0026#34;N\u0026#34;| 97| 23| 23| \u0026#34;W\u0026#34;| \u0026#34;Yankton\u0026#34;| SD 46| 35| 59| \u0026#34;N\u0026#34;| 120| 30| 36| \u0026#34;W\u0026#34;| \u0026#34;Yakima\u0026#34;| WA 42| 16| 12| \u0026#34;N\u0026#34;| 71| 48| 0| \u0026#34;W\u0026#34;| \u0026#34;Worcester\u0026#34;| MA 43| 37| 48| \u0026#34;N\u0026#34;| 89| 46| 11| \u0026#34;W\u0026#34;| \u0026#34;Wisconsin Dells\u0026#34;| WI 36| 5| 59| \u0026#34;N\u0026#34;| 80| 15| 0| \u0026#34;W\u0026#34;| \u0026#34;Winston-Salem\u0026#34;| NC 49| 52| 48| \u0026#34;N\u0026#34;| 97| 9| 0| \u0026#34;W\u0026#34;| \u0026#34;Winnipeg\u0026#34;| MB 39| 11| 23| \u0026#34;N\u0026#34;| 78| 9| 36| \u0026#34;W\u0026#34;| \u0026#34;Winchester\u0026#34;| VA 34| 14| 24| \u0026#34;N\u0026#34;| 77| 55| 11| \u0026#34;W\u0026#34;| \u0026#34;Wilmington\u0026#34;| NC 39| 45| 0| \u0026#34;N\u0026#34;| 75| 33| 0| \u0026#34;W\u0026#34;| \u0026#34;Wilmington\u0026#34;| DE Inline command $ sqlite3 /tmp/t.db \u0026#34;.import -csv ./cities.csv ci\u0026#34; \u0026#34;select * from ci\u0026#34; -header LatD| \u0026#34;LatM\u0026#34;| \u0026#34;LatS\u0026#34;| \u0026#34;NS\u0026#34;| \u0026#34;LonD\u0026#34;| \u0026#34;LonM\u0026#34;| \u0026#34;LonS\u0026#34;| \u0026#34;EW\u0026#34;| \u0026#34;City\u0026#34;| \u0026#34;State\u0026#34; 41| 5| 59| \u0026#34;N\u0026#34;| 80| 39| 0| \u0026#34;W\u0026#34;| \u0026#34;Youngstown\u0026#34;| OH 42| 52| 48| \u0026#34;N\u0026#34;| 97| 23| 23| \u0026#34;W\u0026#34;| \u0026#34;Yankton\u0026#34;| SD 46| 35| 59| \u0026#34;N\u0026#34;| 120| 30| 36| \u0026#34;W\u0026#34;| \u0026#34;Yakima\u0026#34;| WA 42| 16| 12| \u0026#34;N\u0026#34;| 71| 48| 0| \u0026#34;W\u0026#34;| \u0026#34;Worcester\u0026#34;| MA 43| 37| 48| \u0026#34;N\u0026#34;| 89| 46| 11| \u0026#34;W\u0026#34;| \u0026#34;Wisconsin Dells\u0026#34;| WI 36| 5| 59| \u0026#34;N\u0026#34;| 80| 15| 0| \u0026#34;W\u0026#34;| \u0026#34;Winston-Salem\u0026#34;| NC 49| 52| 48| \u0026#34;N\u0026#34;| 97| 9| 0| \u0026#34;W\u0026#34;| \u0026#34;Winnipeg\u0026#34;| MB 39| 11| 23| \u0026#34;N\u0026#34;| 78| 9| 36| \u0026#34;W\u0026#34;| \u0026#34;Winchester\u0026#34;| VA 34| 14| 24| \u0026#34;N\u0026#34;| 77| 55| 11| \u0026#34;W\u0026#34;| \u0026#34;Wilmington\u0026#34;| NC 39| 45| 0| \u0026#34;N\u0026#34;| 75| 33| 0| \u0026#34;W\u0026#34;| \u0026#34;Wilmington\u0026#34;| DE ","permalink":"https://cdecl.github.io/devops/csv-to-sqlite3/","summary":"\u003cp\u003eCSV 파일을 SQLite3 Import 및 Query\u003c/p\u003e\n\u003ch2 id=\"csv-to-sqlite3\"\u003eCSV to SQLite3\u003c/h2\u003e\n\u003cp\u003eCSV 파일을 SQLite3로 Import 쿼리\u003c/p\u003e\n\u003ch3 id=\"csv-샘플-데이터-확인\"\u003eCSV 샘플 데이터 확인\u003c/h3\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-sh\" data-lang=\"sh\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ cat cities.csv\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;LatD\u0026#34;\u003c/span\u003e, \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;LatM\u0026#34;\u003c/span\u003e, \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;LatS\u0026#34;\u003c/span\u003e, \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;NS\u0026#34;\u003c/span\u003e, \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;LonD\u0026#34;\u003c/span\u003e, \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;LonM\u0026#34;\u003c/span\u003e, \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;LonS\u0026#34;\u003c/span\u003e, \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;EW\u0026#34;\u003c/span\u003e, \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;City\u0026#34;\u003c/span\u003e, \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;State\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e   41,    5,   59, \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;N\u0026#34;\u003c/span\u003e,     80,   39,    0, \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;W\u0026#34;\u003c/span\u003e, \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;Youngstown\u0026#34;\u003c/span\u003e, OH\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e   42,   52,   48, \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;N\u0026#34;\u003c/span\u003e,     97,   23,   23, \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;W\u0026#34;\u003c/span\u003e, \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;Yankton\u0026#34;\u003c/span\u003e, SD\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e   46,   35,   59, \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;N\u0026#34;\u003c/span\u003e,    120,   30,   36, \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;W\u0026#34;\u003c/span\u003e, \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;Yakima\u0026#34;\u003c/span\u003e, WA\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e...\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cblockquote\u003e\n\u003cp\u003eTIP: cat 대신 bat 사용하면 더 나은 뷰어를 제공\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-sh\" data-lang=\"sh\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ bat cities.csv\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003e\u003cimg loading=\"lazy\" src=\"/images/2022-08-10-02-18-58.png\"\u003e\u003c/p\u003e\n\u003ch3 id=\"csv-import\"\u003eCSV Import\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003e.mode csv\u003c/code\u003e : csv 모드로 전환\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003e.import ./cities.csv ci\u003c/code\u003e : \u003ccode\u003e./cities.csv\u003c/code\u003e 파일을 ci 테이블로 Import\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003e.import --skip 1 ./cities.csv ci\u003c/code\u003e : \u003ccode\u003e./cities.csv\u003c/code\u003e  테이블이 존재 할때 header 제외\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003e.import --csv ./cities.csv ci\u003c/code\u003e : \u003ccode\u003e./cities.csv\u003c/code\u003e  csv 모드 inline 옵션\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-sh\" data-lang=\"sh\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# ci.db 생성 및 인터랙티브 모드\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ sqlite3 ci.db\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eSQLite version 3.37.0 2021-12-09 01:34:53\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eEnter \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;.help\u0026#34;\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003efor\u003c/span\u003e usage hints.\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003esqlite\u0026gt; .mode csv\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003esqlite\u0026gt; .import ./cities.csv ci\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003esqlite\u0026gt; .tables\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eci\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003esqlite\u0026gt; \u003cspan style=\"color:#66d9ef\"\u003eselect\u003c/span\u003e count\u003cspan style=\"color:#f92672\"\u003e(\u003c/span\u003e*\u003cspan style=\"color:#f92672\"\u003e)\u003c/span\u003e from ci;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ecount\u003cspan style=\"color:#f92672\"\u003e(\u003c/span\u003e*\u003cspan style=\"color:#f92672\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#ae81ff\"\u003e129\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003esqlite\u0026gt; .mode list\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003esqlite\u0026gt; .header on\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003esqlite\u0026gt; \u003cspan style=\"color:#66d9ef\"\u003eselect\u003c/span\u003e * from ci limit 10;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eLatD| \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;LatM\u0026#34;\u003c/span\u003e| \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;LatS\u0026#34;\u003c/span\u003e| \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;NS\u0026#34;\u003c/span\u003e| \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;LonD\u0026#34;\u003c/span\u003e| \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;LonM\u0026#34;\u003c/span\u003e| \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;LonS\u0026#34;\u003c/span\u003e| \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;EW\u0026#34;\u003c/span\u003e| \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;City\u0026#34;\u003c/span\u003e| \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;State\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e   41|    5|   59| \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;N\u0026#34;\u003c/span\u003e|     80|   39|    0| \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;W\u0026#34;\u003c/span\u003e| \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;Youngstown\u0026#34;\u003c/span\u003e| OH\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e   42|   52|   48| \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;N\u0026#34;\u003c/span\u003e|     97|   23|   23| \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;W\u0026#34;\u003c/span\u003e| \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;Yankton\u0026#34;\u003c/span\u003e| SD\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e   46|   35|   59| \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;N\u0026#34;\u003c/span\u003e|    120|   30|   36| \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;W\u0026#34;\u003c/span\u003e| \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;Yakima\u0026#34;\u003c/span\u003e| WA\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e   42|   16|   12| \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;N\u0026#34;\u003c/span\u003e|     71|   48|    0| \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;W\u0026#34;\u003c/span\u003e| \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;Worcester\u0026#34;\u003c/span\u003e| MA\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e   43|   37|   48| \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;N\u0026#34;\u003c/span\u003e|     89|   46|   11| \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;W\u0026#34;\u003c/span\u003e| \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;Wisconsin Dells\u0026#34;\u003c/span\u003e| WI\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e   36|    5|   59| \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;N\u0026#34;\u003c/span\u003e|     80|   15|    0| \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;W\u0026#34;\u003c/span\u003e| \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;Winston-Salem\u0026#34;\u003c/span\u003e| NC\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e   49|   52|   48| \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;N\u0026#34;\u003c/span\u003e|     97|    9|    0| \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;W\u0026#34;\u003c/span\u003e| \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;Winnipeg\u0026#34;\u003c/span\u003e| MB\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e   39|   11|   23| \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;N\u0026#34;\u003c/span\u003e|     78|    9|   36| \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;W\u0026#34;\u003c/span\u003e| \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;Winchester\u0026#34;\u003c/span\u003e| VA\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e   34|   14|   24| \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;N\u0026#34;\u003c/span\u003e|     77|   55|   11| \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;W\u0026#34;\u003c/span\u003e| \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;Wilmington\u0026#34;\u003c/span\u003e| NC\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e   39|   45|    0| \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;N\u0026#34;\u003c/span\u003e|     75|   33|    0| \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;W\u0026#34;\u003c/span\u003e| \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;Wilmington\u0026#34;\u003c/span\u003e| DE\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch4 id=\"inline-command\"\u003eInline command\u003c/h4\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-sh\" data-lang=\"sh\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ sqlite3 /tmp/t.db \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;.import -csv ./cities.csv ci\u0026#34;\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;select * from ci\u0026#34;\u003c/span\u003e -header\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eLatD| \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;LatM\u0026#34;\u003c/span\u003e| \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;LatS\u0026#34;\u003c/span\u003e| \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;NS\u0026#34;\u003c/span\u003e| \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;LonD\u0026#34;\u003c/span\u003e| \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;LonM\u0026#34;\u003c/span\u003e| \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;LonS\u0026#34;\u003c/span\u003e| \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;EW\u0026#34;\u003c/span\u003e| \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;City\u0026#34;\u003c/span\u003e| \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;State\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e   41|    5|   59| \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;N\u0026#34;\u003c/span\u003e|     80|   39|    0| \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;W\u0026#34;\u003c/span\u003e| \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;Youngstown\u0026#34;\u003c/span\u003e| OH\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e   42|   52|   48| \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;N\u0026#34;\u003c/span\u003e|     97|   23|   23| \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;W\u0026#34;\u003c/span\u003e| \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;Yankton\u0026#34;\u003c/span\u003e| SD\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e   46|   35|   59| \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;N\u0026#34;\u003c/span\u003e|    120|   30|   36| \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;W\u0026#34;\u003c/span\u003e| \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;Yakima\u0026#34;\u003c/span\u003e| WA\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e   42|   16|   12| \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;N\u0026#34;\u003c/span\u003e|     71|   48|    0| \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;W\u0026#34;\u003c/span\u003e| \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;Worcester\u0026#34;\u003c/span\u003e| MA\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e   43|   37|   48| \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;N\u0026#34;\u003c/span\u003e|     89|   46|   11| \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;W\u0026#34;\u003c/span\u003e| \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;Wisconsin Dells\u0026#34;\u003c/span\u003e| WI\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e   36|    5|   59| \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;N\u0026#34;\u003c/span\u003e|     80|   15|    0| \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;W\u0026#34;\u003c/span\u003e| \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;Winston-Salem\u0026#34;\u003c/span\u003e| NC\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e   49|   52|   48| \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;N\u0026#34;\u003c/span\u003e|     97|    9|    0| \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;W\u0026#34;\u003c/span\u003e| \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;Winnipeg\u0026#34;\u003c/span\u003e| MB\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e   39|   11|   23| \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;N\u0026#34;\u003c/span\u003e|     78|    9|   36| \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;W\u0026#34;\u003c/span\u003e| \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;Winchester\u0026#34;\u003c/span\u003e| VA\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e   34|   14|   24| \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;N\u0026#34;\u003c/span\u003e|     77|   55|   11| \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;W\u0026#34;\u003c/span\u003e| \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;Wilmington\u0026#34;\u003c/span\u003e| NC\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e   39|   45|    0| \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;N\u0026#34;\u003c/span\u003e|     75|   33|    0| \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;W\u0026#34;\u003c/span\u003e| \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;Wilmington\u0026#34;\u003c/span\u003e| DE\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e","title":"CSV to SQLite3"},{"content":"하위 디렉토리에서 정규식 패턴을 재귀적으로 검색하는 라인 지향 검색 도구\nripgrep https://github.com/BurntSushi/ripgrep{:target=\u0026quot;_blank\u0026quot;} rust로 만들어진 크로스플랫폼 지향 grep 대체도구 특징 코드 검색에 특화되고 기본적으로 재귀적 디렉토리 검색 사용\n자동 필터링 : 기본적으로 디렉토리를 검색할 때 아래 조건은 검색하지 않음\n.gitignore .ignore .rgignore 명시되어 있는 파일은 기본적으로 검색하지 않음 → --no-ignore 로 회피 숨겨진 파일 및 디렉토리 → --hidden 로 회피 바이너리 파일 (ripgrep은 NUL바이트 있으면 바이너리로 간주) → --text, -a 로 회피 심볼릭 링크 연결 → --follow, -L 로 연결 전체 필터링을 회피하기 (단계별) → -u or -uu or -uuu (quivalent to \u0026lsquo;grep -r\u0026rsquo;)\n수동 필터링 : glob -g '*.toml'\nUTF-8 이외의 텍스트 인코딩으로 파일 검색 지원\n비슷한 타입의 파일을 묶음 검색 지원 --type-list\nVisual Studio Code 에 탑재 됨 : https://code.visualstudio.com/updates/v1_11#_text-search-improvements{:target=\u0026quot;_blank\u0026quot;}\n비슷한 다른 도구에 비해 가장 빠른 성능을 보임\n비슷한 도구 ag (the_silver_searcher) : https://github.com/ggreer/the_silver_searcher{:target=\u0026quot;_blank\u0026quot;} 설치 Releases{:target=\u0026quot;_blank\u0026quot;} 에서 다운받거나 Package 설치 # masos $ brew install ripgrep # ubuntu $ apt install ripgrep # chocolatey $ choco install ripgrep 기본 사용 # 현재 하위 디렉토리에서 `bash` 란 단어를 찾음 $ rg bash # /etc 디렉토리에서 `bash` 란 단어를 찾음 $ rg bash /etc # 파일/디렉토리 매치 검색 # -g, --glob \u0026lt;GLOB\u0026gt;: Include or exclude files and directories for searching that match the given glob $ rg bash -g \u0026#39;*.sh\u0026#39; # -u, --unrestricted Reduce the level of \u0026#34;smart\u0026#34; searchin # 스마트 검색 수준을 낮춤 $ rg cmake -u # rg -uuu\u0026#39; is roughly equivalent to \u0026#39;grep -r\u0026#39;. # 전체 파일 검색 $ rg cmake -uuu 타입 리스트 사용 # type-list 종류 확인 $ rg --type-list ... cpp: *.[ChH], *.[ChH].in, *.[ch]pp, *.[ch]pp.in, *.[ch]xx, *.[ch]xx.in, *.cc, *.cc.in, *.hh, *.hh.in, *.inl creole: *.creole crystal: *.cr, Projectfile cs: *.cs csharp: *.cs cshtml: *.cshtml css: *.css, *.scss csv: *.csv cython: *.pxd, *.pxi, *.pyx d: *.d dart: *.dart ... msbuild: *.csproj, *.fsproj, *.proj, *.props, *.targets, *.vcxproj ... perl: *.PL, *.perl, *.pl, *.plh, *.plx, *.pm, *.t php: *.php, *.php3, *.php4, *.php5, *.phtml ... yaml: *.yaml, *.yml ... # yaml type 파일에서 검색 # -t, --type \u0026lt;TYPE\u0026gt;... $ rg host -t yaml # yaml type 파일 제외하고 검색 # -T, --type-not \u0026lt;TYPE\u0026gt;... $ rg host -T yaml ","permalink":"https://cdecl.github.io/devops/ripgrep/","summary":"\u003cp\u003e하위 디렉토리에서 정규식 패턴을 재귀적으로 검색하는 라인 지향 검색 도구\u003c/p\u003e\n\u003ch2 id=\"ripgrep\"\u003eripgrep\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://github.com/BurntSushi/ripgrep\"\u003ehttps://github.com/BurntSushi/ripgrep\u003c/a\u003e{:target=\u0026quot;_blank\u0026quot;}\u003c/li\u003e\n\u003cli\u003erust로 만들어진 크로스플랫폼 지향 \u003ccode\u003egrep\u003c/code\u003e 대체도구\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"특징\"\u003e특징\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003e코드 검색에 특화되고 기본적으로 재귀적 디렉토리 검색 사용\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e자동 필터링 : 기본적으로 디렉토리를 검색할 때 아래 조건은 검색하지 않음\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003e.gitignore\u003c/code\u003e \u003ccode\u003e.ignore\u003c/code\u003e \u003ccode\u003e.rgignore\u003c/code\u003e 명시되어 있는 파일은 기본적으로 검색하지 않음 → \u003ccode\u003e--no-ignore\u003c/code\u003e 로 회피\u003c/li\u003e\n\u003cli\u003e숨겨진 파일 및 디렉토리 → \u003ccode\u003e--hidden\u003c/code\u003e 로 회피\u003c/li\u003e\n\u003cli\u003e바이너리 파일 (ripgrep은 NUL바이트 있으면 바이너리로 간주) → \u003ccode\u003e--text\u003c/code\u003e, \u003ccode\u003e-a\u003c/code\u003e 로 회피\u003c/li\u003e\n\u003cli\u003e심볼릭 링크 연결 → \u003ccode\u003e--follow\u003c/code\u003e, \u003ccode\u003e-L\u003c/code\u003e 로 연결\u003c/li\u003e\n\u003c/ul\u003e\n\u003cblockquote\u003e\n\u003cp\u003e전체 필터링을 회피하기 (단계별) → \u003ccode\u003e-u\u003c/code\u003e or \u003ccode\u003e-uu\u003c/code\u003e or \u003ccode\u003e-uuu\u003c/code\u003e (quivalent to \u0026lsquo;grep -r\u0026rsquo;)\u003c/p\u003e","title":"ripgrep, rg"},{"content":"Ansible aws_ec2 plugin 활용, AWS EC2 동적 Inventory 구성\nAnsible plugin : aws_ec2 https://docs.ansible.com/ansible/2.9/plugins/inventory/aws_ec2.html{:target=\u0026quot;_blank\u0026quot;} Get inventory hosts from Amazon Web Services EC2 Requirements python package : boto3, bo YAML 설정 파일 이름이 aws_ec2.(yml|yaml) 로 끝나야 함 $ ansible --version ansible 2.9.6 config file = /etc/ansible/ansible.cfg configured module search path = [\u0026#39;/home/cdecl/.ansible/plugins/modules\u0026#39;, \u0026#39;/usr/share/ansible/plugins/modules\u0026#39;] ansible python module location = /usr/lib/python3/dist-packages/ansible executable location = /usr/bin/ansible python version = 3.8.10 (default, Jun 2 2021, 10:49:15) [GCC 9.4.0] # install boto3, bo $ pip3 install boto3 기본설정 aws_ec2.yaml plugin : 프러그인 이름, 필수 regions : 지정하면 더 빠른 조회 plugin: aws_ec2 regions: - ap-northeast-2 # .aws/credendial 파일이 없으면 aws_access_key_id: AKIA3************** aws_secret_access_key: 1oxRajyBX********************** ~/.aws/credentials [default] aws_access_key_id = AKIA3************** aws_secret_access_key = 1oxRajyBX********************** Inventory 확인 기본 aws_ec2 그룹으로 생성 # json 형태로 ec2 node 정보 및 group 정보 리스트 $ ansible-inventory -i aws_ec2.yaml --list ... \u0026#34;all\u0026#34;: { \u0026#34;children\u0026#34;: [ \u0026#34;aws_ec2\u0026#34;, \u0026#34;ungrouped\u0026#34; ] }, \u0026#34;aws_ec2\u0026#34;: { \u0026#34;hosts\u0026#34;: [ \u0026#34;ip-10-211-20-159.ap-northeast-2.compute.internal\u0026#34;, \u0026#34;ip-10-211-20-229.ap-northeast-2.compute.internal\u0026#34;, \u0026#34;ip-10-211-20-45.ap-northeast-2.compute.internal\u0026#34; ] } } # inventory 정보를 그래프 형태로 표시 $ ansible-inventory -i aws_ec2.yaml --graph @all: |--@aws_ec2: | |--ip-10-211-20-159.ap-northeast-2.compute.internal | |--ip-10-211-20-229.ap-northeast-2.compute.internal | |--ip-10-211-20-45.ap-northeast-2.compute.inte # ansible 명령으로 확인 $ ansible -i aws_ec2.yaml --list-hosts all hosts (3): ip-10-211-20-229.ap-northeast-2.compute.internal ip-10-211-20-159.ap-northeast-2.compute.internal ip-10-211-20-45.ap-northeast-2.compute.internal 필터 및 그룹화 예제 : https://docs.ansible.com/ansible/2.9/plugins/inventory/aws_ec2.html#examples{:target=\u0026quot;_blank\u0026quot;} filters : 필터로 원하는 항목만 가져옴 AWS CLI 명령 describe-instances \u0026ndash;filters 항목 참고 https://docs.aws.amazon.com/cli/latest/reference/ec2/describe-instances.html#options{:target=\u0026quot;_blank\u0026quot;} keyed_groups : Inventory 그룹화 항목 plugin: aws_ec2 regions: - ap-northeast-2 filters: # tag 정보가 AutoDelete:False 인 인스턴스 tag:AutoDelete: \u0026#34;False\u0026#34; # running 상태 인스턴스 instance-state-name: \u0026#39;running\u0026#39; keyed_groups: # tag 를 기준으로 그룹화, \u0026#34;prefix_key_value\u0026#34; 형식의 그룹이름 - prefix: tag key: tags # tag 로 그룹화 $ ansible-inventory -i aws_ec2.yaml --graph @all: |--@aws_ec2: | |--ip-10-211-20-159.ap-northeast-2.compute.internal | |--ip-10-211-20-229.ap-northeast-2.compute.internal | |--ip-10-211-20-45.ap-northeast-2.compute.internal |--@tag_AutoDelete_False: | |--ip-10-211-20-159.ap-northeast-2.compute.internal | |--ip-10-211-20-229.ap-northeast-2.compute.internal | |--ip-10-211-20-45.ap-northeast-2.compute.internal ... |--@tag_Name_kube01: | |--ip-10-211-20-45.ap-northeast-2.compute.internal |--@tag_Name_kube02: | |--ip-10-211-20-159.ap-northeast-2.compute.internal |--@tag_Name_kube03: | |--ip-10-211-20-229.ap-northeast-2.compute.internal |--@ungrouped: # ansible 명령으로 확인 $ ansible -i aws_ec2.yaml tag_AutoDelete_False --list-hosts hosts (3): ip-10-211-20-229.ap-northeast-2.compute.internal ip-10-211-20-159.ap-northeast-2.compute.internal ip-10-211-20-45.ap-northeast-2.compute.internal $ ansible -i aws_ec2.yaml tag_Name_kube01 --list-hosts hosts (1): ip-10-211-20-45.ap-northeast-2.compute.internal Host 연결을 위한 inventory parameters 추가 multiple inventory로 정보 추가 https://docs.ansible.com/ansible/2.9/user_guide/intro_inventory.html#connecting-to-hosts-behavioral-inventory-parameters{:target=\u0026quot;_blank\u0026quot;} # aws.host [win:children] tag_AutoDelete_False [win:vars] ansible_user=rundeck ansible_password=\u0026lt;passowrd\u0026gt; ansible_connection=winrm ansible_port=5985 $ ansible-inventory -i aws_ec2.yaml -i aws.host --vars --list { \u0026#34;_meta\u0026#34;: { \u0026#34;hostvars\u0026#34;: { \u0026#34;ip-10-211-20-159.ap-northeast-2.compute.internal\u0026#34;: { \u0026#34;ami_launch_index\u0026#34;: 1, \u0026#34;ansible_connection\u0026#34;: \u0026#34;winrm\u0026#34;, \u0026#34;ansible_password\u0026#34;: \u0026#34;\u0026lt;passowrd\u0026gt;\u0026#34;, \u0026#34;ansible_port\u0026#34;: 5985, \u0026#34;ansible_user\u0026#34;: \u0026#34;ansible\u0026#34;, \u0026#34;architecture\u0026#34;: \u0026#34;x86_64\u0026#34;, ... ansible-inventory --list 옵션으로 hosts 파일 형식 구성 $ ansible-inventory -i aws_ec2.yaml --list | jq -r \u0026#39;._meta.hostvars[] | \u0026#34;\\(.private_ip_address) \\(.tags.Name) \u0026#34;\u0026#39; 10.211.20.159 kube02 10.211.20.229 kube03 10.211.20.45 kube01 Ansible EC2 Dynamic inventory minimum IAM policies https://stackoverflow.com/questions/30519470/ansible-ec2-dynamic-inventory-minimum-iam-policies{:target=\u0026quot;_blank\u0026quot;} { \u0026#34;Version\u0026#34;: \u0026#34;2012-10-17\u0026#34;, \u0026#34;Statement\u0026#34;: [ { \u0026#34;Sid\u0026#34;: \u0026#34;Demo201505282045\u0026#34;, \u0026#34;Effect\u0026#34;: \u0026#34;Allow\u0026#34;, \u0026#34;Action\u0026#34;: [ \u0026#34;ec2:Describe*\u0026#34;, \u0026#34;route53:ListHostedZones\u0026#34;, \u0026#34;route53:ListResourceRecordSets\u0026#34; ], \u0026#34;Resource\u0026#34;: \u0026#34;*\u0026#34; } ] } ","permalink":"https://cdecl.github.io/devops/ansible-dynamic-inventory-aws-ec2/","summary":"\u003cp\u003eAnsible \u003ccode\u003eaws_ec2\u003c/code\u003e plugin 활용, AWS EC2 동적 Inventory 구성\u003c/p\u003e\n\u003ch2 id=\"ansible-plugin--aws_ec2\"\u003eAnsible plugin : \u003ccode\u003eaws_ec2\u003c/code\u003e\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://docs.ansible.com/ansible/2.9/plugins/inventory/aws_ec2.html\"\u003ehttps://docs.ansible.com/ansible/2.9/plugins/inventory/aws_ec2.html\u003c/a\u003e{:target=\u0026quot;_blank\u0026quot;}\u003c/li\u003e\n\u003cli\u003eGet inventory hosts from Amazon Web Services EC2\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"requirements\"\u003eRequirements\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003epython package : boto3, bo\u003c/li\u003e\n\u003cli\u003eYAML 설정 파일 이름이 \u003ccode\u003eaws_ec2.(yml|yaml)\u003c/code\u003e 로 끝나야 함\u003c/li\u003e\n\u003c/ul\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-sh\" data-lang=\"sh\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ ansible --version\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eansible 2.9.6\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  config file \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e /etc/ansible/ansible.cfg\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  configured module search path \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e[\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;/home/cdecl/.ansible/plugins/modules\u0026#39;\u003c/span\u003e, \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;/usr/share/ansible/plugins/modules\u0026#39;\u003c/span\u003e\u003cspan style=\"color:#f92672\"\u003e]\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  ansible python module location \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e /usr/lib/python3/dist-packages/ansible\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  executable location \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e /usr/bin/ansible\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  python version \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e 3.8.10 \u003cspan style=\"color:#f92672\"\u003e(\u003c/span\u003edefault, Jun  \u003cspan style=\"color:#ae81ff\"\u003e2\u003c/span\u003e 2021, 10:49:15\u003cspan style=\"color:#f92672\"\u003e)\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e[\u003c/span\u003eGCC 9.4.0\u003cspan style=\"color:#f92672\"\u003e]\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# install boto3, bo\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ pip3 install boto3\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003chr\u003e\n\u003ch3 id=\"기본설정\"\u003e기본설정\u003c/h3\u003e\n\u003ch5 id=\"aws_ec2yaml\"\u003eaws_ec2.yaml\u003c/h5\u003e\n\u003cul\u003e\n\u003cli\u003eplugin : 프러그인 이름, 필수\u003c/li\u003e\n\u003cli\u003eregions : 지정하면 더 빠른 조회\u003c/li\u003e\n\u003c/ul\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-yaml\" data-lang=\"yaml\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003eplugin\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003eaws_ec2\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003eregions\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  - \u003cspan style=\"color:#ae81ff\"\u003eap-northeast-2\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# .aws/credendial 파일이 없으면 \u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003eaws_access_key_id\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003eAKIA3**************\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003eaws_secret_access_key\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003e1oxRajyBX**********************\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch5 id=\"awscredentials\"\u003e~/.aws/credentials\u003c/h5\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-toml\" data-lang=\"toml\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e[\u003cspan style=\"color:#a6e22e\"\u003edefault\u003c/span\u003e]\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#a6e22e\"\u003eaws_access_key_id\u003c/span\u003e = \u003cspan style=\"color:#a6e22e\"\u003eAKIA3\u003c/span\u003e\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e**************\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#a6e22e\"\u003eaws_secret_access_key\u003c/span\u003e = \u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e\u003cspan style=\"color:#a6e22e\"\u003eoxRajyBX\u003c/span\u003e\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e**********************\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch4 id=\"inventory-확인\"\u003eInventory 확인\u003c/h4\u003e\n\u003cul\u003e\n\u003cli\u003e기본 \u003ccode\u003eaws_ec2\u003c/code\u003e 그룹으로 생성\u003c/li\u003e\n\u003c/ul\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-sh\" data-lang=\"sh\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# json 형태로 ec2 node 정보 및 group 정보 리스트 \u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ ansible-inventory -i aws_ec2.yaml --list\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e...\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;all\u0026#34;\u003c/span\u003e: \u003cspan style=\"color:#f92672\"\u003e{\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;children\u0026#34;\u003c/span\u003e: \u003cspan style=\"color:#f92672\"\u003e[\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e            \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;aws_ec2\u0026#34;\u003c/span\u003e,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e            \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;ungrouped\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#f92672\"\u003e]\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003e}\u003c/span\u003e,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;aws_ec2\u0026#34;\u003c/span\u003e: \u003cspan style=\"color:#f92672\"\u003e{\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;hosts\u0026#34;\u003c/span\u003e: \u003cspan style=\"color:#f92672\"\u003e[\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e            \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;ip-10-211-20-159.ap-northeast-2.compute.internal\u0026#34;\u003c/span\u003e,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e            \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;ip-10-211-20-229.ap-northeast-2.compute.internal\u0026#34;\u003c/span\u003e,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e            \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;ip-10-211-20-45.ap-northeast-2.compute.internal\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#f92672\"\u003e]\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003e}\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003e}\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# inventory 정보를 그래프 형태로 표시\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ ansible-inventory -i aws_ec2.yaml --graph\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e@all:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  |--@aws_ec2:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  |  |--ip-10-211-20-159.ap-northeast-2.compute.internal\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  |  |--ip-10-211-20-229.ap-northeast-2.compute.internal\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  |  |--ip-10-211-20-45.ap-northeast-2.compute.inte\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# ansible 명령으로 확인\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ ansible -i aws_ec2.yaml --list-hosts all\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  hosts \u003cspan style=\"color:#f92672\"\u003e(\u003c/span\u003e3\u003cspan style=\"color:#f92672\"\u003e)\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    ip-10-211-20-229.ap-northeast-2.compute.internal\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    ip-10-211-20-159.ap-northeast-2.compute.internal\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    ip-10-211-20-45.ap-northeast-2.compute.internal\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch4 id=\"필터-및-그룹화\"\u003e필터 및 그룹화\u003c/h4\u003e\n\u003cul\u003e\n\u003cli\u003e예제 : \u003ca href=\"https://docs.ansible.com/ansible/2.9/plugins/inventory/aws_ec2.html#examples\"\u003ehttps://docs.ansible.com/ansible/2.9/plugins/inventory/aws_ec2.html#examples\u003c/a\u003e{:target=\u0026quot;_blank\u0026quot;}\u003c/li\u003e\n\u003cli\u003efilters : 필터로 원하는 항목만 가져옴\n\u003cul\u003e\n\u003cli\u003eAWS CLI 명령 describe-instances \u0026ndash;filters 항목 참고\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://docs.aws.amazon.com/cli/latest/reference/ec2/describe-instances.html#options\"\u003ehttps://docs.aws.amazon.com/cli/latest/reference/ec2/describe-instances.html#options\u003c/a\u003e{:target=\u0026quot;_blank\u0026quot;}\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003ekeyed_groups : Inventory 그룹화 항목\u003c/li\u003e\n\u003c/ul\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-yaml\" data-lang=\"yaml\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003eplugin\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003eaws_ec2\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003eregions\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  - \u003cspan style=\"color:#ae81ff\"\u003eap-northeast-2\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003efilters\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#75715e\"\u003e# tag 정보가 AutoDelete:False 인 인스턴스 \u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#f92672\"\u003etag:AutoDelete\u003c/span\u003e: \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;False\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#75715e\"\u003e# running 상태 인스턴스\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#f92672\"\u003einstance-state-name\u003c/span\u003e: \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;running\u0026#39;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003ekeyed_groups\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#75715e\"\u003e# tag 를 기준으로 그룹화, \u0026#34;prefix_key_value\u0026#34; 형식의 그룹이름 \u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  - \u003cspan style=\"color:#f92672\"\u003eprefix\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003etag\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003ekey\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003etags\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-sh\" data-lang=\"sh\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# tag 로 그룹화 \u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ ansible-inventory -i aws_ec2.yaml --graph\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e@all:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  |--@aws_ec2:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  |  |--ip-10-211-20-159.ap-northeast-2.compute.internal\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  |  |--ip-10-211-20-229.ap-northeast-2.compute.internal\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  |  |--ip-10-211-20-45.ap-northeast-2.compute.internal\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  |--@tag_AutoDelete_False:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  |  |--ip-10-211-20-159.ap-northeast-2.compute.internal\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  |  |--ip-10-211-20-229.ap-northeast-2.compute.internal\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  |  |--ip-10-211-20-45.ap-northeast-2.compute.internal\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e...\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  |--@tag_Name_kube01:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  |  |--ip-10-211-20-45.ap-northeast-2.compute.internal\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  |--@tag_Name_kube02:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  |  |--ip-10-211-20-159.ap-northeast-2.compute.internal\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  |--@tag_Name_kube03:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  |  |--ip-10-211-20-229.ap-northeast-2.compute.internal\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  |--@ungrouped:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# ansible 명령으로 확인\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ ansible -i aws_ec2.yaml tag_AutoDelete_False --list-hosts\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  hosts \u003cspan style=\"color:#f92672\"\u003e(\u003c/span\u003e3\u003cspan style=\"color:#f92672\"\u003e)\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    ip-10-211-20-229.ap-northeast-2.compute.internal\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    ip-10-211-20-159.ap-northeast-2.compute.internal\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    ip-10-211-20-45.ap-northeast-2.compute.internal\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ ansible -i aws_ec2.yaml tag_Name_kube01 --list-hosts\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  hosts \u003cspan style=\"color:#f92672\"\u003e(\u003c/span\u003e1\u003cspan style=\"color:#f92672\"\u003e)\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    ip-10-211-20-45.ap-northeast-2.compute.internal\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003chr\u003e\n\u003ch4 id=\"host-연결을-위한-inventory-parameters-추가\"\u003eHost 연결을 위한 inventory parameters 추가\u003c/h4\u003e\n\u003cul\u003e\n\u003cli\u003emultiple inventory로 정보 추가\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://docs.ansible.com/ansible/2.9/user_guide/intro_inventory.html#connecting-to-hosts-behavioral-inventory-parameters\"\u003ehttps://docs.ansible.com/ansible/2.9/user_guide/intro_inventory.html#connecting-to-hosts-behavioral-inventory-parameters\u003c/a\u003e{:target=\u0026quot;_blank\u0026quot;}\u003c/li\u003e\n\u003c/ul\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-toml\" data-lang=\"toml\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# aws.host\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e[\u003cspan style=\"color:#a6e22e\"\u003ewin\u003c/span\u003e\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#a6e22e\"\u003echildren\u003c/span\u003e]\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#a6e22e\"\u003etag_AutoDelete_False\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e[\u003cspan style=\"color:#a6e22e\"\u003ewin\u003c/span\u003e\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#a6e22e\"\u003evars\u003c/span\u003e]\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#a6e22e\"\u003eansible_user\u003c/span\u003e=\u003cspan style=\"color:#a6e22e\"\u003erundeck\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#a6e22e\"\u003eansible_password\u003c/span\u003e=\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e\u0026lt;\u003c/span\u003e\u003cspan style=\"color:#a6e22e\"\u003epassowrd\u003c/span\u003e\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e\u0026gt;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#a6e22e\"\u003eansible_connection\u003c/span\u003e=\u003cspan style=\"color:#a6e22e\"\u003ewinrm\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#a6e22e\"\u003eansible_port\u003c/span\u003e=\u003cspan style=\"color:#ae81ff\"\u003e5985\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-sh\" data-lang=\"sh\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ ansible-inventory -i aws_ec2.yaml -i aws.host --vars --list\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003e{\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;_meta\u0026#34;\u003c/span\u003e: \u003cspan style=\"color:#f92672\"\u003e{\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;hostvars\u0026#34;\u003c/span\u003e: \u003cspan style=\"color:#f92672\"\u003e{\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e            \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;ip-10-211-20-159.ap-northeast-2.compute.internal\u0026#34;\u003c/span\u003e: \u003cspan style=\"color:#f92672\"\u003e{\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e                \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;ami_launch_index\u0026#34;\u003c/span\u003e: 1,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e                \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;ansible_connection\u0026#34;\u003c/span\u003e: \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;winrm\u0026#34;\u003c/span\u003e,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e                \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;ansible_password\u0026#34;\u003c/span\u003e: \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u0026lt;passowrd\u0026gt;\u0026#34;\u003c/span\u003e,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e                \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;ansible_port\u0026#34;\u003c/span\u003e: 5985,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e                \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;ansible_user\u0026#34;\u003c/span\u003e: \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;ansible\u0026#34;\u003c/span\u003e,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e                \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;architecture\u0026#34;\u003c/span\u003e: \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;x86_64\u0026#34;\u003c/span\u003e,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e...\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003chr\u003e\n\u003ch4 id=\"ansible-inventory---list-옵션으로-hosts-파일-형식-구성\"\u003e\u003ccode\u003eansible-inventory --list\u003c/code\u003e 옵션으로 hosts 파일 형식 구성\u003c/h4\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-sh\" data-lang=\"sh\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ ansible-inventory -i aws_ec2.yaml --list | jq -r \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;._meta.hostvars[] | \u0026#34;\\(.private_ip_address) \\(.tags.Name) \u0026#34;\u0026#39;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e10.211.20.159 kube02\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e10.211.20.229 kube03\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e10.211.20.45 kube01\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003chr\u003e\n\u003ch4 id=\"ansible-ec2-dynamic-inventory-minimum-iam-policies\"\u003eAnsible EC2 Dynamic inventory minimum IAM policies\u003c/h4\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://stackoverflow.com/questions/30519470/ansible-ec2-dynamic-inventory-minimum-iam-policies\"\u003ehttps://stackoverflow.com/questions/30519470/ansible-ec2-dynamic-inventory-minimum-iam-policies\u003c/a\u003e{:target=\u0026quot;_blank\u0026quot;}\u003c/li\u003e\n\u003c/ul\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-json\" data-lang=\"json\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e{\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003e\u0026#34;Version\u0026#34;\u003c/span\u003e: \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;2012-10-17\u0026#34;\u003c/span\u003e,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003e\u0026#34;Statement\u0026#34;\u003c/span\u003e: [\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e            \u003cspan style=\"color:#f92672\"\u003e\u0026#34;Sid\u0026#34;\u003c/span\u003e: \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;Demo201505282045\u0026#34;\u003c/span\u003e,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e            \u003cspan style=\"color:#f92672\"\u003e\u0026#34;Effect\u0026#34;\u003c/span\u003e: \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;Allow\u0026#34;\u003c/span\u003e,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e            \u003cspan style=\"color:#f92672\"\u003e\u0026#34;Action\u0026#34;\u003c/span\u003e: [\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e                \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;ec2:Describe*\u0026#34;\u003c/span\u003e,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e                \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;route53:ListHostedZones\u0026#34;\u003c/span\u003e,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e                \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;route53:ListResourceRecordSets\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e            ],\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e            \u003cspan style=\"color:#f92672\"\u003e\u0026#34;Resource\u0026#34;\u003c/span\u003e: \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;*\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        }\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    ]\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e}\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e","title":"Ansible dynamic inventory - AWS EC2"},{"content":"Canonical 재단에서 지원하는 단일 명령으로 Ubuntu VM 구성 할 수 있는 도구\nMultipass https://multipass.run/{:target=\u0026quot;_blank\u0026quot;} 최소한의 오버헤드를 위한 각 플랫폼 지원 Windows : Hyper-V macOS : QEMU, HyperKit Linux : LXD Multipass install https://multipass.run/install{:target=\u0026quot;_blank\u0026quot;} 플랫폼 별 패키지 설치 방법 # windows $ choco install multipass # macOS $ brew install multipass Multipass 주요 명령 및 VM Instance 생성 주요 명령어 launch : Ubuntu instance 생성 및 시작 start, stop, restart : 시작 중지 delete : Ubuntu instance 삭제 purge : 삭제된 이미지 영구 삭제 shell : Instance 내부 shell 로 접속 list : 생성된 Instance 확인 info : Instance 정보 확인 $ multipass --help ... Available commands: alias Create an alias aliases List available aliases authenticate Authenticate client delete Delete instances exec Run a command on an instance find Display available images to create instances from get Get a configuration setting help Display help about a command info Display information about instances launch Create and start an Ubuntu instance list List all available instances mount Mount a local directory in the instance networks List available network interfaces purge Purge all deleted instances permanently recover Recover deleted instances restart Restart instances set Set a configuration setting shell Open a shell on a running instance start Start instances stop Stop running instances suspend Suspend running instances transfer Transfer files between the host and instances umount Unmount a directory from an instance unalias Remove an alias version Show version details Ubuntu VM Instance 생성 : 기본 생성 # node1 이름의 instance 생성 $ multipass launch -n node01 Launched: node01 # 기본 lts 이미지로 생성 : Ubuntu 20.04 LTS $ multipass list Name State IPv4 Image node01 Running 192.168.196.207 Ubuntu 20.04 LTS # instace 정보 $ multipass info node01 Name: node01 State: Running IPv4: 192.168.196.207 Release: Ubuntu 20.04.4 LTS Image hash: 75a04c7eed58 (Ubuntu 20.04 LTS) Load: 0.38 0.15 0.05 Disk usage: 1.4G out of 4.7G Memory usage: 162.4M out of 912.5M Mounts: -- 기본 설정으로 Instance 생성시, Disk 등의 리소스가 부족 할 수 있음\nUbuntu VM Instance 생성 : 리소스 설정 및 이미지 선택 # Instace 삭제 $ multipass delete node01 $ multipass purge # Ubuntu 이미지 확인 $ multipass find Image Aliases Version Description core core16 20200818 Ubuntu Core 16 core18 20211124 Ubuntu Core 18 18.04 bionic 20220615 Ubuntu 18.04 LTS 20.04 focal,lts 20220615 Ubuntu 20.04 LTS 21.10 impish 20220616 Ubuntu 21.10 22.04 jammy 20220622 Ubuntu 22.04 LTS appliance:adguard-home 20200812 Ubuntu AdGuard Home Appliance appliance:mosquitto 20200812 Ubuntu Mosquitto Appliance appliance:nextcloud 20200812 Ubuntu Nextcloud Appliance appliance:openhab 20200812 Ubuntu openHAB Home Appliance appliance:plexmediaserver 20200812 Ubuntu Plex Media Server Appliance anbox-cloud-appliance latest Anbox Cloud Appliance charm-dev latest A development and testing environment for charmers docker latest A Docker environment with Portainer and related tools minikube latest minikube is local Kubernetes # Instace 생성 : cpu 2, disk 40G, mem 2G, Ubuntu 22.04 LTS $ multipass launch -c 2 -d 40G -m 2G -n node01 22.04 Launched: node01 $ multipass info node01 Name: node01 State: Running IPv4: 192.168.197.165 Release: Ubuntu 22.04 LTS Image hash: d90ea6784789 (Ubuntu 22.04 LTS) Load: 0.01 0.07 0.04 Disk usage: 1.4G out of 38.6G Memory usage: 217.1M out of 1.9G Mounts: -- # shell 접속 $ multipass shell node01 ... To run a command as administrator (user \u0026#34;root\u0026#34;), use \u0026#34;sudo \u0026lt;command\u0026gt;\u0026#34;. See \u0026#34;man sudo_root\u0026#34; for details. Ubuntu instance 내부 ubuntu@node01:~$ cat /etc/*-release DISTRIB_ID=Ubuntu DISTRIB_RELEASE=22.04 DISTRIB_CODENAME=jammy DISTRIB_DESCRIPTION=\u0026#34;Ubuntu 22.04 LTS\u0026#34; PRETTY_NAME=\u0026#34;Ubuntu 22.04 LTS\u0026#34; NAME=\u0026#34;Ubuntu\u0026#34; VERSION_ID=\u0026#34;22.04\u0026#34; VERSION=\u0026#34;22.04 LTS (Jammy Jellyfish)\u0026#34; VERSION_CODENAME=jammy ID=ubuntu ID_LIKE=debian HOME_URL=\u0026#34;https://www.ubuntu.com/\u0026#34; SUPPORT_URL=\u0026#34;https://help.ubuntu.com/\u0026#34; BUG_REPORT_URL=\u0026#34;https://bugs.launchpad.net/ubuntu/\u0026#34; PRIVACY_POLICY_URL=\u0026#34;https://www.ubuntu.com/legal/terms-and-policies/privacy-policy\u0026#34; UBUNTU_CODENAME=jammy ","permalink":"https://cdecl.github.io/devops/multipass-ubuntu/","summary":"\u003cp\u003eCanonical 재단에서 지원하는 단일 명령으로 Ubuntu VM 구성 할 수 있는 도구\u003c/p\u003e\n\u003ch2 id=\"multipass\"\u003eMultipass\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://multipass.run/\"\u003ehttps://multipass.run/\u003c/a\u003e{:target=\u0026quot;_blank\u0026quot;}\u003c/li\u003e\n\u003cli\u003e최소한의 오버헤드를 위한 각 플랫폼 지원\n\u003cul\u003e\n\u003cli\u003eWindows : Hyper-V\u003c/li\u003e\n\u003cli\u003emacOS : QEMU, HyperKit\u003c/li\u003e\n\u003cli\u003eLinux : LXD\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"multipass-install\"\u003eMultipass install\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://multipass.run/install\"\u003ehttps://multipass.run/install\u003c/a\u003e{:target=\u0026quot;_blank\u0026quot;}\u003c/li\u003e\n\u003cli\u003e플랫폼 별 패키지 설치 방법\u003c/li\u003e\n\u003c/ul\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-sh\" data-lang=\"sh\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# windows \u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ choco install multipass \n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# macOS\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ brew install multipass \n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch3 id=\"multipass-주요-명령-및-vm-instance-생성\"\u003eMultipass 주요 명령 및 VM Instance 생성\u003c/h3\u003e\n\u003ch4 id=\"주요-명령어\"\u003e주요 명령어\u003c/h4\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003elaunch\u003c/code\u003e : Ubuntu instance 생성 및 시작\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003estart\u003c/code\u003e, \u003ccode\u003estop\u003c/code\u003e, \u003ccode\u003erestart\u003c/code\u003e : 시작 중지\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003edelete\u003c/code\u003e : Ubuntu instance 삭제\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003epurge\u003c/code\u003e : 삭제된 이미지 영구 삭제\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eshell\u003c/code\u003e : Instance 내부 shell 로 접속\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003elist\u003c/code\u003e : 생성된 Instance 확인\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003einfo\u003c/code\u003e : Instance 정보 확인\u003c/li\u003e\n\u003c/ul\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-sh\" data-lang=\"sh\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ multipass --help\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e...\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eAvailable commands:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  alias         Create an alias\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  aliases       List available aliases\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  authenticate  Authenticate client\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  delete        Delete instances\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  exec          Run a command on an instance\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  find          Display available images to create instances from\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  get           Get a configuration setting\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  help          Display help about a command\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  info          Display information about instances\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  launch        Create and start an Ubuntu instance\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  list          List all available instances\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  mount         Mount a local directory in the instance\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  networks      List available network interfaces\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  purge         Purge all deleted instances permanently\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  recover       Recover deleted instances\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  restart       Restart instances\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  set           Set a configuration setting\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  shell         Open a shell on a running instance\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  start         Start instances\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  stop          Stop running instances\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  suspend       Suspend running instances\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  transfer      Transfer files between the host and instances\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  umount        Unmount a directory from an instance\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  unalias       Remove an alias\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  version       Show version details\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch4 id=\"ubuntu-vm-instance-생성--기본-생성\"\u003eUbuntu VM Instance 생성 : 기본 생성\u003c/h4\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-sh\" data-lang=\"sh\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# node1 이름의 instance 생성 \u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ multipass launch -n node01\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eLaunched: node01\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# 기본 lts 이미지로 생성 :  Ubuntu 20.04 LTS\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ multipass list\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eName                    State             IPv4             Image\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003enode01                  Running           192.168.196.207  Ubuntu 20.04 LTS\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# instace 정보 \u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ multipass info node01\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eName:           node01\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eState:          Running\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eIPv4:           192.168.196.207\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eRelease:        Ubuntu 20.04.4 LTS\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eImage hash:     75a04c7eed58 \u003cspan style=\"color:#f92672\"\u003e(\u003c/span\u003eUbuntu 20.04 LTS\u003cspan style=\"color:#f92672\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eLoad:           0.38 0.15 0.05\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eDisk usage:     1.4G out of 4.7G\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eMemory usage:   162.4M out of 912.5M\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eMounts:         --\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cblockquote\u003e\n\u003cp\u003e기본 설정으로 Instance 생성시, Disk 등의 리소스가 부족 할 수 있음\u003c/p\u003e","title":"Multipass, Ubuntu VM 설정"},{"content":"Neovim 설치 및 vim-plug 설정으로 개발, 운영 환경 구성\nNeovim https://github.com/neovim/neovim{:target=\u0026quot;_blank\u0026quot;} Vim-fork focused on extensibility and usability Neovim install 플랫폼 별 패키지 설치 방법 # macos $ brew install nvim # windows $ choco install neovim # linux (ubuntu) $ sudo apt install neovim # linux (centos) $ sudo yum install neovim vim-plug install Neovim 에 Plugin 지원을 위한 확장 툴 : vim 도 지원 https://github.com/junegunn/vim-plug{:target=\u0026quot;_blank\u0026quot;} vim의 Vumdle과 같은 Minimalist Vim Plugin Manager\nUnix, Linux 설치 스크립트 sh -c \u0026#39;curl -fLo \u0026#34;${XDG_DATA_HOME:-$HOME/.local/share}\u0026#34;/nvim/site/autoload/plug.vim --create-dirs \\ Windows (PowerShell) 설치 스크립트 ni \u0026#34;$(@($env:XDG_DATA_HOME, $env:LOCALAPPDATA)[$null -eq $env:XDG_DATA_HOME])/nvim-data/site/autoload/plug.vim\u0026#34; -Force init.vim : 설정파일 vim 의 .vimrc에 해당하는 neovim 의 설정 파일 (하위 호환성) 플러그인 정보: call plug#begin 와 call plug#end() 사이에 패키지 정의 설정 파일의 기본 경로 Linux : ~/.config/nvim/init.vim Windows : ~\\AppData\\Local\\nvim\\init.vim call plug#begin(\u0026#39;~/.vim/plugged\u0026#39;) Plug \u0026#39;preservim/nerdtree\u0026#39; Plug \u0026#39;preservim/tagbar\u0026#39; Plug \u0026#39;Xuyuanp/nerdtree-git-plugin\u0026#39; Plug \u0026#39;vim-airline/vim-airline\u0026#39; Plug \u0026#39;frazrepo/vim-rainbow\u0026#39; call plug#end() \u0026#34; .vimrc 설정 추가 ... .vimrc 설정 부분은 vim 과 동일\nPlugin 설치 init.vim 파일에 Plugin 설치 정보 세팅 후 :PlugInstall 명령으로 설치 (탭 자동완성 지원) TIP: Ctl + w + w : 창 전환\n주요 Plugin 리스트 preservim/nerdtree https://github.com/preservim/nerdtree{:target=\u0026quot;_blank\u0026quot;} A tree explorer plugin for vim :NERDTreeToggle 명령으로 실행 (토글) nmap \u0026lt;F9\u0026gt; :NERDTreeToggle : F9 Keymap preservim/tagbar https://github.com/preservim/tagbar{:target=\u0026quot;_blank\u0026quot;} Vim plugin that displays tags in a window, ordered by scope nmap \u0026lt;F8\u0026gt; :TagbarToggle : F8 Keymap ctags 모듈 추가 설치 필요 # sudo apt install universal-ctags # choco install universal-ctags $ brew install universal-ctags Xuyuanp/nerdtree-git-plugin https://github.com/Xuyuanp/nerdtree-git-plugin{:target=\u0026quot;_blank\u0026quot;} A plugin of NERDTree showing git status vim-airline/vim-airline https://github.com/vim-airline/vim-airline{:target=\u0026quot;_blank\u0026quot;} lean \u0026amp; mean status/tabline for vim that\u0026rsquo;s light as air frazrepo/vim-rainbow https://github.com/frazrepo/vim-rainbow{:target=\u0026quot;_blank\u0026quot;} Rainbow brackets for Vim 개인용 세팅 https://gist.github.com/cdecl/11e3fc10e6e112fb7a9909593732fe91{:target=\u0026quot;_blank\u0026quot;} call plug#begin(\u0026#39;~/.vim/plugged\u0026#39;) Plug \u0026#39;preservim/nerdtree\u0026#39; Plug \u0026#39;preservim/tagbar\u0026#39; Plug \u0026#39;Xuyuanp/nerdtree-git-plugin\u0026#39; Plug \u0026#39;vim-airline/vim-airline\u0026#39; Plug \u0026#39;frazrepo/vim-rainbow\u0026#39; Plug \u0026#39;arcticicestudio/nord-vim\u0026#39; Plug \u0026#39;tpope/vim-fugitive\u0026#39; call plug#end() nmap \u0026lt;F9\u0026gt; :NERDTreeToggle nmap \u0026lt;F8\u0026gt; :TagbarToggle let g:rainbow_active = 1 colorscheme nord \u0026#34; vim config set ts=4 set shiftwidth=4 set autoindent set cindent set nu set hlsearch set showmatch set noswapfile set ruler set laststatus=2 \u0026#34; set mouse=a if has(\u0026#34;syntax\u0026#34;) syntax on endif screenshot ","permalink":"https://cdecl.github.io/devops/nvim-plug/","summary":"\u003cp\u003eNeovim 설치 및 vim-plug 설정으로 개발, 운영 환경 구성\u003c/p\u003e\n\u003ch2 id=\"neovim\"\u003eNeovim\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://github.com/neovim/neovim\"\u003ehttps://github.com/neovim/neovim\u003c/a\u003e{:target=\u0026quot;_blank\u0026quot;}\u003c/li\u003e\n\u003cli\u003eVim-fork focused on extensibility and usability\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"neovim-install\"\u003eNeovim install\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e플랫폼 별 패키지 설치 방법\u003c/li\u003e\n\u003c/ul\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-sh\" data-lang=\"sh\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# macos \u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ brew install nvim \n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# windows \u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ choco install neovim \n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# linux (ubuntu)\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ sudo apt install neovim \n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# linux (centos)\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ sudo yum install neovim\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch3 id=\"vim-plug-install\"\u003evim-plug install\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003eNeovim 에 Plugin 지원을 위한 확장 툴 : vim 도 지원\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://github.com/junegunn/vim-plug\"\u003ehttps://github.com/junegunn/vim-plug\u003c/a\u003e{:target=\u0026quot;_blank\u0026quot;}\u003c/li\u003e\n\u003c/ul\u003e\n\u003cblockquote\u003e\n\u003cp\u003evim의 Vumdle과 같은 Minimalist Vim Plugin Manager\u003c/p\u003e","title":"Neovim, vim-plug 설정"},{"content":"Docker 기반 서비스 자동 감지 및 요청을 처리하는 Reverse proxy\nTraefik Proxy https://doc.traefik.io/traefik/{:target=\u0026quot;_blank\u0026quot;} docker.sock 을 통해 Rule 기반 서비스를 찾고 요청을 처리함 Docker 이외에 Kubernetes, Docker Swarm, AWS, Mesos, Marathon 등을 지원 Quick Start https://doc.traefik.io/traefik/getting-started/quick-start/{:target=\u0026quot;_blank\u0026quot;} docker-compose.yml reverse-proxy : traefik reverse proxy 서비스 Docker Out of Docker (DooD) 같은 형태로 서비스 감지 서비스와 같은 Docker network 내에 있어야 호출이 가능 whoami : Client 호출정보를 보여주는 간단한 서비스 labels 을 통해 whoami 서비스 Rule 등록 Host 기반 Rule 적용 : \u0026quot;traefik.http.routers.whoami.rule=Host(whoami.localhost)\u0026quot; traefik.http.routers.\u0026lt;router_name\u0026gt;.rule= Docker Routers 규칙{:target=\u0026quot;_blank\u0026quot;} Rule 종류{:target=\u0026quot;_blank\u0026quot;} 서비스에 Port 가 노출 되어야 함 : Expose port (or Publish port) version: \u0026#39;3\u0026#39; services: reverse-proxy: # The official v2 Traefik docker image image: traefik:v2.6 # Enables the web UI and tells Traefik to listen to docker command: --api.insecure=true --providers.docker ports: # The HTTP port - \u0026#34;80:80\u0026#34; # The Web UI (enabled by --api.insecure=true) - \u0026#34;8080:8080\u0026#34; volumes: # So that Traefik can listen to the Docker events - /var/run/docker.sock:/var/run/docker.sock whoami: # A container that exposes an API to show its IP address image: traefik/whoami labels: - \u0026#34;traefik.http.routers.whoami.rule=Host(`whoami.localhost`)\u0026#34; # reverse-proxy 서비스 시작 $ docker-compose up -d reverse-proxy # whoami 서비스 시작 $ docker-compose up -d whoami $ docker ps CONTAINER ID IMAGE COMMAND CREATED STATUS PORTS NAMES e457ff5e01cb traefik/whoami \u0026#34;/whoami\u0026#34; 59 minutes ago Up 59 minutes 80/tcp traefik_whoami_1 Dashboard Router 확인 Test $ curl -H Host:whoami.localhost localhost Hostname: e457ff5e01cb IP: 127.0.0.1 IP: 172.18.0.4 RemoteAddr: 172.18.0.3:56928 GET / HTTP/1.1 Host: whoami.localhost User-Agent: curl/7.77.0 Accept: */* Accept-Encoding: gzip X-Forwarded-For: 172.18.0.1 X-Forwarded-Host: whoami.localhost X-Forwarded-Port: 80 X-Forwarded-Proto: http X-Forwarded-Server: 4c17ac309109 X-Real-Ip: 172.18.0.1 Yaml 파일 분리 Docker network 생성 후, 같은 Network 에서 서비스 시작 whoami 서비스에 replicas 적용 테스트 같은 Docker network 에 있어야 호출이 가능함\nPort가 Expose만 되어도 호출이 가능하므로, 여러개의 인스턴스를 실행 할 수 있음\n$ docker network create traefik_network $ docker network ls NETWORK ID NAME DRIVER SCOPE f27ea9f9e602 bridge bridge local efde6948625c host host local 1ad7a260c513 none null local fdd561c514ee traefik_network bridge local reverse-proxy version: \u0026#39;3\u0026#39; services: reverse-proxy: # The official v2 Traefik docker image image: traefik:v2.6 # Enables the web UI and tells Traefik to listen to docker command: --api.insecure=true --providers.docker ports: # The HTTP port - \u0026#34;80:80\u0026#34; # The Web UI (enabled by --api.insecure=true) - \u0026#34;8080:8080\u0026#34; volumes: # So that Traefik can listen to the Docker events - /var/run/docker.sock:/var/run/docker.sock networks: default: external: name: traefik_network whoami version: \u0026#39;3\u0026#39; services: whoami: # A container that exposes an API to show its IP address image: traefik/whoami labels: - \u0026#34;traefik.http.routers.whoami.rule=Host(`whoami.localhost`)\u0026#34; deploy: replicas: 4 networks: default: external: name: traefik_network $ docker ps CONTAINER ID IMAGE COMMAND CREATED STATUS PORTS NAMES 95c2a5aea831 traefik/whoami \u0026#34;/whoami\u0026#34; 4 seconds ago Up 3 seconds 80/tcp traefik_whoami_3 406e1342044e traefik/whoami \u0026#34;/whoami\u0026#34; 4 seconds ago Up 3 seconds 80/tcp traefik_whoami_4 790f19b04598 traefik/whoami \u0026#34;/whoami\u0026#34; 4 seconds ago Up 3 seconds 80/tcp traefik_whoami_2 9d764c51212e traefik/whoami \u0026#34;/whoami\u0026#34; 4 seconds ago Up 3 seconds 80/tcp traefik_whoami_1 $ curl -s -H Host:whoami.localhost localhost | grep Hostname Hostname: 790f19b04598 $ curl -s -H Host:whoami.localhost localhost | grep Hostname Hostname: 95c2a5aea831 $ curl -s -H Host:whoami.localhost localhost | grep Hostname Hostname: 9d764c51212e $ curl -s -H Host:whoami.localhost localhost | grep Hostname Hostname: 406e1342044e Dashboard 서비스 확인 ","permalink":"https://cdecl.github.io/devops/traefik-proxy/","summary":"\u003cp\u003eDocker 기반 서비스 자동 감지 및 요청을 처리하는 Reverse proxy\u003c/p\u003e\n\u003ch2 id=\"traefik-proxy\"\u003eTraefik Proxy\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://doc.traefik.io/traefik/\"\u003ehttps://doc.traefik.io/traefik/\u003c/a\u003e{:target=\u0026quot;_blank\u0026quot;}\u003c/li\u003e\n\u003cli\u003edocker.sock 을 통해 Rule 기반 서비스를 찾고 요청을 처리함\u003c/li\u003e\n\u003cli\u003eDocker 이외에 Kubernetes, Docker Swarm, AWS, Mesos, Marathon 등을 지원\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"quick-start\"\u003eQuick Start\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://doc.traefik.io/traefik/getting-started/quick-start/\"\u003ehttps://doc.traefik.io/traefik/getting-started/quick-start/\u003c/a\u003e{:target=\u0026quot;_blank\u0026quot;}\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch4 id=\"docker-composeyml\"\u003edocker-compose.yml\u003c/h4\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003ereverse-proxy\u003c/code\u003e : traefik reverse proxy 서비스\n\u003cul\u003e\n\u003cli\u003eDocker Out of Docker (DooD) 같은 형태로 서비스 감지\u003c/li\u003e\n\u003cli\u003e서비스와 같은 Docker network 내에 있어야 호출이 가능\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003ewhoami\u003c/code\u003e : Client 호출정보를 보여주는 간단한 서비스\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003elabels\u003c/code\u003e 을 통해 \u003ccode\u003ewhoami\u003c/code\u003e 서비스 Rule 등록\u003c/li\u003e\n\u003cli\u003eHost 기반 Rule 적용 : \u003ccode\u003e\u0026quot;traefik.http.routers.whoami.rule=Host(\u003c/code\u003ewhoami.localhost\u003ccode\u003e)\u0026quot;\u003c/code\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003etraefik.http.routers.\u0026lt;router_name\u0026gt;.rule=\u003c/code\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://doc.traefik.io/traefik/routing/providers/docker/#routers\"\u003eDocker Routers 규칙\u003c/a\u003e{:target=\u0026quot;_blank\u0026quot;}\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://doc.traefik.io/traefik/routing/routers/#rule\"\u003eRule 종류\u003c/a\u003e{:target=\u0026quot;_blank\u0026quot;}\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e서비스에 Port 가 노출 되어야 함 : Expose port (or Publish port)\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-yaml\" data-lang=\"yaml\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003eversion\u003c/span\u003e: \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;3\u0026#39;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003eservices\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#f92672\"\u003ereverse-proxy\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#75715e\"\u003e# The official v2 Traefik docker image\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003eimage\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003etraefik:v2.6\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#75715e\"\u003e# Enables the web UI and tells Traefik to listen to docker\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003ecommand\u003c/span\u003e: --\u003cspan style=\"color:#ae81ff\"\u003eapi.insecure=true --providers.docker\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003eports\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      \u003cspan style=\"color:#75715e\"\u003e# The HTTP port\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      - \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;80:80\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      \u003cspan style=\"color:#75715e\"\u003e# The Web UI (enabled by --api.insecure=true)\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      - \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;8080:8080\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003evolumes\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      \u003cspan style=\"color:#75715e\"\u003e# So that Traefik can listen to the Docker events\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      - \u003cspan style=\"color:#ae81ff\"\u003e/var/run/docker.sock:/var/run/docker.sock\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#f92672\"\u003ewhoami\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#75715e\"\u003e# A container that exposes an API to show its IP address\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003eimage\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003etraefik/whoami\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003elabels\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      - \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;traefik.http.routers.whoami.rule=Host(`whoami.localhost`)\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-sh\" data-lang=\"sh\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# reverse-proxy 서비스 시작 \u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ docker-compose up -d reverse-proxy\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# whoami 서비스 시작\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ docker-compose up -d whoami\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ docker ps \n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eCONTAINER ID   IMAGE            COMMAND     CREATED          STATUS         PORTS   NAMES\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ee457ff5e01cb   traefik/whoami   \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;/whoami\u0026#34;\u003c/span\u003e   \u003cspan style=\"color:#ae81ff\"\u003e59\u003c/span\u003e minutes ago   Up \u003cspan style=\"color:#ae81ff\"\u003e59\u003c/span\u003e minutes  80/tcp  traefik_whoami_1\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch4 id=\"dashboard-router-확인\"\u003eDashboard Router 확인\u003c/h4\u003e\n\u003cp\u003e\u003cimg loading=\"lazy\" src=\"/images/2022-03-06-05-35-01.png\"\u003e\u003c/p\u003e","title":"Traefik Proxy"},{"content":"Git Repository 복제 및 Branch 관리 가이드 Git Repository 복제 Remote → Local 복제 Git 저장소를 복제하는 방법에는 여러 가지가 있으며, 각각의 방식에 따라 다른 특징이 있습니다.\n--mirror 복제의 특징 git clone --mirror: Remote repository의 모든 참조(refs)를 포함하여 Local에 저장 기본 clone과 달리 작업 디렉토리 없이 저장소의 메타데이터 전체를 복제 주로 저장소 백업이나 완전한 미러링에 사용 # mirror 복제 $ git clone --mirror https://github.com/cdecl/test $ tree -d . └── test.git ├── branches ├── hooks ├── info ├── objects │ ├── info │ └── pack └── refs ├── heads └── tags 💡 추가 정보:\n--mirror는 모든 refs(브랜치, 태그, 참조)를 포함하여 정확히 복제 대용량 저장소의 경우 네트워크 대역폭과 디스크 공간을 충분히 고려해야 함 개인 프로젝트나 백업 목적에 가장 적합 복제 업데이트 방법 # 미러 저장소 업데이트 $ git remote update Local → Remote 복제 원격 저장소로 전체 저장소를 복제하는 방법입니다.\n$ cd test.git # 원격 저장소 URL 변경 (옵션) # git remote set-url origin https://gitlab.com/cdeclare/test # 전체 저장소 미러링 $ git push --mirror https://gitlab.com/cdeclare/test ⚠️ 주의사항: 다음과 같은 에러가 발생할 수 있습니다:\nGitHub pull requests 이력 Gitlab protected branches 설정 # GitHub pull requests 이력 ! [remote rejected] refs/pull/1/head -\u0026gt; refs/pull/1/head (deny updating a hidden ref) # Gitlab protected branches 설정 ! [remote rejected] master -\u0026gt; master (pre-receive hook declined) ! [remote rejected] errors after mirroring a git repository{:target=\u0026quot;_blank\u0026quot;} Branch 관리 Branch 기본 명령어 # branch 생성 $ git branch dev # branch 전환 $ git checkout dev # branch 삭제 $ git branch -d dev # branch 생성 및 전환 $ git checkout -b dev Switched to a new branch \u0026#39;dev\u0026#39; Remote Branch Tracking # remote branch tracking $ git branch -t dev origin/dev # remote branch tracking + 전환 $ git checkout -t origin/dev Remote branch 전체 tracking 특정 명령어를 통해 모든 원격 브랜치를 로컬로 추적할 수 있습니다.\n# remote repository (branch) 정보 동기화 # -p, --prune: 원격 브랜치 프루닝 $ git remote update -p # 현재 브랜치 및 원격 브랜치 확인 $ git branch -a * master remotes/origin/HEAD -\u0026gt; origin/master remotes/origin/dev9 remotes/origin/master remotes/origin/newb # 모든 원격 브랜치 로컬 추적 $ git branch -r | grep -v -- \u0026#34;-\u0026gt;\u0026#34; | xargs -i git checkout -t {} Branch \u0026#39;origin/dev9\u0026#39; set up to track local branch \u0026#39;master\u0026#39;. Branch \u0026#39;origin/master\u0026#39; set up to track local branch \u0026#39;master\u0026#39;. Branch \u0026#39;origin/newb\u0026#39; set up to track local branch \u0026#39;master\u0026#39;. # 추적 후 브랜치 상태 $ git branch -a * master origin/dev9 origin/master origin/newb remotes/origin/HEAD -\u0026gt; remotes/origin/master remotes/origin/dev9 remotes/origin/master remotes/origin/newb 💡 추적 스크립트 분석:\n-r: 원격 브랜치만 나열 grep -v -- \u0026quot;-\u0026gt;\u0026quot;: 포인터(HEAD) 제외 xargs -i: 각 브랜치에 대해 명령 실행 git checkout -t: 원격 브랜치 자동 추적 Branch Push 관리 # 특정 branch push $ git push -u origin dev # 모든 Branch Push $ git push --all Remote Branch 삭제 및 동기화 # remote branch 삭제 $ git push origin -d newb # Local → Remote Branch 전체 동기화 $ git push --mirror 추가 Git Branch 관리 팁 브랜치 명명 모범 사례 기능 브랜치: feature/기능명 버그 수정 브랜치: bugfix/버그설명 릴리즈 브랜치: release/버전 핫픽스 브랜치: hotfix/긴급수정사항 브랜치 정보 확인 명령어 # 로컬 브랜치 목록 git branch # 원격 브랜치 포함 전체 브랜치 목록 git branch -a # 각 브랜치의 최근 커밋 확인 git branch -v 주의사항 모든 원격 브랜치를 자동 추적할 때는 주의가 필요합니다. 불필요한 브랜치 추적은 로컬 저장소의 복잡성을 증가시킬 수 있습니다. 협업 시 팀의 브랜치 관리 정책을 명확히 수립하세요. ","permalink":"https://cdecl.github.io/dev/git-mirror-branch/","summary":"\u003ch1 id=\"git-repository-복제-및-branch-관리-가이드\"\u003eGit Repository 복제 및 Branch 관리 가이드\u003c/h1\u003e\n\u003ch2 id=\"git-repository-복제\"\u003eGit Repository 복제\u003c/h2\u003e\n\u003ch3 id=\"remote--local-복제\"\u003eRemote → Local 복제\u003c/h3\u003e\n\u003cp\u003eGit 저장소를 복제하는 방법에는 여러 가지가 있으며, 각각의 방식에 따라 다른 특징이 있습니다.\u003c/p\u003e\n\u003ch4 id=\"--mirror-복제의-특징\"\u003e\u003ccode\u003e--mirror\u003c/code\u003e 복제의 특징\u003c/h4\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003egit clone --mirror\u003c/code\u003e: Remote repository의 모든 참조(\u003ccode\u003erefs\u003c/code\u003e)를 포함하여 Local에 저장\u003c/li\u003e\n\u003cli\u003e기본 \u003ccode\u003eclone\u003c/code\u003e과 달리 작업 디렉토리 없이 저장소의 메타데이터 전체를 복제\u003c/li\u003e\n\u003cli\u003e주로 저장소 백업이나 완전한 미러링에 사용\u003c/li\u003e\n\u003c/ul\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-sh\" data-lang=\"sh\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# mirror 복제\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ git clone --mirror https://github.com/cdecl/test\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ tree -d\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e.\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e└── test.git\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    ├── branches\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    ├── hooks\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    ├── info\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    ├── objects\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    │   ├── info\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    │   └── pack\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    └── refs\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        ├── heads\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        └── tags\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cblockquote\u003e\n\u003cp\u003e💡 추가 정보:\u003c/p\u003e","title":"Git Repository 복제, Branch 동기화 관리"},{"content":"ReaR(Relax \u0026amp; Recover), Linux 재해 복구 도구\nReaR https://relax-and-recover.org/{:target=\u0026quot;_blank\u0026quot;} Manual Page : https://github.com/rear/rear/blob/master/doc/rear.8.adoc{:target=\u0026quot;_blank\u0026quot;} OS의 부팅 가능한 복구 시스템 구성, 시스템 파일 백업 및 복구 지원 Simple Example NFS 백업 서버 구성 ReaR 백업 및 복구 테스트 centos7, Hyper-v 환경 테스트 https://access.redhat.com/solutions/2115051{:target=\u0026quot;_blank\u0026quot;} Backup용 NFS 서버 구성 백업서버 NFS 구성 # nfs-utils 설치 $ sudo yum install nfs-utils # 디렉토리 생성 $ sudo mkdir -p /storage/rear # nfs 서버 설정 $ cat /etc/exports /storage *(rw,sync,no_root_squash) # nfs-server start # sudo systemctl enable nfs-server $ sudo systemctl start nfs-server 대상 서버 구성 RaaR 설치 및 구성 # nfs clients $ sudo yum install nfs-utils # ReaR 설치 sudo yum install nfs-utils # 필요에 따라 아래 모듈 설치 # rear -d -v mkbackup 시 해당 모듈이 없다고 나오면 # WARNING: /usr/lib/grub/x86_64-efi/moddep.lst not found, grub2-mkimage will likely fail. # Please install the grub2-efi-x64-modules package to fix this. $ sudo yum install grub2-efi-x64-modules RaaR 설정 https://github.com/rear/rear/blob/master/doc/user-guide/03-configuration.adoc{:target=\u0026quot;_blank\u0026quot;} /etc/rear/local.conf OUTPUT : Rescue media, BOOT용 이미지 ISO : ISO BOOT 이미지 생성 BACKUP, BACKUP_URL : Backup/Restore strategy, 시스템파일 및 백업 데이터 종류 및 위치 지정 NETFS : Use Relax-and-Recover internal backup with tar or rsync (or similar) BACKUP_URL 경로 및 HostName 폴더에 생성 BACKUP_PROG_EXCLUDE : 백업 제외 경로 지정 # /etc/rear/local.conf OUTPUT=ISO OUTPUT_URL=nfs://192.168.137.100/storage/rear BACKUP=NETFS BACKUP_URL=nfs://192.168.137.100/storage/rear # BACKUP_TYPE=incremental # FULLBACKUPDAY=Sun # BACKUP_PROG_EXCLUDE=(\u0026#39;/syslogs/logs/*\u0026#39; \u0026#39;/var/log/*\u0026#39;) Backup 실행 mkbackup : create rescue media and backup system mkbackuponly : backup system without creating rescue media mkrescue : create rescue media only ## verbose mode # -d : debug mode 의 경우 /tmp 밑에 파일을 지우지 않음 $ sudo rear -v mkbackup Backup 데이터 확인 # Backup 서버 $ hostname -I 192.168.137.100 # hostname 디렉토리별로 백업 $ tree /storage /storage └── rear ├── node1 │ ├── README │ ├── VERSION │ ├── backup.log │ ├── backup.tar.gz │ ├── rear-node1.iso │ └── rear-node1.log └── node2 ├── README ├── VERSION ├── backup.log ├── backup.tar.gz ├── rear-node2.iso └── rear-node2.log 복구 실행 백업된 rescue media (iso)로 부팅을 한 후, 복구 모드로 실행\nlogin 이름을 지정 후, RESCUE 프롬프트 상에서 복구 명령 실행\n# 복구 명령, 백업된 정보를 기반으로 복구 # 수동 복구의 경우 별도 인터렉티브한 환경에서 수행 $ rear -v recover 기타 FAQ : http://relax-and-recover.org/documentation/faq{:target=\u0026quot;_blank\u0026quot;} Manual Recover : https://github.com/rear/rear/issues/847{:target=\u0026quot;_blank\u0026quot;} 백업시 복원 IP 세팅 백업전에 /etc/rear/mappings/ip_addresses 파일 생성 $ cat /etc/rear/mappings/ip_addresses eth0 192.268.1.100/24 복원시 IP 변경 복구 이미지 부팅시, 커널 파라미터로 아래와 같이 지정 부팅시 아래 메뉴의 e (edit)를 눌러 편집\n파라미터에 아래 내용 추가\nip=192.168.100.2 nm=255.255.255.0 netdev=eth0 gw=192.168.100.1 ","permalink":"https://cdecl.github.io/devops/rear-basic/","summary":"\u003cp\u003eReaR(Relax \u0026amp; Recover), Linux 재해 복구 도구\u003c/p\u003e\n\u003ch2 id=\"rear\"\u003eReaR\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://relax-and-recover.org/\"\u003ehttps://relax-and-recover.org/\u003c/a\u003e{:target=\u0026quot;_blank\u0026quot;}\u003c/li\u003e\n\u003cli\u003eManual Page : \u003ca href=\"https://github.com/rear/rear/blob/master/doc/rear.8.adoc\"\u003ehttps://github.com/rear/rear/blob/master/doc/rear.8.adoc\u003c/a\u003e{:target=\u0026quot;_blank\u0026quot;}\u003c/li\u003e\n\u003cli\u003eOS의 부팅 가능한 복구 시스템 구성, 시스템 파일 백업 및 복구 지원\u003c/li\u003e\n\u003c/ul\u003e\n\u003chr\u003e\n\u003ch3 id=\"simple-example\"\u003eSimple Example\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003eNFS 백업 서버 구성\u003c/li\u003e\n\u003cli\u003eReaR 백업 및 복구 테스트\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003ecentos7\u003c/code\u003e, \u003ccode\u003eHyper-v\u003c/code\u003e 환경 테스트\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://access.redhat.com/solutions/2115051\"\u003ehttps://access.redhat.com/solutions/2115051\u003c/a\u003e{:target=\u0026quot;_blank\u0026quot;}\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch4 id=\"backup용-nfs-서버-구성\"\u003eBackup용 NFS 서버 구성\u003c/h4\u003e\n\u003cul\u003e\n\u003cli\u003e백업서버 NFS 구성\u003c/li\u003e\n\u003c/ul\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-sh\" data-lang=\"sh\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# nfs-utils 설치 \u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ sudo yum install nfs-utils\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# 디렉토리 생성 \u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ sudo mkdir -p /storage/rear\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# nfs 서버 설정 \u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ cat /etc/exports\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e/storage         *\u003cspan style=\"color:#f92672\"\u003e(\u003c/span\u003erw,sync,no_root_squash\u003cspan style=\"color:#f92672\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# nfs-server start \u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# sudo systemctl enable nfs-server\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ sudo systemctl start nfs-server\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch4 id=\"대상-서버-구성\"\u003e대상 서버 구성\u003c/h4\u003e\n\u003cul\u003e\n\u003cli\u003eRaaR 설치 및 구성\u003c/li\u003e\n\u003c/ul\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-sh\" data-lang=\"sh\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# nfs clients \u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ sudo yum install nfs-utils\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# ReaR 설치 \u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003esudo yum install nfs-utils\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# 필요에 따라 아래 모듈 설치\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# rear -d -v mkbackup 시 해당 모듈이 없다고 나오면\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# WARNING: /usr/lib/grub/x86_64-efi/moddep.lst not found, grub2-mkimage will likely fail. \u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# Please install the grub2-efi-x64-modules package to fix this.\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ sudo yum install grub2-efi-x64-modules\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch5 id=\"raar-설정\"\u003eRaaR 설정\u003c/h5\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://github.com/rear/rear/blob/master/doc/user-guide/03-configuration.adoc\"\u003ehttps://github.com/rear/rear/blob/master/doc/user-guide/03-configuration.adoc\u003c/a\u003e{:target=\u0026quot;_blank\u0026quot;}\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003e/etc/rear/local.conf\u003c/code\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003eOUTPUT\u003c/code\u003e : Rescue media, BOOT용 이미지\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003eISO\u003c/code\u003e : ISO BOOT 이미지 생성\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eBACKUP\u003c/code\u003e, \u003ccode\u003eBACKUP_URL\u003c/code\u003e : Backup/Restore strategy, 시스템파일 및 백업 데이터 종류 및 위치 지정\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003eNETFS\u003c/code\u003e : Use Relax-and-Recover internal backup with tar or rsync (or similar)\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eBACKUP_URL\u003c/code\u003e 경로 및 HostName 폴더에 생성\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eBACKUP_PROG_EXCLUDE\u003c/code\u003e : 백업 제외 경로 지정\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003cpre tabindex=\"0\"\u003e\u003ccode class=\"language-conf\" data-lang=\"conf\"\u003e# /etc/rear/local.conf\n\nOUTPUT=ISO\nOUTPUT_URL=nfs://192.168.137.100/storage/rear\nBACKUP=NETFS\nBACKUP_URL=nfs://192.168.137.100/storage/rear\n\n# BACKUP_TYPE=incremental\n# FULLBACKUPDAY=Sun\n# BACKUP_PROG_EXCLUDE=(\u0026#39;/syslogs/logs/*\u0026#39; \u0026#39;/var/log/*\u0026#39;)\n\u003c/code\u003e\u003c/pre\u003e\u003chr\u003e\n\u003ch4 id=\"backup-실행\"\u003eBackup 실행\u003c/h4\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003emkbackup\u003c/code\u003e : create rescue media and backup system\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003emkbackuponly\u003c/code\u003e : backup system without creating rescue media\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003emkrescue\u003c/code\u003e : create rescue media only\u003c/li\u003e\n\u003c/ul\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-sh\" data-lang=\"sh\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e## verbose mode\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# -d : debug mode 의 경우 /tmp 밑에 파일을 지우지 않음\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ sudo rear -v mkbackup\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cul\u003e\n\u003cli\u003eBackup 데이터 확인\u003c/li\u003e\n\u003c/ul\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-sh\" data-lang=\"sh\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# Backup 서버\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ hostname -I\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e192.168.137.100\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# hostname 디렉토리별로 백업 \u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ tree /storage\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e/storage\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e└── rear\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    ├── node1\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    │   ├── README\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    │   ├── VERSION\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    │   ├── backup.log\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    │   ├── backup.tar.gz\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    │   ├── rear-node1.iso\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    │   └── rear-node1.log\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    └── node2\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        ├── README\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        ├── VERSION\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        ├── backup.log\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        ├── backup.tar.gz\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        ├── rear-node2.iso\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        └── rear-node2.log\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003chr\u003e\n\u003ch4 id=\"복구-실행\"\u003e복구 실행\u003c/h4\u003e\n\u003cblockquote\u003e\n\u003cp\u003e백업된 rescue media (iso)로 부팅을 한 후, 복구 모드로 실행\u003c/p\u003e","title":"ReaR (Relax \u0026 Recover) Basic"},{"content":"kubernetes manifest 리소스 관리 도구\nKustomize https://kubernetes.io/ko/docs/tasks/manage-kubernetes-objects/kustomization/{:target=\u0026quot;_blank\u0026quot;} kubernetes manifest (yaml) 파일을 Template 형태로 관리 Patch(Merge) 및 배포 해주는 툴 kubernetes 1.14 이후, kubectl 명령어로 kustomization 지원 Simple Example $ tree . . ├── deployment.yaml ├── kustomization.yaml └── version.yaml kustomization.yaml Manifest 파일의 기본 구조 및 리소스, 패치 파일을 기술하는 파일 resources: - deployment.yaml patchesStrategicMerge: - version.yaml resources : 리소스 파일 리스트 resources 이외에 configMapGenerator, secretGenerator 기능도 있음 https://kubernetes.io/ko/docs/tasks/manage-kubernetes-objects/kustomization/#kustomize-%EA%B8%B0%EB%8A%A5-%EB%A6%AC%EC%8A%A4%ED%8A%B8{:target=\u0026quot;_blank\u0026quot;} patchesStrategicMerge : resources의 Patch 파일 Patch : yaml file merge\nresources: deployment.yaml apiVersion: apps/v1 kind: Deployment metadata: name: mvcapp spec: selector: matchLabels: app: mvcapp replicas: 2 template: metadata: labels: app: mvcapp spec: containers: - name: mvcapp image: cdecl/mvcapp:0.4 imagePullPolicy: Always ports: - containerPort: 80 --- apiVersion: v1 kind: Service metadata: name: mvcapp spec: type: NodePort #type: LoadBalancer #loadBalancerIP: 192.168.0.10 selector: app: mvcapp ports: - port: 80 targetPort: 80 nodePort: 30010 patchesStrategicMerge: version.yaml spec.replicas 와 spec.template.spec.containers.image 를 변경 apiVersion: apps/v1 kind: Deployment metadata: name: mvcapp spec: replicas: 4 template: spec: containers: - name: mvcapp image: cdecl/mvcapp:0.5 실행 테스트 $ kubectl kustomize \u0026ldquo;kustomization_directory\u0026rdquo;\n리소스파일 deployment.yaml 이 version.yaml 값으로 patch (merge) 됨 spec.replicas spec.template.spec.containers.image $ kubectl kustomize . apiVersion: v1 kind: Service metadata: name: mvcapp spec: ports: - nodePort: 30010 port: 80 targetPort: 80 selector: app: mvcapp type: NodePort --- apiVersion: apps/v1 kind: Deployment metadata: name: mvcapp spec: replicas: 4 selector: matchLabels: app: mvcapp template: metadata: labels: app: mvcapp spec: containers: - image: cdecl/mvcapp:0.5 imagePullPolicy: Always name: mvcapp ports: - containerPort: 80 Base와 Overlay Kustomize 를 관리하기 위해 디렉토리 구조 권고 base : 기본이 되는 Kustomize 환경 overlays : Patch 되는 환경으로 구분 e.g. dev, stage, prod $ tree . ├── base │ ├── deployment.yaml │ ├── kustomization.yaml │ └── version.yaml └── overlays ├── dev │ ├── kustomization.yaml │ └── version.yaml └── prod ├── kustomization.yaml └── version.yaml overlays/dev/kustomization.yaml namePrefix: name 앞에 prefix bases : kustomization 기본(base) 환경 경로 patchesStrategicMerge : base 적용 후, 추가 Patch namePrefix: dev- bases: - ../../base patchesStrategicMerge: - version.yaml 설치 테스트 manifest 파일의 kubectl -f 옵션 대신 kubectl -k 옵션 사용\n$ kubectl apply -k \u0026ldquo;kustomization_directory\u0026rdquo;\nInstall (apply) $ kubectl apply -k overlays/dev get/describe $ kubectl get -k overlays/dev $ kubectl describe -k overlays/dev diff 클러스터 상태와 manifest 파일 비교 $ kubectl diff -k overlays/dev ... creationTimestamp: \u0026#34;2021-12-15T08:08:11Z\u0026#34; - generation: 1 + generation: 2 managedFields: - apiVersion: apps/v1 fieldsType: FieldsV1 @@ -93,7 +93,7 @@ uid: 4610c9b8-501d-4b27-8a77-ab4fbf3c73e8 spec: progressDeadlineSeconds: 600 - replicas: 2 + replicas: 4 revisionHistoryLimit: 10 selector: matchLabels: delete kubectl delete -k overlays/dev ","permalink":"https://cdecl.github.io/devops/kustomize-basic/","summary":"\u003cp\u003ekubernetes manifest 리소스 관리 도구\u003c/p\u003e\n\u003ch2 id=\"kustomize\"\u003eKustomize\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://kubernetes.io/ko/docs/tasks/manage-kubernetes-objects/kustomization/\"\u003ehttps://kubernetes.io/ko/docs/tasks/manage-kubernetes-objects/kustomization/\u003c/a\u003e{:target=\u0026quot;_blank\u0026quot;}\u003c/li\u003e\n\u003cli\u003ekubernetes manifest (yaml) 파일을 Template 형태로 관리 Patch(Merge) 및 배포 해주는 툴\u003c/li\u003e\n\u003cli\u003ekubernetes 1.14 이후, kubectl 명령어로 kustomization 지원\u003c/li\u003e\n\u003c/ul\u003e\n\u003chr\u003e\n\u003ch3 id=\"simple-example\"\u003eSimple Example\u003c/h3\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-sh\" data-lang=\"sh\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ tree .\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e.\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e├── deployment.yaml\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e├── kustomization.yaml\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e└── version.yaml\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch4 id=\"kustomizationyaml\"\u003ekustomization.yaml\u003c/h4\u003e\n\u003cul\u003e\n\u003cli\u003eManifest 파일의 기본 구조 및 리소스, 패치 파일을 기술하는 파일\u003c/li\u003e\n\u003c/ul\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-yaml\" data-lang=\"yaml\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003eresources\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e- \u003cspan style=\"color:#ae81ff\"\u003edeployment.yaml\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003epatchesStrategicMerge\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e- \u003cspan style=\"color:#ae81ff\"\u003eversion.yaml\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cul\u003e\n\u003cli\u003e\u003ccode\u003eresources\u003c/code\u003e : 리소스 파일 리스트\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003eresources\u003c/code\u003e 이외에 \u003ccode\u003econfigMapGenerator\u003c/code\u003e, \u003ccode\u003esecretGenerator\u003c/code\u003e 기능도 있음\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://kubernetes.io/ko/docs/tasks/manage-kubernetes-objects/kustomization/#kustomize-%EA%B8%B0%EB%8A%A5-%EB%A6%AC%EC%8A%A4%ED%8A%B8\"\u003ehttps://kubernetes.io/ko/docs/tasks/manage-kubernetes-objects/kustomization/#kustomize-%EA%B8%B0%EB%8A%A5-%EB%A6%AC%EC%8A%A4%ED%8A%B8\u003c/a\u003e{:target=\u0026quot;_blank\u0026quot;}\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003epatchesStrategicMerge\u003c/code\u003e : resources의 Patch 파일\u003c/li\u003e\n\u003c/ul\u003e\n\u003cblockquote\u003e\n\u003cp\u003ePatch : yaml file merge\u003c/p\u003e","title":"Kustomize Basic"},{"content":"C++14, C++17, C++20 버전별 Lambda 표현 정리\nThe Evolutions of Lambdas in C++14, C++17 and C++20 https://www.fluentcpp.com/2021/12/13/the-evolutions-of-lambdas-in-c14-c17-and-c20/{:target=\u0026quot;_blank\u0026quot;} 해당 글을 참고하여 예제 자체 작성 C++14 Default parameters #include \u0026lt;iostream\u0026gt; using namespace std; int main() { auto fn = [](int a, int b = 0) { return a + b; }; cout \u0026lt;\u0026lt; fn(1) \u0026lt;\u0026lt; endl; // 1 cout \u0026lt;\u0026lt; fn(1, 2) \u0026lt;\u0026lt; endl; // 3 } Template parameters #include \u0026lt;iostream\u0026gt; #include \u0026lt;string\u0026gt; #include \u0026lt;vector\u0026gt; using namespace std; int main() { auto fn = [](auto \u0026amp;\u0026amp; c) { return c.size(); }; vector\u0026lt;int\u0026gt; v = {1, 2, 3}; cout \u0026lt;\u0026lt; fn(v) \u0026lt;\u0026lt; endl; // 3 string s = \u0026#34;12345\u0026#34;; cout \u0026lt;\u0026lt; fn(s) \u0026lt;\u0026lt; endl; // 5 } Generalised capture #include \u0026lt;iostream\u0026gt; #include \u0026lt;string\u0026gt; using namespace std; int main() { string str = \u0026#34;string\u0026#34;; auto fn = [s = str + \u0026#34;_capture\u0026#34;s](string body) { cout \u0026lt;\u0026lt; s \u0026lt;\u0026lt; \u0026#34; : \u0026#34; \u0026lt;\u0026lt; body \u0026lt;\u0026lt; endl; }; fn(\u0026#34;test\u0026#34;); // string_capture : test } Returning a lambda from a function #include \u0026lt;iostream\u0026gt; using namespace std; auto getAdd(int n) { return [n](int an) { return n + an; }; } int main() { auto fn = getAdd(10); cout \u0026lt;\u0026lt; fn(20) \u0026lt;\u0026lt; endl; } C++17 Constexpr #include \u0026lt;iostream\u0026gt; using namespace std; int main() { constexpr auto fn = [](int n){ return n + 10; }; static_assert(fn(10) == 20); // ok static_assert(fn(20) == 20); // error: static assertion failed } Capturing a copy of *this this 참조에 캡쳐가 아닌, *this 복사본 캡쳐 #include \u0026lt;iostream\u0026gt; #include \u0026lt;memory\u0026gt; #include \u0026lt;tuple\u0026gt; using namespace std; class item { public: item(int n = 0) : _value(n) {} auto test() { _value += 1; // copy capture auto fn1 = [*this] { return _value; }; auto fn2 = [self = *this] { return self._value; }; // ref capture auto fn3 = [this] { return _value; }; _value += 1; fn1(); // 11 fn2(); // 11 fn3(); // 12 return make_tuple(fn1, fn2, fn3); } private: int _value; }; int main() { auto it = make_shared\u0026lt;item\u0026gt;(10); auto tp = it-\u0026gt;test(); it.reset(); cout \u0026lt;\u0026lt; get\u0026lt;0\u0026gt;(tp)() \u0026lt;\u0026lt; endl; cout \u0026lt;\u0026lt; get\u0026lt;1\u0026gt;(tp)() \u0026lt;\u0026lt; endl; cout \u0026lt;\u0026lt; get\u0026lt;2\u0026gt;(tp)() \u0026lt;\u0026lt; endl; // ref memory error } C++20 Template syntax for lambdas #include \u0026lt;iostream\u0026gt; #include \u0026lt;vector\u0026gt; using namespace std; int main() { auto fn = []\u0026lt;typename T\u0026gt;(vector\u0026lt;T\u0026gt; \u0026amp;v) { return v.size(); }; vector\u0026lt;int\u0026gt; v = {1, 2, 3, 4, 5}; cout \u0026lt;\u0026lt; fn(v) \u0026lt;\u0026lt; endl; } Lambda capture of parameter pack #include \u0026lt;iostream\u0026gt; #include \u0026lt;string\u0026gt; using namespace std; template \u0026lt;typename... Args\u0026gt; auto getAddFunc(Args\u0026amp;\u0026amp;... args){ // by ref [\u0026amp;...args = std::forward\u0026lt;Args\u0026gt;(args)] // by value return [...args = std::forward\u0026lt;Args\u0026gt;(args)] (auto \u0026amp;\u0026amp; init) { return init + (args + ...); }; } int main() { auto fn = getAddFunc(1, 2, 3); cout \u0026lt;\u0026lt; fn(10) \u0026lt;\u0026lt; endl; // 16 auto fns = getAddFunc(\u0026#34;this \u0026#34;s, \u0026#34;is \u0026#34;s, \u0026#34;sample\u0026#34;s); cout \u0026lt;\u0026lt; fns(\u0026#34;note: \u0026#34;s) \u0026lt;\u0026lt; endl; // note: this is sample } ","permalink":"https://cdecl.github.io/dev/c++-lambda/","summary":"\u003cp\u003eC++14, C++17, C++20 버전별 Lambda 표현 정리\u003c/p\u003e\n\u003ch2 id=\"the-evolutions-of-lambdas-in-c14-c17-and-c20\"\u003eThe Evolutions of Lambdas in C++14, C++17 and C++20\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://www.fluentcpp.com/2021/12/13/the-evolutions-of-lambdas-in-c14-c17-and-c20/\"\u003ehttps://www.fluentcpp.com/2021/12/13/the-evolutions-of-lambdas-in-c14-c17-and-c20/\u003c/a\u003e{:target=\u0026quot;_blank\u0026quot;}\u003c/li\u003e\n\u003cli\u003e해당 글을 참고하여 예제 자체 작성\u003c/li\u003e\n\u003c/ul\u003e\n\u003chr\u003e\n\u003ch3 id=\"c14\"\u003eC++14\u003c/h3\u003e\n\u003ch4 id=\"default-parameters\"\u003eDefault parameters\u003c/h4\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-c++\" data-lang=\"c++\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e#include\u003c/span\u003e \u003cspan style=\"color:#75715e\"\u003e\u0026lt;iostream\u0026gt;\u003c/span\u003e\u003cspan style=\"color:#75715e\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003eusing\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003enamespace\u003c/span\u003e std;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003eint\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003emain\u003c/span\u003e()\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e{\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#66d9ef\"\u003eauto\u003c/span\u003e fn \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e [](\u003cspan style=\"color:#66d9ef\"\u003eint\u003c/span\u003e a, \u003cspan style=\"color:#66d9ef\"\u003eint\u003c/span\u003e b \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e0\u003c/span\u003e) {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#66d9ef\"\u003ereturn\u003c/span\u003e a \u003cspan style=\"color:#f92672\"\u003e+\u003c/span\u003e b;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  };\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  cout \u003cspan style=\"color:#f92672\"\u003e\u0026lt;\u0026lt;\u003c/span\u003e fn(\u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e) \u003cspan style=\"color:#f92672\"\u003e\u0026lt;\u0026lt;\u003c/span\u003e endl;     \u003cspan style=\"color:#75715e\"\u003e// 1\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  cout \u003cspan style=\"color:#f92672\"\u003e\u0026lt;\u0026lt;\u003c/span\u003e fn(\u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e, \u003cspan style=\"color:#ae81ff\"\u003e2\u003c/span\u003e) \u003cspan style=\"color:#f92672\"\u003e\u0026lt;\u0026lt;\u003c/span\u003e endl;  \u003cspan style=\"color:#75715e\"\u003e// 3\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e}\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch4 id=\"template-parameters\"\u003eTemplate parameters\u003c/h4\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-c++\" data-lang=\"c++\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e#include\u003c/span\u003e \u003cspan style=\"color:#75715e\"\u003e\u0026lt;iostream\u0026gt;\u003c/span\u003e\u003cspan style=\"color:#75715e\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e#include\u003c/span\u003e \u003cspan style=\"color:#75715e\"\u003e\u0026lt;string\u0026gt;\u003c/span\u003e\u003cspan style=\"color:#75715e\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e#include\u003c/span\u003e \u003cspan style=\"color:#75715e\"\u003e\u0026lt;vector\u0026gt;\u003c/span\u003e\u003cspan style=\"color:#75715e\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003eusing\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003enamespace\u003c/span\u003e std;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003eint\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003emain\u003c/span\u003e()\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e{\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#66d9ef\"\u003eauto\u003c/span\u003e fn \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e [](\u003cspan style=\"color:#66d9ef\"\u003eauto\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e\u0026amp;\u0026amp;\u003c/span\u003e c) {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#66d9ef\"\u003ereturn\u003c/span\u003e c.size();\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  };\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  vector\u003cspan style=\"color:#f92672\"\u003e\u0026lt;\u003c/span\u003e\u003cspan style=\"color:#66d9ef\"\u003eint\u003c/span\u003e\u003cspan style=\"color:#f92672\"\u003e\u0026gt;\u003c/span\u003e v \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e {\u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e, \u003cspan style=\"color:#ae81ff\"\u003e2\u003c/span\u003e, \u003cspan style=\"color:#ae81ff\"\u003e3\u003c/span\u003e};\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  cout \u003cspan style=\"color:#f92672\"\u003e\u0026lt;\u0026lt;\u003c/span\u003e fn(v) \u003cspan style=\"color:#f92672\"\u003e\u0026lt;\u0026lt;\u003c/span\u003e endl;  \u003cspan style=\"color:#75715e\"\u003e// 3\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  string s \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;12345\u0026#34;\u003c/span\u003e;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  cout \u003cspan style=\"color:#f92672\"\u003e\u0026lt;\u0026lt;\u003c/span\u003e fn(s) \u003cspan style=\"color:#f92672\"\u003e\u0026lt;\u0026lt;\u003c/span\u003e endl;  \u003cspan style=\"color:#75715e\"\u003e// 5\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e}\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch4 id=\"generalised-capture\"\u003eGeneralised capture\u003c/h4\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-c++\" data-lang=\"c++\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e#include\u003c/span\u003e \u003cspan style=\"color:#75715e\"\u003e\u0026lt;iostream\u0026gt;\u003c/span\u003e\u003cspan style=\"color:#75715e\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e#include\u003c/span\u003e \u003cspan style=\"color:#75715e\"\u003e\u0026lt;string\u0026gt;\u003c/span\u003e\u003cspan style=\"color:#75715e\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003eusing\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003enamespace\u003c/span\u003e std;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003eint\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003emain\u003c/span\u003e()\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e{\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  string str \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;string\u0026#34;\u003c/span\u003e;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#66d9ef\"\u003eauto\u003c/span\u003e fn \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e [s \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e str \u003cspan style=\"color:#f92672\"\u003e+\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;_capture\u0026#34;\u003c/span\u003es](string body) {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    cout \u003cspan style=\"color:#f92672\"\u003e\u0026lt;\u0026lt;\u003c/span\u003e s \u003cspan style=\"color:#f92672\"\u003e\u0026lt;\u0026lt;\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#34; : \u0026#34;\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e\u0026lt;\u0026lt;\u003c/span\u003e body \u003cspan style=\"color:#f92672\"\u003e\u0026lt;\u0026lt;\u003c/span\u003e endl; \n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  };\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  fn(\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;test\u0026#34;\u003c/span\u003e);  \u003cspan style=\"color:#75715e\"\u003e// string_capture : test\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e}\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch4 id=\"returning-a-lambda-from-a-function\"\u003eReturning a lambda from a function\u003c/h4\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-c++\" data-lang=\"c++\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e#include\u003c/span\u003e \u003cspan style=\"color:#75715e\"\u003e\u0026lt;iostream\u0026gt;\u003c/span\u003e\u003cspan style=\"color:#75715e\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003eusing\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003enamespace\u003c/span\u003e std;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003eauto\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003egetAdd\u003c/span\u003e(\u003cspan style=\"color:#66d9ef\"\u003eint\u003c/span\u003e n)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e{\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#66d9ef\"\u003ereturn\u003c/span\u003e [n](\u003cspan style=\"color:#66d9ef\"\u003eint\u003c/span\u003e an) {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#66d9ef\"\u003ereturn\u003c/span\u003e n \u003cspan style=\"color:#f92672\"\u003e+\u003c/span\u003e an;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  };\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e}\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003eint\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003emain\u003c/span\u003e()\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e{\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#66d9ef\"\u003eauto\u003c/span\u003e fn \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e getAdd(\u003cspan style=\"color:#ae81ff\"\u003e10\u003c/span\u003e);\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  cout \u003cspan style=\"color:#f92672\"\u003e\u0026lt;\u0026lt;\u003c/span\u003e fn(\u003cspan style=\"color:#ae81ff\"\u003e20\u003c/span\u003e) \u003cspan style=\"color:#f92672\"\u003e\u0026lt;\u0026lt;\u003c/span\u003e endl;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e}\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003chr\u003e\n\u003ch3 id=\"c17\"\u003eC++17\u003c/h3\u003e\n\u003ch4 id=\"constexpr\"\u003eConstexpr\u003c/h4\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-c++\" data-lang=\"c++\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e#include\u003c/span\u003e \u003cspan style=\"color:#75715e\"\u003e\u0026lt;iostream\u0026gt;\u003c/span\u003e\u003cspan style=\"color:#75715e\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003eusing\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003enamespace\u003c/span\u003e std;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003eint\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003emain\u003c/span\u003e()\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e{\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#66d9ef\"\u003econstexpr\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003eauto\u003c/span\u003e fn \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e [](\u003cspan style=\"color:#66d9ef\"\u003eint\u003c/span\u003e n){\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#66d9ef\"\u003ereturn\u003c/span\u003e n \u003cspan style=\"color:#f92672\"\u003e+\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e10\u003c/span\u003e;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  };\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#66d9ef\"\u003estatic_assert\u003c/span\u003e(fn(\u003cspan style=\"color:#ae81ff\"\u003e10\u003c/span\u003e) \u003cspan style=\"color:#f92672\"\u003e==\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e20\u003c/span\u003e); \u003cspan style=\"color:#75715e\"\u003e// ok\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#66d9ef\"\u003estatic_assert\u003c/span\u003e(fn(\u003cspan style=\"color:#ae81ff\"\u003e20\u003c/span\u003e) \u003cspan style=\"color:#f92672\"\u003e==\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e20\u003c/span\u003e); \u003cspan style=\"color:#75715e\"\u003e// error: static assertion failed\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e}\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch4 id=\"capturing-a-copy-of-this\"\u003eCapturing a copy of *this\u003c/h4\u003e\n\u003cul\u003e\n\u003cli\u003ethis 참조에 캡쳐가 아닌, *this 복사본 캡쳐\u003c/li\u003e\n\u003c/ul\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-c++\" data-lang=\"c++\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e#include\u003c/span\u003e \u003cspan style=\"color:#75715e\"\u003e\u0026lt;iostream\u0026gt;\u003c/span\u003e\u003cspan style=\"color:#75715e\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e#include\u003c/span\u003e \u003cspan style=\"color:#75715e\"\u003e\u0026lt;memory\u0026gt;\u003c/span\u003e\u003cspan style=\"color:#75715e\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e#include\u003c/span\u003e \u003cspan style=\"color:#75715e\"\u003e\u0026lt;tuple\u0026gt;\u003c/span\u003e\u003cspan style=\"color:#75715e\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003eusing\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003enamespace\u003c/span\u003e std;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003eclass\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eitem\u003c/span\u003e \n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e{\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003epublic\u003c/span\u003e\u003cspan style=\"color:#f92672\"\u003e:\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  item(\u003cspan style=\"color:#66d9ef\"\u003eint\u003c/span\u003e n \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e0\u003c/span\u003e) \u003cspan style=\"color:#f92672\"\u003e:\u003c/span\u003e _value(n) {}\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#66d9ef\"\u003eauto\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003etest\u003c/span\u003e() {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    _value \u003cspan style=\"color:#f92672\"\u003e+=\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#75715e\"\u003e// copy capture\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#66d9ef\"\u003eauto\u003c/span\u003e fn1 \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e [\u003cspan style=\"color:#f92672\"\u003e*\u003c/span\u003e\u003cspan style=\"color:#66d9ef\"\u003ethis\u003c/span\u003e] { \u003cspan style=\"color:#66d9ef\"\u003ereturn\u003c/span\u003e _value; };\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#66d9ef\"\u003eauto\u003c/span\u003e fn2 \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e [self \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e*\u003c/span\u003e\u003cspan style=\"color:#66d9ef\"\u003ethis\u003c/span\u003e] { \u003cspan style=\"color:#66d9ef\"\u003ereturn\u003c/span\u003e self._value; };\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#75715e\"\u003e// ref capture\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#66d9ef\"\u003eauto\u003c/span\u003e fn3 \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e [\u003cspan style=\"color:#66d9ef\"\u003ethis\u003c/span\u003e] { \u003cspan style=\"color:#66d9ef\"\u003ereturn\u003c/span\u003e _value; };\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    _value \u003cspan style=\"color:#f92672\"\u003e+=\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    fn1(); \u003cspan style=\"color:#75715e\"\u003e// 11\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    fn2(); \u003cspan style=\"color:#75715e\"\u003e// 11\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    fn3(); \u003cspan style=\"color:#75715e\"\u003e// 12\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#66d9ef\"\u003ereturn\u003c/span\u003e make_tuple(fn1, fn2, fn3);\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  }\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003eprivate\u003c/span\u003e\u003cspan style=\"color:#f92672\"\u003e:\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#66d9ef\"\u003eint\u003c/span\u003e _value;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e};\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003eint\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003emain\u003c/span\u003e()\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e{\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#66d9ef\"\u003eauto\u003c/span\u003e it \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e make_shared\u003cspan style=\"color:#f92672\"\u003e\u0026lt;\u003c/span\u003eitem\u003cspan style=\"color:#f92672\"\u003e\u0026gt;\u003c/span\u003e(\u003cspan style=\"color:#ae81ff\"\u003e10\u003c/span\u003e);\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#66d9ef\"\u003eauto\u003c/span\u003e tp \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e it\u003cspan style=\"color:#f92672\"\u003e-\u0026gt;\u003c/span\u003etest();\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  it.reset();\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  cout \u003cspan style=\"color:#f92672\"\u003e\u0026lt;\u0026lt;\u003c/span\u003e get\u003cspan style=\"color:#f92672\"\u003e\u0026lt;\u003c/span\u003e\u003cspan style=\"color:#ae81ff\"\u003e0\u003c/span\u003e\u003cspan style=\"color:#f92672\"\u003e\u0026gt;\u003c/span\u003e(tp)() \u003cspan style=\"color:#f92672\"\u003e\u0026lt;\u0026lt;\u003c/span\u003e endl;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  cout \u003cspan style=\"color:#f92672\"\u003e\u0026lt;\u0026lt;\u003c/span\u003e get\u003cspan style=\"color:#f92672\"\u003e\u0026lt;\u003c/span\u003e\u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e\u003cspan style=\"color:#f92672\"\u003e\u0026gt;\u003c/span\u003e(tp)() \u003cspan style=\"color:#f92672\"\u003e\u0026lt;\u0026lt;\u003c/span\u003e endl;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  cout \u003cspan style=\"color:#f92672\"\u003e\u0026lt;\u0026lt;\u003c/span\u003e get\u003cspan style=\"color:#f92672\"\u003e\u0026lt;\u003c/span\u003e\u003cspan style=\"color:#ae81ff\"\u003e2\u003c/span\u003e\u003cspan style=\"color:#f92672\"\u003e\u0026gt;\u003c/span\u003e(tp)() \u003cspan style=\"color:#f92672\"\u003e\u0026lt;\u0026lt;\u003c/span\u003e endl; \u003cspan style=\"color:#75715e\"\u003e// ref memory error \n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e}\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003chr\u003e\n\u003ch3 id=\"c20\"\u003eC++20\u003c/h3\u003e\n\u003ch4 id=\"template-syntax-for-lambdas\"\u003eTemplate syntax for lambdas\u003c/h4\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-c++\" data-lang=\"c++\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e#include\u003c/span\u003e \u003cspan style=\"color:#75715e\"\u003e\u0026lt;iostream\u0026gt;\u003c/span\u003e\u003cspan style=\"color:#75715e\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e#include\u003c/span\u003e \u003cspan style=\"color:#75715e\"\u003e\u0026lt;vector\u0026gt;\u003c/span\u003e\u003cspan style=\"color:#75715e\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003eusing\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003enamespace\u003c/span\u003e std;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003eint\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003emain\u003c/span\u003e()\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e{\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#66d9ef\"\u003eauto\u003c/span\u003e fn \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e []\u003cspan style=\"color:#f92672\"\u003e\u0026lt;\u003c/span\u003e\u003cspan style=\"color:#66d9ef\"\u003etypename\u003c/span\u003e T\u003cspan style=\"color:#f92672\"\u003e\u0026gt;\u003c/span\u003e(vector\u003cspan style=\"color:#f92672\"\u003e\u0026lt;\u003c/span\u003eT\u003cspan style=\"color:#f92672\"\u003e\u0026gt;\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e\u0026amp;\u003c/span\u003ev) { \u003cspan style=\"color:#66d9ef\"\u003ereturn\u003c/span\u003e v.size(); };\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  vector\u003cspan style=\"color:#f92672\"\u003e\u0026lt;\u003c/span\u003e\u003cspan style=\"color:#66d9ef\"\u003eint\u003c/span\u003e\u003cspan style=\"color:#f92672\"\u003e\u0026gt;\u003c/span\u003e v \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e {\u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e, \u003cspan style=\"color:#ae81ff\"\u003e2\u003c/span\u003e, \u003cspan style=\"color:#ae81ff\"\u003e3\u003c/span\u003e, \u003cspan style=\"color:#ae81ff\"\u003e4\u003c/span\u003e, \u003cspan style=\"color:#ae81ff\"\u003e5\u003c/span\u003e};\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  cout \u003cspan style=\"color:#f92672\"\u003e\u0026lt;\u0026lt;\u003c/span\u003e fn(v) \u003cspan style=\"color:#f92672\"\u003e\u0026lt;\u0026lt;\u003c/span\u003e endl;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e}\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch4 id=\"lambda-capture-of-parameter-pack\"\u003eLambda capture of parameter pack\u003c/h4\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-c++\" data-lang=\"c++\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e#include\u003c/span\u003e \u003cspan style=\"color:#75715e\"\u003e\u0026lt;iostream\u0026gt;\u003c/span\u003e\u003cspan style=\"color:#75715e\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e#include\u003c/span\u003e \u003cspan style=\"color:#75715e\"\u003e\u0026lt;string\u0026gt;\u003c/span\u003e\u003cspan style=\"color:#75715e\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003eusing\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003enamespace\u003c/span\u003e std;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003etemplate\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e\u0026lt;\u003c/span\u003e\u003cspan style=\"color:#66d9ef\"\u003etypename\u003c/span\u003e... Args\u003cspan style=\"color:#f92672\"\u003e\u0026gt;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003eauto\u003c/span\u003e getAddFunc(Args\u003cspan style=\"color:#f92672\"\u003e\u0026amp;\u0026amp;\u003c/span\u003e... args){\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#75715e\"\u003e// by ref    [\u0026amp;...args = std::forward\u0026lt;Args\u0026gt;(args)]\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#75715e\"\u003e// by value  \n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#66d9ef\"\u003ereturn\u003c/span\u003e [...args \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e std\u003cspan style=\"color:#f92672\"\u003e::\u003c/span\u003eforward\u003cspan style=\"color:#f92672\"\u003e\u0026lt;\u003c/span\u003eArgs\u003cspan style=\"color:#f92672\"\u003e\u0026gt;\u003c/span\u003e(args)] (\u003cspan style=\"color:#66d9ef\"\u003eauto\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e\u0026amp;\u0026amp;\u003c/span\u003e init) {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#66d9ef\"\u003ereturn\u003c/span\u003e init \u003cspan style=\"color:#f92672\"\u003e+\u003c/span\u003e (args \u003cspan style=\"color:#f92672\"\u003e+\u003c/span\u003e ...);\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    };\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e}\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003eint\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003emain\u003c/span\u003e()\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e{\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#66d9ef\"\u003eauto\u003c/span\u003e fn \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e getAddFunc(\u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e, \u003cspan style=\"color:#ae81ff\"\u003e2\u003c/span\u003e, \u003cspan style=\"color:#ae81ff\"\u003e3\u003c/span\u003e);\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  cout \u003cspan style=\"color:#f92672\"\u003e\u0026lt;\u0026lt;\u003c/span\u003e fn(\u003cspan style=\"color:#ae81ff\"\u003e10\u003c/span\u003e) \u003cspan style=\"color:#f92672\"\u003e\u0026lt;\u0026lt;\u003c/span\u003e endl;  \u003cspan style=\"color:#75715e\"\u003e// 16\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#66d9ef\"\u003eauto\u003c/span\u003e fns \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e getAddFunc(\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;this \u0026#34;\u003c/span\u003es, \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;is \u0026#34;\u003c/span\u003es, \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;sample\u0026#34;\u003c/span\u003es);\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  cout \u003cspan style=\"color:#f92672\"\u003e\u0026lt;\u0026lt;\u003c/span\u003e fns(\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;note: \u0026#34;\u003c/span\u003es) \u003cspan style=\"color:#f92672\"\u003e\u0026lt;\u0026lt;\u003c/span\u003e endl;  \u003cspan style=\"color:#75715e\"\u003e// note: this is sample\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e}\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e","title":"C++ Lambda 표현식"},{"content":"MinIO Windows Service 등록\nMinIO Service 등록 WinSW https://github.com/winsw/winsw{:target=\u0026quot;_blank\u0026quot;} Windows 실행 파일을 서비스로 래핑해주는 툴 .NET Framework / Core 기반 Windows 플랫폼에서 실행 MinIO Service https://github.com/minio/minio-service/tree/master/windows{:target=\u0026quot;_blank\u0026quot;} WinSW 최신 Release 다운로드 및 XML 설정 파일 작성 # choco install curl # 다운로드 $ curl -LO https://github.com/winsw/winsw/releases/download/v2.11.0/WinSW-x64.exe # rename $ move WinSW-x64.exe minio-service.exe minio-service.xml \u0026lt;service\u0026gt; \u0026lt;id\u0026gt;MinIO\u0026lt;/id\u0026gt; \u0026lt;name\u0026gt;MinIO\u0026lt;/name\u0026gt; \u0026lt;description\u0026gt;MinIO is a high performance object storage server\u0026lt;/description\u0026gt; \u0026lt;executable\u0026gt;minio.exe\u0026lt;/executable\u0026gt; \u0026lt;env name=\u0026#34;MINIO_ROOT_USER\u0026#34; value=\u0026#34;minio\u0026#34;/\u0026gt; \u0026lt;env name=\u0026#34;MINIO_ROOT_PASSWORD\u0026#34; value=\u0026#34;minio1234\u0026#34;/\u0026gt; \u0026lt;arguments\u0026gt;server d:\\minio\\data --console-address \u0026#34;:9001\u0026#34;\u0026lt;/arguments\u0026gt; \u0026lt;logmode\u0026gt;rotate\u0026lt;/logmode\u0026gt; \u0026lt;/service\u0026gt; 서비스 등록 Administrator 권한으로 실행 minio 실행 파일 PATH 등록 or 같은 디렉토리에 위치 # service install $ minio-service.exe install 2021-12-09 15:57:24,987 INFO - Installing service \u0026#39;MinIO (MinIO)\u0026#39;... 2021-12-09 15:57:25,085 INFO - Service \u0026#39;MinIO (MinIO)\u0026#39; was installed successfully. # service status $ minio-service.exe status Stopped # service start $ minio-service.exe start 2021-12-09 16:05:59,133 INFO - Starting service \u0026#39;MinIO (MinIO)\u0026#39;... 2021-12-09 16:06:00,322 INFO - Service \u0026#39;MinIO (MinIO)\u0026#39; started successfully. ","permalink":"https://cdecl.github.io/devops/minio-windows-service/","summary":"\u003cp\u003eMinIO Windows Service 등록\u003c/p\u003e\n\u003ch2 id=\"minio-service-등록\"\u003eMinIO Service 등록\u003c/h2\u003e\n\u003ch3 id=\"winsw\"\u003eWinSW\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://github.com/winsw/winsw\"\u003ehttps://github.com/winsw/winsw\u003c/a\u003e{:target=\u0026quot;_blank\u0026quot;}\u003c/li\u003e\n\u003cli\u003eWindows 실행 파일을 서비스로 래핑해주는 툴\u003c/li\u003e\n\u003cli\u003e.NET Framework / Core 기반 Windows 플랫폼에서 실행\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"minio-service\"\u003eMinIO Service\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://github.com/minio/minio-service/tree/master/windows\"\u003ehttps://github.com/minio/minio-service/tree/master/windows\u003c/a\u003e{:target=\u0026quot;_blank\u0026quot;}\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch4 id=\"winsw-최신-release-다운로드-및-xml-설정-파일-작성\"\u003eWinSW 최신 Release 다운로드 및 XML 설정 파일 작성\u003c/h4\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-sh\" data-lang=\"sh\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# choco install curl\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# 다운로드 \u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ curl -LO https://github.com/winsw/winsw/releases/download/v2.11.0/WinSW-x64.exe\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# rename\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ move WinSW-x64.exe minio-service.exe\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cul\u003e\n\u003cli\u003eminio-service.xml\u003c/li\u003e\n\u003c/ul\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-xml\" data-lang=\"xml\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003e\u0026lt;service\u0026gt;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#f92672\"\u003e\u0026lt;id\u0026gt;\u003c/span\u003eMinIO\u003cspan style=\"color:#f92672\"\u003e\u0026lt;/id\u0026gt;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#f92672\"\u003e\u0026lt;name\u0026gt;\u003c/span\u003eMinIO\u003cspan style=\"color:#f92672\"\u003e\u0026lt;/name\u0026gt;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#f92672\"\u003e\u0026lt;description\u0026gt;\u003c/span\u003eMinIO is a high performance object storage server\u003cspan style=\"color:#f92672\"\u003e\u0026lt;/description\u0026gt;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#f92672\"\u003e\u0026lt;executable\u0026gt;\u003c/span\u003eminio.exe\u003cspan style=\"color:#f92672\"\u003e\u0026lt;/executable\u0026gt;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#f92672\"\u003e\u0026lt;env\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003ename=\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;MINIO_ROOT_USER\u0026#34;\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003evalue=\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;minio\u0026#34;\u003c/span\u003e\u003cspan style=\"color:#f92672\"\u003e/\u0026gt;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#f92672\"\u003e\u0026lt;env\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003ename=\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;MINIO_ROOT_PASSWORD\u0026#34;\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003evalue=\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;minio1234\u0026#34;\u003c/span\u003e\u003cspan style=\"color:#f92672\"\u003e/\u0026gt;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#f92672\"\u003e\u0026lt;arguments\u0026gt;\u003c/span\u003eserver d:\\minio\\data --console-address \u0026#34;:9001\u0026#34;\u003cspan style=\"color:#f92672\"\u003e\u0026lt;/arguments\u0026gt;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#f92672\"\u003e\u0026lt;logmode\u0026gt;\u003c/span\u003erotate\u003cspan style=\"color:#f92672\"\u003e\u0026lt;/logmode\u0026gt;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003e\u0026lt;/service\u0026gt;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch4 id=\"서비스-등록\"\u003e서비스 등록\u003c/h4\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003eAdministrator\u003c/code\u003e 권한으로 실행\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eminio\u003c/code\u003e 실행 파일 PATH 등록 or 같은 디렉토리에 위치\u003c/li\u003e\n\u003c/ul\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-sh\" data-lang=\"sh\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# service install\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ minio-service.exe install \n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e2021-12-09 15:57:24,987 INFO  - Installing service \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;MinIO (MinIO)\u0026#39;\u003c/span\u003e...\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e2021-12-09 15:57:25,085 INFO  - Service \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;MinIO (MinIO)\u0026#39;\u003c/span\u003e was installed successfully.\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# service status\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ minio-service.exe status\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eStopped\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# service start \u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ minio-service.exe start\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e2021-12-09 16:05:59,133 INFO  - Starting service \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;MinIO (MinIO)\u0026#39;\u003c/span\u003e...\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e2021-12-09 16:06:00,322 INFO  - Service \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;MinIO (MinIO)\u0026#39;\u003c/span\u003e started successfully.\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e","title":"MinIO Windows Service 등록"},{"content":"Go 언어로 만든 크로스 플랫폼 클라우드 스토리지 특화 백업 및 동기화 프로그램\nRclone https://rclone.org/{:target=\u0026quot;_blank\u0026quot;} file, sftp 부터 Amazon S3, MinIO 와 같은 Object Storage, Cloud Storage 등의 많은 Providers 를 지원 Install 플랫폼 바이너리 다운로드 or 패키지 매니저 활용 https://rclone.org/downloads/{:target=\u0026quot;_blank\u0026quot;} Rclone config Providers 설정 기반, config 파일을 통해 설정 Rclone config 기본 파일 위치 확인 # linux config 파일 위치 확인 $ rclone config file Configuration file is stored at: /home/\u0026lt;HOME\u0026gt;/.config/rclone/rclone.conf # windows $ rclone config file Configuration file is stored at: C:\\Users\\\u0026lt;HOME\u0026gt;\\AppData\\Roaming\\rclone\\rclone.conf Rclone config 추가 config 파일을 직접 수정 하거나 Interactive 화면을 통해 진행 $ rclone config No remotes found - make a new one n) New remote s) Set configuration password q) Quit config n/s/q\u0026gt; ... Rclone config 내용 확인 $ rclone config show Rclone Provider config Amazon S3 [mys3] type = s3 provider = AWS env_auth = true region = ap-northeast-2 location_constraint = ap-northeast-2 [mys3] type = s3 provider = AWS env_auth = true region = ap-northeast-2 location_constraint = ap-northeast-2 access_key_id = AKIAXXXXXXXXXXXXXXXX secret_access_key = 1oxxxxxxxxxxxxxxxxxxxxxxxxx MinIO [myminio] type = s3 provider = Minio env_auth = false access_key_id = KEYxxxxxxxxx secret_access_key = PWDxxxxxxxxx endpoint = http://minio-server SFTP 공개키 인증을 위해 key_file 지정하지 않으면 ssh_agent를 통해 접근시도\ntype = sftp host = HOST user = USER key_file = ~/.ssh/id_rsa 주요 명렁어 https://rclone.org/commands/{:target=\u0026quot;_blank\u0026quot;} remote: 형식으로 원격 서버 접근 # List all directories/containers/buckets in the path. $ rclone lsd minio: # local directories : ls -al ~/ $ rclone lsd ~/ Copy, Sync 원본과 동일한 파일은 복사하지 않음 # copy $ rclone copy source-directory/ remote:target-directory/ # sync, mirror $ rclone sync source-directory/ remote:target-directory/ Global Flags 주요 전역 설정 --checkers int Number of checkers to run in parallel (default 8) --config string Config file (default \u0026#34;$HOME/.config/rclone/rclone.conf\u0026#34;) -L, --copy-links Follow symlinks and copy the pointed to item\t-n, --dry-run Do a trial run with no permanent changes --exclude stringArray Exclude files matching pattern --fast-list Use recursive list if available; uses more memory but fewer transactions\t--include stringArray Include files matching pattern\t-P, --progress Show progress during transfer\t--transfers int Number of file transfers to run in parallel (default 4) # sync 예제 $ rclone sync source-directory/ remote:target-directory/ --progress --transfers 8 --copy-links Transferred: 0 / 0 Bytes, -, 0 Bytes/s, ETA - Errors: 0 Checks: 6123 / 6123, 100% Transferred: 0 / 0, - Elapsed time: 0s # local sync 예제 $ rclone sync source-directory/ /path/target-directory/ --progress --transfers 8 --copy-links Transferred: 0 / 0 Bytes, -, 0 Bytes/s, ETA - Errors: 0 Checks: 6123 / 6123, 100% Transferred: 0 / 0, - Elapsed time: 0s 기타 Mount https://rclone.org/commands/rclone_mount/{:target=\u0026quot;_blank\u0026quot;} Linux의 FUSE 기술 활용 로컬 머신에 마운트된 형태로 서비스 FUSE : https://github.com/libfuse/libfuse{:target=\u0026quot;_blank\u0026quot;} Serve https://rclone.org/commands/rclone_serve/{:target=\u0026quot;_blank\u0026quot;} 특정 프로토콜을 활용하여 별도 원격 서비스 제공 (Gateway) rclone serve dlna - DLNA를 통한 원격:경로 제공 rclone serve docker - 도커의 볼륨 플러그인 API에서 원격을 제공 rclone serve ftp - FTP를 통해 원격:경로를 제공 rclone serve http - HTTP를 통해 원격 서비스를 제공 rclone serve restic - restic의 REST API에 대한 원격 서비스를 제공 rclone serve sftp - SFTP를 통해 원격 서비스를 제공 rclone은 webdav를 제공합니다 - webdav를 통해 원격:경로를 제공 ","permalink":"https://cdecl.github.io/devops/rclone-101/","summary":"\u003cp\u003eGo 언어로 만든 크로스 플랫폼 클라우드 스토리지 특화 백업 및 동기화 프로그램\u003c/p\u003e\n\u003ch2 id=\"rclone\"\u003eRclone\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://rclone.org/\"\u003ehttps://rclone.org/\u003c/a\u003e{:target=\u0026quot;_blank\u0026quot;}\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003efile\u003c/code\u003e, \u003ccode\u003esftp\u003c/code\u003e 부터 \u003ccode\u003eAmazon S3\u003c/code\u003e, \u003ccode\u003eMinIO\u003c/code\u003e 와 같은 Object Storage, Cloud Storage 등의 많은 Providers 를 지원\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"install\"\u003eInstall\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e플랫폼 바이너리 다운로드 or 패키지 매니저 활용\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://rclone.org/downloads/\"\u003ehttps://rclone.org/downloads/\u003c/a\u003e{:target=\u0026quot;_blank\u0026quot;}\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"rclone-config\"\u003eRclone config\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003eProviders 설정 기반, config 파일을 통해 설정\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch4 id=\"rclone-config-기본-파일-위치-확인\"\u003eRclone config 기본 파일 위치 확인\u003c/h4\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-sh\" data-lang=\"sh\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# linux config 파일 위치 확인\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ rclone config file\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eConfiguration file is stored at:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e/home/\u0026lt;HOME\u0026gt;/.config/rclone/rclone.conf\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-sh\" data-lang=\"sh\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# windows \u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ rclone config file\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eConfiguration file is stored at:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eC:\u003cspan style=\"color:#ae81ff\"\u003e\\U\u003c/span\u003esers\u003cspan style=\"color:#ae81ff\"\u003e\\\u0026lt;\u003c/span\u003eHOME\u0026gt;\u003cspan style=\"color:#ae81ff\"\u003e\\A\u003c/span\u003eppData\u003cspan style=\"color:#ae81ff\"\u003e\\R\u003c/span\u003eoaming\u003cspan style=\"color:#ae81ff\"\u003e\\r\u003c/span\u003eclone\u003cspan style=\"color:#ae81ff\"\u003e\\r\u003c/span\u003eclone.conf\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch4 id=\"rclone-config-추가\"\u003eRclone config 추가\u003c/h4\u003e\n\u003cul\u003e\n\u003cli\u003econfig 파일을 직접 수정 하거나 Interactive 화면을 통해 진행\u003c/li\u003e\n\u003c/ul\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-sh\" data-lang=\"sh\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ rclone config\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eNo remotes found - make a new one\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003en\u003cspan style=\"color:#f92672\"\u003e)\u003c/span\u003e New remote\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003es\u003cspan style=\"color:#f92672\"\u003e)\u003c/span\u003e Set configuration password\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eq\u003cspan style=\"color:#f92672\"\u003e)\u003c/span\u003e Quit config\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003en/s/q\u0026gt;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e...\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cul\u003e\n\u003cli\u003eRclone config 내용 확인\u003c/li\u003e\n\u003c/ul\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-sh\" data-lang=\"sh\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ rclone config show\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch4 id=\"rclone-provider-config\"\u003eRclone Provider config\u003c/h4\u003e\n\u003ch5 id=\"amazon-s3\"\u003eAmazon S3\u003c/h5\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-ini\" data-lang=\"ini\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003e[mys3]\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#a6e22e\"\u003etype\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003es3\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#a6e22e\"\u003eprovider\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003eAWS\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#a6e22e\"\u003eenv_auth\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003etrue\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#a6e22e\"\u003eregion\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003eap-northeast-2\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#a6e22e\"\u003elocation_constraint\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003eap-northeast-2\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-ini\" data-lang=\"ini\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003e[mys3]\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#a6e22e\"\u003etype\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003es3\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#a6e22e\"\u003eprovider\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003eAWS\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#a6e22e\"\u003eenv_auth\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003etrue\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#a6e22e\"\u003eregion\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003eap-northeast-2\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#a6e22e\"\u003elocation_constraint\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003eap-northeast-2\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#a6e22e\"\u003eaccess_key_id\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003eAKIAXXXXXXXXXXXXXXXX\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#a6e22e\"\u003esecret_access_key\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e1oxxxxxxxxxxxxxxxxxxxxxxxxx\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch5 id=\"minio\"\u003eMinIO\u003c/h5\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-ini\" data-lang=\"ini\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003e[myminio]\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#a6e22e\"\u003etype\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003es3\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#a6e22e\"\u003eprovider\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003eMinio\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#a6e22e\"\u003eenv_auth\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003efalse\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#a6e22e\"\u003eaccess_key_id\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003eKEYxxxxxxxxx\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#a6e22e\"\u003esecret_access_key\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003ePWDxxxxxxxxx\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#a6e22e\"\u003eendpoint\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003ehttp://minio-server\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch5 id=\"sftp\"\u003eSFTP\u003c/h5\u003e\n\u003cp\u003e공개키 인증을 위해 \u003ccode\u003ekey_file\u003c/code\u003e 지정하지 않으면 \u003ccode\u003essh_agent\u003c/code\u003e를 통해 접근시도\u003c/p\u003e","title":"Rclone Basic"},{"content":"Golang GC (가비지 컬렉터) 주요 내용\nGolang GC : GOGC 유효하지 않는 메모리(Dangling Object)를 주기적으로 해제하는 기법 Java의 Parallel GC, G1GC 와 유사하나 구현 방식에서 차이가 있음 Stop-the-World 시간을 최소화하도록 설계됨 Tri-Color Algorithm 사용 동시성을 고려한 효율적인 메모리 관리 알고리즘 CMS (Concurrent Mark and Sweep) 방식 운영 Java 와 같은 Generation GC 기법이나 Compaction은 지원하지 않음 대신 더 효율적인 메모리 할당 전략을 사용 Compaction (압축, 재배치) 가 없음 재배치를 하지 않는 대신 TCMalloc를 통한 메모리 할당 관리 메모리 단편화를 최소화하고 빠른 할당을 지원 멀티쓰레드 최적화 힙 메모리 할당기 - tcmalloc. jemalloc{:target=\u0026quot;_blank\u0026quot;} Tri-Color Algorithm 동작 원리 white, black, grey 세 가지 상태를 통한 메모리 관리\n초기 단계\n모든 메모리 객체를 white 상태로 설정 이는 잠재적으로 수집 가능한 상태를 의미 마킹 단계\nGC Root에서 직접 참조하는 객체들을 grey로 표시 grey 객체들은 검사가 필요한 상태를 의미 스캐닝 단계\ngrey 상태 객체가 참조하는 다른 객체들을 grey로 표시 검사가 완료된 객체는 black으로 변경 이 과정을 grey 객체가 없을 때까지 반복 수집 단계\n남아있는 white 상태의 객체들을 메모리에서 해제 이 객체들은 더 이상 접근할 수 없는(unreachable) 상태 TCMalloc (Thread-Caching Malloc) Google이 개발한 고성능 메모리 할당기\n특징:\nThread 별 캐시를 통한 빠른 메모리 할당 크기별로 최적화된 할당 전략 사용 메모리 단편화 최소화 Lock contention 감소로 인한 성능 향상 장점:\n멀티스레드 환경에서 우수한 성능 메모리 재사용 최적화 캐시 지역성 향상 할당/해제 오버헤드 감소 GOGC 옵션 가비지 컬렉션 대상 백분율 설정\n이전 수집 후 남은 라이브 데이터에 대한 새로 할당된 데이터의 비율을 조정\nGOGC=100 : 기본값, 100% 비율 힙이 라이브 메모리의 100%만큼 증가하면 GC 트리거 GOGC=50 : GC를 더 자주 실행 메모리 사용량은 줄지만 CPU 사용량 증가 GOGC=200 : GC를 덜 자주 실행 CPU 사용량은 줄지만 메모리 사용량 증가 GOGC=off : GC를 사용하지 않음 특수한 경우에만 사용 (벤치마크, 테스트 등) GC Trace 활용 gctrace 옵션을 통한 가비지 컬렉션 모니터링\n예제 코드 package main import ( \u0026#34;fmt\u0026#34; \u0026#34;sync\u0026#34; \u0026#34;time\u0026#34; ) type log struct { Info string Seq int } func main() { wg := sync.WaitGroup{} for i := 0; i \u0026lt; 1000000; i++ { wg.Add(1) go func() { defer wg.Done() info := fmt.Sprintf(\u0026#34;test %d\u0026#34;, i) _ = log{info, i} // fmt.Println(s, t) time.Sleep(time.Millisecond * 1000) }() } wg.Wait() } 실행 및 모니터링 # 프로젝트 초기화 $ go mod init gctest $ go mod tidy # build $ go build 실행 테스트 # GODEBUG=gctrace=1 : gctrace 활성화 $ GODEBUG=gctrace=1 ./gctest 트레이스 출력 분석 gc 1 @0.010s 9%: 0.058+2.6+0.083 ms clock, 0.46+6.6/2.9/0+0.66 ms cpu, 4-\u0026gt;5-\u0026gt;4 MB, 5 MB goal, 8 P gc 2 @0.015s 19%: 0.093+4.7+0.17 ms clock, 0.74+14/6.1/0+1.4 ms cpu, 6-\u0026gt;7-\u0026gt;6 MB, 8 MB goal, 8 P gc 3 @0.027s 25%: 0.15+5.7+0.34 ms clock, 1.2+22/9.0/0+2.7 ms cpu, 10-\u0026gt;13-\u0026gt;11 MB, 13 MB goal, 8 P gc 4 @0.044s 29%: 0.084+11+0.35 ms clock, 0.67+45/18/0+2.8 ms cpu, 18-\u0026gt;22-\u0026gt;20 MB, 23 MB goal, 8 P gc 5 @0.076s 31%: 0.24+17+0.19 ms clock, 1.9+66/31/0+1.5 ms cpu, 32-\u0026gt;37-\u0026gt;34 MB, 40 MB goal, 8 P gc 6 @0.129s 33%: 0.13+26+0.065 ms clock, 1.1+124/50/4.6+0.52 ms cpu, 54-\u0026gt;62-\u0026gt;58 MB, 68 MB goal, 8 P gc 7 @0.214s 34%: 0.095+40+0.099 ms clock, 0.76+204/79/0.34+0.79 ms cpu, 93-\u0026gt;98-\u0026gt;91 MB, 116 MB goal, 8 P gc 8 @0.355s 35%: 0.086+66+0.12 ms clock, 0.69+375/132/0+0.99 ms cpu, 152-\u0026gt;158-\u0026gt;144 MB, 182 MB goal, 8 P gc 9 @0.605s 35%: 0.11+109+0.087 ms clock, 0.88+624/216/0+0.70 ms cpu, 252-\u0026gt;261-\u0026gt;242 MB, 289 MB goal, 8 P gc 10 @1.033s 35%: 0.077+206+1.0 ms clock, 0.61+1021/397/0.93+8.1 ms cpu, 430-\u0026gt;437-\u0026gt;403 MB, 484 MB goal, 8 P 출력 항목 설명: gc 1: GC 실행 번호 @0.010s: 프로그램 시작 후 경과 시간 9%: GC에 사용된 CPU 시간 비율 0.058+2.6+0.083 ms: 각 GC 단계별 소요 시간 4-\u0026gt;5-\u0026gt;4 MB: GC 전후의 힙 크기 변화 5 MB goal: 목표 힙 크기 8 P: 사용된 프로세서 수 ","permalink":"https://cdecl.github.io/dev/golang-gogc/","summary":"\u003cp\u003eGolang GC (가비지 컬렉터) 주요 내용\u003c/p\u003e\n\u003ch2 id=\"golang-gc--gogc\"\u003eGolang GC : \u003ccode\u003eGOGC\u003c/code\u003e\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003e유효하지 않는 메모리(Dangling Object)를 주기적으로 해제하는 기법\n\u003cul\u003e\n\u003cli\u003eJava의 \u003ccode\u003eParallel GC\u003c/code\u003e, \u003ccode\u003eG1GC\u003c/code\u003e 와 유사하나 구현 방식에서 차이가 있음\u003c/li\u003e\n\u003cli\u003eStop-the-World 시간을 최소화하도록 설계됨\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003eTri-Color Algorithm 사용\n\u003cul\u003e\n\u003cli\u003e동시성을 고려한 효율적인 메모리 관리 알고리즘\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003eCMS (Concurrent Mark and Sweep) 방식 운영\n\u003cul\u003e\n\u003cli\u003eJava 와 같은 Generation GC 기법이나 Compaction은 지원하지 않음\u003c/li\u003e\n\u003cli\u003e대신 더 효율적인 메모리 할당 전략을 사용\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003eCompaction (압축, 재배치) 가 없음\n\u003cul\u003e\n\u003cli\u003e재배치를 하지 않는 대신 \u003ccode\u003eTCMalloc\u003c/code\u003e를 통한 메모리 할당 관리\u003c/li\u003e\n\u003cli\u003e메모리 단편화를 최소화하고 빠른 할당을 지원\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://cdecl.net/304\"\u003e멀티쓰레드 최적화 힙 메모리 할당기 - tcmalloc. jemalloc\u003c/a\u003e{:target=\u0026quot;_blank\u0026quot;}\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"tri-color-algorithm-동작-원리\"\u003eTri-Color Algorithm 동작 원리\u003c/h3\u003e\n\u003cp\u003e\u003ccode\u003ewhite\u003c/code\u003e, \u003ccode\u003eblack\u003c/code\u003e, \u003ccode\u003egrey\u003c/code\u003e 세 가지 상태를 통한 메모리 관리\u003c/p\u003e","title":"Golang GC"},{"content":"Snapshots 기능을 제공하는 modern backup program\nrestic https://restic.net/{:target=\u0026quot;_blank\u0026quot;} Go로 만들어진 백업 프로그램, 크로스프랫폼 지원 - from Linux, BSD, Mac and Windows - to many different storage types, including self-hosted and online services - easily, being a single executable that you can run without a server or complex setup - effectively, only transferring the parts that actually changed in the files you back up - securely, by careful use of cryptography in every part of the process - verifiably, enabling you to make sure that your files can be restored when needed - freely - restic is entirely free to use and completely open source Install Package 설치 및 Binary 지원 Package : https://restic.readthedocs.io/en/stable/020_installation.html{:target=\u0026quot;_blank\u0026quot;} Binary : https://github.com/restic/restic/releases/tag/v0.12.1{:target=\u0026quot;_blank\u0026quot;} $ curl -LO https://github.com/restic/restic/releases/download/v0.12.1/restic_0.12.1_linux_amd64.bz2 # install bzip2 $ sudo yum install bzip2 -y $ bunzip2 restic_0.12.1_linux_amd64.bz2 $ mv restic_0.12.1_linux_amd64 restic $ sudo mv restic /usr/local/bin $ restic restic is a backup program which allows saving multiple revisions of files and directories in an encrypted repository stored on different backends. Usage: restic [command] Available Commands: backup Create a new backup of files and/or directories cache Operate on local cache directories cat Print internal objects to stdout check Check the repository for errors copy Copy snapshots from one repository to another diff Show differences between two snapshots dump Print a backed-up file to stdout find Find a file, a directory or restic IDs forget Remove snapshots from the repository generate Generate manual pages and auto-completion files (bash, fish, zsh) help Help about any command init Initialize a new repository key Manage keys (passwords) list List objects in the repository ls List files in a snapshot migrate Apply migrations mount Mount the repository prune Remove unneeded data from the repository rebuild-index Build a new index recover Recover data from the repository restore Extract the data from a snapshot self-update Update the restic binary snapshots List all snapshots stats Scan the repository and show basic statistics tag Modify tags on snapshots unlock Remove locks other processes created version Print version information .... Backup \u0026amp; Restore Backup Repository 생성 # Repository 접근을 위한 패드워스 필요, 일단 1111 # -r, --repo repository repository to backup to or restore from (default: $RESTIC_REPOSITORY) $ restic init -r repo enter password for new repository: enter password again: created restic repository 7f3cfb3e9a at repo Please note that knowledge of your password is required to access the repository. Losing your password means that your data is irrecoverably lost. # password 파일 생성, -p 옵션으로 지정 $ echo 1111 \u0026gt; passwd Backup : snapshots 생성 # Backup # restic -r \u0026lt;repository\u0026gt; -p \u0026lt;passwd file\u0026gt; backup \u0026lt;Source\u0026gt; # -p, --password-file file file to read the repository password from (default: $RESTIC_PASSWORD_FILE) $ restic -r repo -p passwd backup /home/cdecl/temp/mvcapp repository e4ccc49d opened successfully, password is correct no parent snapshot found, will read all files Files: 79 new, 0 changed, 0 unmodified Dirs: 40 new, 0 changed, 0 unmodified Added to the repo: 4.854 MiB processed 79 files, 4.811 MiB in 0:00 snapshot 9aff8447 saved # 파일생성 및 다시백업 $ touch /home/cdecl/temp/mvcapp/test.txt $ restic -r repo -p passwd backup /home/cdecl/temp/mvcapp repository e4ccc49d opened successfully, password is correct using parent snapshot 9aff8447 Files: 1 new, 0 changed, 79 unmodified Dirs: 0 new, 4 changed, 36 unmodified Added to the repo: 7.742 KiB processed 80 files, 4.811 MiB in 0:00 snapshot f4b94d9b saved Snapshots 확인 # snapshots 2개 화인 확인 $ restic -r repo -p passwd snapshots repository e4ccc49d opened successfully, password is correct ID Time Host Tags Paths ------------------------------------------------------------------------------ 9aff8447 2021-11-25 15:17:52 centos1 /home/cdecl/temp/mvcapp f4b94d9b 2021-11-25 15:22:24 centos1 /home/cdecl/temp/mvcapp ------------------------------------------------------------------------------ 2 snapshots Snapshots 비교 $ restic -r repo -p passwd diff 9aff8447 f4b94d9b repository e4ccc49d opened successfully, password is correct comparing snapshot 9aff8447 to f4b94d9b: + /home/cdecl/temp/mvcapp/test.txt Files: 1 new, 0 removed, 0 changed Dirs: 0 new, 0 removed Others: 0 new, 0 removed Data Blobs: 0 new, 0 removed Tree Blobs: 5 new, 5 removed Added: 7.742 KiB Removed: 7.456 KiB Restore : Snapshots 에서 복원 # restic -r \u0026lt;repository\u0026gt; -p \u0026lt;passwd file\u0026gt; restore \u0026lt;snapshots id\u0026gt; -t \u0026lt;Target\u0026gt; $ restic -r repo -p passwd restore 9aff8447 -t restore-mvcapp repository e4ccc49d opened successfully, password is correct restoring \u0026lt;Snapshot 9aff8447 of [/home/cdecl/temp/mvcapp] at 2021-11-25 15:17:52.115925352 +0900 KST by cdecl@centos1\u0026gt; to restore-mvcapp MinIO \u0026amp; RClone Backend 지원 https://restic.readthedocs.io/en/stable/030_preparing_a_new_repo.html{:target=\u0026quot;_blank\u0026quot;} Local, SFTP, REST Server, Amazon S3, Minio Server, Microsoft Azure Blob Storage, Google Cloud Storage, Other Services via rclone 등 지원 MinIO Repository 만들기 $ export AWS_ACCESS_KEY_ID=key $ export AWS_SECRET_ACCESS_KEY=passwd $ restic init -r s3:http://minio.server:9000/restic enter password for new repository: enter password again: created restic repository 65a27250da at s3:http://minio.server:9000/restic Please note that knowledge of your password is required to access the repository. Losing your password means that your data is irrecoverably lost. # Backup $ restic -r s3:http://minio.server:9000/restic -p passwd backup /home/cdecl/temp/mvcapp # snapshots $ restic -r s3:http://minio.server:9000/restic -p passwd snapshots repository 65a27250 opened successfully, password is correct ID Time Host Tags Paths ------------------------------------------------------------------------------ 73d37fbd 2021-11-25 15:37:34 centos1 /home/cdecl/temp/mvcapp ------------------------------------------------------------------------------ 1 snapshots RClone Backend 로 사용 $ rclone config show [infradb] type = s3 env_auth = false access_key_id = key secret_access_key = passwd region = us-east-1 endpoint = http://minio.server:9000 # rclone config 사용 respository 만들기 $ restic init -r rclone:infradb:restic enter password for new repository: enter password again: created restic repository ce850667c9 at rclone:infradb:restic Please note that knowledge of your password is required to access the repository. Losing your password means that your data is irrecoverably lost. # Backup $ restic -r rclone:infradb:restic -p passwd backup /home/cdecl/temp/mvcapp # snapshots $ restic -r rclone:infradb:restic -p passwd snapshots Snapshots 관리 https://restic.readthedocs.io/en/stable/060_forget.html{:target=\u0026quot;_blank\u0026quot;} $ restic -r rclone:infradb:restic -p passwd snapshots repository ce850667 opened successfully, password is correct ID Time Host Tags Paths ------------------------------------------------------------------------------ a3737738 2021-11-25 15:44:05 centos1 /home/cdecl/temp/mvcapp 00f16d70 2021-11-25 15:44:50 centos1 /home/cdecl/temp/mvcapp 0e83568a 2021-11-25 15:44:51 centos1 /home/cdecl/temp/mvcapp 4041e3ca 2021-11-25 15:44:53 centos1 /home/cdecl/temp/mvcapp eb1e56c7 2021-11-25 15:44:54 centos1 /home/cdecl/temp/mvcapp d81b3d2a 2021-11-25 15:44:55 centos1 /home/cdecl/temp/mvcapp ------------------------------------------------------------------------------ 6 snapshots # snapshots 1개 지우기 $ restic -r rclone:infradb:restic -p passwd forget d81b3d2a repository ce850667 opened successfully, password is correct [0:00] 100.00% 1 / 1 files deleted # 스냅샷의 파일에서 참조한 데이터는 여전히 저장소에 저장 # 참조되지 않은 데이터를 정리하려면 prune 명령 실행 $ restic -r rclone:infradb:restic -p passwd prune repository ce850667 opened successfully, password is correct loading indexes... loading all snapshots... finding data that is still in use for 5 snapshots [0:00] 100.00% 5 / 5 snapshots searching used packs... collecting packs for deletion and repacking [0:00] 100.00% 9 / 9 packs processed to repack: 0 blobs / 0 B this removes 0 blobs / 0 B to delete: 2 blobs / 1004 B total prune: 2 blobs / 1004 B remaining: 125 blobs / 4.862 MiB unused size after prune: 0 B (0.00% of remaining size) rebuilding index [0:00] 100.00% 8 / 8 packs processed deleting obsolete index files [0:00] 100.00% 6 / 6 files deleted removing 1 old packs [0:00] 100.00% 1 / 1 files deleted done # 최근 1개만 놔두고 snapshots 삭제 및 prune $ restic -r rclone:infradb:restic -p passwd forget --keep-last 1 --prune repository ce850667 opened successfully, password is correct Applying Policy: keep 1 latest snapshots keep 1 snapshots: ID Time Host Tags Reasons Paths --------------------------------------------------------------------------------------------- eb1e56c7 2021-11-25 15:44:54 centos1 last snapshot /home/cdecl/temp/mvcapp --------------------------------------------------------------------------------------------- 1 snapshots remove 4 snapshots: ID Time Host Tags Paths ------------------------------------------------------------------------------ a3737738 2021-11-25 15:44:05 centos1 /home/cdecl/temp/mvcapp 00f16d70 2021-11-25 15:44:50 centos1 /home/cdecl/temp/mvcapp 0e83568a 2021-11-25 15:44:51 centos1 /home/cdecl/temp/mvcapp 4041e3ca 2021-11-25 15:44:53 centos1 /home/cdecl/temp/mvcapp ------------------------------------------------------------------------------ 4 snapshots [0:00] 100.00% 4 / 4 files deleted 4 snapshots have been removed, running prune loading indexes... loading all snapshots... finding data that is still in use for 1 snapshots [0:00] 100.00% 1 / 1 snapshots searching used packs... collecting packs for deletion and repacking [0:00] 100.00% 8 / 8 packs processed to repack: 39 blobs / 47.305 KiB this removes 2 blobs / 1007 B to delete: 6 blobs / 2.950 KiB total prune: 8 blobs / 3.934 KiB remaining: 117 blobs / 4.858 MiB unused size after prune: 0 B (0.00% of remaining size) repacking packs [0:00] 100.00% 2 / 2 packs repacked rebuilding index [0:00] 100.00% 5 / 5 packs processed deleting obsolete index files [0:00] 100.00% 1 / 1 files deleted removing 5 old packs [0:00] 100.00% 5 / 5 files deleted done # snapshots 확인 $ restic -r rclone:infradb:restic -p passwd snapshots repository ce850667 opened successfully, password is correct ID Time Host Tags Paths ------------------------------------------------------------------------------ eb1e56c7 2021-11-25 15:44:54 centos1 /home/cdecl/temp/mvcapp ------------------------------------------------------------------------------ 1 snapshots forget 주요 인수 --keep-last n never delete the n last (most recent) snapshots --keep-hourly n for the last n hours in which a snapshot was made, keep only the last snapshot for each hour. --keep-daily n for the last n days which have one or more snapshots, only keep the last one for that day. --keep-weekly n for the last n weeks which have one or more snapshots, only keep the last one for that week. --keep-monthly n for the last n months which have one or more snapshots, only keep the last one for that month. --keep-yearly n for the last n years which have one or more snapshots, only keep the last one for that year. --keep-tag keep all snapshots which have all tags specified by this option (can be specified multiple times). ","permalink":"https://cdecl.github.io/devops/restic-basic/","summary":"\u003cp\u003eSnapshots 기능을 제공하는 modern backup program\u003c/p\u003e\n\u003ch2 id=\"restic\"\u003erestic\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://restic.net/\"\u003ehttps://restic.net/\u003c/a\u003e{:target=\u0026quot;_blank\u0026quot;}\u003c/li\u003e\n\u003cli\u003eGo로 만들어진 백업 프로그램, 크로스프랫폼 지원\u003c/li\u003e\n\u003c/ul\u003e\n\u003cpre tabindex=\"0\"\u003e\u003ccode\u003e- from Linux, BSD, Mac and Windows\n- to many different storage types, including self-hosted and online services\n- easily, being a single executable that you can run without a server or complex setup\n- effectively, only transferring the parts that actually changed in the files you back up\n- securely, by careful use of cryptography in every part of the process\n- verifiably, enabling you to make sure that your files can be restored when needed\n- freely - restic is entirely free to use and completely open source\n\u003c/code\u003e\u003c/pre\u003e\u003ch3 id=\"install\"\u003eInstall\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003ePackage 설치 및 Binary 지원\n\u003cul\u003e\n\u003cli\u003ePackage : \u003ca href=\"https://restic.readthedocs.io/en/stable/020_installation.html\"\u003ehttps://restic.readthedocs.io/en/stable/020_installation.html\u003c/a\u003e{:target=\u0026quot;_blank\u0026quot;}\u003c/li\u003e\n\u003cli\u003eBinary : \u003ca href=\"https://github.com/restic/restic/releases/tag/v0.12.1\"\u003ehttps://github.com/restic/restic/releases/tag/v0.12.1\u003c/a\u003e{:target=\u0026quot;_blank\u0026quot;}\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-sh\" data-lang=\"sh\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ curl -LO https://github.com/restic/restic/releases/download/v0.12.1/restic_0.12.1_linux_amd64.bz2\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# install bzip2\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ sudo yum install bzip2 -y\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ bunzip2 restic_0.12.1_linux_amd64.bz2\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ mv restic_0.12.1_linux_amd64 restic\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ sudo mv restic /usr/local/bin\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-sh\" data-lang=\"sh\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ restic\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003erestic is a backup program which allows saving multiple revisions of files and\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003edirectories in an encrypted repository stored on different backends.\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eUsage:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  restic \u003cspan style=\"color:#f92672\"\u003e[\u003c/span\u003ecommand\u003cspan style=\"color:#f92672\"\u003e]\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eAvailable Commands:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  backup        Create a new backup of files and/or directories\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  cache         Operate on local cache directories\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  cat           Print internal objects to stdout\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  check         Check the repository \u003cspan style=\"color:#66d9ef\"\u003efor\u003c/span\u003e errors\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  copy          Copy snapshots from one repository to another\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  diff          Show differences between two snapshots\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  dump          Print a backed-up file to stdout\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  find          Find a file, a directory or restic IDs\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  forget        Remove snapshots from the repository\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  generate      Generate manual pages and auto-completion files \u003cspan style=\"color:#f92672\"\u003e(\u003c/span\u003ebash, fish, zsh\u003cspan style=\"color:#f92672\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  help          Help about any command\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  init          Initialize a new repository\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  key           Manage keys \u003cspan style=\"color:#f92672\"\u003e(\u003c/span\u003epasswords\u003cspan style=\"color:#f92672\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  list          List objects in the repository\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  ls            List files in a snapshot\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  migrate       Apply migrations\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  mount         Mount the repository\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  prune         Remove unneeded data from the repository\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  rebuild-index Build a new index\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  recover       Recover data from the repository\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  restore       Extract the data from a snapshot\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  self-update   Update the restic binary\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  snapshots     List all snapshots\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  stats         Scan the repository and show basic statistics\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  tag           Modify tags on snapshots\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  unlock        Remove locks other processes created\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  version       Print version information\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e....\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003chr\u003e\n\u003ch3 id=\"backup--restore\"\u003eBackup \u0026amp; Restore\u003c/h3\u003e\n\u003ch5 id=\"backup-repository-생성\"\u003eBackup Repository 생성\u003c/h5\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-sh\" data-lang=\"sh\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# Repository 접근을 위한 패드워스 필요, 일단 1111\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# -r, --repo repository repository to backup to or restore from (default: $RESTIC_REPOSITORY)\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ restic init -r repo\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eenter password \u003cspan style=\"color:#66d9ef\"\u003efor\u003c/span\u003e new repository:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eenter password again:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ecreated restic repository 7f3cfb3e9a at repo\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ePlease note that knowledge of your password is required to access\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ethe repository. Losing your password means that your data is\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eirrecoverably lost.\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# password 파일 생성, -p 옵션으로 지정 \u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ echo \u003cspan style=\"color:#ae81ff\"\u003e1111\u003c/span\u003e \u0026gt; passwd\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch5 id=\"backup--snapshots-생성\"\u003eBackup : snapshots 생성\u003c/h5\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-sh\" data-lang=\"sh\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# Backup \u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# restic -r \u0026lt;repository\u0026gt; -p \u0026lt;passwd file\u0026gt; backup \u0026lt;Source\u0026gt;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# -p, --password-file file  file to read the repository password from (default: $RESTIC_PASSWORD_FILE)\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ restic -r repo -p passwd backup /home/cdecl/temp/mvcapp\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003erepository e4ccc49d opened successfully, password is correct\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eno parent snapshot found, will read all files\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eFiles:          \u003cspan style=\"color:#ae81ff\"\u003e79\u003c/span\u003e new,     \u003cspan style=\"color:#ae81ff\"\u003e0\u003c/span\u003e changed,     \u003cspan style=\"color:#ae81ff\"\u003e0\u003c/span\u003e unmodified\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eDirs:           \u003cspan style=\"color:#ae81ff\"\u003e40\u003c/span\u003e new,     \u003cspan style=\"color:#ae81ff\"\u003e0\u003c/span\u003e changed,     \u003cspan style=\"color:#ae81ff\"\u003e0\u003c/span\u003e unmodified\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eAdded to the repo: 4.854 MiB\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eprocessed \u003cspan style=\"color:#ae81ff\"\u003e79\u003c/span\u003e files, 4.811 MiB in 0:00\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003esnapshot 9aff8447 saved\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# 파일생성 및 다시백업 \u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ touch /home/cdecl/temp/mvcapp/test.txt\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ restic -r repo -p passwd backup /home/cdecl/temp/mvcapp\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003erepository e4ccc49d opened successfully, password is correct\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eusing parent snapshot 9aff8447\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eFiles:           \u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e new,     \u003cspan style=\"color:#ae81ff\"\u003e0\u003c/span\u003e changed,    \u003cspan style=\"color:#ae81ff\"\u003e79\u003c/span\u003e unmodified\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eDirs:            \u003cspan style=\"color:#ae81ff\"\u003e0\u003c/span\u003e new,     \u003cspan style=\"color:#ae81ff\"\u003e4\u003c/span\u003e changed,    \u003cspan style=\"color:#ae81ff\"\u003e36\u003c/span\u003e unmodified\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eAdded to the repo: 7.742 KiB\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eprocessed \u003cspan style=\"color:#ae81ff\"\u003e80\u003c/span\u003e files, 4.811 MiB in 0:00\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003esnapshot f4b94d9b saved\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch5 id=\"snapshots-확인\"\u003eSnapshots 확인\u003c/h5\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-sh\" data-lang=\"sh\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# snapshots 2개 화인 확인\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ restic -r repo -p passwd snapshots\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003erepository e4ccc49d opened successfully, password is correct\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eID        Time                 Host        Tags        Paths\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e------------------------------------------------------------------------------\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e9aff8447  2021-11-25 15:17:52  centos1                 /home/cdecl/temp/mvcapp\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ef4b94d9b  2021-11-25 15:22:24  centos1                 /home/cdecl/temp/mvcapp\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e------------------------------------------------------------------------------\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#ae81ff\"\u003e2\u003c/span\u003e snapshots\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cul\u003e\n\u003cli\u003eSnapshots 비교\u003c/li\u003e\n\u003c/ul\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-sh\" data-lang=\"sh\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ restic -r repo -p passwd diff 9aff8447 f4b94d9b\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003erepository e4ccc49d opened successfully, password is correct\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ecomparing snapshot 9aff8447 to f4b94d9b:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e+    /home/cdecl/temp/mvcapp/test.txt\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eFiles:           \u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e new,     \u003cspan style=\"color:#ae81ff\"\u003e0\u003c/span\u003e removed,     \u003cspan style=\"color:#ae81ff\"\u003e0\u003c/span\u003e changed\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eDirs:            \u003cspan style=\"color:#ae81ff\"\u003e0\u003c/span\u003e new,     \u003cspan style=\"color:#ae81ff\"\u003e0\u003c/span\u003e removed\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eOthers:          \u003cspan style=\"color:#ae81ff\"\u003e0\u003c/span\u003e new,     \u003cspan style=\"color:#ae81ff\"\u003e0\u003c/span\u003e removed\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eData Blobs:      \u003cspan style=\"color:#ae81ff\"\u003e0\u003c/span\u003e new,     \u003cspan style=\"color:#ae81ff\"\u003e0\u003c/span\u003e removed\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eTree Blobs:      \u003cspan style=\"color:#ae81ff\"\u003e5\u003c/span\u003e new,     \u003cspan style=\"color:#ae81ff\"\u003e5\u003c/span\u003e removed\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  Added:   7.742 KiB\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  Removed: 7.456 KiB\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch5 id=\"restore--snapshots-에서-복원\"\u003eRestore : Snapshots 에서 복원\u003c/h5\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-sh\" data-lang=\"sh\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# restic -r \u0026lt;repository\u0026gt; -p \u0026lt;passwd file\u0026gt; restore \u0026lt;snapshots id\u0026gt; -t \u0026lt;Target\u0026gt;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ restic -r repo -p passwd restore 9aff8447 -t restore-mvcapp\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003erepository e4ccc49d opened successfully, password is correct\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003erestoring \u0026lt;Snapshot 9aff8447 of \u003cspan style=\"color:#f92672\"\u003e[\u003c/span\u003e/home/cdecl/temp/mvcapp\u003cspan style=\"color:#f92672\"\u003e]\u003c/span\u003e at 2021-11-25 15:17:52.115925352 \n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e +0900 KST by cdecl@centos1\u0026gt; to restore-mvcapp\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch3 id=\"minio--rclone-backend-지원\"\u003eMinIO \u0026amp; RClone Backend 지원\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://restic.readthedocs.io/en/stable/030_preparing_a_new_repo.html\"\u003ehttps://restic.readthedocs.io/en/stable/030_preparing_a_new_repo.html\u003c/a\u003e{:target=\u0026quot;_blank\u0026quot;}\u003c/li\u003e\n\u003c/ul\u003e\n\u003cpre tabindex=\"0\"\u003e\u003ccode\u003eLocal, SFTP, REST Server, Amazon S3, Minio Server, Microsoft Azure Blob Storage, \nGoogle Cloud Storage, Other Services via rclone 등 지원\n\u003c/code\u003e\u003c/pre\u003e\u003ch5 id=\"minio-repository-만들기\"\u003eMinIO Repository 만들기\u003c/h5\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-sh\" data-lang=\"sh\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ export AWS_ACCESS_KEY_ID\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003ekey\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ export AWS_SECRET_ACCESS_KEY\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003epasswd\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$  restic init -r s3:http://minio.server:9000/restic\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eenter password \u003cspan style=\"color:#66d9ef\"\u003efor\u003c/span\u003e new repository:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eenter password again:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ecreated restic repository 65a27250da at s3:http://minio.server:9000/restic\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ePlease note that knowledge of your password is required to access\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ethe repository. Losing your password means that your data is\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eirrecoverably lost.\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# Backup\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ restic -r s3:http://minio.server:9000/restic -p passwd backup /home/cdecl/temp/mvcapp\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# snapshots\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ restic -r s3:http://minio.server:9000/restic -p passwd snapshots\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003erepository 65a27250 opened successfully, password is correct\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eID        Time                 Host        Tags        Paths\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e------------------------------------------------------------------------------\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e73d37fbd  2021-11-25 15:37:34  centos1                 /home/cdecl/temp/mvcapp\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e------------------------------------------------------------------------------\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e snapshots\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch5 id=\"rclone-backend-로-사용\"\u003eRClone Backend 로 사용\u003c/h5\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-sh\" data-lang=\"sh\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ rclone config show\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003e[\u003c/span\u003einfradb\u003cspan style=\"color:#f92672\"\u003e]\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003etype \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e s3\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eenv_auth \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e false\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eaccess_key_id \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e key\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003esecret_access_key \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e passwd\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eregion \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e us-east-1\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eendpoint \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e http://minio.server:9000\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# rclone config 사용 respository 만들기 \u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ restic init -r rclone:infradb:restic\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eenter password \u003cspan style=\"color:#66d9ef\"\u003efor\u003c/span\u003e new repository:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eenter password again:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ecreated restic repository ce850667c9 at rclone:infradb:restic\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ePlease note that knowledge of your password is required to access\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ethe repository. Losing your password means that your data is\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eirrecoverably lost.\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# Backup\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ restic -r rclone:infradb:restic -p passwd backup /home/cdecl/temp/mvcapp\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# snapshots\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ restic -r rclone:infradb:restic -p passwd snapshots\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003chr\u003e\n\u003ch4 id=\"snapshots-관리\"\u003eSnapshots 관리\u003c/h4\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://restic.readthedocs.io/en/stable/060_forget.html\"\u003ehttps://restic.readthedocs.io/en/stable/060_forget.html\u003c/a\u003e{:target=\u0026quot;_blank\u0026quot;}\u003c/li\u003e\n\u003c/ul\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-sh\" data-lang=\"sh\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ restic -r rclone:infradb:restic -p passwd snapshots\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003erepository ce850667 opened successfully, password is correct\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eID        Time                 Host        Tags        Paths\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e------------------------------------------------------------------------------\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ea3737738  2021-11-25 15:44:05  centos1                 /home/cdecl/temp/mvcapp\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e00f16d70  2021-11-25 15:44:50  centos1                 /home/cdecl/temp/mvcapp\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e0e83568a  2021-11-25 15:44:51  centos1                 /home/cdecl/temp/mvcapp\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e4041e3ca  2021-11-25 15:44:53  centos1                 /home/cdecl/temp/mvcapp\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eeb1e56c7  2021-11-25 15:44:54  centos1                 /home/cdecl/temp/mvcapp\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ed81b3d2a  2021-11-25 15:44:55  centos1                 /home/cdecl/temp/mvcapp\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e------------------------------------------------------------------------------\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#ae81ff\"\u003e6\u003c/span\u003e snapshots\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# snapshots 1개 지우기\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ restic -r rclone:infradb:restic -p passwd forget d81b3d2a\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003erepository ce850667 opened successfully, password is correct\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003e[\u003c/span\u003e0:00\u003cspan style=\"color:#f92672\"\u003e]\u003c/span\u003e 100.00%  \u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e / \u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e files deleted\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# 스냅샷의 파일에서 참조한 데이터는 여전히 저장소에 저장\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# 참조되지 않은 데이터를 정리하려면 prune 명령 실행\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ restic -r rclone:infradb:restic -p passwd prune\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003erepository ce850667 opened successfully, password is correct\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eloading indexes...\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eloading all snapshots...\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003efinding data that is still in use \u003cspan style=\"color:#66d9ef\"\u003efor\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e5\u003c/span\u003e snapshots\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003e[\u003c/span\u003e0:00\u003cspan style=\"color:#f92672\"\u003e]\u003c/span\u003e 100.00%  \u003cspan style=\"color:#ae81ff\"\u003e5\u003c/span\u003e / \u003cspan style=\"color:#ae81ff\"\u003e5\u003c/span\u003e snapshots\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003esearching used packs...\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ecollecting packs \u003cspan style=\"color:#66d9ef\"\u003efor\u003c/span\u003e deletion and repacking\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003e[\u003c/span\u003e0:00\u003cspan style=\"color:#f92672\"\u003e]\u003c/span\u003e 100.00%  \u003cspan style=\"color:#ae81ff\"\u003e9\u003c/span\u003e / \u003cspan style=\"color:#ae81ff\"\u003e9\u003c/span\u003e packs processed\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eto repack:            \u003cspan style=\"color:#ae81ff\"\u003e0\u003c/span\u003e blobs / \u003cspan style=\"color:#ae81ff\"\u003e0\u003c/span\u003e B\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ethis removes          \u003cspan style=\"color:#ae81ff\"\u003e0\u003c/span\u003e blobs / \u003cspan style=\"color:#ae81ff\"\u003e0\u003c/span\u003e B\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eto delete:            \u003cspan style=\"color:#ae81ff\"\u003e2\u003c/span\u003e blobs / \u003cspan style=\"color:#ae81ff\"\u003e1004\u003c/span\u003e B\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003etotal prune:          \u003cspan style=\"color:#ae81ff\"\u003e2\u003c/span\u003e blobs / \u003cspan style=\"color:#ae81ff\"\u003e1004\u003c/span\u003e B\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eremaining:          \u003cspan style=\"color:#ae81ff\"\u003e125\u003c/span\u003e blobs / 4.862 MiB\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eunused size after prune: \u003cspan style=\"color:#ae81ff\"\u003e0\u003c/span\u003e B \u003cspan style=\"color:#f92672\"\u003e(\u003c/span\u003e0.00% of remaining size\u003cspan style=\"color:#f92672\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003erebuilding index\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003e[\u003c/span\u003e0:00\u003cspan style=\"color:#f92672\"\u003e]\u003c/span\u003e 100.00%  \u003cspan style=\"color:#ae81ff\"\u003e8\u003c/span\u003e / \u003cspan style=\"color:#ae81ff\"\u003e8\u003c/span\u003e packs processed\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003edeleting obsolete index files\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003e[\u003c/span\u003e0:00\u003cspan style=\"color:#f92672\"\u003e]\u003c/span\u003e 100.00%  \u003cspan style=\"color:#ae81ff\"\u003e6\u003c/span\u003e / \u003cspan style=\"color:#ae81ff\"\u003e6\u003c/span\u003e files deleted\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eremoving \u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e old packs\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003e[\u003c/span\u003e0:00\u003cspan style=\"color:#f92672\"\u003e]\u003c/span\u003e 100.00%  \u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e / \u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e files deleted\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003edone\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# 최근 1개만 놔두고 snapshots 삭제 및 prune\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ restic -r rclone:infradb:restic -p passwd forget --keep-last \u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e --prune\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003erepository ce850667 opened successfully, password is correct\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eApplying Policy: keep \u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e latest snapshots\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ekeep \u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e snapshots:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eID        Time                 Host        Tags        Reasons        Paths\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e---------------------------------------------------------------------------------------------\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eeb1e56c7  2021-11-25 15:44:54  centos1                 last snapshot  /home/cdecl/temp/mvcapp\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e---------------------------------------------------------------------------------------------\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e snapshots\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eremove \u003cspan style=\"color:#ae81ff\"\u003e4\u003c/span\u003e snapshots:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eID        Time                 Host        Tags        Paths\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e------------------------------------------------------------------------------\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ea3737738  2021-11-25 15:44:05  centos1                 /home/cdecl/temp/mvcapp\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e00f16d70  2021-11-25 15:44:50  centos1                 /home/cdecl/temp/mvcapp\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e0e83568a  2021-11-25 15:44:51  centos1                 /home/cdecl/temp/mvcapp\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e4041e3ca  2021-11-25 15:44:53  centos1                 /home/cdecl/temp/mvcapp\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e------------------------------------------------------------------------------\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#ae81ff\"\u003e4\u003c/span\u003e snapshots\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003e[\u003c/span\u003e0:00\u003cspan style=\"color:#f92672\"\u003e]\u003c/span\u003e 100.00%  \u003cspan style=\"color:#ae81ff\"\u003e4\u003c/span\u003e / \u003cspan style=\"color:#ae81ff\"\u003e4\u003c/span\u003e files deleted\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#ae81ff\"\u003e4\u003c/span\u003e snapshots have been removed, running prune\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eloading indexes...\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eloading all snapshots...\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003efinding data that is still in use \u003cspan style=\"color:#66d9ef\"\u003efor\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e snapshots\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003e[\u003c/span\u003e0:00\u003cspan style=\"color:#f92672\"\u003e]\u003c/span\u003e 100.00%  \u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e / \u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e snapshots\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003esearching used packs...\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ecollecting packs \u003cspan style=\"color:#66d9ef\"\u003efor\u003c/span\u003e deletion and repacking\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003e[\u003c/span\u003e0:00\u003cspan style=\"color:#f92672\"\u003e]\u003c/span\u003e 100.00%  \u003cspan style=\"color:#ae81ff\"\u003e8\u003c/span\u003e / \u003cspan style=\"color:#ae81ff\"\u003e8\u003c/span\u003e packs processed\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eto repack:           \u003cspan style=\"color:#ae81ff\"\u003e39\u003c/span\u003e blobs / 47.305 KiB\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ethis removes          \u003cspan style=\"color:#ae81ff\"\u003e2\u003c/span\u003e blobs / \u003cspan style=\"color:#ae81ff\"\u003e1007\u003c/span\u003e B\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eto delete:            \u003cspan style=\"color:#ae81ff\"\u003e6\u003c/span\u003e blobs / 2.950 KiB\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003etotal prune:          \u003cspan style=\"color:#ae81ff\"\u003e8\u003c/span\u003e blobs / 3.934 KiB\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eremaining:          \u003cspan style=\"color:#ae81ff\"\u003e117\u003c/span\u003e blobs / 4.858 MiB\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eunused size after prune: \u003cspan style=\"color:#ae81ff\"\u003e0\u003c/span\u003e B \u003cspan style=\"color:#f92672\"\u003e(\u003c/span\u003e0.00% of remaining size\u003cspan style=\"color:#f92672\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003erepacking packs\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003e[\u003c/span\u003e0:00\u003cspan style=\"color:#f92672\"\u003e]\u003c/span\u003e 100.00%  \u003cspan style=\"color:#ae81ff\"\u003e2\u003c/span\u003e / \u003cspan style=\"color:#ae81ff\"\u003e2\u003c/span\u003e packs repacked\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003erebuilding index\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003e[\u003c/span\u003e0:00\u003cspan style=\"color:#f92672\"\u003e]\u003c/span\u003e 100.00%  \u003cspan style=\"color:#ae81ff\"\u003e5\u003c/span\u003e / \u003cspan style=\"color:#ae81ff\"\u003e5\u003c/span\u003e packs processed\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003edeleting obsolete index files\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003e[\u003c/span\u003e0:00\u003cspan style=\"color:#f92672\"\u003e]\u003c/span\u003e 100.00%  \u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e / \u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e files deleted\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eremoving \u003cspan style=\"color:#ae81ff\"\u003e5\u003c/span\u003e old packs\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003e[\u003c/span\u003e0:00\u003cspan style=\"color:#f92672\"\u003e]\u003c/span\u003e 100.00%  \u003cspan style=\"color:#ae81ff\"\u003e5\u003c/span\u003e / \u003cspan style=\"color:#ae81ff\"\u003e5\u003c/span\u003e files deleted\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003edone\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# snapshots 확인\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ restic -r rclone:infradb:restic -p passwd snapshots\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003erepository ce850667 opened successfully, password is correct\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eID        Time                 Host        Tags        Paths\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e------------------------------------------------------------------------------\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eeb1e56c7  2021-11-25 15:44:54  centos1                 /home/cdecl/temp/mvcapp\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e------------------------------------------------------------------------------\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e snapshots\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cul\u003e\n\u003cli\u003eforget 주요 인수\u003c/li\u003e\n\u003c/ul\u003e\n\u003cpre tabindex=\"0\"\u003e\u003ccode\u003e--keep-last n never delete the n last (most recent) snapshots\n--keep-hourly n for the last n hours in which a snapshot was made, keep only the last snapshot for each hour.\n--keep-daily n for the last n days which have one or more snapshots, only keep the last one for that day.\n--keep-weekly n for the last n weeks which have one or more snapshots, only keep the last one for that week.\n--keep-monthly n for the last n months which have one or more snapshots, only keep the last one for that month.\n--keep-yearly n for the last n years which have one or more snapshots, only keep the last one for that year.\n--keep-tag keep all snapshots which have all tags specified by this option (can be specified multiple times).\n\u003c/code\u003e\u003c/pre\u003e","title":"Restic Basic"},{"content":"네트워크 L4, L7 기능 Reverse proxy 및 Load balancing, HA 기능을 제공하는 최적화된 S/W\nHAProxy Basic 공식 블로그인 만큼 가장 잘 정리된 링크로 상세 설명 대체\nBasic Configuration https://www.haproxy.com/blog/haproxy-configuration-basics-load-balance-your-servers/{:target=\u0026quot;_blank\u0026quot;} 최소 설정 및 기본 항목에 대한 설명 설치 및 적용 centos 7 # install $ sudo yum install haproxy # start $ sudo systemctl start haproxy # status $ sudo systemctl status haproxy ● haproxy.service - HAProxy Load Balancer Loaded: loaded (/usr/lib/systemd/system/haproxy.service; disabled; vendor preset: disabled) Active: active (running) since 화 2021-11-23 13:55:48 KST; 5s ago Main PID: 227598 (haproxy-systemd) Tasks: 3 Memory: 1.9M CGroup: /system.slice/haproxy.service ├─227598 /usr/sbin/haproxy-systemd-wrapper -f /etc/haproxy/haproxy.cfg -p /run/haproxy.pid ├─227599 /usr/sbin/haproxy -f /etc/haproxy/haproxy.cfg -p /run/haproxy.pid -Ds └─227600 /usr/sbin/haproxy -f /etc/haproxy/haproxy.cfg -p /run/haproxy.pid -Ds ... 버전 확인, 지원 모듈, 지원 polling 시스템 확인 epoll 사용 $ haproxy -vv HA-Proxy version 1.5.18 2016/05/10 Copyright 2000-2016 Willy Tarreau \u0026lt;willy@haproxy.org\u0026gt; Build options : TARGET = linux2628 CPU = generic CC = gcc CFLAGS = -O2 -g -fno-strict-aliasing -DTCP_USER_TIMEOUT=18 OPTIONS = USE_LINUX_TPROXY=1 USE_GETADDRINFO=1 USE_ZLIB=1 USE_REGPARM=1 USE_OPENSSL=1 USE_PCRE=1 Default settings : maxconn = 2000, bufsize = 16384, maxrewrite = 8192, maxpollevents = 200 Encrypted password support via crypt(3): yes Built with zlib version : 1.2.7 Compression algorithms supported : identity, deflate, gzip Built with OpenSSL version : OpenSSL 1.0.2k-fips 26 Jan 2017 Running on OpenSSL version : OpenSSL 1.0.2k-fips 26 Jan 2017 OpenSSL library supports TLS extensions : yes OpenSSL library supports SNI : yes OpenSSL library supports prefer-server-ciphers : yes Built with PCRE version : 8.32 2012-11-30 PCRE library supports JIT : no (USE_PCRE_JIT not set) Built with transparent proxy support using: IP_TRANSPARENT IPV6_TRANSPARENT IP_FREEBIND Available polling systems : epoll : pref=300, test result OK poll : pref=200, test result OK select : pref=150, test result OK Total: 3 (3 usable), will use epoll. 기본설정 : /etc/haproxy/haproxy.cfg global : 전역 설정 defaults : 디폴트 설정 frontend : client로 부터 접속 정보, 5000 Port 대기 backend : 요청을 수행하는 서버로 전달, 3대의 서버로 전달 listen : frontend + backend 한꺼번에 정리할 수 있는 섹션, Stats Monitoring UI 설정 global log 127.0.0.1 local2 chroot /var/lib/haproxy pidfile /var/run/haproxy.pid maxconn 4000 user haproxy group haproxy daemon # turn on stats unix socket stats socket /var/lib/haproxy/stats defaults mode http log global option httplog option dontlognull option http-server-close option forwardfor except 127.0.0.0/8 option redispatch retries 3 timeout http-request 10s timeout queue 1m timeout connect 10s timeout client 1m timeout server 1m timeout http-keep-alive 10s timeout check 10s maxconn 3000 listen stats bind :8404 stats enable stats uri /monitor stats refresh 5s frontend front_main bind :5000 option forwardfor default_backend app backend app balance roundrobin server app1 192.168.28.15:30010 check server app2 192.168.28.16:30010 check server app3 192.168.28.17:30010 check SSL 인터페이스 https://serverfault.com/questions/738045/haproxy-to-terminate-ssl-also-send-ssl-to-backend-server{:target=\u0026quot;_blank\u0026quot;} Frontend SSL Bind ... frontend front_main bind :5443 ssl crt /cert/path/domain_keypem.pem option forwardfor default_backend app ... Backend SSL 호출 ... backend app balance roundrobin mode http server app1 192.168.28.15:30443 ssl verify none server app2 192.168.28.16:30443 ssl verify none ... Four Essential Sections https://www.haproxy.com/blog/the-four-essential-sections-of-an-haproxy-configuration/{:target=\u0026quot;_blank\u0026quot;} 4개의 기본 섹션 구조 설명 global # global settings here defaults # defaults here frontend # a frontend that accepts requests from clients backend # servers that fulfill the requests 기타 SSL 설정 : https://www.haproxy.com/blog/haproxy-ssl-termination/{:target=\u0026quot;_blank\u0026quot;} 통계 Web UI : https://www.haproxy.com/blog/exploring-the-haproxy-stats-page/{:target=\u0026quot;_blank\u0026quot;} 튜닝 : Tuning your Linux kernel and HAProxy instance for high loads https://medium.com/@pawilon/tuning-your-linux-kernel-and-haproxy-instance-for-high-loads-1a2105ea553e{:target=\u0026quot;_blank\u0026quot;} haproxy 설정 및 linux kernel tweaks 설정 ","permalink":"https://cdecl.github.io/devops/haproxy-basic/","summary":"\u003cp\u003e네트워크 \u003ccode\u003eL4\u003c/code\u003e, \u003ccode\u003eL7\u003c/code\u003e 기능 \u003ccode\u003eReverse proxy\u003c/code\u003e 및 \u003ccode\u003eLoad balancing\u003c/code\u003e, \u003ccode\u003eHA\u003c/code\u003e 기능을 제공하는 최적화된 \u003ccode\u003eS/W\u003c/code\u003e\u003c/p\u003e\n\u003ch2 id=\"haproxy-basic\"\u003eHAProxy Basic\u003c/h2\u003e\n\u003cp\u003e공식 블로그인 만큼 가장 잘 정리된 링크로 상세 설명 대체\u003c/p\u003e\n\u003ch4 id=\"basic-configuration\"\u003eBasic Configuration\u003c/h4\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://www.haproxy.com/blog/haproxy-configuration-basics-load-balance-your-servers/\"\u003ehttps://www.haproxy.com/blog/haproxy-configuration-basics-load-balance-your-servers/\u003c/a\u003e{:target=\u0026quot;_blank\u0026quot;}\u003c/li\u003e\n\u003cli\u003e최소 설정 및 기본 항목에 대한 설명\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch5 id=\"설치-및-적용-centos-7\"\u003e설치 및 적용 \u003ccode\u003ecentos 7\u003c/code\u003e\u003c/h5\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-sh\" data-lang=\"sh\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# install \u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ sudo yum install haproxy \n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# start\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ sudo systemctl start haproxy \n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# status\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ sudo systemctl status haproxy\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e● haproxy.service - HAProxy Load Balancer\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e   Loaded: loaded \u003cspan style=\"color:#f92672\"\u003e(\u003c/span\u003e/usr/lib/systemd/system/haproxy.service; disabled; vendor preset: disabled\u003cspan style=\"color:#f92672\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e   Active: active \u003cspan style=\"color:#f92672\"\u003e(\u003c/span\u003erunning\u003cspan style=\"color:#f92672\"\u003e)\u003c/span\u003e since 화 2021-11-23 13:55:48 KST; 5s ago\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e Main PID: \u003cspan style=\"color:#ae81ff\"\u003e227598\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e(\u003c/span\u003ehaproxy-systemd\u003cspan style=\"color:#f92672\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    Tasks: \u003cspan style=\"color:#ae81ff\"\u003e3\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e   Memory: 1.9M\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e   CGroup: /system.slice/haproxy.service\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e           ├─227598 /usr/sbin/haproxy-systemd-wrapper -f /etc/haproxy/haproxy.cfg -p /run/haproxy.pid\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e           ├─227599 /usr/sbin/haproxy -f /etc/haproxy/haproxy.cfg -p /run/haproxy.pid -Ds\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e           └─227600 /usr/sbin/haproxy -f /etc/haproxy/haproxy.cfg -p /run/haproxy.pid -Ds\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e...\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch5 id=\"버전-확인-지원-모듈-지원-polling-시스템-확인\"\u003e버전 확인, 지원 모듈, 지원 polling 시스템 확인\u003c/h5\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003eepoll\u003c/code\u003e 사용\u003c/li\u003e\n\u003c/ul\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-sh\" data-lang=\"sh\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ haproxy -vv\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eHA-Proxy version 1.5.18 2016/05/10\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eCopyright 2000-2016 Willy Tarreau \u0026lt;willy@haproxy.org\u0026gt;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eBuild options :\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  TARGET  \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e linux2628\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  CPU     \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e generic\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  CC      \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e gcc\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  CFLAGS  \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e -O2 -g -fno-strict-aliasing -DTCP_USER_TIMEOUT\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#ae81ff\"\u003e18\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  OPTIONS \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e USE_LINUX_TPROXY\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e USE_GETADDRINFO\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e USE_ZLIB\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e USE_REGPARM\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e USE_OPENSSL\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e USE_PCRE\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eDefault settings :\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  maxconn \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e 2000, bufsize \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e 16384, maxrewrite \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e 8192, maxpollevents \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e200\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eEncrypted password support via crypt\u003cspan style=\"color:#f92672\"\u003e(\u003c/span\u003e3\u003cspan style=\"color:#f92672\"\u003e)\u003c/span\u003e: yes\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eBuilt with zlib version : 1.2.7\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eCompression algorithms supported : identity, deflate, gzip\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eBuilt with OpenSSL version : OpenSSL 1.0.2k-fips  \u003cspan style=\"color:#ae81ff\"\u003e26\u003c/span\u003e Jan \u003cspan style=\"color:#ae81ff\"\u003e2017\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eRunning on OpenSSL version : OpenSSL 1.0.2k-fips  \u003cspan style=\"color:#ae81ff\"\u003e26\u003c/span\u003e Jan \u003cspan style=\"color:#ae81ff\"\u003e2017\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eOpenSSL library supports TLS extensions : yes\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eOpenSSL library supports SNI : yes\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eOpenSSL library supports prefer-server-ciphers : yes\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eBuilt with PCRE version : 8.32 2012-11-30\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ePCRE library supports JIT : no \u003cspan style=\"color:#f92672\"\u003e(\u003c/span\u003eUSE_PCRE_JIT not set\u003cspan style=\"color:#f92672\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eBuilt with transparent proxy support using: IP_TRANSPARENT IPV6_TRANSPARENT IP_FREEBIND\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eAvailable polling systems :\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      epoll : pref\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e300,  test result OK\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e       poll : pref\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e200,  test result OK\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e     \u003cspan style=\"color:#66d9ef\"\u003eselect\u003c/span\u003e : pref\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e150,  test result OK\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eTotal: \u003cspan style=\"color:#ae81ff\"\u003e3\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#ae81ff\"\u003e3\u003c/span\u003e usable\u003cspan style=\"color:#f92672\"\u003e)\u003c/span\u003e, will use epoll.\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch5 id=\"기본설정--etchaproxyhaproxycfg\"\u003e기본설정 : /etc/haproxy/haproxy.cfg\u003c/h5\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003eglobal\u003c/code\u003e : 전역 설정\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003edefaults\u003c/code\u003e : 디폴트 설정\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003efrontend\u003c/code\u003e : \u003ccode\u003eclient\u003c/code\u003e로 부터 접속 정보, 5000 Port 대기\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003ebackend\u003c/code\u003e : 요청을 수행하는 서버로 전달, 3대의 서버로 전달\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003elisten\u003c/code\u003e : \u003ccode\u003efrontend\u003c/code\u003e + \u003ccode\u003ebackend\u003c/code\u003e 한꺼번에 정리할 수 있는 섹션, Stats Monitoring UI 설정\u003c/li\u003e\n\u003c/ul\u003e\n\u003cpre tabindex=\"0\"\u003e\u003ccode class=\"language-config\" data-lang=\"config\"\u003eglobal\n    log         127.0.0.1 local2\n\n    chroot      /var/lib/haproxy\n    pidfile     /var/run/haproxy.pid\n    maxconn     4000\n    user        haproxy\n    group       haproxy\n    daemon\n\n    # turn on stats unix socket\n    stats socket /var/lib/haproxy/stats\n\ndefaults\n    mode                    http\n    log                     global\n    option                  httplog\n    option                  dontlognull\n    option http-server-close\n    option forwardfor       except 127.0.0.0/8\n    option                  redispatch\n    retries                 3\n    timeout http-request    10s\n    timeout queue           1m\n    timeout connect         10s\n    timeout client          1m\n    timeout server          1m\n    timeout http-keep-alive 10s\n    timeout check           10s\n    maxconn                 3000\n\nlisten stats\n    bind :8404\n    stats enable\n    stats uri /monitor\n    stats refresh 5s\n\nfrontend  front_main\n    bind :5000 \n    option      forwardfor\n    default_backend   app\n\nbackend app\n    balance     roundrobin\n    server  app1 192.168.28.15:30010 check\n    server  app2 192.168.28.16:30010 check\n    server  app3 192.168.28.17:30010 check\n\u003c/code\u003e\u003c/pre\u003e\u003chr\u003e\n\u003ch3 id=\"ssl-인터페이스\"\u003eSSL 인터페이스\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://serverfault.com/questions/738045/haproxy-to-terminate-ssl-also-send-ssl-to-backend-server\"\u003ehttps://serverfault.com/questions/738045/haproxy-to-terminate-ssl-also-send-ssl-to-backend-server\u003c/a\u003e{:target=\u0026quot;_blank\u0026quot;}\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch5 id=\"frontend-ssl-bind\"\u003eFrontend SSL Bind\u003c/h5\u003e\n\u003cpre tabindex=\"0\"\u003e\u003ccode class=\"language-config\" data-lang=\"config\"\u003e...\nfrontend  front_main\n    bind :5443  ssl crt /cert/path/domain_keypem.pem\n    option      forwardfor\n    default_backend   app\n...\n\u003c/code\u003e\u003c/pre\u003e\u003ch5 id=\"backend-ssl-호출\"\u003eBackend SSL 호출\u003c/h5\u003e\n\u003cpre tabindex=\"0\"\u003e\u003ccode class=\"language-config\" data-lang=\"config\"\u003e...\nbackend app\n    balance     roundrobin\n    mode http \n    server  app1 192.168.28.15:30443 ssl verify none\n    server  app2 192.168.28.16:30443 ssl verify none\n...\n\u003c/code\u003e\u003c/pre\u003e\u003chr\u003e\n\u003ch4 id=\"four-essential-sections\"\u003eFour Essential Sections\u003c/h4\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://www.haproxy.com/blog/the-four-essential-sections-of-an-haproxy-configuration/\"\u003ehttps://www.haproxy.com/blog/the-four-essential-sections-of-an-haproxy-configuration/\u003c/a\u003e{:target=\u0026quot;_blank\u0026quot;}\u003c/li\u003e\n\u003cli\u003e4개의 기본 섹션 구조 설명\u003c/li\u003e\n\u003c/ul\u003e\n\u003cpre tabindex=\"0\"\u003e\u003ccode class=\"language-config\" data-lang=\"config\"\u003eglobal\n    # global settings here\n\ndefaults\n    # defaults here\n\nfrontend\n    # a frontend that accepts requests from clients\n\nbackend\n    # servers that fulfill the requests\n\u003c/code\u003e\u003c/pre\u003e\u003chr\u003e\n\u003ch4 id=\"기타\"\u003e기타\u003c/h4\u003e\n\u003cul\u003e\n\u003cli\u003eSSL 설정 : \u003ca href=\"https://www.haproxy.com/blog/haproxy-ssl-termination/\"\u003ehttps://www.haproxy.com/blog/haproxy-ssl-termination/\u003c/a\u003e{:target=\u0026quot;_blank\u0026quot;}\u003c/li\u003e\n\u003cli\u003e통계 Web UI : \u003ca href=\"https://www.haproxy.com/blog/exploring-the-haproxy-stats-page/\"\u003ehttps://www.haproxy.com/blog/exploring-the-haproxy-stats-page/\u003c/a\u003e{:target=\u0026quot;_blank\u0026quot;}\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e\u003cimg loading=\"lazy\" src=\"/images/2021-11-23-14-46-19.png\"\u003e\u003c/p\u003e","title":"HAProxy Basic"},{"content":"로컬(localhost) 서비스를 터널링을 통해 외부에서 접근 가능하도록 만들어주는 도구들을 소개합니다.\n개발 단계에서 로컬에서 실행 중인 서비스를 외부에 임시로 공개해야 할 때 유용합니다. (보안 및 안정성 문제로 실제 프로덕션 환경에서는 사용하지 않는 것을 권장합니다)\n주요 사용 사례:\n외부 API의 웹훅(webhook) 테스트 클라이언트에게 개발 중인 기능 데모 모바일 기기에서 로컬 개발 서버 접근 협업 시 로컬 개발 환경 공유 localhost.run https://localhost.run/{:target=\u0026quot;_blank\u0026quot;} SSH 리버스 터널링을 활용하여 로컬 서비스를 외부에 노출 별도의 프로그램 설치가 필요 없고 SSH 클라이언트만 있으면 사용 가능 무료로 사용 가능하며 커스텀 도메인 지원 테스트용 서비스 실행 아래 예제에서는 간단한 웹 애플리케이션 컨테이너를 실행하여 테스트합니다.\n# Docker를 사용하여 테스트용 웹 서버 실행 (8000번 포트) $ docker run -d -p 8000:80 cdecl/mvcapp 829885fb866f5820e50265c6d9433dcd7366be05beb56f177a40065eeb6b1cf6 # 로컬 접근 테스트 $ curl localhost:8000 * Project : mvcapp * Version : 0.6 / net5.0 * Hostname : 829885fb866f * Sleep(sync) : 0 * RemoteAddr : 172.17.0.1 * X-Forwarded-For : * Request Count : 1 * User-Agent : curl/7.64.1 터널링 설정 기본 문법: ssh -R 서비스포트:로컬주소:로컬포트 localhost.run 서비스포트 옵션: 80: HTTP 프로토콜용 443: HTTPS 프로토콜용 무료 사용자는 임시 서브도메인이 자동 할당됨 # SSH 리버스 터널 설정 (로컬의 8000번 포트를 외부 80번 포트로 매핑) $ ssh -R 80:localhost:8000 localhost.run =============================================================================== Welcome to localhost.run! Follow your favourite reverse tunnel at [https://twitter.com/localhost_run]. **You need a SSH key to access this service.** If you get a permission denied follow Gitlab\u0026#39;s most excellent howto: https://docs.gitlab.com/ee/ssh/ *Only rsa and ed25519 keys are supported* To set up and manage custom domains go to https://admin.localhost.run/ More details on custom domains (and how to enable subdomains of your custom domain) at https://localhost.run/docs/custom-domains To explore using localhost.run visit the documentation site: https://localhost.run/docs/ =============================================================================== ** your connection id is c1e917e2-6ed0-4b5f-8b55-e032d229e326, please mention it if you send me a message about an issue. ** 6d2ca825416732.lhr.domains tunneled with tls termination, https://6d2ca825416732.lhr.domains 외부 접근 테스트 # 할당된 도메인으로 접근 테스트 $ curl https://6d2ca825416732.lhr.domains/ * Project : mvcapp * Version : 0.6 / net5.0 * Hostname : 829885fb866f * Sleep(sync) : 0 * RemoteAddr : 172.17.0.1 * X-Forwarded-For : 1.227.62.113 * Request Count : 4 * User-Agent : curl/7.64.1 Ngrok https://ngrok.com/{:target=\u0026quot;_blank\u0026quot;} 다양한 프로토콜 지원: HTTP/HTTPS TCP TLS 직관적인 UI와 풍부한 기능 제공 무료/유료 플랜 제공 무료: 기본 기능과 임시 URL 제공 유료: 고정 도메인, 더 긴 세션 시간, 추가 기능 제공 설치 방법 https://ngrok.com/download{:target=\u0026quot;_blank\u0026quot;}에서 다운로드 설치 옵션: 직접 바이너리 다운로드 패키지 매니저를 통한 설치: macOS: brew install ngrok Windows: choco install ngrok Linux: snap install ngrok 터널링 설정 주요 특징:\n실시간 요청 모니터링을 위한 웹 인터페이스 제공 (http://127.0.0.1:4040) 무료 계정의 세션 제한: 기본 2시간 후 만료 계정 생성 및 토큰 설정으로 제한 해제 가능 # 인증 토큰 설정 (선택사항) $ ngrok authtoken \u0026lt;your_auth_token\u0026gt; # HTTP 터널 생성 $ ngrok http 8000 ngrok by @inconshreveable (Ctrl+C to quit) Session Status online Session Expires 1 hour, 59 minutes Version 2.3.40 Region United States (us) Web Interface http://127.0.0.1:4040 Forwarding http://e6fc-1-227-62-113.ngrok.io -\u0026gt; http://localhost:8000 Forwarding https://e6fc-1-227-62-113.ngrok.io -\u0026gt; http://localhost:8000 Connections ttl opn rt1 rt5 p50 p90 0 0 0.00 0.00 0.00 0.00 외부 접근 테스트 $ curl http://e6fc-1-227-62-113.ngrok.io * Project : mvcapp * Version : 0.6 / net5.0 * Hostname : 829885fb866f * Sleep(sync) : 0 * RemoteAddr : 172.17.0.1 * X-Forwarded-For : 1.227.62.113 * Request Count : 5 * User-Agent : curl/7.64.1 추가 팁 ngrok 무료 버전 제한사항: 세션당 2시간 제한 임시 URL만 사용 가능 동시 연결 수 제한 보안 관련 주의사항: 개발 환경에서만 사용 중요한 데이터가 있는 서비스는 노출 주의 가능하면 Basic Auth 등 추가 보안 설정 권장 ","permalink":"https://cdecl.github.io/devops/localhost/","summary":"\u003cp\u003e로컬(localhost) 서비스를 터널링을 통해 외부에서 접근 가능하도록 만들어주는 도구들을 소개합니다.\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003e개발 단계에서 로컬에서 실행 중인 서비스를 외부에 임시로 공개해야 할 때 유용합니다.\n(보안 및 안정성 문제로 실제 프로덕션 환경에서는 사용하지 않는 것을 권장합니다)\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003e주요 사용 사례:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e외부 API의 웹훅(webhook) 테스트\u003c/li\u003e\n\u003cli\u003e클라이언트에게 개발 중인 기능 데모\u003c/li\u003e\n\u003cli\u003e모바일 기기에서 로컬 개발 서버 접근\u003c/li\u003e\n\u003cli\u003e협업 시 로컬 개발 환경 공유\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"localhostrun\"\u003elocalhost.run\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://localhost.run/\"\u003ehttps://localhost.run/\u003c/a\u003e{:target=\u0026quot;_blank\u0026quot;}\u003c/li\u003e\n\u003cli\u003eSSH 리버스 터널링을 활용하여 로컬 서비스를 외부에 노출\u003c/li\u003e\n\u003cli\u003e별도의 프로그램 설치가 필요 없고 SSH 클라이언트만 있으면 사용 가능\u003c/li\u003e\n\u003cli\u003e무료로 사용 가능하며 커스텀 도메인 지원\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"테스트용-서비스-실행\"\u003e테스트용 서비스 실행\u003c/h3\u003e\n\u003cp\u003e아래 예제에서는 간단한 웹 애플리케이션 컨테이너를 실행하여 테스트합니다.\u003c/p\u003e","title":"localhost.run과 ngrok - 로컬 서비스의 외부 노출 도구"},{"content":"Kubernetes 패키지 매니저 도구인 helm을 통해 chart 생성 및 Kubernetes 배포\nK3S 환경에서 테스트\nHelm https://helm.sh/{:target=\u0026quot;_blank\u0026quot;} Kubernetes 배포를 위한 패키지 매니저 툴 (e.g yum, choco) chart 라는 yaml 파일 기반의 템플릿 파일을 통해 패키지화 및 Kubernetes 설치 관리 Deployment, Service, Ingress 등 Kubernetes 서비스의 manifest 생성 및 설치 Helm Repository 를 통해 패키지 등록 및 다른 패키지 설치 가능 Helm Install 바이너리 직접 설치 및 설치 Script 활용 Homebrew, Chocolatey 등의 패키지로도 설치 가능 바이너리 다운로드 https://github.com/helm/helm/releases $ curl -LO https://get.helm.sh/helm-v3.7.1-linux-amd64.tar.gz $ tar -zxvf helm-v3.7.1-linux-amd64.tar.gz $ tree linux-amd64 linux-amd64 ├── LICENSE ├── README.md └── helm $ sudo cp linux-amd64/helm /usr/local/bin/ 설치 Script 활용 $ chmod 700 get_helm.sh $ ./get_helm.sh Creating Your Own Charts kubernetes 설치를 위한 chart 생성 및 세팅 https://helm.sh/docs/helm/helm_create/{:target=\u0026quot;_blank\u0026quot;} # chart 생성 $ helm create mvcapp Creating mvcapp Chart directory 구조 Chart.yaml : Chart 버전, 이미지버전, 설명등을 기술하는 파일 values.yaml : manifest template 파일 기반, 기준 값을 세팅하는 파일 templates/ : kubernetes manifest template 파일 charts/ : chart 의존성 파일 $ tree mvcapp mvcapp ├── Chart.yaml ├── charts ├── templates │ ├── NOTES.txt │ ├── _helpers.tpl │ ├── deployment.yaml │ ├── hpa.yaml │ ├── ingress.yaml │ ├── service.yaml │ ├── serviceaccount.yaml │ └── tests │ └── test-connection.yaml └── values.yaml Chart.yaml 수정 version : Chart 버전 appVersion : Deploy 되는 image 버전 apiVersion: v2 name: mvcapp description: .net core test mvc application # ... 생략 type: application # ... 생략 version: 0.1.0 # ... 생략 appVersion: \u0026#34;0.6\u0026#34; # appVersion: \u0026#34;1.16.0\u0026#34; values.yaml 수정 replicaCount : Pod 의 replica 개수, 2개로 수정 image.repository : docker image 이름, cdecl/mvcapp 로 수정 service.type : On-Premise에서 테스트 목적, NodePort로 수정 service.nodePort : nodePort를 적용하기 위해 신규 추가 # Default values for mvcapp. # This is a YAML-formatted file. # Declare variables to be passed into your templates. replicaCount: 2 image: repository: cdecl/mvcapp pullPolicy: IfNotPresent # Overrides the image tag whose default is the chart appVersion. tag: \u0026#34;\u0026#34; imagePullSecrets: [] nameOverride: \u0026#34;\u0026#34; fullnameOverride: \u0026#34;\u0026#34; # ... 생략 service: type: NodePort # ClusterIP port: 80 nodePort: 30010 ingress: # ... 생략 resources: {} # We usually recommend not to specify default resources and to leave this as a conscious # choice for the user. This also increases chances charts run on environments with little # resources, such as Minikube. If you do want to specify resources, uncomment the following # lines, adjust them as necessary, and remove the curly braces after \u0026#39;resources:\u0026#39;. # limits: # cpu: 100m # memory: 128Mi # requests: # cpu: 100m # memory: 128Mi # ... 생략 templates/service.yaml 수정 nodePort 를 적용하기 위해 template 수정 spec.ports.nodePort: {{ .Values.service.nodePort }} 추가 apiVersion: v1 kind: Service metadata: name: {{ include \u0026#34;mvcapp.fullname\u0026#34; . }} labels: {{- include \u0026#34;mvcapp.labels\u0026#34; . | nindent 4 }} spec: type: {{ .Values.service.type }} ports: - port: {{ .Values.service.port }} targetPort: http pro name: http nodePort: {{ .Values.service.nodePort }} selector: {{- include \u0026#34;mvcapp.selectorLabels\u0026#34; . | nindent 4 }} helm lint : chart 파일 검사 https://helm.sh/docs/helm/helm_lint/{:target=\u0026quot;_blank\u0026quot;} $ helm lint mvcapp ==\u0026gt; Linting mvcapp [INFO] Chart.yaml: icon is recommended 1 chart(s) linted, 0 chart(s) failed helm template : kubernetes manifest 생성 https://helm.sh/docs/helm/helm_template/{:target=\u0026quot;_blank\u0026quot;} values.yaml 에 세팅한 기준으로 manifest 생성 $ helm template mvcapp --- # Source: mvcapp/templates/serviceaccount.yaml apiVersion: v1 kind: ServiceAccount metadata: name: RELEASE-NAME-mvcapp labels: helm.sh/chart: mvcapp-0.1.0 app.kubernetes.io/name: mvcapp app.kubernetes.io/instance: RELEASE-NAME app.kubernetes.io/version: \u0026#34;0.6\u0026#34; app.kubernetes.io/managed-by: Helm --- # Source: mvcapp/templates/service.yaml apiVersion: v1 kind: Service metadata: name: RELEASE-NAME-mvcapp labels: helm.sh/chart: mvcapp-0.1.0 app.kubernetes.io/name: mvcapp app.kubernetes.io/instance: RELEASE-NAME app.kubernetes.io/version: \u0026#34;0.6\u0026#34; app.kubernetes.io/managed-by: Helm spec: type: NodePort ports: - port: 80 targetPort: http pro name: http selector: app.kubernetes.io/name: mvcapp app.kubernetes.io/instance: RELEASE-NAME --- # Source: mvcapp/templates/deployment.yaml apiVersion: apps/v1 kind: Deployment metadata: name: RELEASE-NAME-mvcapp labels: helm.sh/chart: mvcapp-0.1.0 app.kubernetes.io/name: mvcapp app.kubernetes.io/instance: RELEASE-NAME app.kubernetes.io/version: \u0026#34;0.6\u0026#34; app.kubernetes.io/managed-by: Helm spec: replicas: 2 selector: matchLabels: app.kubernetes.io/name: mvcapp app.kubernetes.io/instance: RELEASE-NAME template: metadata: labels: app.kubernetes.io/name: mvcapp app.kubernetes.io/instance: RELEASE-NAME spec: serviceAccountName: RELEASE-NAME-mvcapp securityContext: {} containers: - name: mvcapp securityContext: {} image: \u0026#34;cdecl/mvcapp:0.6\u0026#34; imagePullPolicy: IfNotPresent ports: - name: http containerPort: 80 pro livenessProbe: httpGet: path: / port: http readinessProbe: httpGet: path: / port: http resources: {} --- # Source: mvcapp/templates/tests/test-connection.yaml apiVersion: v1 kind: Pod metadata: name: \u0026#34;RELEASE-NAME-mvcapp-test-connection\u0026#34; labels: helm.sh/chart: mvcapp-0.1.0 app.kubernetes.io/name: mvcapp app.kubernetes.io/instance: RELEASE-NAME app.kubernetes.io/version: \u0026#34;0.6\u0026#34; app.kubernetes.io/managed-by: Helm annotations: \u0026#34;helm.sh/hook\u0026#34;: test spec: containers: - name: wget image: busybox command: [\u0026#39;wget\u0026#39;] args: [\u0026#39;RELEASE-NAME-mvcapp:80\u0026#39;] restartPolicy: Never helm install : chart 활용 kubernetes service install https://helm.sh/docs/helm/helm_install/{:target=\u0026quot;_blank\u0026quot;} install : helm install [NAME] [CHART] [flags] # 설치하지는 않고 테스트 $ helm install mvcapp-svc mvcapp --dry-run # 로컬 Chart 를 통한 설치 $ helm install mvcapp-svc mvcapp NAME: mvcapp-svc LAST DEPLOYED: Thu Nov 4 13:29:38 2021 NAMESPACE: default STATUS: deployed REVISION: 1 NOTES: 1. Get the application URL by running these commands: export NODE_PORT=$(kubectl get --namespace default -o jsonpath=\u0026#34;{.spec.ports[0].nodePort}\u0026#34; services mvcapp-svc) export NODE_IP=$(kubectl get nodes --namespace default -o jsonpath=\u0026#34;{.items[0].status.addresses[0].address}\u0026#34;) echo http://$NODE_IP:$NODE_PORT $ kubectl get svc NAME TYPE CLUSTER-IP EXTERNAL-IP PORT(S) AGE kubernetes ClusterIP 10.43.0.1 \u0026lt;none\u0026gt; 443/TCP 78d mvcapp-svc NodePort 10.43.202.254 \u0026lt;none\u0026gt; 80:31503/TCP 29s $ kubectl get pod NAME READY STATUS RESTARTS AGE mvcapp-svc-78ff4d97f9-hd9rf 1/1 Running 0 37s mvcapp-svc-78ff4d97f9-x4984 1/1 Running 0 37s KS3 export KUBECONFIG=/etc/rancher/k3s/k3s.yaml 세팅\nhelm upgrade, helm uninstall upgrade : helm upgrade [NAME] [CHART] [flags] uninstall : helm uninstall [NAME] $ helm upgrade mvcapp-svc mvcapp Release \u0026#34;mvcapp-svc\u0026#34; has been upgraded. Happy Helming! NAME: mvcapp-svc LAST DEPLOYED: Thu Nov 4 13:44:54 2021 NAMESPACE: default STATUS: deployed REVISION: 5 ... # helm list $ helm list NAME NAMESPACE REVISION UPDATED STATUS CHART APP VERSION mvcapp-svc default 5 2021-11-04 13:44:54.170028077 +0900 KST deployed mvcapp-0.1.0 0.6 # helm history $ helm history mvcapp-svc REVISION UPDATED STATUS CHART APP VERSION DESCRIPTION 1 Thu Nov 4 13:42:12 2021 superseded mvcapp-0.1.0 0.6 Install complete 2 Thu Nov 4 13:42:58 2021 superseded mvcapp-0.1.0 0.5 Upgrade complete 3 Thu Nov 4 13:43:40 2021 superseded mvcapp-0.1.0 0.6 Rollback to 1 4 Thu Nov 4 13:44:32 2021 superseded mvcapp-0.1.0 0.5 Upgrade complete 5 Thu Nov 4 13:44:54 2021 deployed mvcapp-0.1.0 0.6 Upgrade complete # helm uninstall $ helm uninstall mvcapp-svc release \u0026#34;mvcapp-svc\u0026#34; uninstalled Chart package, repository helm package https://helm.sh/docs/helm/helm_package/{:target=\u0026quot;_blank\u0026quot;} chart 디렉토리를 압축하여 패키지화 $ helm package mvcapp Successfully packaged chart and saved it to: /home/cdecl/temp/helm/mvcapp-0.1.0.tgz Local repository directory https://helm.sh/docs/helm/helm_repo_index/{:target=\u0026quot;_blank\u0026quot;} helm repo index : 패키지된 차트의 Index 파일 생성 # repository local directory $ mkdir chart-repo # index 파일 생성 $ helm repo index chart-repo $ cat chart-repo/index.yaml apiVersion: v1 entries: {} generated: \u0026#34;2021-11-04T14:00:37.388050909+09:00\u0026#34; # chart package 파일 넣기 $ mv mvcapp-0.1.0.tgz chart-repo # index 파일 갱신 $ helm repo index chart-repo $ cat chart-repo/index.yaml apiVersion: v1 entries: mvcapp: - apiVersion: v2 appVersion: \u0026#34;0.6\u0026#34; created: \u0026#34;2021-11-04T14:02:46.688756427+09:00\u0026#34; description: A Helm chart for Kubernetes digest: ff28f1c2434531c801bf68106bd5b314e4ff90adac5619e6856d9765052afb83 name: mvcapp type: application urls: - mvcapp-0.1.0.tgz version: 0.1.0 generated: \u0026#34;2021-11-04T14:02:46.688277626+09:00\u0026#34; Github chart repository 활용 github repository 생성 및 local repository directory push github repository page 세팅 Repository 등록 및 설치 github page url 로 등록 # add $ helm repo add github https://cdecl.github.io/chart-repo/ \u0026#34;github\u0026#34; has been added to your repositories # list $ helm repo list NAME URL stable https://charts.helm.sh/stable github https://cdecl.github.io/chart-repo/ # search $ helm search repo mvcapp NAME CHART VERSION APP VERSION DESCRIPTION github/mvcapp 0.1.0 0.6 A Helm chart for Kubernetes # install from repository $ helm install mvcapp-svc github/mvcapp NAME: mvcapp-svc LAST DEPLOYED: Fri Nov 5 15:46:24 2021 NAMESPACE: default STATUS: deployed REVISION: 1 NOTES: 1. Get the application URL by running these commands: export NODE_PORT=$(kubectl get --namespace default -o jsonpath=\u0026#34;{.spec.ports[0].nodePort}\u0026#34; services mvcapp-svc) export NODE_IP=$(kubectl get nodes --namespace default -o jsonpath=\u0026#34;{.items[0].status.addresses[0].address}\u0026#34;) echo http://$NODE_IP:$NODE_PORT ConfigMap 적용 templates/ 경로에 ConfigMap yaml 파일 생성 templates/configmap.yaml 내부에 .Files.Get \u0026quot;PATH\u0026quot; 로 정의된 PATH 파일을 패키지 디렉토리에 위치 $ cat mvcapp/templates/configmap.yaml apiVersion: v1 kind: ConfigMap metadata: name: {{ .Release.Name }}-configmap data: config.json: |- {{ .Files.Get \u0026#34;config.json\u0026#34; | indent 4}} $ cat mvcapp/config.json { \u0026#34;url\u0026#34;: \u0026#34;https://cdecl.github.io/\u0026#34; } $ helm template mvcapp --- # ... 생략 --- # Source: mvcapp/templates/configmap.yaml apiVersion: v1 kind: ConfigMap metadata: name: RELEASE-NAME-configmap data: config.json: |- { \u0026#34;url\u0026#34;: \u0026#34;https://cdecl.github.io/\u0026#34; } --- # ... 생략 ","permalink":"https://cdecl.github.io/devops/helm-chart-install/","summary":"\u003cp\u003e\u003ccode\u003eKubernetes\u003c/code\u003e 패키지 매니저 도구인 \u003ccode\u003ehelm\u003c/code\u003e을 통해 \u003ccode\u003echart\u003c/code\u003e 생성 및 \u003ccode\u003eKubernetes\u003c/code\u003e 배포\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003eK3S 환경에서 테스트\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003ch2 id=\"helm\"\u003eHelm\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://helm.sh/\"\u003ehttps://helm.sh/\u003c/a\u003e{:target=\u0026quot;_blank\u0026quot;}\u003c/li\u003e\n\u003cli\u003eKubernetes 배포를 위한 패키지 매니저 툴 (e.g \u003ccode\u003eyum\u003c/code\u003e, \u003ccode\u003echoco\u003c/code\u003e)\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003echart\u003c/code\u003e 라는 \u003ccode\u003eyaml\u003c/code\u003e 파일 기반의 템플릿 파일을 통해 패키지화 및 \u003ccode\u003eKubernetes\u003c/code\u003e 설치 관리\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003eDeployment\u003c/code\u003e, \u003ccode\u003eService\u003c/code\u003e, \u003ccode\u003eIngress\u003c/code\u003e 등 \u003ccode\u003eKubernetes\u003c/code\u003e 서비스의 manifest 생성 및 설치\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003eHelm Repository 를 통해 패키지 등록 및 다른 패키지 설치 가능\u003c/li\u003e\n\u003c/ul\u003e\n\u003chr\u003e\n\u003ch3 id=\"helm-install\"\u003eHelm Install\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e바이너리 직접 설치 및 설치 Script 활용\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eHomebrew\u003c/code\u003e, \u003ccode\u003eChocolatey\u003c/code\u003e 등의 패키지로도 설치 가능\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch5 id=\"바이너리-다운로드\"\u003e바이너리 다운로드\u003c/h5\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://github.com/helm/helm/releases\"\u003ehttps://github.com/helm/helm/releases\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-sh\" data-lang=\"sh\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ curl -LO https://get.helm.sh/helm-v3.7.1-linux-amd64.tar.gz\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ tar -zxvf helm-v3.7.1-linux-amd64.tar.gz\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ tree linux-amd64\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003elinux-amd64\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e├── LICENSE\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e├── README.md\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e└── helm\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ sudo cp linux-amd64/helm /usr/local/bin/\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch5 id=\"설치-script-활용\"\u003e설치 Script 활용\u003c/h5\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-sh\" data-lang=\"sh\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ chmod \u003cspan style=\"color:#ae81ff\"\u003e700\u003c/span\u003e get_helm.sh\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ ./get_helm.sh\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003chr\u003e\n\u003ch3 id=\"creating-your-own-charts\"\u003eCreating Your Own Charts\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003ekubernetes\u003c/code\u003e 설치를 위한 \u003ccode\u003echart\u003c/code\u003e 생성 및 세팅\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://helm.sh/docs/helm/helm_create/\"\u003ehttps://helm.sh/docs/helm/helm_create/\u003c/a\u003e{:target=\u0026quot;_blank\u0026quot;}\u003c/li\u003e\n\u003c/ul\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-sh\" data-lang=\"sh\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# chart 생성\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ helm create mvcapp\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eCreating mvcapp\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch5 id=\"chart-directory-구조\"\u003eChart directory 구조\u003c/h5\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003eChart.yaml\u003c/code\u003e : Chart 버전, 이미지버전, 설명등을 기술하는 파일\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003evalues.yaml\u003c/code\u003e : manifest template 파일 기반, 기준 값을 세팅하는 파일\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003etemplates/\u003c/code\u003e : kubernetes manifest template 파일\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003echarts/\u003c/code\u003e  : chart 의존성 파일\u003c/li\u003e\n\u003c/ul\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-sh\" data-lang=\"sh\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ tree mvcapp\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003emvcapp\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e├── Chart.yaml\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e├── charts\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e├── templates\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e│   ├── NOTES.txt\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e│   ├── _helpers.tpl\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e│   ├── deployment.yaml\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e│   ├── hpa.yaml\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e│   ├── ingress.yaml\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e│   ├── service.yaml\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e│   ├── serviceaccount.yaml\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e│   └── tests\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e│       └── test-connection.yaml\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e└── values.yaml\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch5 id=\"chartyaml-수정\"\u003e\u003ccode\u003eChart.yaml\u003c/code\u003e 수정\u003c/h5\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003eversion\u003c/code\u003e : Chart 버전\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eappVersion\u003c/code\u003e : Deploy 되는 image 버전\u003c/li\u003e\n\u003c/ul\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-yaml\" data-lang=\"yaml\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003eapiVersion\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003ev2\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003ename\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003emvcapp\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003edescription\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003e.net core test mvc application\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# ... 생략\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003etype\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003eapplication\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# ... 생략\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003eversion\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003e0.1.0\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# ... 생략\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003eappVersion\u003c/span\u003e: \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;0.6\u0026#34;\u003c/span\u003e  \u003cspan style=\"color:#75715e\"\u003e# appVersion: \u0026#34;1.16.0\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch5 id=\"valuesyaml-수정\"\u003e\u003ccode\u003evalues.yaml\u003c/code\u003e 수정\u003c/h5\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003ereplicaCount\u003c/code\u003e : Pod 의 replica 개수, 2개로 수정\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eimage.repository\u003c/code\u003e : docker image 이름, \u003ccode\u003ecdecl/mvcapp\u003c/code\u003e 로 수정\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eservice.type\u003c/code\u003e : \u003ccode\u003eOn-Premise\u003c/code\u003e에서 테스트 목적, \u003ccode\u003eNodePort\u003c/code\u003e로 수정\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eservice.nodePort\u003c/code\u003e : \u003ccode\u003enodePort\u003c/code\u003e를 적용하기 위해 신규 추가\u003c/li\u003e\n\u003c/ul\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-yaml\" data-lang=\"yaml\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# Default values for mvcapp.\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# This is a YAML-formatted file.\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# Declare variables to be passed into your templates.\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003ereplicaCount\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003e2\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003eimage\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#f92672\"\u003erepository\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003ecdecl/mvcapp\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#f92672\"\u003epullPolicy\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003eIfNotPresent\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#75715e\"\u003e# Overrides the image tag whose default is the chart appVersion.\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#f92672\"\u003etag\u003c/span\u003e: \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003eimagePullSecrets\u003c/span\u003e: []\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003enameOverride\u003c/span\u003e: \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003efullnameOverride\u003c/span\u003e: \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# ... 생략\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003eservice\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#f92672\"\u003etype\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003eNodePort  \u003c/span\u003e \u003cspan style=\"color:#75715e\"\u003e# ClusterIP\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#f92672\"\u003eport\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003e80\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#f92672\"\u003enodePort\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003e30010\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003eingress\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# ... 생략\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003eresources\u003c/span\u003e: {}\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#75715e\"\u003e# We usually recommend not to specify default resources and to leave this as a conscious\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#75715e\"\u003e# choice for the user. This also increases chances charts run on environments with little\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#75715e\"\u003e# resources, such as Minikube. If you do want to specify resources, uncomment the following\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#75715e\"\u003e# lines, adjust them as necessary, and remove the curly braces after \u0026#39;resources:\u0026#39;.\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#75715e\"\u003e# limits:\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#75715e\"\u003e#   cpu: 100m\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#75715e\"\u003e#   memory: 128Mi\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#75715e\"\u003e# requests:\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#75715e\"\u003e#   cpu: 100m\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#75715e\"\u003e#   memory: 128Mi\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# ... 생략\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch5 id=\"templatesserviceyaml-수정\"\u003e\u003ccode\u003etemplates/service.yaml\u003c/code\u003e 수정\u003c/h5\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003enodePort\u003c/code\u003e 를 적용하기 위해 template 수정\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003espec.ports.nodePort: {{ .Values.service.nodePort }}\u003c/code\u003e 추가\u003c/li\u003e\n\u003c/ul\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-yaml\" data-lang=\"yaml\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003eapiVersion\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003ev1\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003ekind\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003eService\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003emetadata\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#f92672\"\u003ename\u003c/span\u003e: {{ \u003cspan style=\"color:#ae81ff\"\u003einclude \u0026#34;mvcapp.fullname\u0026#34; . }}\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#f92672\"\u003elabels\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    {{- \u003cspan style=\"color:#ae81ff\"\u003einclude \u0026#34;mvcapp.labels\u0026#34; . | nindent 4 }}\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003espec\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#f92672\"\u003etype\u003c/span\u003e: {{ \u003cspan style=\"color:#ae81ff\"\u003e.Values.service.type }}\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#f92672\"\u003eports\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    - \u003cspan style=\"color:#f92672\"\u003eport\u003c/span\u003e: {{ \u003cspan style=\"color:#ae81ff\"\u003e.Values.service.port }}\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      \u003cspan style=\"color:#f92672\"\u003etargetPort\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003ehttp\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      \u003cspan style=\"color:#ae81ff\"\u003epro\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      \u003cspan style=\"color:#f92672\"\u003ename\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003ehttp\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      \u003cspan style=\"color:#f92672\"\u003enodePort\u003c/span\u003e: {{ \u003cspan style=\"color:#ae81ff\"\u003e.Values.service.nodePort }}\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#f92672\"\u003eselector\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    {{- \u003cspan style=\"color:#ae81ff\"\u003einclude \u0026#34;mvcapp.selectorLabels\u0026#34; . | nindent 4 }}\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch5 id=\"helm-lint--chart-파일-검사\"\u003e\u003ccode\u003ehelm lint\u003c/code\u003e : chart 파일 검사\u003c/h5\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://helm.sh/docs/helm/helm_lint/\"\u003ehttps://helm.sh/docs/helm/helm_lint/\u003c/a\u003e{:target=\u0026quot;_blank\u0026quot;}\u003c/li\u003e\n\u003c/ul\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-sh\" data-lang=\"sh\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ helm lint mvcapp\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003e==\u003c/span\u003e\u0026gt; Linting mvcapp\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003e[\u003c/span\u003eINFO\u003cspan style=\"color:#f92672\"\u003e]\u003c/span\u003e Chart.yaml: icon is recommended\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e chart\u003cspan style=\"color:#f92672\"\u003e(\u003c/span\u003es\u003cspan style=\"color:#f92672\"\u003e)\u003c/span\u003e linted, \u003cspan style=\"color:#ae81ff\"\u003e0\u003c/span\u003e chart\u003cspan style=\"color:#f92672\"\u003e(\u003c/span\u003es\u003cspan style=\"color:#f92672\"\u003e)\u003c/span\u003e failed\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch5 id=\"helm-template--kubernetes-manifest-생성\"\u003e\u003ccode\u003ehelm template\u003c/code\u003e : kubernetes manifest 생성\u003c/h5\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://helm.sh/docs/helm/helm_template/\"\u003ehttps://helm.sh/docs/helm/helm_template/\u003c/a\u003e{:target=\u0026quot;_blank\u0026quot;}\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003evalues.yaml\u003c/code\u003e 에 세팅한 기준으로 manifest 생성\u003c/li\u003e\n\u003c/ul\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-sh\" data-lang=\"sh\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ helm template mvcapp\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e---\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# Source: mvcapp/templates/serviceaccount.yaml\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eapiVersion: v1\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ekind: ServiceAccount\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003emetadata:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  name: RELEASE-NAME-mvcapp\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  labels:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    helm.sh/chart: mvcapp-0.1.0\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    app.kubernetes.io/name: mvcapp\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    app.kubernetes.io/instance: RELEASE-NAME\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    app.kubernetes.io/version: \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;0.6\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    app.kubernetes.io/managed-by: Helm\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e---\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# Source: mvcapp/templates/service.yaml\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eapiVersion: v1\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ekind: Service\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003emetadata:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  name: RELEASE-NAME-mvcapp\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  labels:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    helm.sh/chart: mvcapp-0.1.0\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    app.kubernetes.io/name: mvcapp\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    app.kubernetes.io/instance: RELEASE-NAME\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    app.kubernetes.io/version: \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;0.6\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    app.kubernetes.io/managed-by: Helm\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003espec:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  type: NodePort\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  ports:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    - port: \u003cspan style=\"color:#ae81ff\"\u003e80\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      targetPort: http\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      pro\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      name: http\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  selector:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    app.kubernetes.io/name: mvcapp\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    app.kubernetes.io/instance: RELEASE-NAME\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e---\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# Source: mvcapp/templates/deployment.yaml\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eapiVersion: apps/v1\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ekind: Deployment\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003emetadata:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  name: RELEASE-NAME-mvcapp\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  labels:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    helm.sh/chart: mvcapp-0.1.0\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    app.kubernetes.io/name: mvcapp\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    app.kubernetes.io/instance: RELEASE-NAME\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    app.kubernetes.io/version: \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;0.6\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    app.kubernetes.io/managed-by: Helm\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003espec:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  replicas: \u003cspan style=\"color:#ae81ff\"\u003e2\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  selector:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    matchLabels:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      app.kubernetes.io/name: mvcapp\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      app.kubernetes.io/instance: RELEASE-NAME\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  template:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    metadata:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      labels:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        app.kubernetes.io/name: mvcapp\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        app.kubernetes.io/instance: RELEASE-NAME\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    spec:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      serviceAccountName: RELEASE-NAME-mvcapp\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      securityContext:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#f92672\"\u003e{}\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      containers:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        - name: mvcapp\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e          securityContext:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e            \u003cspan style=\"color:#f92672\"\u003e{}\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e          image: \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;cdecl/mvcapp:0.6\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e          imagePullPolicy: IfNotPresent\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e          ports:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e            - name: http\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e              containerPort: \u003cspan style=\"color:#ae81ff\"\u003e80\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e              pro\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e          livenessProbe:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e            httpGet:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e              path: /\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e              port: http\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e          readinessProbe:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e            httpGet:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e              path: /\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e              port: http\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e          resources:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e            \u003cspan style=\"color:#f92672\"\u003e{}\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e---\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# Source: mvcapp/templates/tests/test-connection.yaml\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eapiVersion: v1\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ekind: Pod\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003emetadata:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  name: \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;RELEASE-NAME-mvcapp-test-connection\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  labels:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    helm.sh/chart: mvcapp-0.1.0\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    app.kubernetes.io/name: mvcapp\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    app.kubernetes.io/instance: RELEASE-NAME\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    app.kubernetes.io/version: \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;0.6\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    app.kubernetes.io/managed-by: Helm\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  annotations:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;helm.sh/hook\u0026#34;\u003c/span\u003e: test\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003espec:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  containers:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    - name: wget\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      image: busybox\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      command: \u003cspan style=\"color:#f92672\"\u003e[\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;wget\u0026#39;\u003c/span\u003e\u003cspan style=\"color:#f92672\"\u003e]\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      args: \u003cspan style=\"color:#f92672\"\u003e[\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;RELEASE-NAME-mvcapp:80\u0026#39;\u003c/span\u003e\u003cspan style=\"color:#f92672\"\u003e]\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  restartPolicy: Never\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch5 id=\"helm-install--chart-활용-kubernetes-service-install\"\u003e\u003ccode\u003ehelm install\u003c/code\u003e : chart 활용 kubernetes service install\u003c/h5\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://helm.sh/docs/helm/helm_install/\"\u003ehttps://helm.sh/docs/helm/helm_install/\u003c/a\u003e{:target=\u0026quot;_blank\u0026quot;}\u003c/li\u003e\n\u003cli\u003einstall : \u003ccode\u003ehelm install [NAME] [CHART] [flags]\u003c/code\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-sh\" data-lang=\"sh\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# 설치하지는 않고 테스트 \u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ helm install mvcapp-svc mvcapp --dry-run\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# 로컬 Chart 를 통한 설치 \u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ helm install mvcapp-svc mvcapp\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eNAME: mvcapp-svc\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eLAST DEPLOYED: Thu Nov  \u003cspan style=\"color:#ae81ff\"\u003e4\u003c/span\u003e 13:29:38 \u003cspan style=\"color:#ae81ff\"\u003e2021\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eNAMESPACE: default\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eSTATUS: deployed\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eREVISION: \u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eNOTES:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e1. Get the application URL by running these commands:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  export NODE_PORT\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#66d9ef\"\u003e$(\u003c/span\u003ekubectl get --namespace default -o jsonpath\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;{.spec.ports[0].nodePort}\u0026#34;\u003c/span\u003e services mvcapp-svc\u003cspan style=\"color:#66d9ef\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  export NODE_IP\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#66d9ef\"\u003e$(\u003c/span\u003ekubectl get nodes --namespace default -o jsonpath\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;{.items[0].status.addresses[0].address}\u0026#34;\u003c/span\u003e\u003cspan style=\"color:#66d9ef\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  echo http://$NODE_IP:$NODE_PORT\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ kubectl get svc\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eNAME         TYPE        CLUSTER-IP      EXTERNAL-IP   PORT\u003cspan style=\"color:#f92672\"\u003e(\u003c/span\u003eS\u003cspan style=\"color:#f92672\"\u003e)\u003c/span\u003e        AGE\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ekubernetes   ClusterIP   10.43.0.1       \u0026lt;none\u0026gt;        443/TCP        78d\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003emvcapp-svc   NodePort    10.43.202.254   \u0026lt;none\u0026gt;        80:31503/TCP   29s\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ kubectl get pod\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eNAME                          READY   STATUS    RESTARTS   AGE\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003emvcapp-svc-78ff4d97f9-hd9rf   1/1     Running   \u003cspan style=\"color:#ae81ff\"\u003e0\u003c/span\u003e          37s\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003emvcapp-svc-78ff4d97f9-x4984   1/1     Running   \u003cspan style=\"color:#ae81ff\"\u003e0\u003c/span\u003e          37s\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cblockquote\u003e\n\u003cp\u003eKS3 \u003ccode\u003eexport KUBECONFIG=/etc/rancher/k3s/k3s.yaml\u003c/code\u003e 세팅\u003c/p\u003e","title":"Helm chart 생성, 배포"},{"content":"asyncio는 async/await 구문을 사용하여 동시성 코드를 작성하는 라이브러리입니다. 특히 I/O 작업이 많은 애플리케이션에서 높은 성능을 발휘합니다.\nasyncio : asynchronous io 처리 https://docs.python.org/ko/3/library/asyncio.html{:target=\u0026quot;_blank\u0026quot;} Threading 동시성 제어는 GIL (Global interpreter lock) 제약에 의해 느리고, 복잡도는 그대로 가지고 있음 GIL은 Python 인터프리터가 한 번에 하나의 스레드만 실행할 수 있도록 제한하는 메커니즘 멀티스레드를 사용해도 CPU 연산의 실제 병렬 처리가 어려움 IO 병목에 의한 동시성을 관리하기 위한 도구로서 Coroutine을 통한 관리 네트워크 요청, 파일 읽기/쓰기 등 I/O 작업에서 효율적 코루틴은 스레드보다 가벼워서 수천 개의 동시 작업도 효율적으로 처리 가능 일반적인 Coroutine 코드 Coroutine으로 실행 되기는 하나, 비동기로 실행 되지는 않음 async def로 정의된 함수는 코루틴 함수가 됨 await는 다른 코루틴의 실행이 완료될 때까지 대기 asyncio.sleep()은 I/O 작업을 시뮬레이션하는 용도로 자주 사용됨 import asyncio from datetime import datetime def time_log(step): print(datetime.now().strftime(\u0026#39;%H:%M:%S\u0026#39;), step) async def async_sleep(): await asyncio.sleep(2) time_log(\u0026#39;async_sleep\u0026#39;) async def async_execute(): time_log(\u0026#39;start\u0026#39;) await async_sleep() await async_sleep() time_log(\u0026#39;end\u0026#39;) def main(): asyncio.run(async_execute()) if __name__ == \u0026#39;__main__\u0026#39;: main() [Running] set PYTHONIOENCODING=utf8 \u0026amp;\u0026amp; python -u tempCodeRunnerFile.python 11:39:00 start 11:39:02 async_sleep 11:39:04 async_sleep 11:39:04 end 실행 결과를 보면 start -\u0026gt; 2초 대기 -\u0026gt; async_sleep -\u0026gt; 2초 대기 -\u0026gt; async_sleep -\u0026gt; end 순서로 순차 실행됨을 알 수 있습니다.\nasyncio 비동기 동시 실행 asyncio.create_task: 코루틴을 태스크로 변환하여 이벤트 루프의 실행 큐에 예약 태스크로 변환되면 곧바로 실행이 시작됨 여러 태스크가 동시에 실행될 수 있음 await: 코루틴, 태스크, Future 객체의 완료를 대기 await 없이 create_task만 하면 태스크가 완료되기 전에 프로그램이 종료될 수 있음 asyncio.run: Python 3.7 이상에서 사용 가능한 고수준 API 새로운 이벤트 루프를 생성하고 코루틴을 실행 프로그램 시작점에서 한 번만 호출해야 함 import asyncio from datetime import datetime def time_log(step): print(datetime.now().strftime(\u0026#39;%H:%M:%S\u0026#39;), step) async def async_sleep(): await asyncio.sleep(2) time_log(\u0026#39;async_sleep\u0026#39;) async def async_execute(): time_log(\u0026#39;start\u0026#39;) # Event loop에 의한 실행 예약 asleep1 = asyncio.create_task(async_sleep()) asleep2 = asyncio.create_task(async_sleep()) # 실행 완료 대기 await asleep1 await asleep2 time_log(\u0026#39;end\u0026#39;) def main(): # asyncio event loop 생성 및 실행 객체 관리 asyncio.run(async_execute()) # asyncio.run 대신 저수준 함수 사용 예 : run_until_complete # loop = asyncio.get_event_loop() # loop.run_until_complete(async_execute()) if __name__ == \u0026#39;__main__\u0026#39;: main() [Running] set PYTHONIOENCODING=utf8 \u0026amp;\u0026amp; python -u tempCodeRunnerFile.python 11:42:33 start 11:42:35 async_sleep 11:42:35 async_sleep 11:42:35 end 이 버전은 두 async_sleep이 동시에 실행되어 총 2초만에 완료됩니다.\nasyncio 동시에 여러개 Task 예약 asyncio.gather: 여러 awaitable 객체를 동시에 실행 모든 태스크가 완료될 때까지 대기 태스크들의 실행 순서는 보장되지 않음 CPU 바운드가 아닌 I/O 작업의 경우 실제로 병렬 처리 효과를 얻을 수 있음 import asyncio from datetime import datetime def time_log(step): print(datetime.now().strftime(\u0026#39;%H:%M:%S\u0026#39;), step) async def async_sleep(): await asyncio.sleep(2) time_log(\u0026#39;async_sleep\u0026#39;) async def async_execute(): time_log(\u0026#39;start\u0026#39;) tasks = [] for i in range(5): t = asyncio.create_task(async_sleep()) tasks.append(t) # task 의 배열, 모두 실행 완료대기 await asyncio.gather(*tasks) time_log(\u0026#39;end\u0026#39;) def main(): asyncio.run(async_execute()) if __name__ == \u0026#39;__main__\u0026#39;: main() [Running] set PYTHONIOENCODING=utf8 \u0026amp;\u0026amp; python -u tempCodeRunnerFile.python 12:15:01 start 12:15:03 async_sleep 12:15:03 async_sleep 12:15:03 async_sleep 12:15:03 async_sleep 12:15:03 async_sleep 12:15:03 end 5개의 태스크가 동시에 실행되어 여전히 2초 정도만 소요됩니다.\nasyncio 동시에 여러개 Task 예약 (리턴값 처리) gather는 각 태스크의 반환값을 리스트로 수집 태스크의 실행 순서와 관계없이 전달한 순서대로 결과가 저장됨 어떤 태스크에서 예외가 발생하면 gather도 예외를 발생시킴 import asyncio from datetime import datetime def time_log(step): print(datetime.now().strftime(\u0026#39;%H:%M:%S\u0026#39;), step) async def async_sleep(): await asyncio.sleep(2) return datetime.now().strftime(\u0026#39;%H:%M:%S\u0026#39;) + \u0026#39; async_sleep\u0026#39; async def async_execute(): time_log(\u0026#39;start\u0026#39;) tasks = [] for i in range(5): t = asyncio.create_task(async_sleep()) tasks.append(t) # Future 및 Task 객체 대기 및 리턴값 수집 fut = await asyncio.gather(*tasks) [ print(f) for f in fut ] time_log(\u0026#39;end\u0026#39;) def main(): asyncio.run(async_execute()) if __name__ == \u0026#39;__main__\u0026#39;: main() [Running] set PYTHONIOENCODING=utf8 \u0026amp;\u0026amp; python -u tempCodeRunnerFile.python 12:24:41 start 12:24:43 async_sleep 12:24:43 async_sleep 12:24:43 async_sleep 12:24:43 async_sleep 12:24:43 async_sleep 12:24:43 end awaitable 하지 않은 blocking 함수 asyncio 실행 일반적인 동기 함수(time.sleep 등)는 이벤트 루프를 블록하므로 직접 await 불가 run_in_executor: 동기 함수를 별도의 스레드 풀에서 실행 기본 실행기(executor=None)는 ThreadPoolExecutor 사용 CPU 바운드 작업의 경우 ProcessPoolExecutor를 사용하는 것이 유리 Future 객체를 반환하므로 await로 완료 대기 가능 import asyncio from asyncio import futures import time from datetime import datetime def time_log(step): print(datetime.now().strftime(\u0026#39;%H:%M:%S\u0026#39;), step) def sync_sleep(name): time.sleep(2) # blocking return datetime.now().strftime(\u0026#39;%H:%M:%S\u0026#39;) + \u0026#39; \u0026#39; + name async def async_execute(): time_log(\u0026#39;start\u0026#39;) loop = asyncio.get_running_loop() futures = [] for i in range(5): # executor가 `None` 이면 기본 실행기 # run_in_executor 저수준 함수를 통해 동기 함수 등록 t = loop.run_in_executor(None, sync_sleep, str(i)) futures.append(t) # Future 객체 대기 fut = await asyncio.gather(*futures) [ print(f) for f in fut ] time_log(\u0026#39;end\u0026#39;) def main(): asyncio.run(async_execute()) if __name__ == \u0026#39;__main__\u0026#39;: main() [Running] set PYTHONIOENCODING=utf8 \u0026amp;\u0026amp; python -u tempCodeRunnerFile.python 12:34:14 start 12:34:16 0 12:34:16 1 12:34:16 2 12:34:16 3 12:34:16 4 12:34:16 end 주요 추가 고려사항:\n에러 처리를 위해 try/except 사용을 권장 태스크 취소 처리도 고려해야 할 수 있음 데이터베이스 등의 리소스는 비동기 라이브러리(aiohttp, asyncpg 등) 사용 권장 디버깅이 어려울 수 있으므로 로깅을 적극 활용 ","permalink":"https://cdecl.github.io/dev/python-asyncio/","summary":"\u003cp\u003e\u003ccode\u003easyncio\u003c/code\u003e는 \u003ccode\u003easync\u003c/code\u003e/\u003ccode\u003eawait\u003c/code\u003e 구문을 사용하여 동시성 코드를 작성하는 라이브러리입니다. 특히 I/O 작업이 많은 애플리케이션에서 높은 성능을 발휘합니다.\u003c/p\u003e\n\u003ch2 id=\"asyncio--asynchronous-io-처리\"\u003easyncio : asynchronous io 처리\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://docs.python.org/ko/3/library/asyncio.html\"\u003ehttps://docs.python.org/ko/3/library/asyncio.html\u003c/a\u003e{:target=\u0026quot;_blank\u0026quot;}\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eThreading\u003c/code\u003e 동시성 제어는 \u003ccode\u003eGIL (Global interpreter lock)\u003c/code\u003e 제약에 의해 느리고, 복잡도는 그대로 가지고 있음\n\u003cul\u003e\n\u003cli\u003eGIL은 Python 인터프리터가 한 번에 하나의 스레드만 실행할 수 있도록 제한하는 메커니즘\u003c/li\u003e\n\u003cli\u003e멀티스레드를 사용해도 CPU 연산의 실제 병렬 처리가 어려움\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003eIO 병목에 의한 동시성을 관리하기 위한 도구로서 \u003ccode\u003eCoroutine\u003c/code\u003e을 통한 관리\n\u003cul\u003e\n\u003cli\u003e네트워크 요청, 파일 읽기/쓰기 등 I/O 작업에서 효율적\u003c/li\u003e\n\u003cli\u003e코루틴은 스레드보다 가벼워서 수천 개의 동시 작업도 효율적으로 처리 가능\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"일반적인-coroutine-코드\"\u003e일반적인 \u003ccode\u003eCoroutine\u003c/code\u003e 코드\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003eCoroutine\u003c/code\u003e으로 실행 되기는 하나, 비동기로 실행 되지는 않음\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003easync def\u003c/code\u003e로 정의된 함수는 코루틴 함수가 됨\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eawait\u003c/code\u003e는 다른 코루틴의 실행이 완료될 때까지 대기\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003easyncio.sleep()\u003c/code\u003e은 I/O 작업을 시뮬레이션하는 용도로 자주 사용됨\u003c/li\u003e\n\u003c/ul\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-python\" data-lang=\"python\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003eimport\u003c/span\u003e asyncio\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003efrom\u003c/span\u003e datetime \u003cspan style=\"color:#f92672\"\u003eimport\u003c/span\u003e datetime\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003edef\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003etime_log\u003c/span\u003e(step):\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    print(datetime\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003enow()\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003estrftime(\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;%H:%M:%S\u0026#39;\u003c/span\u003e), step)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003easync\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003edef\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003easync_sleep\u003c/span\u003e():\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#66d9ef\"\u003eawait\u003c/span\u003e asyncio\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003esleep(\u003cspan style=\"color:#ae81ff\"\u003e2\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    time_log(\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;async_sleep\u0026#39;\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003easync\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003edef\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003easync_execute\u003c/span\u003e():\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    time_log(\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;start\u0026#39;\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#66d9ef\"\u003eawait\u003c/span\u003e async_sleep()\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#66d9ef\"\u003eawait\u003c/span\u003e async_sleep()\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    time_log(\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;end\u0026#39;\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003edef\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003emain\u003c/span\u003e():\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    asyncio\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003erun(async_execute())\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003eif\u003c/span\u003e __name__ \u003cspan style=\"color:#f92672\"\u003e==\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;__main__\u0026#39;\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    main()\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-sh\" data-lang=\"sh\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003e[\u003c/span\u003eRunning\u003cspan style=\"color:#f92672\"\u003e]\u003c/span\u003e set PYTHONIOENCODING\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003eutf8 \u003cspan style=\"color:#f92672\"\u003e\u0026amp;\u0026amp;\u003c/span\u003e python -u tempCodeRunnerFile.python\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e11:39:00 start\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e11:39:02 async_sleep\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e11:39:04 async_sleep\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e11:39:04 end\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003e실행 결과를 보면 start -\u0026gt; 2초 대기 -\u0026gt; async_sleep -\u0026gt; 2초 대기 -\u0026gt; async_sleep -\u0026gt; end 순서로 순차 실행됨을 알 수 있습니다.\u003c/p\u003e","title":"Python asyncio"},{"content":"MySQL BinLog (Binary Log) 설정 및 확인\nMySQL Binlog https://dev.mysql.com/doc/internals/en/binary-log-overview.html{:target=\u0026quot;_blank\u0026quot;} https://dev.mysql.com/doc/refman/5.7/en/replication-options-binary-log.html{:target=\u0026quot;_blank\u0026quot;} 데이터 수정에 대한 정보를 포함하는 로그 파일 세트\nBinlog 를 사용하는 목적 복제 : 마스터 복제 서버에서 슬레이브 서버로 보낼 명령문의 기록으로 사용 데이터 복구 : 백업 파일이 복원된, 특정 시점 이후의 데이터 복구를 위해 사용 Binlog 기록하는 방법 binlog-format STATEMENT : 이벤트에는 데이터 변경(삽입, 업데이트, 삭제)을 생성하는 SQL 문이 포함 MySQL 5.7.7 이전 버전까지 Default ROW : 행 기반 로깅: 이벤트는 개별 행의 변경 사항을 설명합니다. MySQL 5.7.7 버전 부터 Default MIXED : 기본적으로 STATEMENT 로깅, 필요에 따라 자동으로 ROW 로깅으로 전환 일관성 NDB Cluster 경우 Default STATEMENT 경우 ISOLATION LEVEL이 READ-COMMITTED 경우 복구시, Dirty Read 에 의한 일관성이 문제가 될 수 있음\n주요 확인 및 설정 mysql\u0026gt; show binary logs; +---------------+-----------+-----------+ | Log_name | File_size | Encrypted | +---------------+-----------+-----------+ | binlog.000018 | 178 | No | | binlog.000019 | 178 | No | | binlog.000020 | 178 | No | | binlog.000021 | 178 | No | | binlog.000022 | 1222 | No | | binlog.000023 | 155 | No | +---------------+-----------+-----------+ max_binlog_size Binlog 파일별 (binlog.000xxx) 로그 크기 defualt 1G binlog_expire_logs_seconds / expire_logs_days binlog_expire_logs_seconds : 로그 저장 기간 설정, 지난 로그는 자동 삭제 default 2592000 (30days) expire_logs_days : MySQL 8 이전 버전 사용, binlog_expire_logs_seconds 와 같이 사용 할 수 없음 MySQL 8 이전 버전에서는 default 0 으로 자동 삭제를 하지 않음 mysql\u0026gt; show variables like \u0026#39;%expire_log%\u0026#39;; +----------------------------+---------+ | Variable_name | Value | +----------------------------+---------+ | binlog_expire_logs_seconds | 2592000 | | expire_logs_days | 0 | +----------------------------+---------+ my.cnf 설정 [mysqld] binlog_format = ROW # STATEMENT, MIXED max_binlog_size = 300M binlog_expire_logs_seconds = 604800 # 일주일 Binlog 추출 mysqlbinlog : Binlog 를 Text 형태로 덤프 # Basic $ mysqlbinlog binlog.000023 \u0026gt; recover.sql # Database 지정 $ mysqlbinlog --database=dbname binlog.000023 \u0026gt; recover.sql # 이벤트 시점 지정 $ mysqlbinlog --database=dbname --start-datetime=\u0026#34;2021-10-28 01:00:00\u0026#34; --stop-datetime=\u0026#34;2021-10-28 12:00:00\u0026#34; binlog.000023 \u0026gt; recover.sql Binlog 반영 $ mysql -u root -p \u0026lt; recover.sql 주의 : 데이터 삭제 등의 실수로 복구시에는, 삭제 쿼리도 같이 들어가 있어 해당 내용의 적절한 정리가 필요함\n","permalink":"https://cdecl.github.io/devops/mysql-binlog/","summary":"\u003cp\u003eMySQL BinLog (Binary Log) 설정 및 확인\u003c/p\u003e\n\u003ch2 id=\"mysql-binlog\"\u003eMySQL Binlog\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://dev.mysql.com/doc/internals/en/binary-log-overview.html\"\u003ehttps://dev.mysql.com/doc/internals/en/binary-log-overview.html\u003c/a\u003e{:target=\u0026quot;_blank\u0026quot;}\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://dev.mysql.com/doc/refman/5.7/en/replication-options-binary-log.html\"\u003ehttps://dev.mysql.com/doc/refman/5.7/en/replication-options-binary-log.html\u003c/a\u003e{:target=\u0026quot;_blank\u0026quot;}\u003c/li\u003e\n\u003c/ul\u003e\n\u003cblockquote\u003e\n\u003cp\u003e데이터 수정에 대한 정보를 포함하는 로그 파일 세트\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003ch3 id=\"binlog-를-사용하는-목적\"\u003eBinlog 를 사용하는 목적\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e복제 : 마스터 복제 서버에서 슬레이브 서버로 보낼 명령문의 기록으로 사용\u003c/li\u003e\n\u003cli\u003e데이터 복구 : 백업 파일이 복원된, 특정 시점 이후의 데이터 복구를 위해 사용\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"binlog-기록하는-방법-binlog-format\"\u003eBinlog 기록하는 방법 \u003ccode\u003ebinlog-format\u003c/code\u003e\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003eSTATEMENT\u003c/code\u003e : 이벤트에는 데이터 변경(삽입, 업데이트, 삭제)을 생성하는 SQL 문이 포함\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003eMySQL 5.7.7\u003c/code\u003e 이전 버전까지 \u003ccode\u003eDefault\u003c/code\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eROW\u003c/code\u003e : 행 기반 로깅: 이벤트는 개별 행의 변경 사항을 설명합니다.\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003eMySQL 5.7.7\u003c/code\u003e 버전 부터 \u003ccode\u003eDefault\u003c/code\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eMIXED\u003c/code\u003e : 기본적으로 \u003ccode\u003eSTATEMENT\u003c/code\u003e 로깅, 필요에 따라 자동으로 \u003ccode\u003eROW\u003c/code\u003e 로깅으로 전환 \u003ccode\u003e일관성\u003c/code\u003e\n\u003cul\u003e\n\u003cli\u003eNDB Cluster 경우 \u003ccode\u003eDefault\u003c/code\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003cblockquote\u003e\n\u003cp\u003e\u003ccode\u003eSTATEMENT\u003c/code\u003e 경우 \u003ccode\u003eISOLATION LEVEL\u003c/code\u003e이 \u003ccode\u003eREAD-COMMITTED\u003c/code\u003e 경우 복구시, Dirty Read 에 의한 일관성이 문제가 될 수 있음\u003c/p\u003e","title":"MySQL BinLog"},{"content":"Loadbalancing \u0026amp; High-Availability 를 위한 Keepalived 설정 및 테스트\nKeepalived https://www.keepalived.org/{:target=\u0026quot;_blank\u0026quot;} VRRP 를 활용 가상IP (VIP) 기반 서버 다중화 도구 VRRP 는 여러 대의 라우터를 그룹으로 묶어 하나의 가상 IP 어드레스를 부여,\n마스터로 지정된 라우터 장애시 VRRP 그룹 내의 백업 라우터가 마스터로 자동 전환되는 프로토콜입니다.\nInstall # install $ sudo yum install keepalived # service start $ sudo systemctl start keepalived $ sudo systemctl status keepalived ● keepalived.service - LVS and VRRP High Availability Monitor Loaded: loaded (/usr/lib/systemd/system/keepalived.service; disabled; vendor preset: disabled) Active: active (running) since 화 2021-10-26 11:37:04 KST; 4s ago Process: 18356 ExecStart=/usr/sbin/keepalived $KEEPALIVED_OPTIONS (code=exited, status=0/SUCCESS) Main PID: 18357 (keepalived) Tasks: 3 Memory: 1.6M CGroup: /system.slice/keepalived.service ├─18357 /usr/sbin/keepalived -D ├─18358 /usr/sbin/keepalived -D └─18359 /usr/sbin/keepalived -D 10월 26 11:37:05 node1 Keepalived_vrrp[18359]: VRRP_Instance(VI_1) forcing a new MASTER ...on 10월 26 11:37:06 node1 Keepalived_vrrp[18359]: VRRP_Instance(VI_1) Transition to MASTER STATE 10월 26 11:37:07 node1 Keepalived_vrrp[18359]: VRRP_Instance(VI_1) Entering MASTER STATE 10월 26 11:37:07 node1 Keepalived_vrrp[18359]: VRRP_Instance(VI_1) setting pro 10월 26 11:37:07 node1 Keepalived_vrrp[18359]: Sending gratuitous ARP on eth0 for 192.16...00 10월 26 11:37:07 node1 Keepalived_vrrp[18359]: VRRP_Instance(VI_1) Sending/queueing grat...00 10월 26 11:37:07 node1 Keepalived_vrrp[18359]: Sending gratuitous ARP on eth0 for 192.16...00 10월 26 11:37:07 node1 Keepalived_vrrp[18359]: Sending gratuitous ARP on eth0 for 192.16...00 10월 26 11:37:07 node1 Keepalived_vrrp[18359]: Sending gratuitous ARP on eth0 for 192.16...00 10월 26 11:37:07 node1 Keepalived_vrrp[18359]: Sending gratuitous ARP on eth0 for 192.16...00 Hint: Some lines were ellipsized, use -l to show in full. 기본 설정 https://www.redhat.com/sysadmin/keepalived-basics{:target=\u0026quot;_blank\u0026quot;} https://www.redhat.com/sysadmin/advanced-keepalived{:target=\u0026quot;_blank\u0026quot;} 테스트 환경 CentOS 7 (Hyper-v) node1 (MASTER) : 192.168.137.201 node2 (BACKUP) : 192.168.137.202 VIP : 192.168.137.200 /etc/keepalived/keepalived.conf vrrp_instance : 인터페이스에서 실행되는 프로토콜의 개별 인스턴스 정의 state : 인스턴스에서 시작해야 하는 초기 상태 interface : 네트워크 인터페이스 virtual_router_id : 네트워크 가상 ID priority : 우선 순위 advert_int : VRRP 패킷 송신 간격 (sec) authentication : 서로 서버간, 인증 계정 정보 virtual_ipaddress : 가상 IP vip MASTER 설정 : 192.168.137.201 vrrp_instance VI_1 { state MASTER interface eth0 virtual_router_id 51 priority 210 advert_int 1 authentication { auth_type PASS auth_pass 1111 } virtual_ipaddress { 192.168.137.200 } } BACKUP 설정 : 192.168.137.202 vrrp_instance VI_1 { state BACKUP interface eth0 virtual_router_id 51 priority 200 advert_int 1 authentication { auth_type PASS auth_pass 1111 } virtual_ipaddress { 192.168.137.200 } } MASTER 노드에 우선순위 priority 210 를 높게 줌\n(1) 서비스 확인 방법 : IP 할당 확인 eth0 인터페이스에 2개의 IP가 보임 Host : inet 192.168.137.201/24 VIP : inet 192.168.137.200/32 $ ip a ... 2: eth0: \u0026lt;BROADCAST,MULTICAST,UP,LOWER_UP\u0026gt; mtu 1500 qdisc mq state UP group default qlen 1000 link/ether 00:15:5d:3a:4a:02 brd ff:ff:ff:ff:ff:ff inet 192.168.137.201/24 brd 192.168.137.255 scope global noprefixroute eth0 valid_lft forever preferred_lft forever inet 192.168.137.200/32 scope global eth0 valid_lft forever preferred_lft forever inet6 fe80::a576:e68c:a11c:f43/64 scope link noprefixroute valid_lft forever preferred_lft forever (2) 서비스 확인 방법 : VRRP Packet Capture 192.168.137.201 서버에 virtual_router_id(vrid) 51 (192.168.137.200) 할당 $ sudo tcpdump -n vrrp tcpdump: verbose output suppressed, use -v or -vv for full pro listening on eth0, link-type EN10MB (Ethernet), capture size 262144 bytes 12:08:02.810202 IP 192.168.137.201 \u0026gt; 224.0.0.18: VRRPv2, Advertisement, vrid 51, prio 210, authtype simple, intvl 1s, length 20 12:08:03.811340 IP 192.168.137.201 \u0026gt; 224.0.0.18: VRRPv2, Advertisement, vrid 51, prio 210, authtype simple, intvl 1s, length 20 ... Failover Test 192.168.137.201 서버에서 keepalived 서비스 중지 → 192.168.137.202 로 Failover # 192.168.137.201 MASTER 에서 keepalived 서비스 중지 $ sudo systemctl stop keepalived # 192.168.137.202 서버로 변경 $ sudo tcpdump -n vrrp tcpdump: verbose output suppressed, use -v or -vv for full pro listening on eth0, link-type EN10MB (Ethernet), capture size 262144 bytes 12:08:49.068284 IP 192.168.137.202 \u0026gt; 224.0.0.18: VRRPv2, Advertisement, vrid 51, prio 200, authtype simple, intvl 1s, length 20 12:08:50.068723 IP 192.168.137.202 \u0026gt; 224.0.0.18: VRRPv2, Advertisement, vrid 51, prio 200, authtype simple, intvl 1s, length 20 # 192.168.137.201 MASTER 에서 keepalived 서비스 다시 시작 $ sudo systemctl start keepalived # 다시 MASTER priority 가 높으로 쪽으로 돌아옴 $ sudo tcpdump -n vrrp tcpdump: verbose output suppressed, use -v or -vv for full pro listening on eth0, link-type EN10MB (Ethernet), capture size 262144 bytes 12:09:31.084794 IP 192.168.137.201 \u0026gt; 224.0.0.18: VRRPv2, Advertisement, vrid 51, prio 210, authtype simple, intvl 1s, length 20 12:09:32.085300 IP 192.168.137.201 \u0026gt; 224.0.0.18: VRRPv2, Advertisement, vrid 51, prio 210, authtype simple, intvl 1s, length 20 서비스 상태 (Failover 조건) 확인하기 위한 방법 Failover 조건으로서 호스트의 프로세스나 파일, 스크립트 등으로 판단 Tracking processes : 프로세스 명으로 추적 vrrp_track_process track_apache { process httpd weight 10 } vrrp_instance VI_1 { ... track_process { track_apache } } Tracking files : 파일 존재 여부로 추적 vrrp_track_file track_app_file { file /var/run/my_app/vrrp_track_file } vrrp_instance VI_1 { ... track_file { track_app_file weight 1 } } Track interface : 여러개의 Network I/F가 있는 경우 상태로 추적 vrrp_instance VI_1 { ... track_interface { ens9 weight 5 } } Track script : Script 실해 결과로 추적 interval : 스크립트 실행 간격 sec timeout : Timeout 시간 sec rise : 호스트가 \u0026ldquo;정상\u0026quot;으로 간주되기 위해 스크립트가 성공적으로 반환되어야 하는 횟수 fall : 호스트가 \u0026ldquo;비정상\u0026quot;으로 간주되기 위해 스크립트가 성공적으로 반환되지 않는 횟수 $ /etc/keepalived/check.sh $ echo $? 0 vrrp_script keepalived_check { script \u0026#34;/etc/keepalived/check.sh\u0026#34; interval 5 timeout 5 fall 3 } vrrp_instance VI_1 { ... track_script { keepalived_check } } VRRP 마스터가 실패하고 다시 자동으로 마스터가 되지 않도록 방지 https://serverfault.com/questions/44122/prevent-vrrp-master-from-becoming-master-once-it-has-failed{:target=\u0026quot;_blank\u0026rdquo;} nopreempt 플래그 추가 vrrp_instance VI_1 { state MASTER interface eth0 virtual_router_id 51 priority 210 advert_int 1 nopreempt authentication { auth_type PASS auth_pass 1111 } virtual_ipaddress { 192.168.137.200 } } ","permalink":"https://cdecl.github.io/devops/keepalived-basic/","summary":"\u003cp\u003eLoadbalancing \u0026amp; High-Availability 를 위한 Keepalived 설정 및 테스트\u003c/p\u003e\n\u003ch2 id=\"keepalived\"\u003eKeepalived\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://www.keepalived.org/\"\u003ehttps://www.keepalived.org/\u003c/a\u003e{:target=\u0026quot;_blank\u0026quot;}\u003c/li\u003e\n\u003cli\u003eVRRP 를 활용 가상IP (VIP) 기반 서버 다중화 도구\u003c/li\u003e\n\u003c/ul\u003e\n\u003cblockquote\u003e\n\u003cp\u003eVRRP 는 여러 대의 라우터를 그룹으로 묶어 하나의 가상 IP 어드레스를 부여,\u003cbr\u003e\n마스터로 지정된 라우터 장애시 VRRP 그룹 내의 백업 라우터가 마스터로 자동 전환되는 프로토콜입니다.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003ch3 id=\"install\"\u003eInstall\u003c/h3\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-sh\" data-lang=\"sh\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# install\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ sudo yum install keepalived \n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# service start\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ sudo systemctl start keepalived\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ sudo systemctl status keepalived\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e● keepalived.service - LVS and VRRP High Availability Monitor\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e   Loaded: loaded \u003cspan style=\"color:#f92672\"\u003e(\u003c/span\u003e/usr/lib/systemd/system/keepalived.service; disabled; vendor preset: disabled\u003cspan style=\"color:#f92672\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e   Active: active \u003cspan style=\"color:#f92672\"\u003e(\u003c/span\u003erunning\u003cspan style=\"color:#f92672\"\u003e)\u003c/span\u003e since 화 2021-10-26 11:37:04 KST; 4s ago\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  Process: \u003cspan style=\"color:#ae81ff\"\u003e18356\u003c/span\u003e ExecStart\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e/usr/sbin/keepalived $KEEPALIVED_OPTIONS \u003cspan style=\"color:#f92672\"\u003e(\u003c/span\u003ecode\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003eexited, status\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e0/SUCCESS\u003cspan style=\"color:#f92672\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e Main PID: \u003cspan style=\"color:#ae81ff\"\u003e18357\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e(\u003c/span\u003ekeepalived\u003cspan style=\"color:#f92672\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    Tasks: \u003cspan style=\"color:#ae81ff\"\u003e3\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e   Memory: 1.6M\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e   CGroup: /system.slice/keepalived.service\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e           ├─18357 /usr/sbin/keepalived -D\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e           ├─18358 /usr/sbin/keepalived -D\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e           └─18359 /usr/sbin/keepalived -D\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e10월 \u003cspan style=\"color:#ae81ff\"\u003e26\u003c/span\u003e 11:37:05 node1 Keepalived_vrrp\u003cspan style=\"color:#f92672\"\u003e[\u003c/span\u003e18359\u003cspan style=\"color:#f92672\"\u003e]\u003c/span\u003e: VRRP_Instance\u003cspan style=\"color:#f92672\"\u003e(\u003c/span\u003eVI_1\u003cspan style=\"color:#f92672\"\u003e)\u003c/span\u003e forcing a new MASTER ...on\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e10월 \u003cspan style=\"color:#ae81ff\"\u003e26\u003c/span\u003e 11:37:06 node1 Keepalived_vrrp\u003cspan style=\"color:#f92672\"\u003e[\u003c/span\u003e18359\u003cspan style=\"color:#f92672\"\u003e]\u003c/span\u003e: VRRP_Instance\u003cspan style=\"color:#f92672\"\u003e(\u003c/span\u003eVI_1\u003cspan style=\"color:#f92672\"\u003e)\u003c/span\u003e Transition to MASTER STATE\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e10월 \u003cspan style=\"color:#ae81ff\"\u003e26\u003c/span\u003e 11:37:07 node1 Keepalived_vrrp\u003cspan style=\"color:#f92672\"\u003e[\u003c/span\u003e18359\u003cspan style=\"color:#f92672\"\u003e]\u003c/span\u003e: VRRP_Instance\u003cspan style=\"color:#f92672\"\u003e(\u003c/span\u003eVI_1\u003cspan style=\"color:#f92672\"\u003e)\u003c/span\u003e Entering MASTER STATE\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e10월 \u003cspan style=\"color:#ae81ff\"\u003e26\u003c/span\u003e 11:37:07 node1 Keepalived_vrrp\u003cspan style=\"color:#f92672\"\u003e[\u003c/span\u003e18359\u003cspan style=\"color:#f92672\"\u003e]\u003c/span\u003e: VRRP_Instance\u003cspan style=\"color:#f92672\"\u003e(\u003c/span\u003eVI_1\u003cspan style=\"color:#f92672\"\u003e)\u003c/span\u003e setting pro\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e10월 \u003cspan style=\"color:#ae81ff\"\u003e26\u003c/span\u003e 11:37:07 node1 Keepalived_vrrp\u003cspan style=\"color:#f92672\"\u003e[\u003c/span\u003e18359\u003cspan style=\"color:#f92672\"\u003e]\u003c/span\u003e: Sending gratuitous ARP on eth0 \u003cspan style=\"color:#66d9ef\"\u003efor\u003c/span\u003e 192.16...00\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e10월 \u003cspan style=\"color:#ae81ff\"\u003e26\u003c/span\u003e 11:37:07 node1 Keepalived_vrrp\u003cspan style=\"color:#f92672\"\u003e[\u003c/span\u003e18359\u003cspan style=\"color:#f92672\"\u003e]\u003c/span\u003e: VRRP_Instance\u003cspan style=\"color:#f92672\"\u003e(\u003c/span\u003eVI_1\u003cspan style=\"color:#f92672\"\u003e)\u003c/span\u003e Sending/queueing grat...00\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e10월 \u003cspan style=\"color:#ae81ff\"\u003e26\u003c/span\u003e 11:37:07 node1 Keepalived_vrrp\u003cspan style=\"color:#f92672\"\u003e[\u003c/span\u003e18359\u003cspan style=\"color:#f92672\"\u003e]\u003c/span\u003e: Sending gratuitous ARP on eth0 \u003cspan style=\"color:#66d9ef\"\u003efor\u003c/span\u003e 192.16...00\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e10월 \u003cspan style=\"color:#ae81ff\"\u003e26\u003c/span\u003e 11:37:07 node1 Keepalived_vrrp\u003cspan style=\"color:#f92672\"\u003e[\u003c/span\u003e18359\u003cspan style=\"color:#f92672\"\u003e]\u003c/span\u003e: Sending gratuitous ARP on eth0 \u003cspan style=\"color:#66d9ef\"\u003efor\u003c/span\u003e 192.16...00\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e10월 \u003cspan style=\"color:#ae81ff\"\u003e26\u003c/span\u003e 11:37:07 node1 Keepalived_vrrp\u003cspan style=\"color:#f92672\"\u003e[\u003c/span\u003e18359\u003cspan style=\"color:#f92672\"\u003e]\u003c/span\u003e: Sending gratuitous ARP on eth0 \u003cspan style=\"color:#66d9ef\"\u003efor\u003c/span\u003e 192.16...00\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e10월 \u003cspan style=\"color:#ae81ff\"\u003e26\u003c/span\u003e 11:37:07 node1 Keepalived_vrrp\u003cspan style=\"color:#f92672\"\u003e[\u003c/span\u003e18359\u003cspan style=\"color:#f92672\"\u003e]\u003c/span\u003e: Sending gratuitous ARP on eth0 \u003cspan style=\"color:#66d9ef\"\u003efor\u003c/span\u003e 192.16...00\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eHint: Some lines were ellipsized, use -l to show in full.\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003chr\u003e\n\u003ch3 id=\"기본-설정\"\u003e기본 설정\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://www.redhat.com/sysadmin/keepalived-basics\"\u003ehttps://www.redhat.com/sysadmin/keepalived-basics\u003c/a\u003e{:target=\u0026quot;_blank\u0026quot;}\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://www.redhat.com/sysadmin/advanced-keepalived\"\u003ehttps://www.redhat.com/sysadmin/advanced-keepalived\u003c/a\u003e{:target=\u0026quot;_blank\u0026quot;}\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch4 id=\"테스트-환경\"\u003e테스트 환경\u003c/h4\u003e\n\u003cul\u003e\n\u003cli\u003eCentOS 7 (\u003ccode\u003eHyper-v\u003c/code\u003e)\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003enode1\u003c/code\u003e (\u003ccode\u003eMASTER\u003c/code\u003e) : \u003ccode\u003e192.168.137.201\u003c/code\u003e\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003enode2\u003c/code\u003e (\u003ccode\u003eBACKUP\u003c/code\u003e) : \u003ccode\u003e192.168.137.202\u003c/code\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eVIP\u003c/code\u003e : \u003ccode\u003e192.168.137.200\u003c/code\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch4 id=\"etckeepalivedkeepalivedconf\"\u003e\u003ccode\u003e/etc/keepalived/keepalived.conf\u003c/code\u003e\u003c/h4\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003evrrp_instance\u003c/code\u003e : 인터페이스에서 실행되는 프로토콜의 개별 인스턴스 정의\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003estate\u003c/code\u003e : 인스턴스에서 시작해야 하는 초기 상태\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003einterface\u003c/code\u003e : 네트워크 인터페이스\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003evirtual_router_id\u003c/code\u003e : 네트워크 가상 ID\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003epriority\u003c/code\u003e : 우선 순위\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eadvert_int\u003c/code\u003e : \u003ccode\u003eVRRP\u003c/code\u003e 패킷 송신 간격 (sec)\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eauthentication\u003c/code\u003e : 서로 서버간, 인증 계정 정보\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003evirtual_ipaddress\u003c/code\u003e : 가상 IP \u003ccode\u003evip\u003c/code\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch5 id=\"master-설정--192168137201\"\u003eMASTER 설정 : \u003ccode\u003e192.168.137.201\u003c/code\u003e\u003c/h5\u003e\n\u003cpre tabindex=\"0\"\u003e\u003ccode class=\"language-conf\" data-lang=\"conf\"\u003evrrp_instance VI_1 {\n    state MASTER\n    interface eth0\n    virtual_router_id 51\n    priority 210\n    advert_int 1\n    authentication {\n        auth_type PASS\n        auth_pass 1111\n    }\n    virtual_ipaddress {\n        192.168.137.200\n    }\n}\n\u003c/code\u003e\u003c/pre\u003e\u003ch5 id=\"backup-설정--192168137202\"\u003eBACKUP 설정 : \u003ccode\u003e192.168.137.202\u003c/code\u003e\u003c/h5\u003e\n\u003cpre tabindex=\"0\"\u003e\u003ccode class=\"language-conf\" data-lang=\"conf\"\u003evrrp_instance VI_1 {\n    state BACKUP\n    interface eth0\n    virtual_router_id 51\n    priority 200\n    advert_int 1\n    authentication {\n        auth_type PASS\n        auth_pass 1111\n    }\n    virtual_ipaddress {\n        192.168.137.200\n    }\n}\n\u003c/code\u003e\u003c/pre\u003e\u003cblockquote\u003e\n\u003cp\u003e\u003ccode\u003eMASTER\u003c/code\u003e 노드에 우선순위 \u003ccode\u003epriority 210\u003c/code\u003e 를 높게 줌\u003c/p\u003e","title":"Keepalived Basic"},{"content":"Oracle 대량 Bulk Insert Tool\n구성요소 Control File : sqlldr 명령행을 실행하기 위한 제어, 설정 파일 sqlldr : SQL*Loader, Oracle 데이터 Insert Tool Control File 기본 구성 OPTIONS (DIRECT=TRUE,ERRORS=100000,readsize=204800000) LOAD DATA CHARACTERSET AL32UTF8 INFILE \u0026#39;infile/${CTL_INFILE}.csv\u0026#39; TRUNCATE INTO TABLE ${CTL_TABLE} FIELDS TERMINATED BY \u0026#39;,\u0026#39; OPTIONALLY ENCLOSED BY \u0026#34; \u0026#34; TRAILING NULLCOLS ( ${CTL_TABLE_COLS} ) OPTIONS DIRECT ERRORS : 허용하는 에러수, default 50 DIRECT=TRUE : Direct Path, 쿼리를 실행하지 않고 메모리에 블록을 만들어 테이블에 저장 LOAD DATA INFILE : 데이터 파일, 다수의 파일 등록 가능 TRUNCATE INTO TABLE INSERT : 신규 데이터, 데이터 존재하면 에러 APPEND : 중복되지 않은 데이터 추가 REPLACE, TRUNCATE: 모든 행을 지우고 추가 FIELDS TERMINATED FIELDS TERMINATED : 필드 구분자 ENCLOSED BY \u0026quot; \u0026quot; : 텍스트 한정자 ( ${CTL_TABLE_COLS} ) 테이블 컬럼 리스트 DATE TIMESTAMP 이나 NULL 처리 등의 가공이 필요 할 수 있음 Control File Sample CREATE TABLE IPMAN ( IP varchar2(128), SERVERNAME varchar2(128), ETC varchar2(128) ) OPTIONS (DIRECT=TRUE,ERRORS=100000,readsize=204800000) LOAD DATA CHARACTERSET AL32UTF8 INFILE \u0026#39;infile/IPMAN.csv\u0026#39; TRUNCATE INTO TABLE IPMAN FIELDS TERMINATED BY \u0026#39;,\u0026#39; OPTIONALLY ENCLOSED BY \u0026#34; \u0026#34; TRAILING NULLCOLS ( IP \u0026#34;NVL(:IP, \u0026#39; \u0026#39;)\u0026#34; , SERVERNAME \u0026#34;NVL(:SERVERNAME, \u0026#39; \u0026#39;)\u0026#34; , ETC \u0026#34;NVL(:ETC, \u0026#39; \u0026#39;)\u0026#34; ) SQLLDR 실행 Control File 설정으로 SQL*Loader 실행 $ sqlldr \u0026#39;dev/\u0026lt;PASSWD\u0026gt;@\u0026lt;SERVER\u0026gt;:1521/\u0026lt;SID\u0026gt;\u0026#39; control=ctl/IPMAN.ctl log=log/IPMAN.log bad=log/IPMAN.bad Control File 자동 생성 스크립트 ctl.sh : 테이블 이름으로 스키마를 쿼리하여 Control File 생성 및 sqlldr 명령어 출력 ctl.template : Control File 템플릿, envsubst 명령으로 내용 치환 ctl.sh #!/bin/bash if [[ -z \u0026#34;$1\u0026#34; ]]; then echo \u0026#34;$0 [TABLE_NAME]\u0026#34; exit -1 fi TABLE_NM=\u0026#34;$1\u0026#34; echo \u0026#34;TABLE NAME: \u0026#34; $TABLE_NM FD_LIST=$(sqlplus -s ${CTL_CONN} \u0026lt;\u0026lt; SQLEOF set pagesize 0 feedback off verify off heading off echo off SELECT (CASE WHEN DATA_TYPE = \u0026#39;DATE\u0026#39; OR DATA_TYPE LIKE \u0026#39;TIMESTAMP%\u0026#39; THEN COLUMN_NAME || \u0026#39; TIMESTAMP \u0026#34;YYYY-MM-DD HH24:MI:SS.FF3\u0026#34; @\u0026#39; WHEN DATA_TYPE = \u0026#39;NUMBER\u0026#39; THEN COLUMN_NAME || \u0026#39; \u0026#34;NVL(:\u0026#39; || COLUMN_NAME || \u0026#39;, 0)\u0026#34; @\u0026#39; WHEN DATA_LENGTH \u0026gt; 255 THEN COLUMN_NAME || \u0026#39; CHAR(65535) @\u0026#39; ELSE COLUMN_NAME || \u0026#39; \u0026#34;NVL(:\u0026#39; || COLUMN_NAME || \u0026#39;, \u0026#39;\u0026#39; \u0026#39;\u0026#39;)\u0026#34; @\u0026#39; END) COLUMN_NAME FROM user_tab_cols WHERE table_name = \u0026#39;${TABLE_NM}\u0026#39; AND column_id IS NOT NULL ORDER BY COLUMN_ID; exit; SQLEOF ) FD_LIST=`echo ${FD_LIST} | sed \u0026#39;s/@/,/g\u0026#39;` FD_LIST=${FD_LIST%*,*} export CTL_INFILE=$TABLE_NM export CTL_TABLE=$TABLE_NM export CTL_TABLE_COLS=$FD_LIST envsubst \u0026lt; ctl.template \u0026gt; ctl/$CTL_TABLE.ctl echo sqlldr \\${CTL_CONN} control=ctl/${CTL_TABLE}.ctl log=log/${CTL_TABLE}.log bad=log/${CTL_TABLE}.bad ctl.template OPTIONS (DIRECT=TRUE,ERRORS=100000,readsize=204800000) LOAD DATA CHARACTERSET AL32UTF8 INFILE \u0026#39;infile/${CTL_INFILE}.csv\u0026#39; TRUNCATE INTO TABLE ${CTL_TABLE} FIELDS TERMINATED BY \u0026#39;,\u0026#39; OPTIONALLY ENCLOSED BY \u0026#34; \u0026#34; TRAILING NULLCOLS ( ${CTL_TABLE_COLS} ) 실행 예시 CTL_CONN DB 연결 환경변수 세팅 # infile : Data Directory / ctl : Control File / log : Log $ mkdir -p infile ctl log # DB 연결 변수 $ export CTL_CONN=\u0026#39;dev/\u0026lt;PASSWD\u0026gt;@\u0026lt;SERVER\u0026gt;:1521/\u0026lt;SID\u0026gt;\u0026#39; 테이블 명으로 Control File 생성 및 sqlldr 명령어 출력 $ ./ctl.sh IPMAN TABLE NAME: IPMAN sqlldr ${CTL_CONN} control=ctl/IPMAN.ctl log=log/IPMAN.log bad=log/IPMAN.bad sqlldr 명령 실행 infile path : infile/테이블명.csv log= : 실행 로그 bad= : 실패 데이터 $ sqlldr ${CTL_CONN} control=ctl/IPMAN.ctl log=log/IPMAN.log bad=log/IPMAN.bad SQL*Loader: Release 21.0.0.0.0 - Production on Tue Oct 19 11:36:00 2021 Version 21.3.0.0.0 Copyright (c) 1982, 2021, Oracle and/or its affiliates. All rights reserved. Path used: Direct Load completed - logical record count 200. Table IPMAN: 199 Rows successfully loaded. Check the log file: log/IPMAN.log for more information about the load. ","permalink":"https://cdecl.github.io/devops/oracle-sqlldr/","summary":"\u003cp\u003eOracle 대량 Bulk Insert Tool\u003c/p\u003e\n\u003ch2 id=\"구성요소\"\u003e구성요소\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003eControl File : \u003ccode\u003esqlldr\u003c/code\u003e 명령행을 실행하기 위한 제어, 설정 파일\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003esqlldr\u003c/code\u003e : SQL*Loader, Oracle 데이터 Insert Tool\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"control-file-기본-구성\"\u003eControl File 기본 구성\u003c/h3\u003e\n\u003cpre tabindex=\"0\"\u003e\u003ccode class=\"language-conf\" data-lang=\"conf\"\u003eOPTIONS (DIRECT=TRUE,ERRORS=100000,readsize=204800000)\nLOAD DATA\nCHARACTERSET AL32UTF8\nINFILE \u0026#39;infile/${CTL_INFILE}.csv\u0026#39;\nTRUNCATE INTO TABLE ${CTL_TABLE}\nFIELDS TERMINATED BY \u0026#39;,\u0026#39; OPTIONALLY ENCLOSED BY \u0026#34; \u0026#34;\nTRAILING NULLCOLS\n( ${CTL_TABLE_COLS} )\n\u003c/code\u003e\u003c/pre\u003e\u003ch5 id=\"options-direct\"\u003eOPTIONS DIRECT\u003c/h5\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003eERRORS\u003c/code\u003e : 허용하는 에러수, \u003ccode\u003edefault 50\u003c/code\u003e\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eDIRECT=TRUE\u003c/code\u003e : Direct Path, 쿼리를 실행하지 않고 메모리에 블록을 만들어 테이블에 저장\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch5 id=\"load-data\"\u003eLOAD DATA\u003c/h5\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003eINFILE\u003c/code\u003e : 데이터 파일, 다수의 파일 등록 가능\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch5 id=\"truncate-into-table\"\u003e\u003ccode\u003eTRUNCATE\u003c/code\u003e INTO TABLE\u003c/h5\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003eINSERT\u003c/code\u003e : 신규 데이터, 데이터 존재하면 에러\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eAPPEND\u003c/code\u003e : 중복되지 않은 데이터 추가\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eREPLACE\u003c/code\u003e, \u003ccode\u003eTRUNCATE\u003c/code\u003e: 모든 행을 지우고 추가\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch5 id=\"fields-terminated\"\u003eFIELDS TERMINATED\u003c/h5\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003eFIELDS TERMINATED\u003c/code\u003e : 필드 구분자\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eENCLOSED BY \u0026quot; \u0026quot;\u003c/code\u003e : 텍스트 한정자\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch5 id=\"-ctl_table_cols-\"\u003e( ${CTL_TABLE_COLS} )\u003c/h5\u003e\n\u003cul\u003e\n\u003cli\u003e테이블 컬럼 리스트\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eDATE\u003c/code\u003e \u003ccode\u003eTIMESTAMP\u003c/code\u003e 이나 \u003ccode\u003eNULL\u003c/code\u003e 처리 등의 가공이 필요 할 수 있음\u003c/li\u003e\n\u003c/ul\u003e\n\u003chr\u003e\n\u003ch3 id=\"control-file-sample\"\u003eControl File Sample\u003c/h3\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-sql\" data-lang=\"sql\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003eCREATE\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003eTABLE\u003c/span\u003e IPMAN (\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\tIP varchar2(\u003cspan style=\"color:#ae81ff\"\u003e128\u003c/span\u003e),\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\tSERVERNAME varchar2(\u003cspan style=\"color:#ae81ff\"\u003e128\u003c/span\u003e),\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\tETC  varchar2(\u003cspan style=\"color:#ae81ff\"\u003e128\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cpre tabindex=\"0\"\u003e\u003ccode class=\"language-conf\" data-lang=\"conf\"\u003eOPTIONS (DIRECT=TRUE,ERRORS=100000,readsize=204800000)\nLOAD DATA\nCHARACTERSET AL32UTF8\nINFILE \u0026#39;infile/IPMAN.csv\u0026#39;\nTRUNCATE INTO TABLE IPMAN\nFIELDS TERMINATED BY \u0026#39;,\u0026#39; OPTIONALLY ENCLOSED BY \u0026#34; \u0026#34;\nTRAILING NULLCOLS\n( IP \u0026#34;NVL(:IP, \u0026#39; \u0026#39;)\u0026#34; , SERVERNAME \u0026#34;NVL(:SERVERNAME, \u0026#39; \u0026#39;)\u0026#34; , ETC \u0026#34;NVL(:ETC, \u0026#39; \u0026#39;)\u0026#34;  )\n\u003c/code\u003e\u003c/pre\u003e\u003ch4 id=\"sqlldr-실행\"\u003eSQLLDR 실행\u003c/h4\u003e\n\u003cul\u003e\n\u003cli\u003eControl File 설정으로 SQL*Loader 실행\u003c/li\u003e\n\u003c/ul\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-sh\" data-lang=\"sh\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ sqlldr \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;dev/\u0026lt;PASSWD\u0026gt;@\u0026lt;SERVER\u0026gt;:1521/\u0026lt;SID\u0026gt;\u0026#39;\u003c/span\u003e control\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003ectl/IPMAN.ctl log\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003elog/IPMAN.log bad\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003elog/IPMAN.bad\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003chr\u003e\n\u003ch3 id=\"control-file-자동-생성-스크립트\"\u003eControl File 자동 생성 스크립트\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003ectl.sh\u003c/code\u003e : 테이블 이름으로 스키마를 쿼리하여 Control File 생성 및 sqlldr 명령어 출력\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003ectl.template\u003c/code\u003e : Control File 템플릿, \u003ccode\u003eenvsubst\u003c/code\u003e 명령으로 내용 치환\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch5 id=\"ctlsh\"\u003ectl.sh\u003c/h5\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-sh\" data-lang=\"sh\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e#!/bin/bash\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003eif\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e[[\u003c/span\u003e -z \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u003c/span\u003e$1\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e]]\u003c/span\u003e; \u003cspan style=\"color:#66d9ef\"\u003ethen\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        echo \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u003c/span\u003e$0\u003cspan style=\"color:#e6db74\"\u003e [TABLE_NAME]\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        exit -1\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003efi\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eTABLE_NM\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u003c/span\u003e$1\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eecho \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;TABLE NAME: \u0026#34;\u003c/span\u003e $TABLE_NM\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eFD_LIST\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#66d9ef\"\u003e$(\u003c/span\u003esqlplus -s \u003cspan style=\"color:#e6db74\"\u003e${\u003c/span\u003eCTL_CONN\u003cspan style=\"color:#e6db74\"\u003e}\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026lt;\u0026lt; SQLEOF\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003eset pagesize 0 feedback off verify off heading off echo off\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003eSELECT (CASE WHEN DATA_TYPE = \u0026#39;DATE\u0026#39; OR DATA_TYPE LIKE \u0026#39;TIMESTAMP%\u0026#39; THEN COLUMN_NAME || \u0026#39; TIMESTAMP \u0026#34;YYYY-MM-DD HH24:MI:SS.FF3\u0026#34; @\u0026#39;\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003e             WHEN DATA_TYPE = \u0026#39;NUMBER\u0026#39; THEN COLUMN_NAME || \u0026#39; \u0026#34;NVL(:\u0026#39; || COLUMN_NAME || \u0026#39;, 0)\u0026#34; @\u0026#39;\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003e             WHEN DATA_LENGTH \u0026gt; 255 THEN COLUMN_NAME || \u0026#39; CHAR(65535) @\u0026#39;\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003e        ELSE COLUMN_NAME || \u0026#39; \u0026#34;NVL(:\u0026#39; || COLUMN_NAME || \u0026#39;, \u0026#39;\u0026#39; \u0026#39;\u0026#39;)\u0026#34; @\u0026#39; END) COLUMN_NAME\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003eFROM user_tab_cols\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003eWHERE table_name = \u0026#39;${TABLE_NM}\u0026#39;\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003eAND column_id IS NOT NULL\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003eORDER BY COLUMN_ID;\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003eexit;\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003eSQLEOF\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eFD_LIST\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e`\u003c/span\u003eecho \u003cspan style=\"color:#e6db74\"\u003e${\u003c/span\u003eFD_LIST\u003cspan style=\"color:#e6db74\"\u003e}\u003c/span\u003e | sed \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;s/@/,/g\u0026#39;\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e`\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eFD_LIST\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e${\u003c/span\u003eFD_LIST%*,*\u003cspan style=\"color:#e6db74\"\u003e}\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eexport CTL_INFILE\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e$TABLE_NM\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eexport CTL_TABLE\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e$TABLE_NM\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eexport CTL_TABLE_COLS\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e$FD_LIST\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eenvsubst \u0026lt; ctl.template \u0026gt; ctl/$CTL_TABLE.ctl\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eecho sqlldr \u003cspan style=\"color:#ae81ff\"\u003e\\$\u003c/span\u003e\u003cspan style=\"color:#f92672\"\u003e{\u003c/span\u003eCTL_CONN\u003cspan style=\"color:#f92672\"\u003e}\u003c/span\u003e control\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003ectl/\u003cspan style=\"color:#e6db74\"\u003e${\u003c/span\u003eCTL_TABLE\u003cspan style=\"color:#e6db74\"\u003e}\u003c/span\u003e.ctl log\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003elog/\u003cspan style=\"color:#e6db74\"\u003e${\u003c/span\u003eCTL_TABLE\u003cspan style=\"color:#e6db74\"\u003e}\u003c/span\u003e.log bad\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003elog/\u003cspan style=\"color:#e6db74\"\u003e${\u003c/span\u003eCTL_TABLE\u003cspan style=\"color:#e6db74\"\u003e}\u003c/span\u003e.bad\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch5 id=\"ctltemplate\"\u003ectl.template\u003c/h5\u003e\n\u003cpre tabindex=\"0\"\u003e\u003ccode class=\"language-conf\" data-lang=\"conf\"\u003eOPTIONS (DIRECT=TRUE,ERRORS=100000,readsize=204800000)\nLOAD DATA\nCHARACTERSET AL32UTF8\nINFILE \u0026#39;infile/${CTL_INFILE}.csv\u0026#39;\nTRUNCATE INTO TABLE ${CTL_TABLE}\nFIELDS TERMINATED BY \u0026#39;,\u0026#39; OPTIONALLY ENCLOSED BY \u0026#34; \u0026#34;\nTRAILING NULLCOLS\n( ${CTL_TABLE_COLS} )\n\u003c/code\u003e\u003c/pre\u003e\u003ch4 id=\"실행-예시\"\u003e실행 예시\u003c/h4\u003e\n\u003ch5 id=\"ctl_conn-db-연결-환경변수-세팅\"\u003e\u003ccode\u003eCTL_CONN\u003c/code\u003e DB 연결 환경변수 세팅\u003c/h5\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-sh\" data-lang=\"sh\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# infile : Data Directory / ctl : Control File / log : Log\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ mkdir -p infile ctl log\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# DB 연결 변수 \u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ export CTL_CONN\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;dev/\u0026lt;PASSWD\u0026gt;@\u0026lt;SERVER\u0026gt;:1521/\u0026lt;SID\u0026gt;\u0026#39;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch5 id=\"테이블-명으로-control-file-생성-및-sqlldr-명령어-출력\"\u003e테이블 명으로 Control File 생성 및 \u003ccode\u003esqlldr\u003c/code\u003e 명령어 출력\u003c/h5\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-sh\" data-lang=\"sh\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ ./ctl.sh IPMAN\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eTABLE NAME:  IPMAN\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003esqlldr \u003cspan style=\"color:#e6db74\"\u003e${\u003c/span\u003eCTL_CONN\u003cspan style=\"color:#e6db74\"\u003e}\u003c/span\u003e control\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003ectl/IPMAN.ctl log\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003elog/IPMAN.log bad\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003elog/IPMAN.bad\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch5 id=\"sqlldr-명령-실행\"\u003e\u003ccode\u003esqlldr\u003c/code\u003e 명령 실행\u003c/h5\u003e\n\u003cul\u003e\n\u003cli\u003einfile path : \u003ccode\u003einfile/테이블명.csv\u003c/code\u003e\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003elog=\u003c/code\u003e : 실행 로그\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003ebad=\u003c/code\u003e : 실패 데이터\u003c/li\u003e\n\u003c/ul\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-sh\" data-lang=\"sh\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ sqlldr \u003cspan style=\"color:#e6db74\"\u003e${\u003c/span\u003eCTL_CONN\u003cspan style=\"color:#e6db74\"\u003e}\u003c/span\u003e control\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003ectl/IPMAN.ctl log\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003elog/IPMAN.log bad\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003elog/IPMAN.bad\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eSQL*Loader: Release 21.0.0.0.0 - Production on Tue Oct \u003cspan style=\"color:#ae81ff\"\u003e19\u003c/span\u003e 11:36:00 \u003cspan style=\"color:#ae81ff\"\u003e2021\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eVersion 21.3.0.0.0\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eCopyright \u003cspan style=\"color:#f92672\"\u003e(\u003c/span\u003ec\u003cspan style=\"color:#f92672\"\u003e)\u003c/span\u003e 1982, 2021, Oracle and/or its affiliates.  All rights reserved.\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ePath used:      Direct\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eLoad completed - logical record count 200.\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eTable IPMAN:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#ae81ff\"\u003e199\u003c/span\u003e Rows successfully loaded.\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eCheck the log file:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  log/IPMAN.log\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003efor\u003c/span\u003e more information about the load.\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e","title":"Oracle, Sqlldr"},{"content":"SQL Server 대량 복사 프로그램 유틸리티(b ulk c opy p rogram utility, bcp)\nBCP https://docs.microsoft.com/ko-kr/sql/tools/bcp-utility{:target=\u0026quot;_blank\u0026quot;} SQL Server 의 Bulk 대량 데이터 Export 및 Import 유틸리티 설치 Windows 다운로드 : Microsoft® Command Line Utilities 14.0 for SQL Server{:target=\u0026quot;_blank\u0026quot;} Linux SQL Server 의 리눅스 지원으로 사용 가능 Linux에서 SQL Server 명령줄 도구 sqlcmd 및 bcp 설치{:target=\u0026quot;_blank\u0026quot;} Export 기본 cvs 파일로 테이블(쿼리 데이터) Export\n$ bcp 사용법: bcp {dbtable | query} {in | out | queryout | format} 데이터 파일 [-m 최대 오류 수] [-f 서식 파일] [-e 오류 파일] [-F 첫 행] [-L 마지막 행] [-b 일괄 처리 크기] [-n 네이티브 유형] [-c 문자 유형] [-w 와이드 문자 유형] [-N 비텍스트 네이티브 유지] [-V 파일 형식 버전] [-q 따옴표 붙은 식별자] [-C 코드 페이지 지정자] [-t 필드 종결자] [-r 행 종결자] [-i 입력 파일] [-o 출력 파일] [-a 패킷 크기] [-S 서버 이름] [-U 사용자 이름] [-P 암호] [-T 트러스트된 연결] [-v 버전] [-R 국가별 설정 사용] [-k Null 값 유지] [-E ID 값 유지][-G Azure Active Directory 인증] [-h \u0026#34;힌트 로드\u0026#34;] [-x xml 서식 파일 생성] [-d 데이터베이스 이름] [-K 애플리케이션 의도] [-l 로그인 제한 시간] Export csv $ bcp \u0026#34;SELECT * FROM dbname.dbo.tablename\u0026#34; queryout tablename.csv -c -t \u0026#34;,\u0026#34; -r \u0026#34;\\n\u0026#34; -S \u0026lt;SERVER\u0026gt; -U \u0026lt;USER\u0026gt; -P \u0026lt;PASSWD\u0026gt; 테이블 지정 Export : out $ bcp \u0026#34;dbname.dbo.tablename\u0026#34; out output.csv ... 쿼리 실행 결과 Export : queryout $ bcp \u0026#34;query\u0026#34; queryout output.csv ... Export 데이터 형식 -n : 네이티브 포맷, SQL Server로 데이터 이전 할때 유용 (종결자 등의 이유로 데이터 이슈 해결) -c : 문자유형, OS의 기본 Charset을 따라감 한글 Windows : EUC-KR Linux : UTF-8 -w : 와이드 문자유형, 유니코드 UTF-16 LE Import $ bcp \u0026#34;dbname.dbo.tablename\u0026#34; in input.csv -c -t \u0026#34;,\u0026#34; -r \u0026#34;\\n\u0026#34; -S \u0026lt;SERVER\u0026gt; -U \u0026lt;USER\u0026gt; -P \u0026lt;PASSWD\u0026gt; 특이사항 길이가 0인 문자열의 경우 데이터 내에 NULL 문자를 삽입 SQL Server의 경우 문제는 없지만, 다른 DB 에 Import 의 경우 NULL 문자가 들어감 INSERT INTO tablename (filed) SELECT CHARACTER(0) -- MySQL 5.7 SELECT * FROM tablename WHERE filed = \u0026#39;\u0026#39;; -- Not Working SELECT * FROM tablename WHERE ASCII(filed) = 0; -- Working -- MySQL 8 SELECT * FROM tablename WHERE filed = \u0026#39;\u0026#39;; -- Working SELECT * FROM tablename WHERE ASCII(filed) = 0; -- Working ","permalink":"https://cdecl.github.io/devops/sqlserver-bcp/","summary":"\u003cp\u003eSQL Server 대량 복사 프로그램 유틸리티(\u003cstrong\u003eb\u003c/strong\u003e ulk \u003cstrong\u003ec\u003c/strong\u003e opy \u003cstrong\u003ep\u003c/strong\u003e rogram utility, \u003ccode\u003ebcp\u003c/code\u003e)\u003c/p\u003e\n\u003ch2 id=\"bcp\"\u003eBCP\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://docs.microsoft.com/ko-kr/sql/tools/bcp-utility\"\u003ehttps://docs.microsoft.com/ko-kr/sql/tools/bcp-utility\u003c/a\u003e{:target=\u0026quot;_blank\u0026quot;}\u003c/li\u003e\n\u003cli\u003eSQL Server 의 Bulk 대량 데이터 Export 및 Import 유틸리티\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"설치\"\u003e설치\u003c/h3\u003e\n\u003ch4 id=\"windows\"\u003eWindows\u003c/h4\u003e\n\u003cul\u003e\n\u003cli\u003e다운로드 : \u003ca href=\"https://www.microsoft.com/en-us/download/details.aspx?id=53591\"\u003eMicrosoft® Command Line Utilities 14.0 for SQL Server\u003c/a\u003e{:target=\u0026quot;_blank\u0026quot;}\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch4 id=\"linux\"\u003eLinux\u003c/h4\u003e\n\u003cul\u003e\n\u003cli\u003eSQL Server 의 리눅스 지원으로 사용 가능\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://docs.microsoft.com/ko-kr/sql/linux/sql-server-linux-setup-tools\"\u003eLinux에서 SQL Server 명령줄 도구 sqlcmd 및 bcp 설치\u003c/a\u003e{:target=\u0026quot;_blank\u0026quot;}\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"export-기본\"\u003eExport 기본\u003c/h3\u003e\n\u003cp\u003e\u003ccode\u003ecvs\u003c/code\u003e 파일로 테이블(쿼리 데이터) Export\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-sh\" data-lang=\"sh\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ bcp\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e사용법: bcp \u003cspan style=\"color:#f92672\"\u003e{\u003c/span\u003edbtable | query\u003cspan style=\"color:#f92672\"\u003e}\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e{\u003c/span\u003ein | out | queryout | format\u003cspan style=\"color:#f92672\"\u003e}\u003c/span\u003e 데이터 파일\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#f92672\"\u003e[\u003c/span\u003e-m 최대 오류 수\u003cspan style=\"color:#f92672\"\u003e]\u003c/span\u003e                  \u003cspan style=\"color:#f92672\"\u003e[\u003c/span\u003e-f 서식 파일\u003cspan style=\"color:#f92672\"\u003e]\u003c/span\u003e          \u003cspan style=\"color:#f92672\"\u003e[\u003c/span\u003e-e 오류 파일\u003cspan style=\"color:#f92672\"\u003e]\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#f92672\"\u003e[\u003c/span\u003e-F 첫 행\u003cspan style=\"color:#f92672\"\u003e]\u003c/span\u003e                         \u003cspan style=\"color:#f92672\"\u003e[\u003c/span\u003e-L 마지막 행\u003cspan style=\"color:#f92672\"\u003e]\u003c/span\u003e          \u003cspan style=\"color:#f92672\"\u003e[\u003c/span\u003e-b 일괄 처리 크기\u003cspan style=\"color:#f92672\"\u003e]\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#f92672\"\u003e[\u003c/span\u003e-n 네이티브 유형\u003cspan style=\"color:#f92672\"\u003e]\u003c/span\u003e                 \u003cspan style=\"color:#f92672\"\u003e[\u003c/span\u003e-c 문자 유형\u003cspan style=\"color:#f92672\"\u003e]\u003c/span\u003e          \u003cspan style=\"color:#f92672\"\u003e[\u003c/span\u003e-w 와이드 문자 유형\u003cspan style=\"color:#f92672\"\u003e]\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#f92672\"\u003e[\u003c/span\u003e-N 비텍스트 네이티브 유지\u003cspan style=\"color:#f92672\"\u003e]\u003c/span\u003e        \u003cspan style=\"color:#f92672\"\u003e[\u003c/span\u003e-V 파일 형식 버전\u003cspan style=\"color:#f92672\"\u003e]\u003c/span\u003e    \u003cspan style=\"color:#f92672\"\u003e[\u003c/span\u003e-q 따옴표 붙은 식별자\u003cspan style=\"color:#f92672\"\u003e]\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#f92672\"\u003e[\u003c/span\u003e-C 코드 페이지 지정자\u003cspan style=\"color:#f92672\"\u003e]\u003c/span\u003e            \u003cspan style=\"color:#f92672\"\u003e[\u003c/span\u003e-t 필드 종결자\u003cspan style=\"color:#f92672\"\u003e]\u003c/span\u003e        \u003cspan style=\"color:#f92672\"\u003e[\u003c/span\u003e-r 행 종결자\u003cspan style=\"color:#f92672\"\u003e]\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#f92672\"\u003e[\u003c/span\u003e-i 입력 파일\u003cspan style=\"color:#f92672\"\u003e]\u003c/span\u003e                     \u003cspan style=\"color:#f92672\"\u003e[\u003c/span\u003e-o 출력 파일\u003cspan style=\"color:#f92672\"\u003e]\u003c/span\u003e          \u003cspan style=\"color:#f92672\"\u003e[\u003c/span\u003e-a 패킷 크기\u003cspan style=\"color:#f92672\"\u003e]\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#f92672\"\u003e[\u003c/span\u003e-S 서버 이름\u003cspan style=\"color:#f92672\"\u003e]\u003c/span\u003e                     \u003cspan style=\"color:#f92672\"\u003e[\u003c/span\u003e-U 사용자 이름\u003cspan style=\"color:#f92672\"\u003e]\u003c/span\u003e        \u003cspan style=\"color:#f92672\"\u003e[\u003c/span\u003e-P 암호\u003cspan style=\"color:#f92672\"\u003e]\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#f92672\"\u003e[\u003c/span\u003e-T 트러스트된 연결\u003cspan style=\"color:#f92672\"\u003e]\u003c/span\u003e               \u003cspan style=\"color:#f92672\"\u003e[\u003c/span\u003e-v 버전\u003cspan style=\"color:#f92672\"\u003e]\u003c/span\u003e               \u003cspan style=\"color:#f92672\"\u003e[\u003c/span\u003e-R 국가별 설정 사용\u003cspan style=\"color:#f92672\"\u003e]\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#f92672\"\u003e[\u003c/span\u003e-k Null 값 유지\u003cspan style=\"color:#f92672\"\u003e]\u003c/span\u003e     \u003cspan style=\"color:#f92672\"\u003e[\u003c/span\u003e-E ID 값 유지\u003cspan style=\"color:#f92672\"\u003e][\u003c/span\u003e-G Azure Active Directory 인증\u003cspan style=\"color:#f92672\"\u003e]\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#f92672\"\u003e[\u003c/span\u003e-h \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;힌트 로드\u0026#34;\u003c/span\u003e\u003cspan style=\"color:#f92672\"\u003e]\u003c/span\u003e                   \u003cspan style=\"color:#f92672\"\u003e[\u003c/span\u003e-x xml 서식 파일 생성\u003cspan style=\"color:#f92672\"\u003e]\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#f92672\"\u003e[\u003c/span\u003e-d 데이터베이스 이름\u003cspan style=\"color:#f92672\"\u003e]\u003c/span\u003e        \u003cspan style=\"color:#f92672\"\u003e[\u003c/span\u003e-K 애플리케이션 의도\u003cspan style=\"color:#f92672\"\u003e]\u003c/span\u003e  \u003cspan style=\"color:#f92672\"\u003e[\u003c/span\u003e-l 로그인 제한 시간\u003cspan style=\"color:#f92672\"\u003e]\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch3 id=\"export-csv\"\u003eExport \u003ccode\u003ecsv\u003c/code\u003e\u003c/h3\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-sh\" data-lang=\"sh\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ bcp \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;SELECT * FROM dbname.dbo.tablename\u0026#34;\u003c/span\u003e queryout tablename.csv -c -t \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;,\u0026#34;\u003c/span\u003e -r \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\\n\u0026#34;\u003c/span\u003e -S \u0026lt;SERVER\u0026gt; -U \u0026lt;USER\u0026gt; -P \u0026lt;PASSWD\u0026gt;\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch5 id=\"테이블-지정-export--out\"\u003e테이블 지정 Export : \u003ccode\u003eout\u003c/code\u003e\u003c/h5\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-sh\" data-lang=\"sh\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ bcp \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;dbname.dbo.tablename\u0026#34;\u003c/span\u003e out output.csv ...\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch5 id=\"쿼리-실행-결과-export--queryout\"\u003e쿼리 실행 결과 Export : \u003ccode\u003equeryout\u003c/code\u003e\u003c/h5\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-sh\" data-lang=\"sh\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ bcp \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;query\u0026#34;\u003c/span\u003e queryout output.csv ...\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch5 id=\"export-데이터-형식\"\u003eExport 데이터 형식\u003c/h5\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003e-n\u003c/code\u003e : 네이티브 포맷, SQL Server로 데이터 이전 할때 유용 (종결자 등의 이유로 데이터 이슈 해결)\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003e-c\u003c/code\u003e : 문자유형, OS의 기본 Charset을 따라감\n\u003cul\u003e\n\u003cli\u003e한글 Windows : \u003ccode\u003eEUC-KR\u003c/code\u003e\u003c/li\u003e\n\u003cli\u003eLinux : \u003ccode\u003eUTF-8\u003c/code\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003e-w\u003c/code\u003e : 와이드 문자유형, 유니코드 \u003ccode\u003eUTF-16 LE\u003c/code\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003chr\u003e\n\u003ch3 id=\"import\"\u003eImport\u003c/h3\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-sh\" data-lang=\"sh\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ bcp \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;dbname.dbo.tablename\u0026#34;\u003c/span\u003e in input.csv -c -t \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;,\u0026#34;\u003c/span\u003e -r \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\\n\u0026#34;\u003c/span\u003e -S \u0026lt;SERVER\u0026gt; -U \u0026lt;USER\u0026gt; -P \u0026lt;PASSWD\u0026gt;\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003chr\u003e\n\u003ch3 id=\"특이사항\"\u003e특이사항\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e길이가 0인 문자열의 경우 데이터 내에 \u003ccode\u003eNULL\u003c/code\u003e 문자를 삽입\u003c/li\u003e\n\u003cli\u003eSQL Server의 경우 문제는 없지만, 다른 DB 에 Import 의 경우 \u003ccode\u003eNULL\u003c/code\u003e 문자가 들어감\u003c/li\u003e\n\u003c/ul\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-sql\" data-lang=\"sql\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003eINSERT\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003eINTO\u003c/span\u003e tablename (filed) \u003cspan style=\"color:#66d9ef\"\u003eSELECT\u003c/span\u003e CHARACTER(\u003cspan style=\"color:#ae81ff\"\u003e0\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e-- MySQL 5.7 \n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003eSELECT\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e*\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003eFROM\u003c/span\u003e tablename \u003cspan style=\"color:#66d9ef\"\u003eWHERE\u003c/span\u003e filed \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;\u0026#39;\u003c/span\u003e;        \u003cspan style=\"color:#75715e\"\u003e-- Not Working \n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003eSELECT\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e*\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003eFROM\u003c/span\u003e tablename \u003cspan style=\"color:#66d9ef\"\u003eWHERE\u003c/span\u003e ASCII(filed) \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e0\u003c/span\u003e;  \u003cspan style=\"color:#75715e\"\u003e-- Working \n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e-- MySQL 8 \n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003eSELECT\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e*\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003eFROM\u003c/span\u003e tablename \u003cspan style=\"color:#66d9ef\"\u003eWHERE\u003c/span\u003e filed \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;\u0026#39;\u003c/span\u003e;        \u003cspan style=\"color:#75715e\"\u003e-- Working \n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003eSELECT\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e*\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003eFROM\u003c/span\u003e tablename \u003cspan style=\"color:#66d9ef\"\u003eWHERE\u003c/span\u003e ASCII(filed) \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e0\u003c/span\u003e;  \u003cspan style=\"color:#75715e\"\u003e-- Working \n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e","title":"SQL Server, BCP"},{"content":"MySQL 테이블에 Text 파일을 빠르게 Insert 하는 방벙\nMySQL LOAD DATA https://dev.mysql.com/doc/refman/8.0/en/load-data.html{:target=\u0026quot;_blank\u0026quot;} The LOAD DATA statement reads rows from a text file into a table at a very high speed LOAD DATA statement 사전 준비 : secure_file_priv secure_file_priv 의 설정값이 NULL 로 되어 있는데 빈문자열로 수정해야 함 SHOW VARIABLES LIKE \u0026#39;secure_file_priv\u0026#39; -- NULL my.cnf 에서 수정 및 재시작 필요 [mysqld] secure-file-priv=\u0026#34;\u0026#34; LOAD DATA 최소 설정 LOAD DATA INFILE \u0026#39;/path/data.txt\u0026#39; INTO TABLE data_table Field and Line Handling : Default 설정 LOAD DATA INFILE \u0026#39;/path/data.txt\u0026#39; INTO TABLE data_table FIELDS TERMINATED BY \u0026#39;\\t\u0026#39; ENCLOSED BY \u0026#39;\u0026#39; ESCAPED BY \u0026#39;\\\\\u0026#39; LINES TERMINATED BY \u0026#39;\\n\u0026#39; STARTING BY \u0026#39;\u0026#39; 헤더 라인 무시 LOAD DATA INFILE \u0026#39;/path/data.txt\u0026#39; INTO TABLE data_table IGNORE 1 LINES LOAD DATA 기본 설정 (CSV) LOAD DATA INFILE \u0026#39;/path/data.txt\u0026#39; IGNORE INTO TABLE data_table FIELDS TERMINATED BY \u0026#39;,\u0026#39; OPTIONALLY ENCLOSED BY \u0026#39;\u0026#34;\u0026#39; ESCAPED BY \u0026#39;\u0026#34;\u0026#39; LINES TERMINATED BY \u0026#39;\\n\u0026#39; (filed1, filed2, filed3 ) Duplicate-Key and Error Handling IGNORE : unique key 값이 있으면 새로운 행은 버려짐 default REPLACE : unique key 값 기준으로 새로운 행으로 변경 필드 개수, 순서 기본적으로 파일의 구분자 기준 순서와 필드와 1:1 매치됨 필드 지정을 통해 순서 조정 가능 파일의 구분자 필드가 많으면 : 버려짐 테이블의 필드가 많으면 : 나머지 필드는 Default 값이나 NULL 처리 (NULL 허용시) Input Preprocessing 테이블의 중간 필드를 무시 (Default 값 or NULL 처리) 하려면 @dummy 키워드로 필드 지정 필드 가공은 SET 명령으로 처리 @변수 명으로 받아서 가공후 필드에 지정할 수 있음 LOAD DATA INFILE \u0026#39;/path/data.txt\u0026#39; IGNORE INTO TABLE data_table FIELDS TERMINATED BY \u0026#39;,\u0026#39; LINES TERMINATED BY \u0026#39;\\n\u0026#39; (filed1, @dummy, filed3, @var1, filed5 ) SET filed2 = CURRENT_TIMESTAMP, filed4 = @var1 * 2; Index Handling : LOAD DATA 문의 성능향상을 위한 Index check option unique index checks option : SET unique_checks = 0 SET unique_checks = 1 foreign key check option : SET foreign_key_checks = 0 SET foreign_key_checks = 1 로컬(클라이언트) 데이터 원격 INSERT https://dev.mysql.com/doc/refman/8.0/en/load-data-local-security.html{:target=\u0026quot;_blank\u0026quot;} 사전 준비 : local_infile 설정 (server and client) server : local_infile 의 설정값이 ON(1) 로 수정해야 함 client : 접속시 --local-infile 옵션 추가 SHOW VARIABLES LIKE \u0026#39;local_infile\u0026#39; ; -- OFF SET GLOBAL local_infile = 1 ; SHOW VARIABLES LIKE \u0026#39;local_infile\u0026#39; ; -- ON LOCAL PATH 지정 LOAD DATA LOCAL INFILE ... LOAD DATA LOCAL INFILE \u0026#39;/path/data.txt\u0026#39; INTO TABLE data_table ","permalink":"https://cdecl.github.io/devops/mysql-load-data/","summary":"\u003cp\u003eMySQL 테이블에 Text 파일을 빠르게 Insert 하는 방벙\u003c/p\u003e\n\u003ch2 id=\"mysql-load-data\"\u003eMySQL LOAD DATA\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://dev.mysql.com/doc/refman/8.0/en/load-data.html\"\u003ehttps://dev.mysql.com/doc/refman/8.0/en/load-data.html\u003c/a\u003e{:target=\u0026quot;_blank\u0026quot;}\n\u003cul\u003e\n\u003cli\u003eThe LOAD DATA statement reads rows from a text file into a table at a very high speed\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"load-data-statement\"\u003eLOAD DATA statement\u003c/h3\u003e\n\u003ch4 id=\"사전-준비--secure_file_priv\"\u003e사전 준비 : secure_file_priv\u003c/h4\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003esecure_file_priv\u003c/code\u003e 의 설정값이 NULL 로 되어 있는데 빈문자열로 수정해야 함\u003c/li\u003e\n\u003c/ul\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-sql\" data-lang=\"sql\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003eSHOW\u003c/span\u003e VARIABLES \u003cspan style=\"color:#66d9ef\"\u003eLIKE\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;secure_file_priv\u0026#39;\u003c/span\u003e  \u003cspan style=\"color:#75715e\"\u003e-- NULL \n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cul\u003e\n\u003cli\u003emy.cnf 에서 수정 및 재시작 필요\u003c/li\u003e\n\u003c/ul\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-ini\" data-lang=\"ini\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003e[mysqld]\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#a6e22e\"\u003esecure-file-priv\u003c/span\u003e\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch3 id=\"load-data-최소-설정\"\u003eLOAD DATA 최소 설정\u003c/h3\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-sql\" data-lang=\"sql\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003eLOAD\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003eDATA\u003c/span\u003e INFILE \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;/path/data.txt\u0026#39;\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003eINTO\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003eTABLE\u003c/span\u003e data_table \n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch5 id=\"field-and-line-handling--default-설정\"\u003eField and Line Handling : Default 설정\u003c/h5\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-sql\" data-lang=\"sql\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003eLOAD\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003eDATA\u003c/span\u003e INFILE \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;/path/data.txt\u0026#39;\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003eINTO\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003eTABLE\u003c/span\u003e data_table\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eFIELDS TERMINATED \u003cspan style=\"color:#66d9ef\"\u003eBY\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;\\t\u0026#39;\u003c/span\u003e ENCLOSED \u003cspan style=\"color:#66d9ef\"\u003eBY\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;\u0026#39;\u003c/span\u003e ESCAPED \u003cspan style=\"color:#66d9ef\"\u003eBY\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;\\\\\u0026#39;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eLINES TERMINATED \u003cspan style=\"color:#66d9ef\"\u003eBY\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;\\n\u0026#39;\u003c/span\u003e STARTING \u003cspan style=\"color:#66d9ef\"\u003eBY\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;\u0026#39;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch5 id=\"헤더-라인-무시\"\u003e헤더 라인 무시\u003c/h5\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-sql\" data-lang=\"sql\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003eLOAD\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003eDATA\u003c/span\u003e INFILE \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;/path/data.txt\u0026#39;\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003eINTO\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003eTABLE\u003c/span\u003e data_table \u003cspan style=\"color:#66d9ef\"\u003eIGNORE\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e LINES\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch3 id=\"load-data-기본-설정-csv\"\u003eLOAD DATA 기본 설정 (CSV)\u003c/h3\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-sql\" data-lang=\"sql\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003eLOAD\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003eDATA\u003c/span\u003e INFILE \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;/path/data.txt\u0026#39;\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003eIGNORE\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003eINTO\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003eTABLE\u003c/span\u003e data_table \n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eFIELDS TERMINATED \u003cspan style=\"color:#66d9ef\"\u003eBY\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;,\u0026#39;\u003c/span\u003e OPTIONALLY ENCLOSED \u003cspan style=\"color:#66d9ef\"\u003eBY\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;\u0026#34;\u0026#39;\u003c/span\u003e ESCAPED \u003cspan style=\"color:#66d9ef\"\u003eBY\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;\u0026#34;\u0026#39;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eLINES TERMINATED \u003cspan style=\"color:#66d9ef\"\u003eBY\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;\\n\u0026#39;\u003c/span\u003e \n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e(filed1, filed2, filed3 )\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch5 id=\"duplicate-key-and-error-handling\"\u003eDuplicate-Key and Error Handling\u003c/h5\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003eIGNORE\u003c/code\u003e : unique key 값이 있으면 새로운 행은 버려짐 \u003ccode\u003edefault\u003c/code\u003e\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eREPLACE\u003c/code\u003e : unique key 값 기준으로 새로운 행으로 변경\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch5 id=\"필드-개수-순서\"\u003e필드 개수, 순서\u003c/h5\u003e\n\u003cul\u003e\n\u003cli\u003e기본적으로 파일의 구분자 기준 순서와 필드와 1:1 매치됨\u003c/li\u003e\n\u003cli\u003e필드 지정을 통해 순서 조정 가능\n\u003cul\u003e\n\u003cli\u003e파일의 구분자 필드가 많으면 : 버려짐\u003c/li\u003e\n\u003cli\u003e테이블의 필드가 많으면 : 나머지 필드는 Default 값이나 NULL 처리 (NULL 허용시)\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch5 id=\"input-preprocessing\"\u003eInput Preprocessing\u003c/h5\u003e\n\u003cul\u003e\n\u003cli\u003e테이블의 중간 필드를 무시 (Default 값 or NULL 처리) 하려면 \u003ccode\u003e@dummy\u003c/code\u003e 키워드로 필드 지정\u003c/li\u003e\n\u003cli\u003e필드 가공은 \u003ccode\u003eSET\u003c/code\u003e 명령으로 처리\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003e@변수\u003c/code\u003e 명으로 받아서 가공후 필드에 지정할 수 있음\u003c/li\u003e\n\u003c/ul\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-sql\" data-lang=\"sql\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003eLOAD\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003eDATA\u003c/span\u003e INFILE \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;/path/data.txt\u0026#39;\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003eIGNORE\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003eINTO\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003eTABLE\u003c/span\u003e data_table \n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eFIELDS TERMINATED \u003cspan style=\"color:#66d9ef\"\u003eBY\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;,\u0026#39;\u003c/span\u003e LINES TERMINATED \u003cspan style=\"color:#66d9ef\"\u003eBY\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;\\n\u0026#39;\u003c/span\u003e \n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e(filed1, \u003cspan style=\"color:#f92672\"\u003e@\u003c/span\u003edummy, filed3, \u003cspan style=\"color:#f92672\"\u003e@\u003c/span\u003evar1, filed5 )\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003eSET\u003c/span\u003e filed2 \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003eCURRENT_TIMESTAMP\u003c/span\u003e, filed4 \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e@\u003c/span\u003evar1 \u003cspan style=\"color:#f92672\"\u003e*\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e2\u003c/span\u003e;\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch5 id=\"index-handling--load-data-문의-성능향상을-위한-index-check-option\"\u003eIndex Handling : \u003ccode\u003eLOAD DATA\u003c/code\u003e 문의 성능향상을 위한 Index check option\u003c/h5\u003e\n\u003cul\u003e\n\u003cli\u003eunique index checks option : \u003ccode\u003eSET unique_checks = 0\u003c/code\u003e  \u003ccode\u003eSET unique_checks = 1\u003c/code\u003e\u003c/li\u003e\n\u003cli\u003eforeign key check option : \u003ccode\u003eSET foreign_key_checks = 0\u003c/code\u003e \u003ccode\u003eSET foreign_key_checks = 1\u003c/code\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003chr\u003e\n\u003ch4 id=\"로컬클라이언트-데이터-원격-insert\"\u003e로컬(클라이언트) 데이터 원격 INSERT\u003c/h4\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://dev.mysql.com/doc/refman/8.0/en/load-data-local-security.html\"\u003ehttps://dev.mysql.com/doc/refman/8.0/en/load-data-local-security.html\u003c/a\u003e{:target=\u0026quot;_blank\u0026quot;}\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch5 id=\"사전-준비--local_infile-설정-server-and-client\"\u003e사전 준비 : local_infile 설정 (server and client)\u003c/h5\u003e\n\u003cul\u003e\n\u003cli\u003eserver : \u003ccode\u003elocal_infile\u003c/code\u003e 의 설정값이 ON(1) 로 수정해야 함\u003c/li\u003e\n\u003cli\u003eclient : 접속시 \u003ccode\u003e--local-infile\u003c/code\u003e 옵션 추가\u003c/li\u003e\n\u003c/ul\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-sql\" data-lang=\"sql\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003eSHOW\u003c/span\u003e VARIABLES \u003cspan style=\"color:#66d9ef\"\u003eLIKE\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;local_infile\u0026#39;\u003c/span\u003e ; \u003cspan style=\"color:#75715e\"\u003e-- OFF\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003eSET\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003eGLOBAL\u003c/span\u003e local_infile \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e ;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003eSHOW\u003c/span\u003e VARIABLES \u003cspan style=\"color:#66d9ef\"\u003eLIKE\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;local_infile\u0026#39;\u003c/span\u003e ; \u003cspan style=\"color:#75715e\"\u003e-- ON\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch5 id=\"local-path-지정\"\u003eLOCAL PATH 지정\u003c/h5\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003eLOAD DATA LOCAL INFILE ...\u003c/code\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-sql\" data-lang=\"sql\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003eLOAD\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003eDATA\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003eLOCAL\u003c/span\u003e INFILE \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;/path/data.txt\u0026#39;\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003eINTO\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003eTABLE\u003c/span\u003e data_table \n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e","title":"MySQL LOAD DATA"},{"content":"Docker 내부에서 Docker 실행\nDocker in Docker : DinD Docker 내부에서 Docker 를 실행 하기 위해서는 추가적인 호스트 머신의 권한을 획득 해야함 --privileged : Give extended privileges to this container 호스트 머신의 커널 기능 및 장치에 접근 가능하게 됨 --privileged 의 문제점 안전하지 않은 컨테이너로 인한 호스트 머신의 커널이나 장치를 활용하여 취약점에 노출되게 됨 http://jpetazzo.github.io/2015/09/03/do-not-use-docker-in-docker-for-ci/{:target=\u0026quot;_blank\u0026quot;} 서비스 환경에서의 여러가지 약점은 가지고 있지만, Workflow 등의 내부 Devops 툴로서의 유용하다고 판단\nDocker in Docker 실행 alpine 이미지 활용 테스트 $ docker run -it --rm --privileged --name=dind alpine Docker 설치 및 실행 # 설치 $ apk add docker fetch http://dl-cdn.alpinelinux.org/alpine/v3.14/main/x86_64/APKINDEX.tar.gz fetch http://dl-cdn.alpinelinux.org/alpine/v3.14/community/x86_64/APKINDEX.tar.gz (1/13) Installing ca-certificates (20191127-r5) ... (13/13) Installing docker (20.10.7-r2) Executing docker-20.10.7-r2.pre-install Executing busybox-1.33.1-r3.trigger Executing ca-certificates-20191127-r5.trigger OK: 253 MiB in 27 packages # 실행 $ dockerd 2\u0026gt; /dev/null \u0026amp; $ ps -ef PID USER TIME COMMAND 1 root 0:00 /bin/sh 125 root 0:00 dockerd 133 root 0:00 containerd --config /var/run/docker/containerd/containerd.toml --log-le 260 root 0:00 ps -ef Docker in Docker 테스트 $ cat /etc/*-release 3.14.2 NAME=\u0026#34;Alpine Linux\u0026#34; ID=alpine VERSION_ID=3.14.2 PRETTY_NAME=\u0026#34;Alpine Linux v3.14\u0026#34; HOME_URL=\u0026#34;https://alpinelinux.org/\u0026#34; BUG_REPORT_URL=\u0026#34;https://bugs.alpinelinux.org/\u0026#34; $ docker run --rm ubuntu cat /etc/*-release cat: /etc/alpine-release: No such file or directory NAME=\u0026#34;Ubuntu\u0026#34; VERSION=\u0026#34;20.04.3 LTS (Focal Fossa)\u0026#34; ID=ubuntu ID_LIKE=debian PRETTY_NAME=\u0026#34;Ubuntu 20.04.3 LTS\u0026#34; VERSION_ID=\u0026#34;20.04\u0026#34; HOME_URL=\u0026#34;https://www.ubuntu.com/\u0026#34; SUPPORT_URL=\u0026#34;https://help.ubuntu.com/\u0026#34; BUG_REPORT_URL=\u0026#34;https://bugs.launchpad.net/ubuntu/\u0026#34; PRIVACY_POLICY_URL=\u0026#34;https://www.ubuntu.com/legal/terms-and-policies/privacy-policy\u0026#34; VERSION_CODENAME=focal UBUNTU_CODENAME=focal $ docker run --rm centos cat /etc/*-release cat: /etc/alpine-release: No such file or directory NAME=\u0026#34;CentOS Linux\u0026#34; VERSION=\u0026#34;8\u0026#34; ID=\u0026#34;centos\u0026#34; ID_LIKE=\u0026#34;rhel fedora\u0026#34; VERSION_ID=\u0026#34;8\u0026#34; PLATFORM_ID=\u0026#34;platform:el8\u0026#34; PRETTY_NAME=\u0026#34;CentOS Linux 8\u0026#34; ANSI_COLOR=\u0026#34;0;31\u0026#34; CPE_NAME=\u0026#34;cpe:/o:centos:centos:8\u0026#34; HOME_URL=\u0026#34;https://centos.org/\u0026#34; BUG_REPORT_URL=\u0026#34;https://bugs.centos.org/\u0026#34; CENTOS_MANTISBT_PROJECT=\u0026#34;CentOS-8\u0026#34; CENTOS_MANTISBT_PROJECT_VERSION=\u0026#34;8\u0026#34; Docker out of Docker : DooD --privileged 사용의 피하기위한 방법 CLI 명령 API인 docker.sock 을 활용, 볼륨을 통해 호스트 머신의 명령을 전달하여 호스트 머신에서 실행 하는 방법 /var/run/docker.sock /var/run/docker.sock docker daemon 에서 인터페이스용으로 노출한 unix domain socket Docker ouf of Docker 실행 # volume 으로 docker.sock 을 연결 $ docker run -it --rm -v /var/run/docker.sock:/var/run/docker.sock --name=dood alpine Docker 설치 및 실행 # 설치 $ apk add docker fetch http://dl-cdn.alpinelinux.org/alpine/v3.14/main/x86_64/APKINDEX.tar.gz fetch http://dl-cdn.alpinelinux.org/alpine/v3.14/community/x86_64/APKINDEX.tar.gz (1/13) Installing ca-certificates (20191127-r5) ... (13/13) Installing docker (20.10.7-r2) Executing docker-20.10.7-r2.pre-install Executing busybox-1.33.1-r3.trigger Executing ca-certificates-20191127-r5.trigger OK: 253 MiB in 27 packages # 호스트머신에서 명령을 실행 하므로 자신의 컨테이너가 보임 $ docker ps CONTAINER ID IMAGE COMMAND CREATED STATUS PORTS NAMES 1a391d12768c alpine \u0026#34;/bin/sh\u0026#34; 2 minutes ago Up 2 minutes dood $ docker run -d --rm --name=ubuntu ubuntu sleep 10 d14cfc9ff9cd2b4faecfed5af9e1e1b6dd4a7d1497bed4a6d34faaad64a442f9 # 자신의 컨테이너와 동일한 환경에서의 별도 docker 실행 확인 $ docker ps CONTAINER ID IMAGE COMMAND CREATED STATUS PORTS NAMES d14cfc9ff9cd ubuntu \u0026#34;sleep 10\u0026#34; 3 seconds ago Up 2 seconds ubuntu 1a391d12768c alpine \u0026#34;/bin/sh\u0026#34; 6 minutes ago Up 6 minutes dood ","permalink":"https://cdecl.github.io/devops/docker-in-docker/","summary":"\u003cp\u003eDocker 내부에서 Docker 실행\u003c/p\u003e\n\u003ch2 id=\"docker-in-docker--dind\"\u003eDocker in Docker : \u003ccode\u003eDinD\u003c/code\u003e\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003eDocker 내부에서 Docker 를 실행 하기 위해서는 추가적인 호스트 머신의 권한을 획득 해야함\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003e--privileged\u003c/code\u003e : Give extended privileges to this container\u003c/li\u003e\n\u003cli\u003e호스트 머신의 커널 기능 및 장치에 접근 가능하게 됨\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"--privileged-의-문제점\"\u003e\u003ccode\u003e--privileged\u003c/code\u003e 의 문제점\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e안전하지 않은 컨테이너로 인한 호스트 머신의 커널이나 장치를 활용하여 취약점에 노출되게 됨\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"http://jpetazzo.github.io/2015/09/03/do-not-use-docker-in-docker-for-ci/\"\u003ehttp://jpetazzo.github.io/2015/09/03/do-not-use-docker-in-docker-for-ci/\u003c/a\u003e{:target=\u0026quot;_blank\u0026quot;}\u003c/li\u003e\n\u003c/ul\u003e\n\u003cblockquote\u003e\n\u003cp\u003e서비스 환경에서의 여러가지 약점은 가지고 있지만, Workflow 등의 내부 Devops 툴로서의 유용하다고 판단\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003ch3 id=\"docker-in-docker-실행\"\u003eDocker in Docker 실행\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003ealpine 이미지 활용 테스트\u003c/li\u003e\n\u003c/ul\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-sh\" data-lang=\"sh\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ docker run -it --rm --privileged --name\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003edind alpine\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cul\u003e\n\u003cli\u003eDocker 설치 및 실행\u003c/li\u003e\n\u003c/ul\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-sh\" data-lang=\"sh\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# 설치\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ apk add docker\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003efetch http://dl-cdn.alpinelinux.org/alpine/v3.14/main/x86_64/APKINDEX.tar.gz\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003efetch http://dl-cdn.alpinelinux.org/alpine/v3.14/community/x86_64/APKINDEX.tar.gz\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003e(\u003c/span\u003e1/13\u003cspan style=\"color:#f92672\"\u003e)\u003c/span\u003e Installing ca-certificates \u003cspan style=\"color:#f92672\"\u003e(\u003c/span\u003e20191127-r5\u003cspan style=\"color:#f92672\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e...\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003e(\u003c/span\u003e13/13\u003cspan style=\"color:#f92672\"\u003e)\u003c/span\u003e Installing docker \u003cspan style=\"color:#f92672\"\u003e(\u003c/span\u003e20.10.7-r2\u003cspan style=\"color:#f92672\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eExecuting docker-20.10.7-r2.pre-install\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eExecuting busybox-1.33.1-r3.trigger\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eExecuting ca-certificates-20191127-r5.trigger\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eOK: \u003cspan style=\"color:#ae81ff\"\u003e253\u003c/span\u003e MiB in \u003cspan style=\"color:#ae81ff\"\u003e27\u003c/span\u003e packages\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# 실행\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ dockerd 2\u0026gt; /dev/null \u0026amp;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ ps -ef\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ePID   USER     TIME  COMMAND\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e root      0:00 /bin/sh\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#ae81ff\"\u003e125\u003c/span\u003e root      0:00 dockerd\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#ae81ff\"\u003e133\u003c/span\u003e root      0:00 containerd --config /var/run/docker/containerd/containerd.toml --log-le\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#ae81ff\"\u003e260\u003c/span\u003e root      0:00 ps -ef\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cul\u003e\n\u003cli\u003eDocker in Docker 테스트\u003c/li\u003e\n\u003c/ul\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-sh\" data-lang=\"sh\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ cat /etc/*-release\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e3.14.2\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eNAME\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;Alpine Linux\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eID\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003ealpine\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eVERSION_ID\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e3.14.2\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ePRETTY_NAME\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;Alpine Linux v3.14\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eHOME_URL\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;https://alpinelinux.org/\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eBUG_REPORT_URL\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;https://bugs.alpinelinux.org/\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ docker run --rm ubuntu cat /etc/*-release\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ecat: /etc/alpine-release: No such file or directory\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eNAME\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;Ubuntu\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eVERSION\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;20.04.3 LTS (Focal Fossa)\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eID\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003eubuntu\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eID_LIKE\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003edebian\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ePRETTY_NAME\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;Ubuntu 20.04.3 LTS\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eVERSION_ID\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;20.04\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eHOME_URL\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;https://www.ubuntu.com/\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eSUPPORT_URL\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;https://help.ubuntu.com/\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eBUG_REPORT_URL\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;https://bugs.launchpad.net/ubuntu/\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ePRIVACY_POLICY_URL\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;https://www.ubuntu.com/legal/terms-and-policies/privacy-policy\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eVERSION_CODENAME\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003efocal\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eUBUNTU_CODENAME\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003efocal\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ docker run --rm centos cat /etc/*-release\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ecat: /etc/alpine-release: No such file or directory\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eNAME\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;CentOS Linux\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eVERSION\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;8\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eID\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;centos\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eID_LIKE\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;rhel fedora\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eVERSION_ID\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;8\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ePLATFORM_ID\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;platform:el8\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ePRETTY_NAME\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;CentOS Linux 8\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eANSI_COLOR\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;0;31\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eCPE_NAME\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;cpe:/o:centos:centos:8\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eHOME_URL\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;https://centos.org/\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eBUG_REPORT_URL\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;https://bugs.centos.org/\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eCENTOS_MANTISBT_PROJECT\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;CentOS-8\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eCENTOS_MANTISBT_PROJECT_VERSION\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;8\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch2 id=\"docker-out-of-docker--dood\"\u003eDocker out of Docker : \u003ccode\u003eDooD\u003c/code\u003e\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003e--privileged\u003c/code\u003e 사용의 피하기위한 방법\u003c/li\u003e\n\u003cli\u003eCLI 명령 API인 \u003ccode\u003edocker.sock\u003c/code\u003e 을 활용, 볼륨을 통해 호스트 머신의 명령을 전달하여 호스트 머신에서 실행 하는 방법\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003e/var/run/docker.sock\u003c/code\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"varrundockersock\"\u003e\u003ccode\u003e/var/run/docker.sock\u003c/code\u003e\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003edocker daemon 에서 인터페이스용으로 노출한 unix domain socket\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"docker-ouf-of-docker-실행\"\u003eDocker ouf of Docker 실행\u003c/h3\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-sh\" data-lang=\"sh\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# volume 으로 docker.sock 을 연결 \u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ docker run -it --rm -v /var/run/docker.sock:/var/run/docker.sock --name\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003edood alpine\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cul\u003e\n\u003cli\u003eDocker 설치 및 실행\u003c/li\u003e\n\u003c/ul\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-sh\" data-lang=\"sh\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# 설치\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ apk add docker\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003efetch http://dl-cdn.alpinelinux.org/alpine/v3.14/main/x86_64/APKINDEX.tar.gz\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003efetch http://dl-cdn.alpinelinux.org/alpine/v3.14/community/x86_64/APKINDEX.tar.gz\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003e(\u003c/span\u003e1/13\u003cspan style=\"color:#f92672\"\u003e)\u003c/span\u003e Installing ca-certificates \u003cspan style=\"color:#f92672\"\u003e(\u003c/span\u003e20191127-r5\u003cspan style=\"color:#f92672\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e...\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003e(\u003c/span\u003e13/13\u003cspan style=\"color:#f92672\"\u003e)\u003c/span\u003e Installing docker \u003cspan style=\"color:#f92672\"\u003e(\u003c/span\u003e20.10.7-r2\u003cspan style=\"color:#f92672\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eExecuting docker-20.10.7-r2.pre-install\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eExecuting busybox-1.33.1-r3.trigger\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eExecuting ca-certificates-20191127-r5.trigger\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eOK: \u003cspan style=\"color:#ae81ff\"\u003e253\u003c/span\u003e MiB in \u003cspan style=\"color:#ae81ff\"\u003e27\u003c/span\u003e packages\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# 호스트머신에서 명령을 실행 하므로 자신의 컨테이너가 보임 \u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ docker ps\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eCONTAINER ID   IMAGE     COMMAND     CREATED         STATUS         PORTS     NAMES\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e1a391d12768c   alpine    \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;/bin/sh\u0026#34;\u003c/span\u003e   \u003cspan style=\"color:#ae81ff\"\u003e2\u003c/span\u003e minutes ago   Up \u003cspan style=\"color:#ae81ff\"\u003e2\u003c/span\u003e minutes             dood\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ docker run -d --rm --name\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003eubuntu ubuntu sleep \u003cspan style=\"color:#ae81ff\"\u003e10\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ed14cfc9ff9cd2b4faecfed5af9e1e1b6dd4a7d1497bed4a6d34faaad64a442f9\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# 자신의 컨테이너와 동일한 환경에서의 별도 docker 실행 확인\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ docker ps\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eCONTAINER ID   IMAGE     COMMAND      CREATED         STATUS         PORTS     NAMES\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ed14cfc9ff9cd   ubuntu    \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;sleep 10\u0026#34;\u003c/span\u003e   \u003cspan style=\"color:#ae81ff\"\u003e3\u003c/span\u003e seconds ago   Up \u003cspan style=\"color:#ae81ff\"\u003e2\u003c/span\u003e seconds             ubuntu\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e1a391d12768c   alpine    \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;/bin/sh\u0026#34;\u003c/span\u003e    \u003cspan style=\"color:#ae81ff\"\u003e6\u003c/span\u003e minutes ago   Up \u003cspan style=\"color:#ae81ff\"\u003e6\u003c/span\u003e minutes             dood\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e","title":"Docker in Docker / Docker out of Docker"},{"content":"Kubernetes Job 을 활용한 동시작업\nKubernetes Job https://kubernetes.io/ko/docs/concepts/workloads/controllers/job/{:target=\u0026quot;_blank\u0026quot;} Pod 를 생성하고, Pod를 통해 성공적으로 종료할떄까지의 일련의 작업실행\nJob : 단일 Job 테스트 alpine pod 실행 및 ip 명령어로 IP 확인\ncommand : 명령어 (배열) restartPolicy : Always, OnFailure, Never (default Always) 배치 작업이므로 재시작 하면 안됨 : Never backoffLimit : 실패시 재시작 횟수 (defalut: 6) # time.yml apiVersion: batch/v1 kind: Job metadata: name: ip spec: template: metadata: name: ip spec: containers: - name: ip image: alpine command: [\u0026#34;ip\u0026#34;, \u0026#34;a\u0026#34;] restartPolicy: Never backoffLimit: 0 $ kubectl apply -f ip.yml job.batch/ip created $ kubectl get pod NAME READY STATUS RESTARTS AGE ip-5x8qm 0/1 Completed 0 14s 로그 확인 $ kubectl logs ip-5x8qm 1: lo: \u0026lt;LOOPBACK,UP,LOWER_UP\u0026gt; mtu 65536 qdisc noqueue state UNKNOWN qlen 1000 link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00 inet 127.0.0.1/8 scope host lo valid_lft forever preferred_lft forever inet6 ::1/128 scope host valid_lft forever preferred_lft forever 3: eth0@if58: \u0026lt;BROADCAST,MULTICAST,UP,LOWER_UP,M-DOWN\u0026gt; mtu 1450 qdisc noqueue state UP link/ether 9a:f9:d3:9f:32:eb brd ff:ff:ff:ff:ff:ff inet 10.42.0.37/24 brd 10.42.0.255 scope global eth0 valid_lft forever preferred_lft forever inet6 fe80::98f9:d3ff:fe9f:32eb/64 scope link valid_lft forever preferred_lft forever Job : Parallel 동시작업 wrk 를 활용 http 퍼포먼스 테스트 : https://github.com/wg/wrk{:target=\u0026quot;_blank\u0026quot;} Image : cdecl/asb{:target=\u0026quot;_blank\u0026quot;} Parallel 실행 1 parallelism : 동시 실행 Pod 개수 (default: 1) completions : Pod 완료로 판단하는 개수 (default: parallelism ) apiVersion: batch/v1 kind: Job metadata: name: wrk spec: completions: 4 parallelism: 4 template: metadata: name: wrk spec: containers: - name: wrk image: cdecl/asb command: [\u0026#34;wrk\u0026#34;, \u0026#34;-d5\u0026#34;, \u0026#34;http://httpbin.org/get\u0026#34;] restartPolicy: Never backoffLimit: 0 실행, 로그 확인 $ kubectl apply -f wrk.yml $ kubectl logs wrk-6fkm4 Running 5s test @ http://httpbin.org/get 2 threads and 10 connections Thread Stats Avg Stdev Max +/- Stdev Latency 34.45ms 63.03ms 408.58ms 92.36% Req/Sec 108.80 29.09 191.00 78.89% 1003 requests in 5.01s, 557.33KB read Requests/sec: 200.39 Transfer/sec: 111.35KB Parallel 실행 2 completions \u0026gt; parallelism : parallelism 개수만큼 동시 실행되고, completions 개수만큼 Pod 생성 apiVersion: batch/v1 kind: Job metadata: name: wrk spec: completions: 4 parallelism: 2 ... Job 의 전체 Pod 로그 확인 kubectl 을 통해서 json output을 다룰수 있으나, jq 만큼 유연하지는 않음 # Pod 이름 확인 $ kubectl get pod --selector=job-name=wrk -o=json | jq -r \u0026#39;.items[].metadata.name\u0026#39; wrk-g4kxr wrk-44vlk wrk-g7jtv wrk-lx9rf # 각 Pod 의 로그확인 $ kubectl get pod --selector=job-name=wrk -o=json | jq -r \u0026#39;.items[].metadata.name\u0026#39; | xargs -i kubectl logs {} Running 5s test @ http://httpbin.org/get 2 threads and 10 connections Thread Stats Avg Stdev Max +/- Stdev Latency 0.00us 0.00us 0.00us -nan% Req/Sec 0.00 0.00 0.00 -nan% 0 requests in 5.01s, 0.00B read Requests/sec: 0.00 Transfer/sec: 0.00B Running 5s test @ http://httpbin.org/get 2 threads and 10 connections Thread Stats Avg Stdev Max +/- Stdev Latency 26.63ms 81.87ms 644.70ms 91.58% Req/Sec 272.61 155.98 540.00 60.71% 826 requests in 5.01s, 519.76KB read Socket errors: connect 0, read 0, write 0, timeout 10 Requests/sec: 164.99 Transfer/sec: 103.82KB Running 5s test @ http://httpbin.org/get 2 threads and 10 connections Thread Stats Avg Stdev Max +/- Stdev Latency 19.15ms 52.63ms 314.47ms 92.81% Req/Sec 249.73 88.39 500.00 69.47% 2407 requests in 5.01s, 1.57MB read Requests/sec: 480.89 Transfer/sec: 322.16KB Running 5s test @ http://httpbin.org/get 2 threads and 10 connections Thread Stats Avg Stdev Max +/- Stdev Latency 11.73ms 37.52ms 304.20ms 96.02% Req/Sec 215.97 105.45 535.00 67.71% 2074 requests in 5.10s, 1.36MB read Requests/sec: 406.69 Transfer/sec: 272.45KB ","permalink":"https://cdecl.github.io/devops/kubernetes-job-simple/","summary":"\u003cp\u003eKubernetes Job 을 활용한 동시작업\u003c/p\u003e\n\u003ch2 id=\"kubernetes-job\"\u003eKubernetes Job\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://kubernetes.io/ko/docs/concepts/workloads/controllers/job/\"\u003ehttps://kubernetes.io/ko/docs/concepts/workloads/controllers/job/\u003c/a\u003e{:target=\u0026quot;_blank\u0026quot;}\u003c/li\u003e\n\u003c/ul\u003e\n\u003cblockquote\u003e\n\u003cp\u003ePod 를 생성하고, Pod를 통해 성공적으로 종료할떄까지의 일련의 작업실행\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003ch3 id=\"job--단일-job-테스트\"\u003eJob : 단일 Job 테스트\u003c/h3\u003e\n\u003cp\u003e\u003ccode\u003ealpine\u003c/code\u003e pod 실행 및 \u003ccode\u003eip\u003c/code\u003e 명령어로 IP 확인\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003ecommand\u003c/code\u003e : 명령어 (배열)\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003erestartPolicy\u003c/code\u003e : \u003ccode\u003eAlways\u003c/code\u003e, \u003ccode\u003eOnFailure\u003c/code\u003e, \u003ccode\u003eNever\u003c/code\u003e (default \u003ccode\u003eAlways\u003c/code\u003e)\n\u003cul\u003e\n\u003cli\u003e배치 작업이므로 재시작 하면 안됨 : \u003ccode\u003eNever\u003c/code\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003ebackoffLimit\u003c/code\u003e : 실패시 재시작 횟수 (defalut: 6)\u003c/li\u003e\n\u003c/ul\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-yaml\" data-lang=\"yaml\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# time.yml\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003eapiVersion\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003ebatch/v1\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003ekind\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003eJob\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003emetadata\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e \u003cspan style=\"color:#f92672\"\u003ename\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003eip\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003espec\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#f92672\"\u003etemplate\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003emetadata\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      \u003cspan style=\"color:#f92672\"\u003ename\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003eip\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003espec\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      \u003cspan style=\"color:#f92672\"\u003econtainers\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      - \u003cspan style=\"color:#f92672\"\u003ename\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003eip\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#f92672\"\u003eimage\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003ealpine\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#f92672\"\u003ecommand\u003c/span\u003e: [\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;ip\u0026#34;\u003c/span\u003e, \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;a\u0026#34;\u003c/span\u003e]\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      \u003cspan style=\"color:#f92672\"\u003erestartPolicy\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003eNever\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#f92672\"\u003ebackoffLimit\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003e0\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-sh\" data-lang=\"sh\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ kubectl apply -f ip.yml\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ejob.batch/ip created\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ kubectl get pod\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eNAME       READY   STATUS      RESTARTS   AGE\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eip-5x8qm   0/1     Completed   \u003cspan style=\"color:#ae81ff\"\u003e0\u003c/span\u003e          14s\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch4 id=\"로그-확인\"\u003e로그 확인\u003c/h4\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-sh\" data-lang=\"sh\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ kubectl logs ip-5x8qm\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e1: lo: \u0026lt;LOOPBACK,UP,LOWER_UP\u0026gt; mtu \u003cspan style=\"color:#ae81ff\"\u003e65536\u003c/span\u003e qdisc noqueue state UNKNOWN qlen \u003cspan style=\"color:#ae81ff\"\u003e1000\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    inet 127.0.0.1/8 scope host lo\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e       valid_lft forever preferred_lft forever\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    inet6 ::1/128 scope host\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e       valid_lft forever preferred_lft forever\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e3: eth0@if58: \u0026lt;BROADCAST,MULTICAST,UP,LOWER_UP,M-DOWN\u0026gt; mtu \u003cspan style=\"color:#ae81ff\"\u003e1450\u003c/span\u003e qdisc noqueue state UP\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    link/ether 9a:f9:d3:9f:32:eb brd ff:ff:ff:ff:ff:ff\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    inet 10.42.0.37/24 brd 10.42.0.255 scope global eth0\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e       valid_lft forever preferred_lft forever\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    inet6 fe80::98f9:d3ff:fe9f:32eb/64 scope link\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e       valid_lft forever preferred_lft forever\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003chr\u003e\n\u003ch3 id=\"job--parallel-동시작업\"\u003eJob : Parallel 동시작업\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003ewrk 를 활용 http 퍼포먼스 테스트 : \u003ca href=\"https://github.com/wg/wrk\"\u003ehttps://github.com/wg/wrk\u003c/a\u003e{:target=\u0026quot;_blank\u0026quot;}\u003c/li\u003e\n\u003cli\u003eImage : \u003ca href=\"https://hub.docker.com/r/cdecl/asb/\"\u003ecdecl/asb\u003c/a\u003e{:target=\u0026quot;_blank\u0026quot;}\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch4 id=\"parallel-실행-1\"\u003eParallel 실행 1\u003c/h4\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003eparallelism\u003c/code\u003e : 동시 실행 Pod 개수 (default: 1)\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003ecompletions\u003c/code\u003e : Pod 완료로 판단하는 개수 (default: \u003ccode\u003eparallelism\u003c/code\u003e )\u003c/li\u003e\n\u003c/ul\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-yaml\" data-lang=\"yaml\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003eapiVersion\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003ebatch/v1\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003ekind\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003eJob\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003emetadata\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e \u003cspan style=\"color:#f92672\"\u003ename\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003ewrk\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003espec\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#f92672\"\u003ecompletions\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003e4\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#f92672\"\u003eparallelism\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003e4\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#f92672\"\u003etemplate\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003emetadata\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      \u003cspan style=\"color:#f92672\"\u003ename\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003ewrk\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003espec\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      \u003cspan style=\"color:#f92672\"\u003econtainers\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      - \u003cspan style=\"color:#f92672\"\u003ename\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003ewrk\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#f92672\"\u003eimage\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003ecdecl/asb\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#f92672\"\u003ecommand\u003c/span\u003e: [\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;wrk\u0026#34;\u003c/span\u003e, \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;-d5\u0026#34;\u003c/span\u003e, \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;http://httpbin.org/get\u0026#34;\u003c/span\u003e]\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      \u003cspan style=\"color:#f92672\"\u003erestartPolicy\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003eNever\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#f92672\"\u003ebackoffLimit\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003e0\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch4 id=\"실행-로그-확인\"\u003e실행, 로그 확인\u003c/h4\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-sh\" data-lang=\"sh\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ kubectl apply -f wrk.yml\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003e\u003cimg loading=\"lazy\" src=\"/images/job-4-4.gif\"\u003e\u003c/p\u003e","title":"Kubernetes Job 실행"},{"content":"Kubespray 를 이용한 Kubernetes 설치 (Baremetal)\n사전준비 서버 노드 준비 3대 Node 192.168.28.15 192.168.28.16 192.168.28.17 서버 노드 환경설정 : kubernetes-101 참고 Swap 영역을 비활성화 SELinux Disable 방화벽 Disable 브릿지 네트워크 할성화 설치 노드에서의 ssh 접속 허용 : SSH 키복사 ssh-copy-id 설치 준비 Git : Repository Clone Python3 : Inventory 및 환경 설정을 위한 스크립트 실행 Ansible : 원격 실행(설치) ansible-playbook Repository clone 및 Python package install\n$ git clone https://github.com/kubernetes-sigs/kubespray $ cd kubespray # Package install $ pip3 install -r requirements.txt 설치 방법 1 : inventory_builder inventory_builder Python script 활용 inventory 구성 및 설치\n# Install 을 위한 Inventory 생성을 위한 공간 생성(복사) $ cp -rfp inventory/sample inventory/glass # IP 3개 지정, Node 설정 → inventory/glass/hosts.yaml $ declare -a IPS=(192.168.28.15 192.168.28.16 192.168.28.17) $ CONFIG_FILE=inventory/glass/hosts.yaml python3 contrib/inventory_builder/inventory.py ${IPS[@]} DEBUG: Adding group all DEBUG: Adding group kube_control_plane DEBUG: Adding group kube_node DEBUG: Adding group etcd DEBUG: Adding group k8s_cluster DEBUG: Adding group calico_rr DEBUG: adding host node1 to group all DEBUG: adding host node2 to group all DEBUG: adding host node3 to group all DEBUG: adding host node1 to group etcd DEBUG: adding host node2 to group etcd DEBUG: adding host node3 to group etcd DEBUG: adding host node1 to group kube_control_plane DEBUG: adding host node2 to group kube_control_plane DEBUG: adding host node1 to group kube_node DEBUG: adding host node2 to group kube_node DEBUG: adding host node3 to group kube_node # inventory 자동 구성 - 3개 노드 # kube_control_plane: node1,node2 # workder: node3 $ cat inventory/glass/hosts.yaml all: hosts: node1: ansible_host: 192.168.28.15 ip: 192.168.28.15 access_ip: 192.168.28.15 node2: ansible_host: 192.168.28.16 ip: 192.168.28.16 access_ip: 192.168.28.16 node3: ansible_host: 192.168.28.17 ip: 192.168.28.17 access_ip: 192.168.28.17 children: kube_control_plane: hosts: node1: node2: kube_node: hosts: node1: node2: node3: etcd: hosts: node1: node2: node3: k8s_cluster: children: kube_control_plane: kube_node: calico_rr: hosts: {} ## Install // 오래 걸림 $ ansible-playbook -i inventory/glass/hosts.yaml --become --become-user=root cluster.yml Cluster 확인 $ kubectl get node NAME STATUS ROLES AGE VERSION node1 Ready control-plane,master 40m v1.18.6 node2 Ready control-plane,master 40m v1.18.6 node3 Ready \u0026lt;none\u0026gt; 38m v1.18.6 $ kubectl get pod -A NAMESPACE NAME READY STATUS RESTARTS AGE kube-system calico-kube-controllers-8575b76f66-kx2sv 0/1 CrashLoopBackOff 12 40m kube-system calico-node-g9xmm 1/1 Running 0 40m kube-system calico-node-pg7dt 1/1 Running 0 40m kube-system calico-node-rwbcf 1/1 Running 0 40m kube-system coredns-8474476ff8-26p2b 1/1 Running 0 39m kube-system coredns-8474476ff8-j5k4w 1/1 Running 0 39m kube-system dns-autoscaler-7df78bfcfb-7r474 1/1 Running 0 39m kube-system kube-apiserver-node1 1/1 Running 0 42m kube-system kube-apiserver-node2 1/1 Running 0 41m kube-system kube-controller-manager-node1 1/1 Running 0 42m kube-system kube-controller-manager-node2 1/1 Running 0 41m kube-system kube-proxy-4lqh5 1/1 Running 0 40m kube-system kube-proxy-6tg8t 1/1 Running 0 40m kube-system kube-proxy-brljv 1/1 Running 0 40m kube-system kube-scheduler-node1 1/1 Running 0 42m kube-system kube-scheduler-node2 1/1 Running 0 41m kube-system nginx-proxy-node3 1/1 Running 0 40m kube-system nodelocaldns-76jw6 1/1 Running 0 39m kube-system nodelocaldns-k87js 1/1 Running 0 39m kube-system nodelocaldns-lnlqt 1/1 Running 0 39m 서비스 설치 및 확인 mvcapp-deploy-service.yaml apiVersion: apps/v1 kind: Deployment metadata: name: mvcapp spec: selector: matchLabels: app: mvcapp replicas: 4 template: metadata: labels: app: mvcapp spec: containers: - name: mvcapp image: cdecl/mvcapp:0.6 imagePullPolicy: Always ports: - containerPort: 80 --- apiVersion: v1 kind: Service metadata: name: mvcapp spec: type: NodePort selector: app: mvcapp ports: - port: 80 targetPort: 80 nodePort: 30010 $ kubectl apply -f mvcapp-deploy-service.yaml deployment.apps/mvcapp created service/mvcapp created $ kubectl get pod -owide NAME READY STATUS RESTARTS AGE IP NODE NOMINATED NODE READINESS GATES mvcapp-5c56c55f76-c245s 1/1 Running 0 44s 10.233.96.4 node2 \u0026lt;none\u0026gt; \u0026lt;none\u0026gt; mvcapp-5c56c55f76-nt7bw 1/1 Running 0 44s 10.233.92.5 node3 \u0026lt;none\u0026gt; \u0026lt;none\u0026gt; mvcapp-5c56c55f76-pjr8c 1/1 Running 0 44s 10.233.96.3 node2 \u0026lt;none\u0026gt; \u0026lt;none\u0026gt; mvcapp-5c56c55f76-xthgs 1/1 Running 0 44s 10.233.92.6 node3 \u0026lt;none\u0026gt; \u0026lt;none\u0026gt;] $ kubectl get svc NAME TYPE CLUSTER-IP EXTERNAL-IP PORT(S) AGE kubernetes ClusterIP 10.233.0.1 \u0026lt;none\u0026gt; 443/TCP 8m42s mvcapp NodePort 10.233.12.111 \u0026lt;none\u0026gt; 80:30010/TCP 83s # cluster ip 로 호출 $ curl -s 10.233.12.111:80 * Project : mvcapp * Version : 0.6 / net5.0 * Hostname : mvcapp-5c56c55f76-frbfs * Sleep(sync) : 0 * RemoteAddr : 10.233.90.0 * X-Forwarded-For : * Request Count : 1 * User-Agent : curl/7.29.0 # node port (kube-proxy) 호출 $ curl -s node1:30010 * Project : mvcapp * Version : 0.6 / net5.0 * Hostname : mvcapp-5c56c55f76-c82ws * Sleep(sync) : 0 * RemoteAddr : 10.233.90.0 * X-Forwarded-For : * Request Count : 1 * User-Agent : curl/7.29.0 설치 방법 2 : inventory 직접 수정 inventory.ini 수정 및 설치\n# Install 을 위한 Inventory 생성을 위한 공간 생성(복사) $ cp -rfp inventory/sample inventory/glass inventory/glass/inventory.ini kube_control_plane 1개만 설정 : node1 # ## Configure \u0026#39;ip\u0026#39; variable to bind kubernetes services on a # ## different ip than the default iface # ## We should set etcd_member_name for etcd cluster. The node that is not a etcd member do not need to set the value, or can set the empty string value. [all] node1 ansible_host=192.168.28.15 node2 ansible_host=192.168.28.16 node3 ansible_host=192.168.28.17 # ## configure a bastion host if your nodes are not directly reachable # [bastion] # bastion ansible_host=x.x.x.x ansible_user=some_user [kube_control_plane] node1 [etcd] node1 node2 node3 [kube_node] node2 node3 # node4 # node5 # node6 [calico_rr] [k8s_cluster:children] kube_control_plane kube_node calico_rr ## Install $ ansible-playbook -i inventory/glass/inventory.ini --become --become-user=root cluster.yml Cluster 확인 $ kubectl get node NAME STATUS ROLES AGE VERSION node1 Ready control-plane,master 3m41s v1.18.6 node2 Ready \u0026lt;none\u0026gt; 2m37s v1.18.6 node3 Ready \u0026lt;none\u0026gt; 2m38s v1.18.6 $ kubectl get pod -A NAMESPACE NAME READY STATUS RESTARTS AGE kube-system calico-kube-controllers-8575b76f66-nm6ll 0/1 CrashLoopBackOff 5 4m35s kube-system calico-node-9xqmz 1/1 Running 0 4m55s kube-system calico-node-dbr4p 1/1 Running 0 4m55s kube-system calico-node-h4xcv 1/1 Running 0 4m55s kube-system coredns-8474476ff8-6rx9f 1/1 Running 0 4m20s kube-system coredns-8474476ff8-r7nrf 1/1 Running 0 4m15s kube-system dns-autoscaler-7df78bfcfb-g482g 1/1 Running 0 4m17s kube-system kube-apiserver-node1 1/1 Running 0 6m6s kube-system kube-controller-manager-node1 1/1 Running 0 6m6s kube-system kube-proxy-6rxsz 1/1 Running 0 5m12s kube-system kube-proxy-jt2dl 1/1 Running 0 5m12s kube-system kube-proxy-kdxch 1/1 Running 0 5m12s kube-system kube-scheduler-node1 1/1 Running 0 6m6s kube-system nginx-proxy-node2 1/1 Running 0 5m12s kube-system nginx-proxy-node3 1/1 Running 0 5m12s kube-system nodelocaldns-2tjm8 1/1 Running 0 4m16s kube-system nodelocaldns-pzkjq 1/1 Running 0 4m16s kube-system nodelocaldns-r9gbv 1/1 Running 0 4m16s $ kubectl apply -f mvcapp-deploy-service.yaml deployment.apps/mvcapp created service/mvcapp created $ kubectl get pod -owide NAME READY STATUS RESTARTS AGE IP NODE NOMINATED NODE READINESS GATES mvcapp-5c56c55f76-c82ws 1/1 Running 0 48s 10.233.96.3 node2 \u0026lt;none\u0026gt; \u0026lt;none\u0026gt; mvcapp-5c56c55f76-frbfs 1/1 Running 0 48s 10.233.92.2 node3 \u0026lt;none\u0026gt; \u0026lt;none\u0026gt; mvcapp-5c56c55f76-kx2bm 1/1 Running 0 48s 10.233.96.2 node2 \u0026lt;none\u0026gt; \u0026lt;none\u0026gt; mvcapp-5c56c55f76-xvlbp 1/1 Running 0 48s 10.233.92.1 node3 \u0026lt;none\u0026gt; \u0026lt;none\u0026gt; 클러스터 고가용성 구조 https://github.com/kubernetes-sigs/kubespray/blob/master/docs/ha-mode.md{:target=\u0026quot;_blank\u0026quot;} Etcd 클러스터 구성 Kube-apiserver kubeadm 고가용성 구조의 경우 kube-apiserver 서버접근을 위한 HA (loadbalancer) 가 필요 kubespray 의 경우 nginx-based 기반 reverse proxy 각 node 에 내장되어 있어서 별도 LB 구성이 필요 없음 local internal loadbalancer 를 사용하지 않은 경우 별도 HA 구성 가능 Node 추가 및 Cluster 변경 https://github.com/kubernetes-sigs/kubespray/blob/master/docs/nodes.md{:target=\u0026quot;_blank\u0026quot;} 1) Control-plane 변경 Change order of current control planes Upgrade the cluster inventory 수정 후, cluster.yml 실행\n$ ansible-playbook -i inventory/glass/hosts.yaml cluster.yml 2) Adding/replacing a worker node inventory 수정 후, scale.yml 실행\n# 전체 갱신 $ ansible-playbook -i inventory/glass/hosts.yaml scale.yml # 추가된 node3 만 갱신 $ ansible-playbook -i inventory/glass/hosts.yaml scale.yml --limit=node3 3) Remove a worker node $ ansible-playbook -i inventory/glass/hosts.yaml remove-node.yml -e node=node3 ... $ kubectl get node NAME STATUS ROLES AGE VERSION node1 Ready control-plane,master 86m v1.18.6 node2 Ready control-plane,master 85m v1.18.6 node3 NotReady,SchedulingDisabled \u0026lt;none\u0026gt; 19m v1.18.6 $ kubectl delete node node3 node \u0026#34;node3\u0026#34; deleted $ kubectl get node NAME STATUS ROLES AGE VERSION node1 Ready control-plane,master 88m v1.18.6 node2 Ready control-plane,master 87m v1.18.6 초기화 : 클러스터 삭제 $ ansible-playbook -i inventory/glass/hosts.yaml --become --become-user=root reset.yml ","permalink":"https://cdecl.github.io/devops/kubernetes-install-kubespray/","summary":"\u003cp\u003eKubespray 를 이용한 Kubernetes 설치 (Baremetal)\u003c/p\u003e\n\u003ch2 id=\"사전준비\"\u003e사전준비\u003c/h2\u003e\n\u003ch3 id=\"서버-노드-준비\"\u003e서버 노드 준비\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e3대 Node\u003c/li\u003e\n\u003c/ul\u003e\n\u003cpre tabindex=\"0\"\u003e\u003ccode\u003e192.168.28.15\n192.168.28.16\n192.168.28.17\n\u003c/code\u003e\u003c/pre\u003e\u003ch3 :target=\"_blank\" id=\"서버-노드-환경설정--kubernetes-101-참고\"\u003e서버 노드 환경설정 : \u003ca href=\"/devops/kubernetes-101/\"\u003ekubernetes-101 참고\u003c/a\u003e\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003eSwap 영역을 비활성화\u003c/li\u003e\n\u003cli\u003eSELinux Disable\u003c/li\u003e\n\u003cli\u003e방화벽 Disable\u003c/li\u003e\n\u003cli\u003e브릿지 네트워크 할성화\u003c/li\u003e\n\u003cli\u003e설치 노드에서의 ssh 접속 허용 : SSH 키복사 \u003ccode\u003essh-copy-id\u003c/code\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"설치-준비\"\u003e설치 준비\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003eGit : Repository Clone\u003c/li\u003e\n\u003cli\u003ePython3 : Inventory 및 환경 설정을 위한 스크립트 실행\u003c/li\u003e\n\u003cli\u003eAnsible : 원격 실행(설치) \u003ccode\u003eansible-playbook\u003c/code\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003cblockquote\u003e\n\u003cp\u003eRepository clone 및 Python package install\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-sh\" data-lang=\"sh\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ git clone https://github.com/kubernetes-sigs/kubespray\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ cd kubespray\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# Package install\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ pip3 install -r requirements.txt\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003chr\u003e\n\u003ch2 id=\"설치-방법-1--inventory_builder\"\u003e설치 방법 1 : \u003ccode\u003einventory_builder\u003c/code\u003e\u003c/h2\u003e\n\u003cblockquote\u003e\n\u003cp\u003e\u003ccode\u003einventory_builder\u003c/code\u003e Python script 활용 inventory 구성 및 설치\u003c/p\u003e","title":"Kubernetes install with kubespray"},{"content":"C++ Modules Test Example (g++)\nC++20 Modules C++20에 추가된 모듈 Modules 기능은 기존의 헤더 파일 #include로 인한 컴파일 시간 증가 문제를 해결하고, 필요한 로직(함수, 심볼)만을 내보내는(export) 방식을 통해 타 언어의 모듈 단위처럼 효율적인 라이브러리 관리를 지원합니다.\nModules의 주요 장점 컴파일 시간 단축: 각 모듈은 한 번만 컴파일되며, 그 결과가 캐시됨 심볼 격리: 모듈 내부의 심볼은 명시적으로 export하지 않는 한 외부에서 접근 불가 순환 의존성 방지: 헤더 파일과 달리 명확한 의존성 그래프 형성 매크로 독립성: 모듈은 매크로의 영향을 받지 않아 더 안정적인 코드 작성 가능 일종의 PCH(Precompiled Header)의 기능을 포함한 표준적인 모듈 관리 기능입니다.\n현재 컴파일러마다 (MSVC, g++, Clang) Standard Library 지원과 모듈 사용 방법이 약간 상이합니다.\n컴파일러 지원 여부 확인 C++20의 모듈은 최신 컴파일러에서 제한적으로 지원되며, 구현 상태는 다음과 같습니다:\nGCC: 11 이상에서 실험적으로 지원. Clang: 15 이상에서 실험적으로 지원. MSVC: Visual Studio 2019 (16.8) 이상에서 잘 지원. 컴파일러 플래그 GCC: -std=c++20, -fmodules-ts Clang: -std=c++20, -fmodules MSVC: /std:c++20, /experimental:module GCC (G++) 기준 테스트 참고 : C++20 Modules — Complete Guide{:target=\u0026quot;_blank\u0026quot;} GCC 설치 및 설정 모듈 기능은 GCC 11부터 실험적으로 지원되며, GCC 13에서 안정화되었습니다.\n설치 방법 $ sudo add-apt-repository ppa:ubuntu-toolchain-r/test $ sudo apt-get update $ sudo apt-get install gcc-11 g++-11 환경 설정 컴파일러 플래그\n-std=c++20: C++20 표준 활성화 -fmodules-ts: 모듈 기능 활성화 CMake 설정\ncmake_minimum_required(VERSION 3.26) project(MyModules LANGUAGES CXX) set(CMAKE_CXX_STANDARD 20) set(CMAKE_CXX_STANDARD_REQUIRED ON) set(CMAKE_CXX_EXTENSIONS OFF) Standard Library 사용 표준 라이브러리를 모듈로 사용하는 방법은 컴파일러마다 다릅니다.\n// main.cpp import \u0026lt;iostream\u0026gt;; import \u0026lt;string\u0026gt;; using namespace std; int main() { string s = \u0026#34;main start \u0026#34;; cout \u0026lt;\u0026lt; s \u0026lt;\u0026lt; endl; } GCC 표준 라이브러리 사용 시, 수동으로 모듈 맵을 생성해야 합니다.\n예: iostream 및 string 모듈 생성\ng++ -std=c++20 -fmodules-ts -xc++-system-header iostream g++ -std=c++20 -fmodules-ts -xc++-system-header string 생성된 gcm.cache 구조:\ngcm.cache └── usr └── include └── c++ └── 11 ├── iostream.gcm └── string.gcm g++ -std=c++20 -fmodules-ts -o main main.cpp Clang -fbuiltin-module-map 플래그를 통해 표준 라이브러리 모듈 사용 가능. clang++ -std=c++20 -stdlib=libc++ -fmodules -fbuiltin-module-map main.cpp MSVC 추상화된 모듈 이름을 사용하여 접근 가능.\n예: import std.io; cl /std:c++20 /experimental:module /EHsc /c my_module.cppm cl /std:c++20 /EHsc main.cpp my_module.obj Modules 문법과 사용법 1. 모듈 선언 및 정의 // my_module.cppm export module my_module; // 모듈 선언 및 정의 export int add(int a, int b) { // 외부에 노출할 함수 return a + b; } 2. 모듈 사용 // main.cpp import my_module; // 모듈 가져오기 #include \u0026lt;iostream\u0026gt; // 기존 헤더와 혼합 사용 가능 int main() { std::cout \u0026lt;\u0026lt; \u0026#34;3 + 4 = \u0026#34; \u0026lt;\u0026lt; add(3, 4) \u0026lt;\u0026lt; std::endl; return 0; } Modules 작성 및 사용 예제 adder 모듈 작성 // adder.cppm export module cdecl_adder; export template \u0026lt;typename T\u0026gt; T add(T a, T b) { return a + b; } namespace { // 모듈 내부 구현 template \u0026lt;typename T\u0026gt; T multiply(T a, T b) { return a * b; } } main.cpp #include \u0026lt;iostream\u0026gt; import cdecl_adder; int main() { std::cout \u0026lt;\u0026lt; \u0026#34;add(5, 8): \u0026#34; \u0026lt;\u0026lt; add(5, 3) \u0026lt;\u0026lt; std::endl; // 8 출력 // multiply는 export되지 않았으므로 사용 불가 // std::cout \u0026lt;\u0026lt; multiply(5, 3); // 컴파일 에러 return 0; } 빌드 과정 1. 모듈 인터페이스 컴파일 $ g++ -std=c++20 -fmodules-ts -c adder.cppm 생성된 gcm.cache 구조:\ngcm.cache └── cdecl_adder.gcm 2. 메인 프로그램 컴파일 및 링크 g++ -std=c++20 -fmodules-ts main.cpp adder.o -o main 3. 실행 $ ./main add(5, 8): 8 모범 사례와 주의사항 모듈 심볼 관리: export할 심볼을 신중히 선택하여 인터페이스 설계. 빌드 시스템: CMake와 같은 빌드 도구를 활용하여 모듈 의존성을 효율적으로 관리. 초기화 순서: 전역 상태나 초기화 순서에 의존하지 않도록 설계. Modules는 헤더 파일 기반의 기존 방식을 대체하는 강력한 기능으로, 대규모 프로젝트에서 효율적인 코드 관리 및 컴파일 성능 향상을 제공합니다.\n","permalink":"https://cdecl.github.io/dev/c++-modules-gcc/","summary":"\u003cp\u003eC++ Modules Test Example (g++)\u003c/p\u003e\n\u003ch2 id=\"c20-modules\"\u003eC++20 Modules\u003c/h2\u003e\n\u003cp\u003eC++20에 추가된 모듈 \u003ccode\u003eModules\u003c/code\u003e 기능은 기존의 헤더 파일 \u003ccode\u003e#include\u003c/code\u003e로 인한 컴파일 시간 증가 문제를 해결하고, 필요한 로직(함수, 심볼)만을 내보내는(export) 방식을 통해 타 언어의 모듈 단위처럼 효율적인 라이브러리 관리를 지원합니다.\u003c/p\u003e\n\u003ch3 id=\"modules의-주요-장점\"\u003eModules의 주요 장점\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003e컴파일 시간 단축\u003c/strong\u003e: 각 모듈은 한 번만 컴파일되며, 그 결과가 캐시됨\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e심볼 격리\u003c/strong\u003e: 모듈 내부의 심볼은 명시적으로 export하지 않는 한 외부에서 접근 불가\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e순환 의존성 방지\u003c/strong\u003e: 헤더 파일과 달리 명확한 의존성 그래프 형성\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e매크로 독립성\u003c/strong\u003e: 모듈은 매크로의 영향을 받지 않아 더 안정적인 코드 작성 가능\u003c/li\u003e\n\u003c/ul\u003e\n\u003cblockquote\u003e\n\u003cp\u003e일종의 PCH(Precompiled Header)의 기능을 포함한 표준적인 모듈 관리 기능입니다.\u003cbr\u003e\n현재 컴파일러마다 (MSVC, g++, Clang) Standard Library 지원과 모듈 사용 방법이 약간 상이합니다.\u003c/p\u003e","title":"C++20 Modules - gnu c++ test"},{"content":"WSL2 에 Docker 설치 (without Docker Desktop)\nDocker Desktop Docker Desktop 유료화{:target=\u0026quot;_blank\u0026quot;} Docker Desktop remains free for small businesses (fewer than 250 employees AND less than $10 million in annual revenue), personal use, education, and non-commercial open source projects.\nWSL2 이후, Docker Desktop 의 기능을 따로 사용하지 않아도 CLI 기능으로도 충분 개인적으로 Hyper-v VM 사용 권고 Docker install without docker desktop WSL2 Install Windows 10에 Linux용 Windows 하위 시스템 설치 가이드{:target=\u0026quot;_blank\u0026quot;} Docker install https://newbedev.com/shell-install-docker-on-wsl-without-docker-desktop-code-example{:target=\u0026quot;_blank\u0026quot;} # Update the apt package list. $ sudo apt-get update -y # Install Docker\u0026#39;s package dependencies. $ sudo apt-get install -y \\ apt-transport-https \\ ca-certificates \\ curl \\ software-properties-common # Download and add Docker\u0026#39;s official public PGP key. $ curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo apt-key add - # Verify the fingerprint. $ sudo apt-key fingerprint 0EBFCD88 # Add the `stable` channel\u0026#39;s Docker upstream repository. # # If you want to live on the edge, you can change \u0026#34;stable\u0026#34; below to \u0026#34;test\u0026#34; or # \u0026#34;nightly\u0026#34;. I highly recommend sticking with stable! $ sudo add-apt-repository \\ \u0026#34;deb [arch=amd64] https://download.docker.com/linux/ubuntu \\ $(lsb_release -cs) \\ stable\u0026#34; # Update the apt package list (for the new apt repo). $ sudo apt-get update -y # Install the latest version of Docker CE. $ sudo apt-get install -y docker-ce # Allow your user to access the Docker CLI without needing root access. $ sudo usermod -aG docker $USER # START DOCKER DAEMON $ sudo service docker start $ sudo service docker status $ docker ps CONTAINER ID IMAGE COMMAND CREATED STATUS PORTS NAMES ","permalink":"https://cdecl.github.io/devops/docker-install-without-docker-decktop/","summary":"\u003cp\u003eWSL2 에 Docker 설치 (without Docker Desktop)\u003c/p\u003e\n\u003ch2 id=\"docker-desktop\"\u003eDocker Desktop\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://www.docker.com/blog/updating-product-subscriptions/\"\u003eDocker Desktop 유료화\u003c/a\u003e{:target=\u0026quot;_blank\u0026quot;}\u003c/li\u003e\n\u003c/ul\u003e\n\u003cblockquote\u003e\n\u003cp\u003eDocker Desktop remains free for small businesses (fewer than 250 employees AND less than $10 million in annual revenue), personal use, education, and non-commercial open source projects.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cul\u003e\n\u003cli\u003eWSL2 이후, Docker Desktop 의 기능을 따로 사용하지 않아도 CLI 기능으로도 충분\n\u003cul\u003e\n\u003cli\u003e개인적으로 Hyper-v VM 사용 권고\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"docker-install-without-docker-desktop\"\u003eDocker install without docker desktop\u003c/h2\u003e\n\u003ch3 id=\"wsl2-install\"\u003eWSL2 Install\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://docs.microsoft.com/ko-kr/windows/wsl/install-win10\"\u003eWindows 10에 Linux용 Windows 하위 시스템 설치 가이드\u003c/a\u003e{:target=\u0026quot;_blank\u0026quot;}\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"docker-install\"\u003eDocker install\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://newbedev.com/shell-install-docker-on-wsl-without-docker-desktop-code-example\"\u003ehttps://newbedev.com/shell-install-docker-on-wsl-without-docker-desktop-code-example\u003c/a\u003e{:target=\u0026quot;_blank\u0026quot;}\u003c/li\u003e\n\u003c/ul\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-sh\" data-lang=\"sh\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# Update the apt package list.\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ sudo apt-get update -y\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# Install Docker\u0026#39;s package dependencies.\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ sudo apt-get install -y \u003cspan style=\"color:#ae81ff\"\u003e\\\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    apt-transport-https \u003cspan style=\"color:#ae81ff\"\u003e\\\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    ca-certificates \u003cspan style=\"color:#ae81ff\"\u003e\\\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    curl \u003cspan style=\"color:#ae81ff\"\u003e\\\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    software-properties-common\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# Download and add Docker\u0026#39;s official public PGP key.\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo apt-key add -\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# Verify the fingerprint.\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ sudo apt-key fingerprint 0EBFCD88\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# Add the `stable` channel\u0026#39;s Docker upstream repository.\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e#\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# If you want to live on the edge, you can change \u0026#34;stable\u0026#34; below to \u0026#34;test\u0026#34; or\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# \u0026#34;nightly\u0026#34;. I highly recommend sticking with stable!\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ sudo add-apt-repository \u003cspan style=\"color:#ae81ff\"\u003e\\\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e   \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;deb [arch=amd64] https://download.docker.com/linux/ubuntu \\\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003e   \u003c/span\u003e\u003cspan style=\"color:#66d9ef\"\u003e$(\u003c/span\u003elsb_release -cs\u003cspan style=\"color:#66d9ef\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e \\\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003e   stable\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# Update the apt package list (for the new apt repo).\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ sudo apt-get update -y\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# Install the latest version of Docker CE.\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ sudo apt-get install -y docker-ce\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# Allow your user to access the Docker CLI without needing root access.\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ sudo usermod -aG docker $USER\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-sh\" data-lang=\"sh\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# START DOCKER DAEMON\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ sudo service docker start\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ sudo service docker status\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ docker ps\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eCONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e","title":"Docker install without docker desktop (WSL)"},{"content":"Docker 이미지 다중 아키텍처(Multi-Architecture) 빌드 가이드 Docker build Docker 이미지를 빌드할 때는 기본적으로 빌드하는 머신의 CPU 아키텍처(Platform)에 맞춰 빌드됩니다. 이는 Docker의 기본 동작이며, 호스트 시스템의 아키텍처와 일치하는 이미지를 생성합니다.\n아키텍처의 중요성: 컨테이너는 호스트 OS의 커널을 공유하지만, CPU 아키텍처에 맞는 바이너리가 필요합니다. 예를 들어, ARM64용으로 빌드된 이미지는 AMD64 시스템에서 직접 실행할 수 없습니다.\nmacOS arm64 테스트 $ uname -a Darwin glass 20.6.0 Darwin Kernel Version 20.6.0: Wed Jun 23 00:26:27 PDT 2021; \\ root:xnu-7195.141.2~5/RELEASE_ARM64_T8101 arm64 # Dockerfile FROM alpine RUN uname -a # no-cache, plain output $ docker build . -t cdecl/alpine --no-cache --progress=plain ... #5 [2/2] RUN uname -a #5 sha256:bb35af1757e6b002e99344411e8e8fc700e8760f29f48b4de0f0bb7276ead75d #5 0.238 Linux buildkitsandbox 5.10.25-linuxkit #1 SMP PREEMPT Tue Mar 23 09:24:45 UTC 2021 aarch64 Linux #5 DONE 0.2s ... $ docker image inspect cdecl/alpine -f \u0026#39;{{.Architecture}}\u0026#39; arm64 Platform 변경하여 이미지 빌드 Docker는 --platform 플래그를 통해 타겟 아키텍처를 지정할 수 있습니다. QEMU를 통한 에뮬레이션으로 크로스 플랫폼 빌드가 가능합니다.\n지원되는 주요 플랫폼:\nlinux/amd64: x86_64 아키텍처 (Intel, AMD) linux/arm64: 64비트 ARM 아키텍처 (Apple Silicon, AWS Graviton) linux/arm/v7: 32비트 ARM v7 아키텍처 (라즈베리파이 등) linux/386: 32비트 x86 아키텍처 # amd64 로 플랫폼 지정 빌드 $ docker build . -t cdecl/alpine --platform=linux/amd64 --no-cache --progress=plain ... #6 [2/2] RUN uname -a #6 sha256:21c96dec48d15465f32e8d9fa806cfc57b42464b19c34d1ff4a662e263406f79 #6 0.260 Linux buildkitsandbox 5.10.25-linuxkit #1 SMP PREEMPT Tue Mar 23 09:24:45 UTC 2021 x86_64 Linux #6 DONE 0.3s ... $ docker image inspect cdecl/alpine -f \u0026#39;{{.Architecture}}\u0026#39; amd64 주의사항: 같은 이미지:태그에 대해 다른 플랫폼으로 빌드하면 이전 이미지를 덮어쓰게 됩니다. 이는 단일 태그가 하나의 이미지만 참조할 수 있기 때문입니다.\nMulti-architecture docker images build Docker BuildX는 Docker의 실험적 기능으로, 다중 아키텍처 이미지를 효율적으로 빌드하고 관리할 수 있게 해줍니다.\n주요 특징:\n하나의 매니페스트로 여러 아키텍처 이미지 관리 동시에 여러 플랫폼용 이미지 빌드 효율적인 캐시 관리와 병렬 빌드 지원 OCI(Open Container Initiative) 표준 준수 참고 문서: https://docs.docker.com/desktop/multi-arch/\nBuilder 환경 확인 BuildX는 여러 빌더 인스턴스를 관리할 수 있으며, 각 빌더는 서로 다른 기능과 설정을 가질 수 있습니다.\n# command to list the existing builder $ docker buildx ls NAME/NODE DRIVER/ENDPOINT STATUS PLATFORMS desktop-linux docker desktop-linux desktop-linux running linux/arm64, linux/amd64, linux/riscv64, linux/ppc64le, linux/s390x, linux/386, linux/arm/v7, linux/arm/v6 default * docker default default running linux/arm64, linux/amd64, linux/riscv64, linux/ppc64le, linux/s390x, linux/386, linux/arm/v7, linux/arm/v6 Custom Builder 만들기 BuildX 빌더는 이미지 빌드를 위한 독립된 환경을 제공합니다. 커스텀 빌더를 사용하면 특정 요구사항에 맞는 빌드 환경을 구성할 수 있습니다.\n빌더 특징:\n격리된 빌드 환경 제공 커스텀 캐시 설정 가능 특정 플랫폼에 최적화된 빌드 가능 동시 빌드 작업 처리 # Create a new builder $ docker buildx create --name cdeclx cdeclx # Switch to the new builder $ docker buildx use cdeclx # builder 확인 $ docker buildx ls NAME/NODE DRIVER/ENDPOINT STATUS PLATFORMS cdeclx * docker-container cdeclx0 unix:///var/run/docker.sock running linux/arm64, linux/amd64, linux/riscv64, linux/ppc64le, linux/s390x, linux/386, linux/mips64le, linux/mips64, linux/arm/v7, linux/arm/v6 desktop-linux docker desktop-linux desktop-linux running linux/arm64, linux/amd64, linux/riscv64, linux/ppc64le, linux/s390x, linux/386, linux/arm/v7, linux/arm/v6 default docker default default running linux/arm64, linux/amd64, linux/riscv64, linux/ppc64le, linux/s390x, linux/386, linux/arm/v7, linux/arm/v6 Multi-architecture image build BuildX를 사용한 다중 아키텍처 이미지 빌드는 하나의 명령으로 여러 플랫폼용 이미지를 생성할 수 있게 해줍니다.\n빌드 옵션:\n--platform: 빌드할 대상 플랫폼 지정 --push: 빌드 완료 후 레지스트리에 자동 푸시 --load: 로컬 Docker 데몬에 이미지 로드 (단일 플랫폼만 가능) --cache-from, --cache-to: 원격 캐시 설정 $ docker buildx build . -t cdecl/alpine --platform=linux/arm64,linux/amd64 WARN[0000] No output specified for docker-container driver. Build result will only remain in the build cache. To push result image into registry use --push or to load image into docker use --load [+] Building 10.1s (11/11) FINISHED =\u0026gt; [internal] booting buildkit 3.9s =\u0026gt; =\u0026gt; pulling image moby/buildkit:buildx-stable-1 ... 중요: BuildX 빌드 결과를 사용하기 위해서는 --push 또는 --load 옵션이 필요합니다. 기본적으로는 빌드 캐시에만 저장됩니다.\n# --push 옵션으로 레지스트리에 직접 푸시 $ docker buildx build . -t cdecl/alpine --platform=linux/arm64,linux/amd64 --push [+] Building 6.2s (11/11) FINISHED ... =\u0026gt; [auth] cdecl/alpine:pull,push token for registry-1.docker.io 빌드된 이미지는 Docker Hub나 프라이빗 레지스트리에서 매니페스트 리스트로 관리되며, 클라이언트의 아키텍처에 맞는 이미지가 자동으로 선택되어 다운로드됩니다.\n","permalink":"https://cdecl.github.io/devops/docker-build-multi-architecture/","summary":"\u003ch1 id=\"docker-이미지-다중-아키텍처multi-architecture-빌드-가이드\"\u003eDocker 이미지 다중 아키텍처(Multi-Architecture) 빌드 가이드\u003c/h1\u003e\n\u003ch2 id=\"docker-build\"\u003eDocker build\u003c/h2\u003e\n\u003cp\u003eDocker 이미지를 빌드할 때는 기본적으로 빌드하는 머신의 CPU 아키텍처(Platform)에 맞춰 빌드됩니다. 이는 Docker의 기본 동작이며, 호스트 시스템의 아키텍처와 일치하는 이미지를 생성합니다.\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003e\u003cstrong\u003e아키텍처의 중요성\u003c/strong\u003e: 컨테이너는 호스트 OS의 커널을 공유하지만, CPU 아키텍처에 맞는 바이너리가 필요합니다. 예를 들어, ARM64용으로 빌드된 이미지는 AMD64 시스템에서 직접 실행할 수 없습니다.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003emacOS\u003c/code\u003e \u003ccode\u003earm64\u003c/code\u003e 테스트\u003c/li\u003e\n\u003c/ul\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-sh\" data-lang=\"sh\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ uname -a\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eDarwin glass 20.6.0 Darwin Kernel Version 20.6.0: Wed Jun \u003cspan style=\"color:#ae81ff\"\u003e23\u003c/span\u003e 00:26:27 PDT 2021; \u003cspan style=\"color:#ae81ff\"\u003e\\\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eroot:xnu-7195.141.2~5/RELEASE_ARM64_T8101 arm64\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-dockerfile\" data-lang=\"dockerfile\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# Dockerfile\u003c/span\u003e\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003eFROM\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003ealpine\u003c/span\u003e\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003eRUN\u003c/span\u003e uname -a \u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-sh\" data-lang=\"sh\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# no-cache, plain output\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ docker build . -t cdecl/alpine --no-cache --progress\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003eplain\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e...\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e#5 [2/2] RUN uname -a\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e#5 sha256:bb35af1757e6b002e99344411e8e8fc700e8760f29f48b4de0f0bb7276ead75d\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e#5 0.238 Linux buildkitsandbox 5.10.25-linuxkit #1 SMP PREEMPT Tue Mar 23 09:24:45 UTC 2021 aarch64 Linux\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e#5 DONE 0.2s\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e...\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ docker image inspect cdecl/alpine -f \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;{{.Architecture}}\u0026#39;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003earm64\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch3 id=\"platform-변경하여-이미지-빌드\"\u003ePlatform 변경하여 이미지 빌드\u003c/h3\u003e\n\u003cp\u003eDocker는 \u003ccode\u003e--platform\u003c/code\u003e 플래그를 통해 타겟 아키텍처를 지정할 수 있습니다. QEMU를 통한 에뮬레이션으로 크로스 플랫폼 빌드가 가능합니다.\u003c/p\u003e","title":"Docker Multi-Architecture Build Guide"},{"content":"CryptoPP https://www.cryptopp.com/{:target=\u0026quot;_blank\u0026quot;} Crypto++ 사용하기, 예제{:target=\u0026quot;_blank\u0026quot;} 암호화 지식 (개발자){:target=\u0026quot;_blank\u0026quot;} 기존 작성한 내용(5.6 버전)의 최신화(8.5 버전) : 빌드 이슈\nPackage 설치 vcpkg 사용 : 8.5.0 $ ./vcpkg install cryptopp Computing installation plan... The following packages will be built and installed: cryptopp[core]:arm64-osx -\u0026gt; 8.5.0 ... The package cryptopp:arm64-osx provides CMake targets: find_package(cryptopp CONFIG REQUIRED) target_link_libraries(main PRIVATE cryptopp-static) CMakeLists.txt cmake_minimum_required(VERSION 3.11) project(main) set(CMAKE_CXX_STANDARD 17) add_executable(main main.cpp) target_compile_options(main PRIVATE -Wall -O2) find_package(cryptopp CONFIG REQUIRED) target_link_libraries(main PRIVATE cryptopp-static) Build $ mkdir build \u0026amp;\u0026amp; cd build $ cmake .. -DCMAKE_TOOLCHAIN_FILE=\u0026lt;PATH\u0026gt;/vcpkg/scripts/buildsystems/vcpkg.cmake $ build Example 기본 Flow - Encryption : StringSource -\u0026gt; StreamTransformationFilter(Encryptor) -\u0026gt; Base64Encoder(StringSink) - Decryption : StringSource -\u0026gt; Base64Decoder -\u0026gt; StreamTransformationFilter(Decryptor, StringSink) 과거 버전과의 이슈 std::byte의 표준화 이전에 작성된 라이브러리라, byte 타입 충돌 https://www.cryptopp.com/wiki/Modes_of_Operation{:target=\u0026quot;_blank\u0026quot;} KEY, IV 를 정의하기 위해 CryptoPP::SecByteBlock 타입 사용 #include \u0026lt;iostream\u0026gt; #include \u0026lt;algorithm\u0026gt; using namespace std; #include \u0026lt;cryptopp/cryptlib.h\u0026gt; #include \u0026lt;cryptopp/base64.h\u0026gt; #include \u0026lt;cryptopp/aes.h\u0026gt; #include \u0026lt;cryptopp/seed.h\u0026gt; #include \u0026lt;cryptopp/des.h\u0026gt; #include \u0026lt;cryptopp/modes.h\u0026gt; #include \u0026lt;cryptopp/filters.h\u0026gt; template \u0026lt;class EncryptorType\u0026gt; std::string Encrypt(EncryptorType \u0026amp;encryptor, const std::string \u0026amp;PlainText) { std::string CipherText; CryptoPP::StringSource(PlainText, true, new CryptoPP::StreamTransformationFilter( encryptor, new CryptoPP::Base64Encoder(new CryptoPP::StringSink(CipherText), false) /* default padding */ ) ); return CipherText; } template \u0026lt;class DecryptorType\u0026gt; std::string Decrypt(DecryptorType \u0026amp;decryptor, const std::string \u0026amp;EncText) { std::string PlainText; CryptoPP::StringSource(EncText, true, new CryptoPP::Base64Decoder( new CryptoPP::StreamTransformationFilter( decryptor, new CryptoPP::StringSink(PlainText) ) ) ); return PlainText; } int main() { using namespace std; using AES = CryptoPP::AES; CryptoPP::SecByteBlock KEY(AES::DEFAULT_KEYLENGTH); CryptoPP::SecByteBlock IV(AES::DEFAULT_KEYLENGTH); // 임의 값 초기화 for (auto \u0026amp;c : KEY) c = 0; for (auto \u0026amp;c : IV) c = 0; CryptoPP::CBC_Mode\u0026lt;AES\u0026gt;::Encryption Encryptor { KEY, KEY.size(), IV }; CryptoPP::CBC_Mode\u0026lt;AES\u0026gt;::Decryption Decryptor { KEY, KEY.size(), IV }; try { string sText = \u0026#34;Plain Text\u0026#34;; string sEnc, sDec; sEnc = Encrypt(Encryptor, sText); cout \u0026lt;\u0026lt; sText \u0026lt;\u0026lt; \u0026#34; -\u0026gt; \u0026#34; \u0026lt;\u0026lt; sEnc \u0026lt;\u0026lt; endl; sDec = Decrypt(Decryptor, sEnc); cout \u0026lt;\u0026lt; sEnc \u0026lt;\u0026lt; \u0026#34; -\u0026gt; \u0026#34; \u0026lt;\u0026lt; sDec \u0026lt;\u0026lt; endl;\t} catch (exception \u0026amp;ex) { cerr \u0026lt;\u0026lt; ex.what() \u0026lt;\u0026lt; endl; } return 0; } $ ./main Plain Text -\u0026gt; MtiafY0csWZJZzsRNfE8cA== MtiafY0csWZJZzsRNfE8cA== -\u0026gt; Plain Text ","permalink":"https://cdecl.github.io/dev/cryptopp-example/","summary":"\u003ch2 id=\"cryptopp\"\u003eCryptoPP\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://www.cryptopp.com/\"\u003ehttps://www.cryptopp.com/\u003c/a\u003e{:target=\u0026quot;_blank\u0026quot;}\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://cdecl.tistory.com/277\"\u003eCrypto++ 사용하기, 예제\u003c/a\u003e{:target=\u0026quot;_blank\u0026quot;}\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"/dev/crypto-for-develop/\"\u003e암호화 지식 (개발자)\u003c/a\u003e{:target=\u0026quot;_blank\u0026quot;}\u003c/li\u003e\n\u003c/ul\u003e\n\u003cblockquote\u003e\n\u003cp\u003e기존 작성한 내용(5.6 버전)의 최신화(8.5 버전) : 빌드 이슈\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003ch3 id=\"package-설치\"\u003ePackage 설치\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003evcpkg 사용 : 8.5.0\u003c/li\u003e\n\u003c/ul\u003e\n\u003cpre tabindex=\"0\"\u003e\u003ccode\u003e$ ./vcpkg install cryptopp\nComputing installation plan...\nThe following packages will be built and installed:\n    cryptopp[core]:arm64-osx -\u0026gt; 8.5.0\n...\nThe package cryptopp:arm64-osx provides CMake targets:\n\n    find_package(cryptopp CONFIG REQUIRED)\n    target_link_libraries(main PRIVATE cryptopp-static)\n\u003c/code\u003e\u003c/pre\u003e\u003cul\u003e\n\u003cli\u003eCMakeLists.txt\u003c/li\u003e\n\u003c/ul\u003e\n\u003cpre tabindex=\"0\"\u003e\u003ccode\u003ecmake_minimum_required(VERSION 3.11)\nproject(main)\nset(CMAKE_CXX_STANDARD 17)\n\nadd_executable(main main.cpp)\ntarget_compile_options(main PRIVATE -Wall -O2)\n\nfind_package(cryptopp CONFIG REQUIRED)\ntarget_link_libraries(main PRIVATE cryptopp-static)\n\u003c/code\u003e\u003c/pre\u003e\u003ch4 id=\"build\"\u003eBuild\u003c/h4\u003e\n\u003cpre tabindex=\"0\"\u003e\u003ccode\u003e$ mkdir build \u0026amp;\u0026amp; cd build\n$ cmake .. -DCMAKE_TOOLCHAIN_FILE=\u0026lt;PATH\u0026gt;/vcpkg/scripts/buildsystems/vcpkg.cmake\n\n$ build \n\u003c/code\u003e\u003c/pre\u003e\u003chr\u003e\n\u003ch3 id=\"example\"\u003eExample\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e기본 Flow\u003c/li\u003e\n\u003c/ul\u003e\n\u003cpre tabindex=\"0\"\u003e\u003ccode\u003e- Encryption : StringSource -\u0026gt; StreamTransformationFilter(Encryptor) -\u0026gt; Base64Encoder(StringSink)\n- Decryption : StringSource -\u0026gt; Base64Decoder -\u0026gt; StreamTransformationFilter(Decryptor, StringSink)\n\u003c/code\u003e\u003c/pre\u003e\u003ch4 id=\"과거-버전과의-이슈\"\u003e과거 버전과의 이슈\u003c/h4\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003estd::byte\u003c/code\u003e의 표준화 이전에 작성된 라이브러리라, byte 타입 충돌\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://www.cryptopp.com/wiki/Modes_of_Operation\"\u003ehttps://www.cryptopp.com/wiki/Modes_of_Operation\u003c/a\u003e{:target=\u0026quot;_blank\u0026quot;}\u003c/li\u003e\n\u003cli\u003eKEY, IV 를 정의하기 위해 \u003ccode\u003eCryptoPP::SecByteBlock\u003c/code\u003e 타입 사용\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-cpp\" data-lang=\"cpp\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e#include\u003c/span\u003e \u003cspan style=\"color:#75715e\"\u003e\u0026lt;iostream\u0026gt;\u003c/span\u003e\u003cspan style=\"color:#75715e\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e#include\u003c/span\u003e \u003cspan style=\"color:#75715e\"\u003e\u0026lt;algorithm\u0026gt;\u003c/span\u003e\u003cspan style=\"color:#75715e\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003eusing\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003enamespace\u003c/span\u003e std;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e#include\u003c/span\u003e \u003cspan style=\"color:#75715e\"\u003e\u0026lt;cryptopp/cryptlib.h\u0026gt;\u003c/span\u003e\u003cspan style=\"color:#75715e\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e#include\u003c/span\u003e \u003cspan style=\"color:#75715e\"\u003e\u0026lt;cryptopp/base64.h\u0026gt;\u003c/span\u003e\u003cspan style=\"color:#75715e\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e#include\u003c/span\u003e \u003cspan style=\"color:#75715e\"\u003e\u0026lt;cryptopp/aes.h\u0026gt;\u003c/span\u003e\u003cspan style=\"color:#75715e\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e#include\u003c/span\u003e \u003cspan style=\"color:#75715e\"\u003e\u0026lt;cryptopp/seed.h\u0026gt;\u003c/span\u003e\u003cspan style=\"color:#75715e\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e#include\u003c/span\u003e \u003cspan style=\"color:#75715e\"\u003e\u0026lt;cryptopp/des.h\u0026gt;\u003c/span\u003e\u003cspan style=\"color:#75715e\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e#include\u003c/span\u003e \u003cspan style=\"color:#75715e\"\u003e\u0026lt;cryptopp/modes.h\u0026gt;\u003c/span\u003e\u003cspan style=\"color:#75715e\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e#include\u003c/span\u003e \u003cspan style=\"color:#75715e\"\u003e\u0026lt;cryptopp/filters.h\u0026gt;\u003c/span\u003e\u003cspan style=\"color:#75715e\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003etemplate\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e\u0026lt;\u003c/span\u003e\u003cspan style=\"color:#66d9ef\"\u003eclass\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eEncryptorType\u003c/span\u003e\u003cspan style=\"color:#f92672\"\u003e\u0026gt;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003estd\u003cspan style=\"color:#f92672\"\u003e::\u003c/span\u003estring Encrypt(EncryptorType \u003cspan style=\"color:#f92672\"\u003e\u0026amp;\u003c/span\u003eencryptor, \u003cspan style=\"color:#66d9ef\"\u003econst\u003c/span\u003e std\u003cspan style=\"color:#f92672\"\u003e::\u003c/span\u003estring \u003cspan style=\"color:#f92672\"\u003e\u0026amp;\u003c/span\u003ePlainText) \n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e{\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\tstd\u003cspan style=\"color:#f92672\"\u003e::\u003c/span\u003estring CipherText;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\tCryptoPP\u003cspan style=\"color:#f92672\"\u003e::\u003c/span\u003eStringSource(PlainText, true,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\t\u003cspan style=\"color:#66d9ef\"\u003enew\u003c/span\u003e CryptoPP\u003cspan style=\"color:#f92672\"\u003e::\u003c/span\u003eStreamTransformationFilter(\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\t\tencryptor, \u003cspan style=\"color:#66d9ef\"\u003enew\u003c/span\u003e CryptoPP\u003cspan style=\"color:#f92672\"\u003e::\u003c/span\u003eBase64Encoder(\u003cspan style=\"color:#66d9ef\"\u003enew\u003c/span\u003e CryptoPP\u003cspan style=\"color:#f92672\"\u003e::\u003c/span\u003eStringSink(CipherText), false) \u003cspan style=\"color:#75715e\"\u003e/* default padding */\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\t)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t);\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#66d9ef\"\u003ereturn\u003c/span\u003e CipherText;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e}\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003etemplate\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e\u0026lt;\u003c/span\u003e\u003cspan style=\"color:#66d9ef\"\u003eclass\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eDecryptorType\u003c/span\u003e\u003cspan style=\"color:#f92672\"\u003e\u0026gt;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003estd\u003cspan style=\"color:#f92672\"\u003e::\u003c/span\u003estring Decrypt(DecryptorType \u003cspan style=\"color:#f92672\"\u003e\u0026amp;\u003c/span\u003edecryptor, \u003cspan style=\"color:#66d9ef\"\u003econst\u003c/span\u003e std\u003cspan style=\"color:#f92672\"\u003e::\u003c/span\u003estring \u003cspan style=\"color:#f92672\"\u003e\u0026amp;\u003c/span\u003eEncText) \n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e{\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\tstd\u003cspan style=\"color:#f92672\"\u003e::\u003c/span\u003estring PlainText;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\tCryptoPP\u003cspan style=\"color:#f92672\"\u003e::\u003c/span\u003eStringSource(EncText, true,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\t\u003cspan style=\"color:#66d9ef\"\u003enew\u003c/span\u003e CryptoPP\u003cspan style=\"color:#f92672\"\u003e::\u003c/span\u003eBase64Decoder(\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\t\t\u003cspan style=\"color:#66d9ef\"\u003enew\u003c/span\u003e CryptoPP\u003cspan style=\"color:#f92672\"\u003e::\u003c/span\u003eStreamTransformationFilter(\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\t\t\tdecryptor, \u003cspan style=\"color:#66d9ef\"\u003enew\u003c/span\u003e CryptoPP\u003cspan style=\"color:#f92672\"\u003e::\u003c/span\u003eStringSink(PlainText)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\t\t)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\t)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t);\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#66d9ef\"\u003ereturn\u003c/span\u003e PlainText;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e}\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003eint\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003emain\u003c/span\u003e()\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e{\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#66d9ef\"\u003eusing\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003enamespace\u003c/span\u003e std;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#66d9ef\"\u003eusing\u003c/span\u003e AES \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e CryptoPP\u003cspan style=\"color:#f92672\"\u003e::\u003c/span\u003eAES;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\tCryptoPP\u003cspan style=\"color:#f92672\"\u003e::\u003c/span\u003eSecByteBlock KEY(AES\u003cspan style=\"color:#f92672\"\u003e::\u003c/span\u003eDEFAULT_KEYLENGTH);\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\tCryptoPP\u003cspan style=\"color:#f92672\"\u003e::\u003c/span\u003eSecByteBlock IV(AES\u003cspan style=\"color:#f92672\"\u003e::\u003c/span\u003eDEFAULT_KEYLENGTH);\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#75715e\"\u003e// 임의 값 초기화 \n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#66d9ef\"\u003efor\u003c/span\u003e (\u003cspan style=\"color:#66d9ef\"\u003eauto\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e\u0026amp;\u003c/span\u003ec : KEY) c \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e0\u003c/span\u003e;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#66d9ef\"\u003efor\u003c/span\u003e (\u003cspan style=\"color:#66d9ef\"\u003eauto\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e\u0026amp;\u003c/span\u003ec : IV) c \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e0\u003c/span\u003e;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\tCryptoPP\u003cspan style=\"color:#f92672\"\u003e::\u003c/span\u003eCBC_Mode\u003cspan style=\"color:#f92672\"\u003e\u0026lt;\u003c/span\u003eAES\u003cspan style=\"color:#f92672\"\u003e\u0026gt;::\u003c/span\u003eEncryption Encryptor { KEY, KEY.size(), IV };\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\tCryptoPP\u003cspan style=\"color:#f92672\"\u003e::\u003c/span\u003eCBC_Mode\u003cspan style=\"color:#f92672\"\u003e\u0026lt;\u003c/span\u003eAES\u003cspan style=\"color:#f92672\"\u003e\u0026gt;::\u003c/span\u003eDecryption Decryptor { KEY, KEY.size(), IV };\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#66d9ef\"\u003etry\u003c/span\u003e {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\tstring sText \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;Plain Text\u0026#34;\u003c/span\u003e;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\tstring sEnc, sDec;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\tsEnc \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e Encrypt(Encryptor, sText);\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\tcout \u003cspan style=\"color:#f92672\"\u003e\u0026lt;\u0026lt;\u003c/span\u003e sText \u003cspan style=\"color:#f92672\"\u003e\u0026lt;\u0026lt;\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#34; -\u0026gt; \u0026#34;\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e\u0026lt;\u0026lt;\u003c/span\u003e sEnc \u003cspan style=\"color:#f92672\"\u003e\u0026lt;\u0026lt;\u003c/span\u003e endl;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\tsDec \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e Decrypt(Decryptor, sEnc);\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\tcout \u003cspan style=\"color:#f92672\"\u003e\u0026lt;\u0026lt;\u003c/span\u003e sEnc \u003cspan style=\"color:#f92672\"\u003e\u0026lt;\u0026lt;\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#34; -\u0026gt; \u0026#34;\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e\u0026lt;\u0026lt;\u003c/span\u003e sDec \u003cspan style=\"color:#f92672\"\u003e\u0026lt;\u0026lt;\u003c/span\u003e endl;\t\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t}\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#66d9ef\"\u003ecatch\u003c/span\u003e (exception \u003cspan style=\"color:#f92672\"\u003e\u0026amp;\u003c/span\u003eex) {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\tcerr \u003cspan style=\"color:#f92672\"\u003e\u0026lt;\u0026lt;\u003c/span\u003e ex.what() \u003cspan style=\"color:#f92672\"\u003e\u0026lt;\u0026lt;\u003c/span\u003e endl;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t}\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#66d9ef\"\u003ereturn\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e0\u003c/span\u003e;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e}\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-sh\" data-lang=\"sh\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ ./main\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ePlain Text -\u0026gt; MtiafY0csWZJZzsRNfE8cA\u003cspan style=\"color:#f92672\"\u003e==\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eMtiafY0csWZJZzsRNfE8cA\u003cspan style=\"color:#f92672\"\u003e==\u003c/span\u003e -\u0026gt; Plain Text\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e","title":"CryotoPP Example"},{"content":"macOS 및 Windows 에 GCC 설치하기\nMAC OS brew : macOS 용 패키지 관리자 https://brew.sh/index_ko{:target=\u0026quot;_blank\u0026quot;} brew 사용 gcc 설치 Command line tools 설치 xcode 없이 개발툴 설치 $ xcode-select --install clang 이 설치되고 gcc로 심볼링 링크 걸려 있음\n$ gcc -v Configured with: --prefix=/Library/Developer/CommandLineTools/usr --with-gxx-include-dir=/Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/4.2.1 Apple clang version 12.0.5 (clang-1205.0.22.11) Target: arm64-apple-darwin20.6.0 Thread model: posix InstalledDir: /Library/Developer/CommandLineTools/usr/bin GCC (G++) 설치 # 특정 버전으로 설치 가능 $ brew search gcc ==\u0026gt; Formulae gcc gcc@5 gcc@8 libgccjit ghc ncc gcc@10 gcc@6 gcc@9 x86_64-elf-gcc scc gcc@4.9 gcc@7 i686-elf-gcc grc tcc ==\u0026gt; Casks gcc-arm-embedded # 기본(최신) 버전 설치 $ brew install gcc ==\u0026gt; Auto-updated Homebrew! Updated 1 tap (homebrew/core). ==\u0026gt; Updated Formulae Updated 1 formula. ==\u0026gt; Downloading https://ghcr.io/v2/homebrew/core/gcc/manifests/11.2.0 Already downloaded: /Users/cdecl/Library/Caches/Homebrew/downloads/210783e77b227b8210d559abfe3514cdb95c915619fa3f785ad212120d6a36f9--gcc-11.2.0.bottle_manifest.json ==\u0026gt; Downloading https://ghcr.io/v2/homebrew/core/gcc/blobs/sha256:23ec727fa684a9f65cf9f55d61d208486d5202fb6112585a01426a Already downloaded: /Users/cdecl/Library/Caches/Homebrew/downloads/8d1fae8a356d50aa911004b768eff64c241e170ce9be66e684b819fc4f67fc7c--gcc--11.2.0.arm64_big_sur.bottle.tar.gz ==\u0026gt; Pouring gcc--11.2.0.arm64_big_sur.bottle.tar.gz 🍺 /opt/homebrew/Cellar/gcc/11.2.0: 1,412 files, 339.5MB 심볼릭링크 설정 및 PATH 설정 $ cd /opt/homebrew/Cellar/gcc/11.2.0 $ ls -l ... -rwxr-xr-x 1 cdecl admin 1.7M 8 28 13:41 g++-11 -rwxr-xr-x 1 cdecl admin 1.7M 8 28 13:41 gcc-11 ... $ ln -s g++-11 g++ $ ln -s gcc-11 gcc .zshrc or .bashrc export PATH=/opt/homebrew/Cellar/gcc/11.2.0/bin:$PATH $ g++ -v Using built-in specs. COLLECT_GCC=g++ COLLECT_LTO_WRAPPER=/opt/homebrew/Cellar/gcc/11.2.0/libexec/gcc/aarch64-apple-darwin20/11.1.0/lto-wrapper Target: aarch64-apple-darwin20 Configured with: ../configure --prefix=/opt/homebrew/Cellar/gcc/11.2.0 --libdir=/opt/homebrew/Cellar/gcc/11.2.0/lib/gcc/11 --disable-nls --enable-checking=release --enable-languages=c,c++,objc,obj-c++,fortran --program-suffix=-11 --with-gmp=/opt/homebrew/opt/gmp --with-mpfr=/opt/homebrew/opt/mpfr --with-mpc=/opt/homebrew/opt/libmpc --with-isl=/opt/homebrew/opt/isl --with-zstd=/opt/homebrew/opt/zstd --with-pkgversion=\u0026#39;Homebrew GCC 11.2.0\u0026#39; --with-bugurl=https://github.com/Homebrew/homebrew-core/issues --build=aarch64-apple-darwin20 --with-system-zlib --disable-multilib --with-native-system-header-dir=/usr/include --with-sysroot=/Library/Developer/CommandLineTools/SDKs/MacOSX.sdk Thread model: posix Supported LTO compression algorithms: zlib zstd gcc version 11.1.0 (Homebrew GCC 11.2.0) Windows chocolatey chocolatey : Windows 용 패키지 관리자 https://chocolatey.org/{:target=\u0026quot;_blank\u0026quot;} choco 사용 gcc 설치 GCC (G++) 설치 패키지가 2개중에 하나 선택 mingw : https://community.chocolatey.org/packages/mingw{:target=\u0026quot;_blank\u0026quot;} winlibs : https://community.chocolatey.org/packages/winlibs{:target=\u0026quot;_blank\u0026quot;} winlibs가 버전이 높고 mingw는 버전인 올라가면서 posix thread가 문제가 있음\n$ choco install winlibs -y $ g++ -v Using built-in specs. COLLECT_GCC=g++ COLLECT_LTO_WRAPPER=c:/programdata/chocolatey/lib/winlibs/tools/mingw64/bin/../libexec/gcc/x86_64-w64-mingw32/10.2.0/lto-wrapper.exe OFFLOAD_TARGET_NAMES=nvptx-none Target: x86_64-w64-mingw32 Configured with: ../configure --prefix=/R/winlibs64_stage/_TMP_/inst_gcc-10.2.0/share/gcc --build=x86_64-w64-mingw32 --host=x86_64-w64-mingw32 --with-pkgversion=\u0026#39;MinGW-W64 x86_64-posix-seh, built by Brecht Sanders\u0026#39; --with-tune=generic --enable-checking=release --enable-threads=posix --disable-sjlj-exceptions --disable-libunwind-exceptions --disable-serial-configure --disable-bootstrap --enable-host-shared --enable-plugin --disable-default-ssp --disable-rpath --disable-libstdcxx-pch --enable-libstdcxx-time=yes --disable-libstdcxx-debug --disable-version-specific-runtime-libs --with-stabs --disable-symvers --enable-languages=c,c++,fortran,lto,objc,obj-c++,d --disable-gold --disable-nls --disable-stage1-checking --disable-win32-registry --disable-multilib --enable-ld --enable-libquadmath --enable-libada --enable-libssp --enable-libstdcxx --enable-lto --enable-fully-dynamic-string --enable-libgomp --enable-graphite --enable-mingw-wildcard --with-mpc=/d/Prog/winlibs64_stage/custombuilt --with-mpfr=/d/Prog/winlibs64_stage/custombuilt --with-gmp=/d/Prog/winlibs64_stage/custombuilt --with-isl=/d/Prog/winlibs64_stage/custombuilt --enable-install-libiberty --enable-__cxa_atexit --without-included-gettext --with-diagnostics-color=auto --with-libiconv --with-system-zlib --with-build-sysroot=/R/winlibs64_stage/_TMP_/gcc-10.2.0/build_mingw/mingw-w64 CFLAGS=-I/d/Prog/winlibs64_stage/custombuilt/include/libdl-win32 --enable-offload-targets=nvptx-none Thread model: posix Supported LTO compression algorithms: zlib zstd gcc version 10.2.0 (MinGW-W64 x86_64-posix-seh, built by Brecht Sanders) 기타 툴 설치 $ choco install make cmake grep sed awk -y ","permalink":"https://cdecl.github.io/dev/gcc-install-mac/","summary":"\u003cp\u003emacOS 및 Windows 에 GCC 설치하기\u003c/p\u003e\n\u003ch2 id=\"mac-os\"\u003eMAC OS\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003ebrew : macOS 용 패키지 관리자 \u003ca href=\"https://brew.sh/index_ko\"\u003ehttps://brew.sh/index_ko\u003c/a\u003e{:target=\u0026quot;_blank\u0026quot;}\u003c/li\u003e\n\u003cli\u003ebrew 사용 gcc 설치\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"command-line-tools-설치\"\u003eCommand line tools 설치\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003excode 없이 개발툴 설치\u003c/li\u003e\n\u003c/ul\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-sh\" data-lang=\"sh\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ xcode-select --install\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cblockquote\u003e\n\u003cp\u003e\u003ccode\u003eclang\u003c/code\u003e 이 설치되고 \u003ccode\u003egcc\u003c/code\u003e로 심볼링 링크 걸려 있음\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-sh\" data-lang=\"sh\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ gcc -v\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eConfigured with: --prefix\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e/Library/Developer/CommandLineTools/usr --with-gxx-include-dir\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e/Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/4.2.1\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eApple clang version 12.0.5 \u003cspan style=\"color:#f92672\"\u003e(\u003c/span\u003eclang-1205.0.22.11\u003cspan style=\"color:#f92672\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eTarget: arm64-apple-darwin20.6.0\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eThread model: posix\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eInstalledDir: /Library/Developer/CommandLineTools/usr/bin\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch3 id=\"gcc-g-설치\"\u003eGCC (G++) 설치\u003c/h3\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-sh\" data-lang=\"sh\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# 특정 버전으로 설치 가능 \u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ brew search gcc\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003e==\u003c/span\u003e\u0026gt; Formulae\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003egcc                 gcc@5               gcc@8               libgccjit           ghc                 ncc\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003egcc@10              gcc@6               gcc@9               x86_64-elf-gcc      scc\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003egcc@4.9             gcc@7               i686-elf-gcc        grc                 tcc\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003e==\u003c/span\u003e\u0026gt; Casks\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003egcc-arm-embedded\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# 기본(최신) 버전 설치 \u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ brew install gcc\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003e==\u003c/span\u003e\u0026gt; Auto-updated Homebrew!\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eUpdated \u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e tap \u003cspan style=\"color:#f92672\"\u003e(\u003c/span\u003ehomebrew/core\u003cspan style=\"color:#f92672\"\u003e)\u003c/span\u003e.\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003e==\u003c/span\u003e\u0026gt; Updated Formulae\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eUpdated \u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e formula.\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003e==\u003c/span\u003e\u0026gt; Downloading https://ghcr.io/v2/homebrew/core/gcc/manifests/11.2.0\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eAlready downloaded: /Users/cdecl/Library/Caches/Homebrew/downloads/210783e77b227b8210d559abfe3514cdb95c915619fa3f785ad212120d6a36f9--gcc-11.2.0.bottle_manifest.json\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003e==\u003c/span\u003e\u0026gt; Downloading https://ghcr.io/v2/homebrew/core/gcc/blobs/sha256:23ec727fa684a9f65cf9f55d61d208486d5202fb6112585a01426a\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eAlready downloaded: /Users/cdecl/Library/Caches/Homebrew/downloads/8d1fae8a356d50aa911004b768eff64c241e170ce9be66e684b819fc4f67fc7c--gcc--11.2.0.arm64_big_sur.bottle.tar.gz\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003e==\u003c/span\u003e\u0026gt; Pouring gcc--11.2.0.arm64_big_sur.bottle.tar.gz\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e🍺  /opt/homebrew/Cellar/gcc/11.2.0: 1,412 files, 339.5MB\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch4 id=\"심볼릭링크-설정-및-path-설정\"\u003e심볼릭링크 설정 및 PATH 설정\u003c/h4\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-sh\" data-lang=\"sh\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ cd /opt/homebrew/Cellar/gcc/11.2.0\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ ls -l\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e...\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e-rwxr-xr-x  \u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e cdecl  admin   1.7M  \u003cspan style=\"color:#ae81ff\"\u003e8\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e28\u003c/span\u003e 13:41 g++-11\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e-rwxr-xr-x  \u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e cdecl  admin   1.7M  \u003cspan style=\"color:#ae81ff\"\u003e8\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e28\u003c/span\u003e 13:41 gcc-11\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e...\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ ln -s g++-11 g++\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ ln -s gcc-11 gcc\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cul\u003e\n\u003cli\u003e.zshrc or .bashrc\u003c/li\u003e\n\u003c/ul\u003e\n\u003cpre tabindex=\"0\"\u003e\u003ccode\u003eexport PATH=/opt/homebrew/Cellar/gcc/11.2.0/bin:$PATH\n\u003c/code\u003e\u003c/pre\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-sh\" data-lang=\"sh\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ g++ -v\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eUsing built-in specs.\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eCOLLECT_GCC\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003eg++\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eCOLLECT_LTO_WRAPPER\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e/opt/homebrew/Cellar/gcc/11.2.0/libexec/gcc/aarch64-apple-darwin20/11.1.0/lto-wrapper\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eTarget: aarch64-apple-darwin20\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eConfigured with: ../configure --prefix\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e/opt/homebrew/Cellar/gcc/11.2.0 --libdir\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e/opt/homebrew/Cellar/gcc/11.2.0/lib/gcc/11 --disable-nls --enable-checking\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003erelease --enable-languages\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003ec,c++,objc,obj-c++,fortran --program-suffix\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e-11 --with-gmp\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e/opt/homebrew/opt/gmp --with-mpfr\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e/opt/homebrew/opt/mpfr --with-mpc\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e/opt/homebrew/opt/libmpc --with-isl\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e/opt/homebrew/opt/isl --with-zstd\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e/opt/homebrew/opt/zstd --with-pkgversion\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;Homebrew GCC 11.2.0\u0026#39;\u003c/span\u003e --with-bugurl\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003ehttps://github.com/Homebrew/homebrew-core/issues --build\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003eaarch64-apple-darwin20 --with-system-zlib --disable-multilib --with-native-system-header-dir\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e/usr/include --with-sysroot\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e/Library/Developer/CommandLineTools/SDKs/MacOSX.sdk\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eThread model: posix\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eSupported LTO compression algorithms: zlib zstd\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003egcc version 11.1.0 \u003cspan style=\"color:#f92672\"\u003e(\u003c/span\u003eHomebrew GCC 11.2.0\u003cspan style=\"color:#f92672\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch2 id=\"windows\"\u003eWindows\u003c/h2\u003e\n\u003ch3 id=\"chocolatey\"\u003echocolatey\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003echocolatey : Windows 용 패키지 관리자 \u003ca href=\"https://chocolatey.org/\"\u003ehttps://chocolatey.org/\u003c/a\u003e{:target=\u0026quot;_blank\u0026quot;}\u003c/li\u003e\n\u003cli\u003echoco 사용 gcc 설치\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"gcc-g-설치-1\"\u003eGCC (G++) 설치\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e패키지가 2개중에 하나 선택\n\u003cul\u003e\n\u003cli\u003emingw : \u003ca href=\"https://community.chocolatey.org/packages/mingw\"\u003ehttps://community.chocolatey.org/packages/mingw\u003c/a\u003e{:target=\u0026quot;_blank\u0026quot;}\u003c/li\u003e\n\u003cli\u003ewinlibs : \u003ca href=\"https://community.chocolatey.org/packages/winlibs\"\u003ehttps://community.chocolatey.org/packages/winlibs\u003c/a\u003e{:target=\u0026quot;_blank\u0026quot;}\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003cblockquote\u003e\n\u003cp\u003e\u003ccode\u003ewinlibs\u003c/code\u003e가 버전이 높고 \u003ccode\u003emingw\u003c/code\u003e는 버전인 올라가면서 posix thread가 문제가 있음\u003c/p\u003e","title":"GCC 설치 (`macOS`, `Windows`)"},{"content":"netstat Host 머신에서 netstat 명령으로 docker container의 네트워크 상태가 확인 안됨 물론 container 내부에서 실행하면 되지만\u0026hellip; docker container는 bridge 네트워크 기반으로 운영이 되므로 Host Network 에서는 노출이 안됨 # docker 실행 $ docker run -d -p 8081:80 --name=mvcapp cdecl/mvcapp 4fafaf418f84bf6541a1301b4422f825c58fa20b11d1190e87a3e23eea7a6825 # Host 에서는 publsh port (listen) 정보만 노출 $ netstat -ntl | grep 8081 tcp6 0 0 :::8081 :::* LISTEN # ip 현황 $ ip a ... 2: eth0: \u0026lt;BROADCAST,MULTICAST,UP,LOWER_UP\u0026gt; mtu 1500 qdisc mq state UP group default qlen 1000 link/ether 00:15:5d:3a:4a:00 brd ff:ff:ff:ff:ff:ff inet 192.168.137.100/24 brd 192.168.137.255 scope global noprefixroute eth0 valid_lft forever preferred_lft forever 4: docker0: \u0026lt;BROADCAST,MULTICAST,UP,LOWER_UP\u0026gt; mtu 1500 qdisc noqueue state UP group default \u0026lt;-- docker bridge link/ether 02:42:58:c6:1b:23 brd ff:ff:ff:ff:ff:ff inet 10.1.0.1/24 brd 10.1.0.255 scope global docker0 valid_lft forever preferred_lft forever ... # bridge network $ docker inspect -f \u0026#39;{{.NetworkSettings.Gateway}}\u0026#39; mvcapp 10.1.0.1 # 라우팅 정보 $ netstat -r Kernel IP routing table Destination Gateway Genmask Flags MSS Window irtt Iface default gateway 0.0.0.0 UG 0 0 0 eth0 10.1.0.0 0.0.0.0 255.255.255.0 U 0 0 0 docker0 \u0026lt;-- docker bridge 10.42.0.0 0.0.0.0 255.255.255.0 U 0 0 0 cni0 192.168.137.0 0.0.0.0 255.255.255.0 U 0 0 0 eth0 nsenter https://github.com/jpetazzo/nsenter{:target=\u0026quot;_blank\u0026quot;} 격리되어 있는 namespace enter 진입하는 명령 It is a small tool allowing to enter into namespaces. Technically, it can enter existing namespaces, or spawn a process into a new set of namespaces.\n$ nsenter --help Usage: nsenter [options] \u0026lt;program\u0026gt; [\u0026lt;argument\u0026gt;...] Run a program with namespaces of other processes. Options: -t, --target \u0026lt;pid\u0026gt; target process to get namespaces from ... -n, --net[=\u0026lt;file\u0026gt;] enter network namespace ... # docker pid 확인하기 $ docker inspect -f \u0026#39;{{.State.Pid}}\u0026#39; mvcapp 3900 # root 권한 필요 # netstat tcp listen $ sudo nsenter -t $(docker inspect -f \u0026#39;{{.State.Pid}}\u0026#39; mvcapp) -n netstat -ntl Active Internet connections (only servers) Proto Recv-Q Send-Q Local Address Foreign Address State tcp 0 0 0.0.0.0:80 0.0.0.0:* LISTEN # ip 정보 $ sudo nsenter -t $(docker inspect -f \u0026#39;{{.State.Pid}}\u0026#39; mvcapp) -n ip a 1: lo: \u0026lt;LOOPBACK,UP,LOWER_UP\u0026gt; mtu 65536 qdisc noqueue state UNKNOWN group default qlen 1000 link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00 inet 127.0.0.1/8 scope host lo valid_lft forever preferred_lft forever 25: eth0@if26: \u0026lt;BROADCAST,MULTICAST,UP,LOWER_UP\u0026gt; mtu 1500 qdisc noqueue state UP group default link/ether 02:42:0a:01:00:02 brd ff:ff:ff:ff:ff:ff link-netnsid 0 inet 10.1.0.2/24 brd 10.1.0.255 scope global eth0 valid_lft forever preferred_lft forever # routing $ sudo nsenter -t $(docker inspect -f \u0026#39;{{.State.Pid}}\u0026#39; mvcapp) -n route Kernel IP routing table Destination Gateway Genmask Flags Metric Ref Use Iface default gateway 0.0.0.0 UG 0 0 0 eth0 10.1.0.0 0.0.0.0 255.255.255.0 U 0 0 0 eth0 테스트 ","permalink":"https://cdecl.github.io/devops/docker-internal-network/","summary":"\u003ch2 id=\"netstat\"\u003enetstat\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003eHost 머신에서 \u003ccode\u003enetstat\u003c/code\u003e 명령으로 docker container의 네트워크 상태가 확인 안됨\n\u003cul\u003e\n\u003cli\u003e물론 container 내부에서 실행하면 되지만\u0026hellip;\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003edocker container는 bridge 네트워크 기반으로 운영이 되므로 Host Network 에서는 노출이 안됨\u003c/li\u003e\n\u003c/ul\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-sh\" data-lang=\"sh\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# docker 실행 \u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ docker run -d -p 8081:80 --name\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003emvcapp cdecl/mvcapp\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e4fafaf418f84bf6541a1301b4422f825c58fa20b11d1190e87a3e23eea7a6825\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# Host 에서는 publsh port (listen) 정보만 노출\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ netstat -ntl | grep \u003cspan style=\"color:#ae81ff\"\u003e8081\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003etcp6       \u003cspan style=\"color:#ae81ff\"\u003e0\u003c/span\u003e      \u003cspan style=\"color:#ae81ff\"\u003e0\u003c/span\u003e :::8081                 :::*                    LISTEN\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# ip 현황\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ ip a\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e...\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e2: eth0: \u0026lt;BROADCAST,MULTICAST,UP,LOWER_UP\u0026gt; mtu \u003cspan style=\"color:#ae81ff\"\u003e1500\u003c/span\u003e qdisc mq state UP group default qlen \u003cspan style=\"color:#ae81ff\"\u003e1000\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    link/ether 00:15:5d:3a:4a:00 brd ff:ff:ff:ff:ff:ff\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    inet 192.168.137.100/24 brd 192.168.137.255 scope global noprefixroute eth0\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e       valid_lft forever preferred_lft forever\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e4: docker0: \u0026lt;BROADCAST,MULTICAST,UP,LOWER_UP\u0026gt; mtu \u003cspan style=\"color:#ae81ff\"\u003e1500\u003c/span\u003e qdisc noqueue state UP group default \u0026lt;-- docker bridge\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    link/ether 02:42:58:c6:1b:23 brd ff:ff:ff:ff:ff:ff\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    inet 10.1.0.1/24 brd 10.1.0.255 scope global docker0\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e       valid_lft forever preferred_lft forever\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e...\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# bridge network \u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ docker inspect -f \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;{{.NetworkSettings.Gateway}}\u0026#39;\u003c/span\u003e mvcapp\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e10.1.0.1\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# 라우팅 정보\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ netstat -r\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eKernel IP routing table\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eDestination     Gateway         Genmask         Flags   MSS Window  irtt Iface\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003edefault         gateway         0.0.0.0         UG        \u003cspan style=\"color:#ae81ff\"\u003e0\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e0\u003c/span\u003e          \u003cspan style=\"color:#ae81ff\"\u003e0\u003c/span\u003e eth0\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e10.1.0.0        0.0.0.0         255.255.255.0   U         \u003cspan style=\"color:#ae81ff\"\u003e0\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e0\u003c/span\u003e          \u003cspan style=\"color:#ae81ff\"\u003e0\u003c/span\u003e docker0  \u0026lt;-- docker bridge\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e10.42.0.0       0.0.0.0         255.255.255.0   U         \u003cspan style=\"color:#ae81ff\"\u003e0\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e0\u003c/span\u003e          \u003cspan style=\"color:#ae81ff\"\u003e0\u003c/span\u003e cni0\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e192.168.137.0   0.0.0.0         255.255.255.0   U         \u003cspan style=\"color:#ae81ff\"\u003e0\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e0\u003c/span\u003e          \u003cspan style=\"color:#ae81ff\"\u003e0\u003c/span\u003e eth0\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch2 id=\"nsenter\"\u003ensenter\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://github.com/jpetazzo/nsenter\"\u003ehttps://github.com/jpetazzo/nsenter\u003c/a\u003e{:target=\u0026quot;_blank\u0026quot;}\u003c/li\u003e\n\u003cli\u003e격리되어 있는 \u003cstrong\u003en\u003c/strong\u003eame\u003cstrong\u003es\u003c/strong\u003epace \u003cstrong\u003eenter\u003c/strong\u003e 진입하는 명령\u003c/li\u003e\n\u003c/ul\u003e\n\u003cblockquote\u003e\n\u003cp\u003eIt is a small tool allowing to enter into namespaces. Technically, it can enter existing namespaces, or spawn a process into a new set of namespaces.\u003c/p\u003e","title":"Docker 내부 네트워크 상태 확인"},{"content":"Cgo enables the creation of Go packages that call C code.\nCgo https://pkg.go.dev/cmd/cgo{:target=\u0026quot;_blank\u0026quot;} Golang에서 C 코드를 통합 할 수 있도록 만든 의사 패키지 C코드 - Go 파일 통합 예제 import \u0026quot;C\u0026quot; 바로 윗 부분의 주석 /* */ or // 으로 C코드 작성 C 함수, 변수 영역 접근시, C 의 패키지 명으로 접근 함수, 변수선언, #include 선행처리지시자 등 일반적인 C 코드 cgo Cheat Sheet : https://gist.github.com/zchee/b9c99695463d8902cd33{:target=\u0026quot;_blank\u0026quot;} package main /* #include \u0026lt;stdio.h\u0026gt; // printf #include \u0026lt;stdlib.h\u0026gt; // free (C.free) void println(const char *s) { printf(\u0026#34;%s\\n\u0026#34;, s); } */ import \u0026#34;C\u0026#34; import ( \u0026#34;fmt\u0026#34; \u0026#34;unsafe\u0026#34; ) func main() { s := C.CString(\u0026#34;c lang println\u0026#34;) C.free(unsafe.Pointer(s)) C.println(s) fmt.Println(\u0026#34;golang println\u0026#34;) } $ go mod init main $ go build $ ./main c lang println golang println C코드 통합 - 별도 파일(C/C++)로 구성 같은 디렉토리의 C/C++ file extention 의 경우 기본 gcc(g++)로 빌드 및 링크 별도 파일의 경우 C++ 코드도 작성이 가능하나, golang 에서는 C언어 (Name mangling) 방식만 지원 Name mangling: 컴파일러가 함수명이나 변수이름을 특정한 규칙으로 변경 C++의 경우는 함수 Overloading으로 인해 C언어와 규칙이 다름 extern \u0026quot;C\u0026quot;: C언어 방식의 Name mangling으로 처리 $ tree ├── go.mod ├── main.go └── print.cpp package main // #include \u0026lt;stdlib.h\u0026gt; // free // void println(char *s); import \u0026#34;C\u0026#34; import ( \u0026#34;fmt\u0026#34; \u0026#34;unsafe\u0026#34; ) func main() { s := C.CString(\u0026#34;cpp println\u0026#34;) C.free(unsafe.Pointer(s)) C.println(s) fmt.Println(\u0026#34;golang println\u0026#34;) } #include \u0026lt;iostream\u0026gt; using namespace std; extern \u0026#34;C\u0026#34; void println(const char *s); void println(const char *s) { cout \u0026lt;\u0026lt; s \u0026lt;\u0026lt; endl; } $ go build $ ./main cpp println Static, Dynamic library link $ tree ├── go.mod ├── main.go └── native ├── print.cpp └── print.h // print.h #pragma once #ifdef __cplusplus extern \u0026#34;C\u0026#34; { #endif void println(const char *s); #ifdef __cplusplus } #endif // print.cpp #include \u0026lt;iostream\u0026gt; #include \u0026#34;print.h\u0026#34; void println(const char *s) { std::cout \u0026lt;\u0026lt; s \u0026lt;\u0026lt; std::endl; } #cgo LDFLAG: 컴파일러 라이브러리 링크 옵션 지정 #cgo CFLAGS: 컴파일러 컴파일 옵션 package main // #cgo LDFLAGS: -Lnative -lprint -lstdc++ // #include \u0026lt;stdlib.h\u0026gt; // #include \u0026#34;native/print.h\u0026#34; import \u0026#34;C\u0026#34; import ( \u0026#34;fmt\u0026#34; \u0026#34;unsafe\u0026#34; ) func main() { s := C.CString(\u0026#34;cpp println\u0026#34;) C.free(unsafe.Pointer(s)) C.println(s) fmt.Println(\u0026#34;golang println\u0026#34;) } Static link $ cd native $ g++ -c print.cpp $ ar -cr libprint.a print.o $ cd .. $ go build $ ./main cpp println golang println Dynamic Link $ cd native $ g++ -dynamic -fPIC -o libprint.so -c libprint.cpp $ cd .. $ go build # Mac : export DYLD_LIBRARY_PATH=$(pwd)/native $ export LD_LIBRARY_PATH=/root/cgo/native $ ./main cpp println golang println 의존성 확인 Linux $ ldd ./main linux-vdso.so.1 (0x0000ffff9446a000) libprint.so =\u0026gt; /root/cgo/native/libprint.so (0x0000ffff94428000) libpthread.so.0 =\u0026gt; /lib/aarch64-linux-gnu/libpthread.so.0 (0x0000ffff943f7000) libc.so.6 =\u0026gt; /lib/aarch64-linux-gnu/libc.so.6 (0x0000ffff94281000) libstdc++.so.6 =\u0026gt; /usr/lib/aarch64-linux-gnu/libstdc++.so.6 (0x0000ffff940a9000) /lib/ld-linux-aarch64.so.1 (0x0000ffff9443a000) libm.so.6 =\u0026gt; /lib/aarch64-linux-gnu/libm.so.6 (0x0000ffff93ffe000) libgcc_s.so.1 =\u0026gt; /lib/aarch64-linux-gnu/libgcc_s.so.1 (0x0000ffff93fda000) Mac $ otool -L ./main ./main: libprint.so (compatibility version 0.0.0, current version 0.0.0) /usr/lib/libc++.1.dylib (compatibility version 1.0.0, current version 905.6.0) /System/Library/Frameworks/CoreFoundation.framework/Versions/A/CoreFoundation (compatibility version 150.0.0, current version 1775.118.101) /usr/lib/libSystem.B.dylib (compatibility version 1.0.0, current version 1292.100.5) 예제 : char * 다루기 - string → *C.char : C.CString(string) // C.free(unsafe.Pointer(*C.char)) 메모리 해제 필수 - *C.char → string : C.GoString(*C.char) - []C.char\u0026#39; : byte slice → *C.char // buff := make([]byte, 128), (*C.char)(unsafe.Pointer(\u0026amp;buff[0])) - *C.char, C.int → string : C.GoStringN(*C.char, C.int) package main /* #include \u0026lt;stdlib.h\u0026gt; #include \u0026lt;string.h\u0026gt; */ import \u0026#34;C\u0026#34; import ( \u0026#34;fmt\u0026#34; \u0026#34;unsafe\u0026#34; ) func getptr(buff []byte) *C.char { return (*C.char)(unsafe.Pointer(\u0026amp;buff[0])) } func main() { buff := make([]byte, 128) s := C.CString(\u0026#34;Hello\u0026#34;) defer C.free(unsafe.Pointer(s)) C.strcpy(getptr(buff), s) fmt.Println(string(buff)) } ","permalink":"https://cdecl.github.io/dev/golang-cgo/","summary":"\u003cp\u003eCgo enables the creation of Go packages that call C code.\u003c/p\u003e\n\u003ch2 id=\"cgo\"\u003eCgo\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://pkg.go.dev/cmd/cgo\"\u003ehttps://pkg.go.dev/cmd/cgo\u003c/a\u003e{:target=\u0026quot;_blank\u0026quot;}\u003c/li\u003e\n\u003cli\u003eGolang에서 C 코드를 통합 할 수 있도록 만든 의사 패키지\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"c코드---go-파일-통합\"\u003eC코드 - Go 파일 통합\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e예제\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003eimport \u0026quot;C\u0026quot;\u003c/code\u003e 바로 윗 부분의 주석 \u003ccode\u003e/* */\u003c/code\u003e or \u003ccode\u003e//\u003c/code\u003e 으로 C코드 작성\u003c/li\u003e\n\u003cli\u003eC 함수, 변수 영역 접근시, \u003ccode\u003eC\u003c/code\u003e 의 패키지 명으로 접근\u003c/li\u003e\n\u003cli\u003e함수, 변수선언, #include 선행처리지시자 등 일반적인 C 코드\u003c/li\u003e\n\u003cli\u003ecgo Cheat Sheet : \u003ca href=\"https://gist.github.com/zchee/b9c99695463d8902cd33\"\u003ehttps://gist.github.com/zchee/b9c99695463d8902cd33\u003c/a\u003e{:target=\u0026quot;_blank\u0026quot;}\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-go\" data-lang=\"go\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003epackage\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003emain\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e/*\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e#include \u0026lt;stdio.h\u0026gt;      // printf\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e#include \u0026lt;stdlib.h\u0026gt;     // free (C.free)\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003evoid println(const char *s) {\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e\tprintf(\u0026#34;%s\\n\u0026#34;, s);\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e}\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e*/\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003eimport\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;C\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003eimport\u003c/span\u003e (\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;fmt\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;unsafe\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003efunc\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003emain\u003c/span\u003e() {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#a6e22e\"\u003es\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e:=\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eC\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eCString\u003c/span\u003e(\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;c lang println\u0026#34;\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#a6e22e\"\u003eC\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003efree\u003c/span\u003e(\u003cspan style=\"color:#a6e22e\"\u003eunsafe\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003ePointer\u003c/span\u003e(\u003cspan style=\"color:#a6e22e\"\u003es\u003c/span\u003e))\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#a6e22e\"\u003eC\u003c/span\u003e.println(\u003cspan style=\"color:#a6e22e\"\u003es\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#a6e22e\"\u003efmt\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003ePrintln\u003c/span\u003e(\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;golang println\u0026#34;\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e}\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-sh\" data-lang=\"sh\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ go mod init main\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ go build \n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ ./main\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ec lang println\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003egolang println\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch3 id=\"c코드-통합---별도-파일cc로-구성\"\u003eC코드 통합 - 별도 파일(C/C++)로 구성\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e같은 디렉토리의 C/C++ file extention 의 경우 기본 gcc(g++)로 빌드 및 링크\u003c/li\u003e\n\u003cli\u003e별도 파일의 경우 C++ 코드도 작성이 가능하나, golang 에서는 C언어 (\u003ccode\u003eName mangling\u003c/code\u003e) 방식만 지원\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eName mangling\u003c/code\u003e: 컴파일러가 함수명이나 변수이름을 특정한 규칙으로 변경\n\u003cul\u003e\n\u003cli\u003eC++의 경우는 함수 Overloading으로 인해 C언어와 규칙이 다름\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eextern \u0026quot;C\u0026quot;\u003c/code\u003e: C언어 방식의 Name mangling으로 처리\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-sh\" data-lang=\"sh\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ tree\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e├── go.mod\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e├── main.go\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e└── print.cpp\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-go\" data-lang=\"go\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003epackage\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003emain\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e// #include \u0026lt;stdlib.h\u0026gt;    // free\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e// void println(char *s);\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003eimport\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;C\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003eimport\u003c/span\u003e (\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;fmt\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;unsafe\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003efunc\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003emain\u003c/span\u003e() {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#a6e22e\"\u003es\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e:=\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eC\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eCString\u003c/span\u003e(\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;cpp println\u0026#34;\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#a6e22e\"\u003eC\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003efree\u003c/span\u003e(\u003cspan style=\"color:#a6e22e\"\u003eunsafe\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003ePointer\u003c/span\u003e(\u003cspan style=\"color:#a6e22e\"\u003es\u003c/span\u003e))\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#a6e22e\"\u003eC\u003c/span\u003e.println(\u003cspan style=\"color:#a6e22e\"\u003es\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#a6e22e\"\u003efmt\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003ePrintln\u003c/span\u003e(\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;golang println\u0026#34;\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e}\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-cpp\" data-lang=\"cpp\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e#include\u003c/span\u003e \u003cspan style=\"color:#75715e\"\u003e\u0026lt;iostream\u0026gt;\u003c/span\u003e\u003cspan style=\"color:#75715e\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003eusing\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003enamespace\u003c/span\u003e std;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003eextern\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;C\u0026#34;\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003evoid\u003c/span\u003e println(\u003cspan style=\"color:#66d9ef\"\u003econst\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003echar\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e*\u003c/span\u003es);\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003evoid\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eprintln\u003c/span\u003e(\u003cspan style=\"color:#66d9ef\"\u003econst\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003echar\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e*\u003c/span\u003es) \n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e{\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\tcout \u003cspan style=\"color:#f92672\"\u003e\u0026lt;\u0026lt;\u003c/span\u003e s \u003cspan style=\"color:#f92672\"\u003e\u0026lt;\u0026lt;\u003c/span\u003e endl;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e}\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-sh\" data-lang=\"sh\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ go build \n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ ./main\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ecpp println\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch3 id=\"static-dynamic-library-link\"\u003eStatic, Dynamic library link\u003c/h3\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-sh\" data-lang=\"sh\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ tree\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e├── go.mod\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e├── main.go\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e└── native\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    ├── print.cpp\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    └── print.h\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-cpp\" data-lang=\"cpp\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e// print.h\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e#pragma once \n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e#ifdef __cplusplus\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003eextern\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;C\u0026#34;\u003c/span\u003e {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e#endif \n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003evoid\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eprintln\u003c/span\u003e(\u003cspan style=\"color:#66d9ef\"\u003econst\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003echar\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e*\u003c/span\u003es);\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e#ifdef __cplusplus\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e}\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e#endif \n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-cpp\" data-lang=\"cpp\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e// print.cpp\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e#include\u003c/span\u003e \u003cspan style=\"color:#75715e\"\u003e\u0026lt;iostream\u0026gt;\u003c/span\u003e\u003cspan style=\"color:#75715e\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e#include\u003c/span\u003e \u003cspan style=\"color:#75715e\"\u003e\u0026#34;print.h\u0026#34;\u003c/span\u003e\u003cspan style=\"color:#75715e\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003evoid\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eprintln\u003c/span\u003e(\u003cspan style=\"color:#66d9ef\"\u003econst\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003echar\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e*\u003c/span\u003es) \n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e{\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\tstd\u003cspan style=\"color:#f92672\"\u003e::\u003c/span\u003ecout \u003cspan style=\"color:#f92672\"\u003e\u0026lt;\u0026lt;\u003c/span\u003e s \u003cspan style=\"color:#f92672\"\u003e\u0026lt;\u0026lt;\u003c/span\u003e std\u003cspan style=\"color:#f92672\"\u003e::\u003c/span\u003eendl;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e}\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cblockquote\u003e\n\u003cul\u003e\n\u003cli\u003e#cgo LDFLAG: 컴파일러 라이브러리 링크 옵션 지정\u003c/li\u003e\n\u003cli\u003e#cgo CFLAGS: 컴파일러 컴파일 옵션\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/blockquote\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-go\" data-lang=\"go\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003epackage\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003emain\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e// #cgo LDFLAGS: -Lnative -lprint -lstdc++\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e// #include \u0026lt;stdlib.h\u0026gt;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e// #include \u0026#34;native/print.h\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003eimport\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;C\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003eimport\u003c/span\u003e (\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;fmt\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;unsafe\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003efunc\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003emain\u003c/span\u003e() {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#a6e22e\"\u003es\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e:=\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eC\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eCString\u003c/span\u003e(\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;cpp println\u0026#34;\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#a6e22e\"\u003eC\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003efree\u003c/span\u003e(\u003cspan style=\"color:#a6e22e\"\u003eunsafe\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003ePointer\u003c/span\u003e(\u003cspan style=\"color:#a6e22e\"\u003es\u003c/span\u003e))\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#a6e22e\"\u003eC\u003c/span\u003e.println(\u003cspan style=\"color:#a6e22e\"\u003es\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#a6e22e\"\u003efmt\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003ePrintln\u003c/span\u003e(\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;golang println\u0026#34;\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e}\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch4 id=\"static-link\"\u003eStatic link\u003c/h4\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-sh\" data-lang=\"sh\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ cd native \n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ g++ -c print.cpp\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ ar -cr libprint.a print.o\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ cd ..\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ go build \n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ ./main\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ecpp println\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003egolang println\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch4 id=\"dynamic-link\"\u003eDynamic Link\u003c/h4\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-sh\" data-lang=\"sh\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ cd native \n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ g++ -dynamic -fPIC -o libprint.so -c libprint.cpp\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ cd ..\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ go build\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# Mac : export DYLD_LIBRARY_PATH=$(pwd)/native \u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ export LD_LIBRARY_PATH\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e/root/cgo/native \n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ ./main\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ecpp println\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003egolang println\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch4 id=\"의존성-확인\"\u003e의존성 확인\u003c/h4\u003e\n\u003cul\u003e\n\u003cli\u003eLinux\u003c/li\u003e\n\u003c/ul\u003e\n\u003cpre tabindex=\"0\"\u003e\u003ccode\u003e$  ldd ./main\n\tlinux-vdso.so.1 (0x0000ffff9446a000)\n\tlibprint.so =\u0026gt; /root/cgo/native/libprint.so (0x0000ffff94428000)\n\tlibpthread.so.0 =\u0026gt; /lib/aarch64-linux-gnu/libpthread.so.0 (0x0000ffff943f7000)\n\tlibc.so.6 =\u0026gt; /lib/aarch64-linux-gnu/libc.so.6 (0x0000ffff94281000)\n\tlibstdc++.so.6 =\u0026gt; /usr/lib/aarch64-linux-gnu/libstdc++.so.6 (0x0000ffff940a9000)\n\t/lib/ld-linux-aarch64.so.1 (0x0000ffff9443a000)\n\tlibm.so.6 =\u0026gt; /lib/aarch64-linux-gnu/libm.so.6 (0x0000ffff93ffe000)\n\tlibgcc_s.so.1 =\u0026gt; /lib/aarch64-linux-gnu/libgcc_s.so.1 (0x0000ffff93fda000)\n\u003c/code\u003e\u003c/pre\u003e\u003cul\u003e\n\u003cli\u003eMac\u003c/li\u003e\n\u003c/ul\u003e\n\u003cpre tabindex=\"0\"\u003e\u003ccode\u003e$ otool -L ./main\n./main:\n\tlibprint.so (compatibility version 0.0.0, current version 0.0.0)\n\t/usr/lib/libc++.1.dylib (compatibility version 1.0.0, current version 905.6.0)\n\t/System/Library/Frameworks/CoreFoundation.framework/Versions/A/CoreFoundation (compatibility version 150.0.0, current version 1775.118.101)\n\t/usr/lib/libSystem.B.dylib (compatibility version 1.0.0, current version 1292.100.5)\n\u003c/code\u003e\u003c/pre\u003e\u003chr\u003e\n\u003ch3 id=\"예제--char--다루기\"\u003e예제 : \u003ccode\u003echar *\u003c/code\u003e 다루기\u003c/h3\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-md\" data-lang=\"md\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003e-\u003c/span\u003e string → *C.char : C.CString(string)  // C.free(unsafe.Pointer(*C.char)) 메모리 해제 필수\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003e-\u003c/span\u003e *C.char → string : C.GoString(*C.char)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003e-\u003c/span\u003e []C.char\u0026#39; : byte slice → *C.char  // buff := make([]byte, 128), (*C.char)(unsafe.Pointer(\u0026amp;buff[0]))\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003e-\u003c/span\u003e *C.char, C.int → string : C.GoStringN(*C.char, C.int)\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-go\" data-lang=\"go\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003epackage\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003emain\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e/*\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e#include \u0026lt;stdlib.h\u0026gt;\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e#include \u0026lt;string.h\u0026gt;\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e*/\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003eimport\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;C\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003eimport\u003c/span\u003e (\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;fmt\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;unsafe\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003efunc\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003egetptr\u003c/span\u003e(\u003cspan style=\"color:#a6e22e\"\u003ebuff\u003c/span\u003e []\u003cspan style=\"color:#66d9ef\"\u003ebyte\u003c/span\u003e) \u003cspan style=\"color:#f92672\"\u003e*\u003c/span\u003e\u003cspan style=\"color:#a6e22e\"\u003eC\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003echar\u003c/span\u003e {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#66d9ef\"\u003ereturn\u003c/span\u003e (\u003cspan style=\"color:#f92672\"\u003e*\u003c/span\u003e\u003cspan style=\"color:#a6e22e\"\u003eC\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003echar\u003c/span\u003e)(\u003cspan style=\"color:#a6e22e\"\u003eunsafe\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003ePointer\u003c/span\u003e(\u003cspan style=\"color:#f92672\"\u003e\u0026amp;\u003c/span\u003e\u003cspan style=\"color:#a6e22e\"\u003ebuff\u003c/span\u003e[\u003cspan style=\"color:#ae81ff\"\u003e0\u003c/span\u003e]))\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e}\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003efunc\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003emain\u003c/span\u003e() {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#a6e22e\"\u003ebuff\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e:=\u003c/span\u003e make([]\u003cspan style=\"color:#66d9ef\"\u003ebyte\u003c/span\u003e, \u003cspan style=\"color:#ae81ff\"\u003e128\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#a6e22e\"\u003es\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e:=\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eC\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eCString\u003c/span\u003e(\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;Hello\u0026#34;\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#66d9ef\"\u003edefer\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eC\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003efree\u003c/span\u003e(\u003cspan style=\"color:#a6e22e\"\u003eunsafe\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003ePointer\u003c/span\u003e(\u003cspan style=\"color:#a6e22e\"\u003es\u003c/span\u003e))\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#a6e22e\"\u003eC\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003estrcpy\u003c/span\u003e(\u003cspan style=\"color:#a6e22e\"\u003egetptr\u003c/span\u003e(\u003cspan style=\"color:#a6e22e\"\u003ebuff\u003c/span\u003e), \u003cspan style=\"color:#a6e22e\"\u003es\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#a6e22e\"\u003efmt\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003ePrintln\u003c/span\u003e(string(\u003cspan style=\"color:#a6e22e\"\u003ebuff\u003c/span\u003e))\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e}\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e","title":"Golang, Cgo"},{"content":"Docker Private Registry 구성\nRegistry 실행 docker-compose.yml version: \u0026#39;3\u0026#39; services: registry: image: registry container_name: registry restart: always ports: - 5000:5000 environment: REGISTRY_HTTP_ADDR: 0.0.0.0:5000 volumes: - registry:/var/lib/registry - ./config.yml:/etc/docker/registry/config.yml volumes: registry: # 실행 $ docker-compose up -d $ curl -s http://localhost:5000/v2/_catalog {\u0026#34;repositories\u0026#34;:[]} SSL 적용 version: \u0026#39;3\u0026#39; services: registry: image: registry container_name: private_registry restart: always ports: - 5000:5000 environment: REGISTRY_HTTP_ADDR: 0.0.0.0:5000 REGISTRY_HTTP_TLS_CERTIFICATE: /certs/domain-pem.pem REGISTRY_HTTP_TLS_KEY: /certs/domain-pem.key volumes: - registry:/var/lib/registry - ./config.yml:/etc/docker/registry/config.yml - ./certs:/certs volumes: registry: Image Push 테스트용 이미지 태깅 # get alpine images $ docker pull alpine $ docker pull alpine:3.13 # tagging $ docker tag alpine localhost:5000/cdecl/alpine:latest $ docker tag alpine:3.13 localhost:5000/cdecl/alpine:3.13 $ docker images REPOSITORY TAG IMAGE ID CREATED SIZE alpine latest ae607a46d002 2 weeks ago 5.33MB localhost:5000/cdecl/alpine latest ae607a46d002 2 weeks ago 5.33MB alpine 3.13 81efc9693413 2 months ago 5.35MB localhost:5000/cdecl/alpine 3.13 81efc9693413 2 months ago 5.35MB Image Push # image push $ docker push localhost:5000/cdecl/alpine:3.13 The push refers to repository [localhost:5000/cdecl/alpine] c55d5dbdab40: Layer already exists 3.13: digest: sha256:55fc95a51d97f7b76b124f3b581a58ebf5555d12574f16087de3971a12724dd4 size: 528 $ docker push localhost:5000/cdecl/alpine:latest The push refers to repository [localhost:5000/cdecl/alpine] 5bfa694cc00a: Layer already exists latest: digest: sha256:bd9137c3bb45dbc40cde0f0e19a8b9064c2bc485466221f5e95eb72b0d0cf82e size: 528 # Catalog list $ curl -s http://localhost:5000/v2/_catalog {\u0026#34;repositories\u0026#34;:[\u0026#34;cdecl/alpine\u0026#34;]} # Tag 정보 $ curl -s http://localhost:5000/v2/cdecl/alpine/tags/list {\u0026#34;name\u0026#34;:\u0026#34;cdecl/alpine\u0026#34;,\u0026#34;tags\u0026#34;:[\u0026#34;latest\u0026#34;,\u0026#34;3.13\u0026#34;]} Image Pull $ docker pull localhost:5000/cdecl/alpine Using default tag: latest latest: Pulling from cdecl/alpine Digest: sha256:bd9137c3bb45dbc40cde0f0e19a8b9064c2bc485466221f5e95eb72b0d0cf82e Status: Downloaded newer image for localhost:5000/cdecl/alpine:latest localhost:5000/cdecl/alpine:latest Image Delete Tag 확인 -\u0026gt; Manifests 확인 -\u0026gt; Manifests 이미지 삭제 # Tag 정보 확인 $ curl -s http://localhost:5000/v2/cdecl/alpine/tags/list {\u0026#34;name\u0026#34;:\u0026#34;cdecl/alpine\u0026#34;,\u0026#34;tags\u0026#34;:[\u0026#34;latest\u0026#34;,\u0026#34;3.13\u0026#34;]} # Tag의 Manifest 정보확인 - headers 확인 # \u0026lt;registry-url\u0026gt;/v2/\u0026lt;image-path-name\u0026gt;/manifests/\u0026lt;tag\u0026gt; $ curl -s -I -H \u0026#34;Accept: application/vnd.docker.distribution.manifest.v2+json\u0026#34; \\ http://localhost:5000/v2/cdecl/alpine/manifests/latest HTTP/1.1 200 OK Content-Length: 528 Content-Type: application/vnd.docker.distribution.manifest.v2+json Docker-Content-Digest: sha256:bd9137c3bb45dbc40cde0f0e19a8b9064c2bc485466221f5e95eb72b0d0cf82e Docker-Distribution-Api-Version: registry/2.0 Etag: \u0026#34;sha256:bd9137c3bb45dbc40cde0f0e19a8b9064c2bc485466221f5e95eb72b0d0cf82e\u0026#34; # Manifest 정보로 이미지 삭제 # Docker-Content-Digest: \u0026lt;sha256:로 시작하는 해쉬 문자열\u0026gt; $ curl -s -XDELETE http://localhost:5000/v2/cdecl/alpine/manifests/sha256:bd9137c3bb45dbc40cde0f0e19a8b9064c2bc485466221f5e95eb72b0d0cf82e # 확인 $ curl -s http://localhost:5000/v2/cdecl/alpine/tags/list {\u0026#34;name\u0026#34;:\u0026#34;cdecl/alpine\u0026#34;,\u0026#34;tags\u0026#34;:[\u0026#34;3.13\u0026#34;]} Delete marked manifests $ curl -sS http://localhost:5000/v2/cdecl/alpine/tags/list {\u0026#34;name\u0026#34;:\u0026#34;cdecl/alpine\u0026#34;,\u0026#34;tags\u0026#34;:null} $ docker exec -it registry bin/registry garbage-collect /etc/docker/registry/config.yml cdecl/alpine 0 blobs marked, 3 blobs and 0 manifests eligible for deletion blob eligible for deletion: sha256:81efc9693413c6292235ea2c29ea07c149701140b98df6c1998bb91d41acf802 INFO[0000] Deleting blob: /docker/registry/v2/blobs/sha256/81/81efc9693413c6292235ea2c29ea07c149701140b98df6c1998bb91d41acf802 go.version=go1.11.2 instance.id=d8bbbd10-232a-457a-9ceb-312b7317da5f service=registry blob eligible for deletion: sha256:55fc95a51d97f7b76b124f3b581a58ebf5555d12574f16087de3971a12724dd4 INFO[0000] Deleting blob: /docker/registry/v2/blobs/sha256/55/55fc95a51d97f7b76b124f3b581a58ebf5555d12574f16087de3971a12724dd4 go.version=go1.11.2 instance.id=d8bbbd10-232a-457a-9ceb-312b7317da5f service=registry blob eligible for deletion: sha256:595b0fe564bb9444ebfe78288079a01ee6d7f666544028d5e96ba610f909ee43 INFO[0000] Deleting blob: /docker/registry/v2/blobs/sha256/59/595b0fe564bb9444ebfe78288079a01ee6d7f666544028d5e96ba610f909ee43 go.version=go1.11.2 instance.id=d8bbbd10-232a-457a-9ceb-312b7317da5f service=registry 위 작업으로는 물리적인 데이터가 삭제 안됨 # 물리적인 파일 삭제 $ docker exec -it registry rm -rf /var/lib/registry/docker/registry/v2/repositories/cdecl Script registry-image-delete.sh #!/bin/bash URI=\u0026#34;$1\u0026#34; NAME=\u0026#34;$2\u0026#34; TAG=\u0026#34;$3\u0026#34; if [[ -z \u0026#34;$URI\u0026#34; ]]; then echo \u0026#34;Usage: $0 \u0026lt;URI\u0026gt; \u0026lt;NAME\u0026gt; [\u0026lt;TAG\u0026gt;]\u0026#34; exit -1 fi if [[ -z \u0026#34;$NAME\u0026#34; ]]; then echo \u0026#34;Usage: $0 $URI \u0026lt;NAME\u0026gt; [\u0026lt;TAG\u0026gt;]\u0026#34; echo curl -sS $URI/v2/_catalog | jq -r \u0026#39;.repositories[]\u0026#39; echo exit -1 fi if [[ -z \u0026#34;$TAG\u0026#34; ]]; then echo \u0026#34;Usage: $0 $URI $NAME [\u0026lt;TAG\u0026gt;]\u0026#34; echo curl -sS $URI/v2/$NAME/tags/list | jq -r \u0026#39;.tags[]\u0026#39; echo exit -1 fi MANIFESTS=$(curl -sS -I -H \u0026#34;Accept: application/vnd.docker.distribution.manifest.v2+json\u0026#34; \\ $URI/v2/$NAME/manifests/$TAG | grep -i Docker-Content-Digest | awk \u0026#39;{print $2}\u0026#39;) if [[ -z \u0026#34;$MANIFESTS\u0026#34; ]]; then echo \u0026#34;No manifest found for $NAME:$TAG\u0026#34; exit -1 fi echo $MANIFESTS echo echo curl -sS -XDELETE $URI/v2/$NAME/manifests/$MANIFESTS echo ","permalink":"https://cdecl.github.io/devops/docker-private-registry/","summary":"\u003cp\u003eDocker Private Registry 구성\u003c/p\u003e\n\u003ch2 id=\"registry-실행\"\u003eRegistry 실행\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003edocker-compose.yml\u003c/li\u003e\n\u003c/ul\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-yaml\" data-lang=\"yaml\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003eversion\u003c/span\u003e: \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;3\u0026#39;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003eservices\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#f92672\"\u003eregistry\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003eimage\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003eregistry\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003econtainer_name\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003eregistry\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003erestart\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003ealways\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003eports\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      - \u003cspan style=\"color:#ae81ff\"\u003e5000\u003c/span\u003e:\u003cspan style=\"color:#ae81ff\"\u003e5000\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003eenvironment\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      \u003cspan style=\"color:#f92672\"\u003eREGISTRY_HTTP_ADDR\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003e0.0.0.0\u003c/span\u003e:\u003cspan style=\"color:#ae81ff\"\u003e5000\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003evolumes\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      - \u003cspan style=\"color:#ae81ff\"\u003eregistry:/var/lib/registry\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      - \u003cspan style=\"color:#ae81ff\"\u003e./config.yml:/etc/docker/registry/config.yml\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003evolumes\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#f92672\"\u003eregistry\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-sh\" data-lang=\"sh\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# 실행\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ docker-compose up -d\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ curl -s http://localhost:5000/v2/_catalog\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003e{\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;repositories\u0026#34;\u003c/span\u003e:\u003cspan style=\"color:#f92672\"\u003e[]}\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cul\u003e\n\u003cli\u003eSSL 적용\u003c/li\u003e\n\u003c/ul\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-yaml\" data-lang=\"yaml\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003eversion\u003c/span\u003e: \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;3\u0026#39;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003eservices\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#f92672\"\u003eregistry\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003eimage\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003eregistry\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003econtainer_name\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003eprivate_registry\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003erestart\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003ealways\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003eports\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      - \u003cspan style=\"color:#ae81ff\"\u003e5000\u003c/span\u003e:\u003cspan style=\"color:#ae81ff\"\u003e5000\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003eenvironment\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      \u003cspan style=\"color:#f92672\"\u003eREGISTRY_HTTP_ADDR\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003e0.0.0.0\u003c/span\u003e:\u003cspan style=\"color:#ae81ff\"\u003e5000\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      \u003cspan style=\"color:#f92672\"\u003eREGISTRY_HTTP_TLS_CERTIFICATE\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003e/certs/domain-pem.pem\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      \u003cspan style=\"color:#f92672\"\u003eREGISTRY_HTTP_TLS_KEY\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003e/certs/domain-pem.key\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003evolumes\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      - \u003cspan style=\"color:#ae81ff\"\u003eregistry:/var/lib/registry\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      - \u003cspan style=\"color:#ae81ff\"\u003e./config.yml:/etc/docker/registry/config.yml\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      - \u003cspan style=\"color:#ae81ff\"\u003e./certs:/certs\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003evolumes\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#f92672\"\u003eregistry\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch3 id=\"image-push\"\u003eImage Push\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e테스트용 이미지 태깅\u003c/li\u003e\n\u003c/ul\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-sh\" data-lang=\"sh\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# get alpine images\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ docker pull alpine\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ docker pull alpine:3.13\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# tagging\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ docker tag alpine localhost:5000/cdecl/alpine:latest\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ docker tag alpine:3.13 localhost:5000/cdecl/alpine:3.13\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ docker images\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eREPOSITORY                    TAG       IMAGE ID       CREATED        SIZE\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ealpine                        latest    ae607a46d002   \u003cspan style=\"color:#ae81ff\"\u003e2\u003c/span\u003e weeks ago    5.33MB\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003elocalhost:5000/cdecl/alpine   latest    ae607a46d002   \u003cspan style=\"color:#ae81ff\"\u003e2\u003c/span\u003e weeks ago    5.33MB\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ealpine                        3.13      81efc9693413   \u003cspan style=\"color:#ae81ff\"\u003e2\u003c/span\u003e months ago   5.35MB\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003elocalhost:5000/cdecl/alpine   3.13      81efc9693413   \u003cspan style=\"color:#ae81ff\"\u003e2\u003c/span\u003e months ago   5.35MB\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cul\u003e\n\u003cli\u003eImage Push\u003c/li\u003e\n\u003c/ul\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-sh\" data-lang=\"sh\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# image push \u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ docker push localhost:5000/cdecl/alpine:3.13\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eThe push refers to repository \u003cspan style=\"color:#f92672\"\u003e[\u003c/span\u003elocalhost:5000/cdecl/alpine\u003cspan style=\"color:#f92672\"\u003e]\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ec55d5dbdab40: Layer already exists\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e3.13: digest: sha256:55fc95a51d97f7b76b124f3b581a58ebf5555d12574f16087de3971a12724dd4 size: \u003cspan style=\"color:#ae81ff\"\u003e528\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ docker push localhost:5000/cdecl/alpine:latest\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eThe push refers to repository \u003cspan style=\"color:#f92672\"\u003e[\u003c/span\u003elocalhost:5000/cdecl/alpine\u003cspan style=\"color:#f92672\"\u003e]\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e5bfa694cc00a: Layer already exists\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003elatest: digest: sha256:bd9137c3bb45dbc40cde0f0e19a8b9064c2bc485466221f5e95eb72b0d0cf82e size: \u003cspan style=\"color:#ae81ff\"\u003e528\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# Catalog list \u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ curl -s http://localhost:5000/v2/_catalog\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003e{\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;repositories\u0026#34;\u003c/span\u003e:\u003cspan style=\"color:#f92672\"\u003e[\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;cdecl/alpine\u0026#34;\u003c/span\u003e\u003cspan style=\"color:#f92672\"\u003e]}\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# Tag 정보 \u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ curl -s http://localhost:5000/v2/cdecl/alpine/tags/list\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003e{\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;name\u0026#34;\u003c/span\u003e:\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;cdecl/alpine\u0026#34;\u003c/span\u003e,\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;tags\u0026#34;\u003c/span\u003e:\u003cspan style=\"color:#f92672\"\u003e[\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;latest\u0026#34;\u003c/span\u003e,\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;3.13\u0026#34;\u003c/span\u003e\u003cspan style=\"color:#f92672\"\u003e]}\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch3 id=\"image-pull\"\u003eImage Pull\u003c/h3\u003e\n\u003cpre tabindex=\"0\"\u003e\u003ccode\u003e$ docker pull localhost:5000/cdecl/alpine\nUsing default tag: latest\nlatest: Pulling from cdecl/alpine\nDigest: sha256:bd9137c3bb45dbc40cde0f0e19a8b9064c2bc485466221f5e95eb72b0d0cf82e\nStatus: Downloaded newer image for localhost:5000/cdecl/alpine:latest\nlocalhost:5000/cdecl/alpine:latest\n\u003c/code\u003e\u003c/pre\u003e\u003ch3 id=\"image-delete\"\u003eImage Delete\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003eTag 확인 -\u0026gt; Manifests 확인 -\u0026gt;  Manifests 이미지 삭제\u003c/li\u003e\n\u003c/ul\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-sh\" data-lang=\"sh\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# Tag 정보 확인 \u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ curl -s http://localhost:5000/v2/cdecl/alpine/tags/list\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003e{\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;name\u0026#34;\u003c/span\u003e:\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;cdecl/alpine\u0026#34;\u003c/span\u003e,\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;tags\u0026#34;\u003c/span\u003e:\u003cspan style=\"color:#f92672\"\u003e[\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;latest\u0026#34;\u003c/span\u003e,\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;3.13\u0026#34;\u003c/span\u003e\u003cspan style=\"color:#f92672\"\u003e]}\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# Tag의 Manifest 정보확인 - headers 확인 \u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# \u0026lt;registry-url\u0026gt;/v2/\u0026lt;image-path-name\u0026gt;/manifests/\u0026lt;tag\u0026gt;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ curl -s -I -H \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;Accept: application/vnd.docker.distribution.manifest.v2+json\u0026#34;\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e\\\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    http://localhost:5000/v2/cdecl/alpine/manifests/latest\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eHTTP/1.1 \u003cspan style=\"color:#ae81ff\"\u003e200\u003c/span\u003e OK\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eContent-Length: \u003cspan style=\"color:#ae81ff\"\u003e528\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eContent-Type: application/vnd.docker.distribution.manifest.v2+json\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eDocker-Content-Digest: sha256:bd9137c3bb45dbc40cde0f0e19a8b9064c2bc485466221f5e95eb72b0d0cf82e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eDocker-Distribution-Api-Version: registry/2.0\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eEtag: \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;sha256:bd9137c3bb45dbc40cde0f0e19a8b9064c2bc485466221f5e95eb72b0d0cf82e\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# Manifest 정보로 이미지 삭제 \u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# Docker-Content-Digest: \u0026lt;sha256:로 시작하는 해쉬 문자열\u0026gt; \u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ curl -s -XDELETE http://localhost:5000/v2/cdecl/alpine/manifests/sha256:bd9137c3bb45dbc40cde0f0e19a8b9064c2bc485466221f5e95eb72b0d0cf82e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# 확인\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ curl -s http://localhost:5000/v2/cdecl/alpine/tags/list\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003e{\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;name\u0026#34;\u003c/span\u003e:\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;cdecl/alpine\u0026#34;\u003c/span\u003e,\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;tags\u0026#34;\u003c/span\u003e:\u003cspan style=\"color:#f92672\"\u003e[\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;3.13\u0026#34;\u003c/span\u003e\u003cspan style=\"color:#f92672\"\u003e]}\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch3 id=\"delete-marked-manifests\"\u003eDelete marked manifests\u003c/h3\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-sh\" data-lang=\"sh\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ curl -sS http://localhost:5000/v2/cdecl/alpine/tags/list\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003e{\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;name\u0026#34;\u003c/span\u003e:\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;cdecl/alpine\u0026#34;\u003c/span\u003e,\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;tags\u0026#34;\u003c/span\u003e:null\u003cspan style=\"color:#f92672\"\u003e}\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ docker exec -it registry bin/registry garbage-collect /etc/docker/registry/config.yml\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ecdecl/alpine\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#ae81ff\"\u003e0\u003c/span\u003e blobs marked, \u003cspan style=\"color:#ae81ff\"\u003e3\u003c/span\u003e blobs and \u003cspan style=\"color:#ae81ff\"\u003e0\u003c/span\u003e manifests eligible \u003cspan style=\"color:#66d9ef\"\u003efor\u003c/span\u003e deletion\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eblob eligible \u003cspan style=\"color:#66d9ef\"\u003efor\u003c/span\u003e deletion: sha256:81efc9693413c6292235ea2c29ea07c149701140b98df6c1998bb91d41acf802\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eINFO\u003cspan style=\"color:#f92672\"\u003e[\u003c/span\u003e0000\u003cspan style=\"color:#f92672\"\u003e]\u003c/span\u003e Deleting blob: /docker/registry/v2/blobs/sha256/81/81efc9693413c6292235ea2c29ea07c149701140b98df6c1998bb91d41acf802  go.version\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003ego1.11.2 instance.id\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003ed8bbbd10-232a-457a-9ceb-312b7317da5f service\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003eregistry\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eblob eligible \u003cspan style=\"color:#66d9ef\"\u003efor\u003c/span\u003e deletion: sha256:55fc95a51d97f7b76b124f3b581a58ebf5555d12574f16087de3971a12724dd4\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eINFO\u003cspan style=\"color:#f92672\"\u003e[\u003c/span\u003e0000\u003cspan style=\"color:#f92672\"\u003e]\u003c/span\u003e Deleting blob: /docker/registry/v2/blobs/sha256/55/55fc95a51d97f7b76b124f3b581a58ebf5555d12574f16087de3971a12724dd4  go.version\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003ego1.11.2 instance.id\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003ed8bbbd10-232a-457a-9ceb-312b7317da5f service\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003eregistry\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eblob eligible \u003cspan style=\"color:#66d9ef\"\u003efor\u003c/span\u003e deletion: sha256:595b0fe564bb9444ebfe78288079a01ee6d7f666544028d5e96ba610f909ee43\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eINFO\u003cspan style=\"color:#f92672\"\u003e[\u003c/span\u003e0000\u003cspan style=\"color:#f92672\"\u003e]\u003c/span\u003e Deleting blob: /docker/registry/v2/blobs/sha256/59/595b0fe564bb9444ebfe78288079a01ee6d7f666544028d5e96ba610f909ee43  go.version\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003ego1.11.2 instance.id\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003ed8bbbd10-232a-457a-9ceb-312b7317da5f service\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003eregistry\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cul\u003e\n\u003cli\u003e위 작업으로는 물리적인 데이터가 삭제 안됨\u003c/li\u003e\n\u003c/ul\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-sh\" data-lang=\"sh\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# 물리적인 파일 삭제 \u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ docker exec -it registry rm -rf /var/lib/registry/docker/registry/v2/repositories/cdecl\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003chr\u003e\n\u003ch3 id=\"script\"\u003eScript\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003eregistry-image-delete.sh\u003c/li\u003e\n\u003c/ul\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-sh\" data-lang=\"sh\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e#!/bin/bash\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eURI\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u003c/span\u003e$1\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eNAME\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u003c/span\u003e$2\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eTAG\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u003c/span\u003e$3\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003eif\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e[[\u003c/span\u003e -z \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u003c/span\u003e$URI\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e]]\u003c/span\u003e; \u003cspan style=\"color:#66d9ef\"\u003ethen\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        echo \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;Usage: \u003c/span\u003e$0\u003cspan style=\"color:#e6db74\"\u003e \u0026lt;URI\u0026gt; \u0026lt;NAME\u0026gt; [\u0026lt;TAG\u0026gt;]\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        exit -1\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003efi\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003eif\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e[[\u003c/span\u003e -z \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u003c/span\u003e$NAME\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e]]\u003c/span\u003e; \u003cspan style=\"color:#66d9ef\"\u003ethen\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        echo \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;Usage: \u003c/span\u003e$0\u003cspan style=\"color:#e6db74\"\u003e \u003c/span\u003e$URI\u003cspan style=\"color:#e6db74\"\u003e \u0026lt;NAME\u0026gt; [\u0026lt;TAG\u0026gt;]\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        echo\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        curl -sS $URI/v2/_catalog | jq -r \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;.repositories[]\u0026#39;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        echo\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        exit -1\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003efi\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003eif\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e[[\u003c/span\u003e -z \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u003c/span\u003e$TAG\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e]]\u003c/span\u003e; \u003cspan style=\"color:#66d9ef\"\u003ethen\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        echo \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;Usage: \u003c/span\u003e$0\u003cspan style=\"color:#e6db74\"\u003e \u003c/span\u003e$URI\u003cspan style=\"color:#e6db74\"\u003e \u003c/span\u003e$NAME\u003cspan style=\"color:#e6db74\"\u003e [\u0026lt;TAG\u0026gt;]\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        echo\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        curl -sS $URI/v2/$NAME/tags/list | jq -r \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;.tags[]\u0026#39;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        echo\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        exit -1\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003efi\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eMANIFESTS\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#66d9ef\"\u003e$(\u003c/span\u003ecurl -sS -I -H \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;Accept: application/vnd.docker.distribution.manifest.v2+json\u0026#34;\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e\\\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        $URI/v2/$NAME/manifests/$TAG | grep -i Docker-Content-Digest | awk \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;{print $2}\u0026#39;\u003c/span\u003e\u003cspan style=\"color:#66d9ef\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003eif\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e[[\u003c/span\u003e -z \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u003c/span\u003e$MANIFESTS\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e]]\u003c/span\u003e; \u003cspan style=\"color:#66d9ef\"\u003ethen\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        echo \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;No manifest found for \u003c/span\u003e$NAME\u003cspan style=\"color:#e6db74\"\u003e:\u003c/span\u003e$TAG\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        exit -1\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003efi\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eecho $MANIFESTS\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eecho\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eecho curl -sS -XDELETE $URI/v2/$NAME/manifests/$MANIFESTS\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eecho\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e","title":"Docker Private Registry"},{"content":"oh-my-zsh 이 느린 경우 해결 방법 (특히 WSL)\noh-my-zsh so slow Theme 가 느린 경우는 Pass git 관리 디렉토리 진입시 현저히 느려지는 경우 $ git config --global oh-my-zsh.hide-status 1 $ git config --global oh-my-zsh.hide-dirty 1 $ git config --global -l oh-my-zsh.hide-status=1 oh-my-zsh.hide-dirty=1 ","permalink":"https://cdecl.github.io/devops/wsl-ohmyzsh-soslow/","summary":"\u003cp\u003eoh-my-zsh 이 느린 경우 해결 방법 (특히 WSL)\u003c/p\u003e\n\u003ch2 id=\"oh-my-zsh-so-slow\"\u003eoh-my-zsh so slow\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003eTheme 가 느린 경우는 Pass\u003c/li\u003e\n\u003cli\u003egit 관리 디렉토리 진입시 현저히 느려지는 경우\u003c/li\u003e\n\u003c/ul\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-sh\" data-lang=\"sh\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ git config --global oh-my-zsh.hide-status \u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ git config --global oh-my-zsh.hide-dirty \u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ git config --global -l\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eoh-my-zsh.hide-status\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eoh-my-zsh.hide-dirty\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e","title":"oh-my-zsh so slow (WSL)"},{"content":"Mac 설치 어플리케이션\nbrew 패키지 관리자 https://brew.sh/index_ko{:target=\u0026quot;_blank\u0026quot;} # 설치 $ brew search iterm2 $ brew install iterm2 karabiner-elements brew install brew search karabiner https://karabiner-elements.pqrs.org/{:target=\u0026quot;_blank\u0026quot;} 오른쪽 command 버튼 한영키로 매핑 iTerm2 터미널 brew install iterm2 Zsh, Oh My Zsh https://github.com/ohmyzsh/ohmyzsh{:target=\u0026quot;_blank\u0026quot;} # zsh install $ brew install zsh # oh my zsh VSCode https://code.visualstudio.com/{:target=\u0026quot;_blank\u0026quot;} Docker https://www.docker.com/get-started{:target=\u0026quot;_blank\u0026quot;} Dbeaver DB Tool brew install dbeaver-community IINA 동영상 플레이어 brew install iina https://iina.io/{:target=\u0026quot;_blank\u0026quot;} Mounty NTFS Mount brew search mounty https://mounty.app/{:target=\u0026quot;_blank\u0026quot;} Keka 압축프로그램 brew install keka https://www.keka.io/ko/{:target=\u0026quot;_blank\u0026quot;} ","permalink":"https://cdecl.github.io/devops/mac-app/","summary":"\u003cp\u003eMac 설치 어플리케이션\u003c/p\u003e\n\u003ch3 id=\"brew-패키지-관리자\"\u003e\u003ccode\u003ebrew\u003c/code\u003e 패키지 관리자\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://brew.sh/index_ko\"\u003ehttps://brew.sh/index_ko\u003c/a\u003e{:target=\u0026quot;_blank\u0026quot;}\u003c/li\u003e\n\u003c/ul\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-sh\" data-lang=\"sh\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# 설치 \u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ brew search iterm2\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ brew install iterm2\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch3 id=\"karabiner-elements\"\u003e\u003ccode\u003ekarabiner-elements\u003c/code\u003e\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003ebrew install brew search karabiner\u003c/code\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://karabiner-elements.pqrs.org/\"\u003ehttps://karabiner-elements.pqrs.org/\u003c/a\u003e{:target=\u0026quot;_blank\u0026quot;}\u003c/li\u003e\n\u003cli\u003e오른쪽 command 버튼 한영키로 매핑\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"iterm2-터미널\"\u003e\u003ccode\u003eiTerm2\u003c/code\u003e 터미널\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003ebrew install iterm2\u003c/code\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"zsh-oh-my-zsh\"\u003eZsh, Oh My Zsh\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://github.com/ohmyzsh/ohmyzsh\"\u003ehttps://github.com/ohmyzsh/ohmyzsh\u003c/a\u003e{:target=\u0026quot;_blank\u0026quot;}\u003c/li\u003e\n\u003c/ul\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-sh\" data-lang=\"sh\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# zsh install \u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ brew install zsh\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# oh my zsh\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch3 id=\"vscode\"\u003e\u003ccode\u003eVSCode\u003c/code\u003e\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://code.visualstudio.com/\"\u003ehttps://code.visualstudio.com/\u003c/a\u003e{:target=\u0026quot;_blank\u0026quot;}\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"docker\"\u003e\u003ccode\u003eDocker\u003c/code\u003e\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://www.docker.com/get-started\"\u003ehttps://www.docker.com/get-started\u003c/a\u003e{:target=\u0026quot;_blank\u0026quot;}\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"dbeaver-db-tool\"\u003eDbeaver DB Tool\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003ebrew install dbeaver-community\u003c/code\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003chr\u003e\n\u003ch3 id=\"iina-동영상-플레이어\"\u003eIINA 동영상 플레이어\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003ebrew install iina\u003c/code\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://iina.io/\"\u003ehttps://iina.io/\u003c/a\u003e{:target=\u0026quot;_blank\u0026quot;}\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"mounty-ntfs-mount\"\u003eMounty NTFS Mount\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003ebrew search mounty\u003c/code\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://mounty.app/\"\u003ehttps://mounty.app/\u003c/a\u003e{:target=\u0026quot;_blank\u0026quot;}\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"keka-압축프로그램\"\u003e\u003ccode\u003eKeka\u003c/code\u003e 압축프로그램\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003ebrew install keka\u003c/code\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://www.keka.io/ko/\"\u003ehttps://www.keka.io/ko/\u003c/a\u003e{:target=\u0026quot;_blank\u0026quot;}\u003c/li\u003e\n\u003c/ul\u003e","title":"Mac Application"},{"content":"vim 최소 설정\n.vimrc set ts=4 set autoindent set cindent set hlsearch set showmatch if has(\u0026#34;syntax\u0026#34;) syntax on endif ","permalink":"https://cdecl.github.io/devops/vimrc/","summary":"\u003cp\u003evim 최소 설정\u003c/p\u003e\n\u003ch3 id=\"vimrc\"\u003e.vimrc\u003c/h3\u003e\n\u003cpre tabindex=\"0\"\u003e\u003ccode\u003eset ts=4\nset autoindent\nset cindent\nset hlsearch\nset showmatch\n\nif has(\u0026#34;syntax\u0026#34;)\n    syntax on\nendif\n\u003c/code\u003e\u003c/pre\u003e","title":"Vim 최소 설정"},{"content":"Introduction https://github.com/yhirose/cpp-httplib{:target=\u0026quot;_blank\u0026quot;} A C++11 single-file header-only cross platform HTTP/HTTPS library. This is a multi-threaded \u0026lsquo;blocking\u0026rsquo; HTTP library header-only 라이브러리로 Server와 Client Http 지원 SSL을 위한 OpenSSL 필요 cpprestsdk비해 가볍고, 쉽게 사용 가능 Httplib package install (w/ vcpkg) https://github.com/microsoft/vcpkg{:target=\u0026quot;_blank\u0026quot;} vcpkg 통해서 패키지 설치 header-only로 바로 사용가능하나 OpenSSL 필요시 패키지 설치가 용이 # --triplet=x64-windows-static $ vcpkg.exe install cpp-httplib openssl --triplet=x64-windows-static ... The package cpp-httplib:x64-windows-static is header only and can be used from CMake via: find_path(CPP_HTTPLIB_INCLUDE_DIRS \u0026#34;httplib.h\u0026#34;) target_include_directories(main PRIVATE ${CPP_HTTPLIB_INCLUDE_DIRS}) The package openssl is compatible with built-in CMake targets: find_package(OpenSSL REQUIRED) target_link_libraries(main PRIVATE OpenSSL::SSL OpenSSL::Crypto) Json test https://github.com/nlohmann/json{:target=\u0026quot;_blank\u0026quot;} $ vcpkg.exe install nlohmann-json --triplet=x64-windows-static The package nlohmann-json:x64-windows-static provides CMake targets: find_package(nlohmann_json CONFIG REQUIRED) target_link_libraries(main PRIVATE nlohmann_json nlohmann_json::nlohmann_json) Sample code HTTPS 호출을 위해 CPPHTTPLIB_OPENSSL_SUPPORT 매크로가 정의 되어 있어야 함 정의하지 않고 HTTPS 호출시 : 'https' scheme is not supported. using namespace std; std namespace 노출시 byte 타입 정의 모호함으로 인한 에러 발생 표준 라이브러리 보다 먼저 선언되던가 using namespace std;를 피해야 함 \u0026lsquo;byte\u0026rsquo;: 모호한 기호입니다. #define CPPHTTPLIB_OPENSSL_SUPPORT #include \u0026lt;httplib.h\u0026gt; #include \u0026lt;iostream\u0026gt; using namespace std; #include \u0026lt;nlohmann/json.hpp\u0026gt; using json = nlohmann::json; void HttpRequest() { httplib::Client cli(\u0026#34;https://httpbin.org\u0026#34;); { auto resp = cli.Get(\u0026#34;/get\u0026#34;); cout \u0026lt;\u0026lt; \u0026#34;status: \u0026#34; \u0026lt;\u0026lt; resp-\u0026gt;status \u0026lt;\u0026lt; endl; cout \u0026lt;\u0026lt; resp-\u0026gt;body \u0026lt;\u0026lt; endl; } { auto resp = cli.Post(\u0026#34;/post\u0026#34;); cout \u0026lt;\u0026lt; \u0026#34;status: \u0026#34; \u0026lt;\u0026lt; resp-\u0026gt;status \u0026lt;\u0026lt; endl; cout \u0026lt;\u0026lt; resp-\u0026gt;body \u0026lt;\u0026lt; endl; auto js = json::parse(resp-\u0026gt;body); cout \u0026lt;\u0026lt; \u0026#34;User-Agent: \u0026#34; \u0026lt;\u0026lt; js[\u0026#34;headers\u0026#34;][\u0026#34;User-Agent\u0026#34;] \u0026lt;\u0026lt; endl; } } int main() { try { HttpRequest(); } catch (exception \u0026amp;e) { cerr \u0026lt;\u0026lt; e.what() \u0026lt;\u0026lt; endl; } catch (...) { cerr \u0026lt;\u0026lt; \u0026#34;catch ...\u0026#34; \u0026lt;\u0026lt; endl; } return 0; } CMakeLists.txt cmake_minimum_required(VERSION 3.11) project(main) set(CMAKE_CXX_STANDARD 17) add_executable(main main.cpp) target_compile_options(main PRIVATE /MT) find_package(OpenSSL REQUIRED) target_link_libraries(main PRIVATE OpenSSL::SSL OpenSSL::Crypto) find_path(CPP_HTTPLIB_INCLUDE_DIRS \u0026#34;httplib.h\u0026#34;) target_include_directories(main PRIVATE ${CPP_HTTPLIB_INCLUDE_DIRS}) find_package(nlohmann_json CONFIG REQUIRED) target_link_libraries(main PRIVATE nlohmann_json nlohmann_json::nlohmann_json) $ mkdir build \u0026amp;\u0026amp; cd build # x64-windows-static $ cmake -G \u0026#34;Visual Studio 16 2019\u0026#34; -A x64 .. -DCMAKE_TOOLCHAIN_FILE=D:/Lib/vcpkg/scripts/buildsystems/vcpkg.cmake -DVCPKG_TARGET_TRIPLET=x64-windows-static Build \u0026amp; Run # build $ echo cmake --build . --config Release \u0026gt; make.bat $ make.bat # run $ Release\\main.exe status: 200 { \u0026#34;args\u0026#34;: {}, \u0026#34;headers\u0026#34;: { \u0026#34;Accept\u0026#34;: \u0026#34;*/*\u0026#34;, \u0026#34;Cache-Control\u0026#34;: \u0026#34;max-stale=0\u0026#34;, \u0026#34;Host\u0026#34;: \u0026#34;httpbin.org\u0026#34;, \u0026#34;User-Agent\u0026#34;: \u0026#34;cpp-httplib/0.9\u0026#34;, \u0026#34;X-Amzn-Trace-Id\u0026#34;: \u0026#34;Root=1-611dba9f-0bdb46bb04c05b410da75cf4\u0026#34;, \u0026#34;X-Bluecoat-Via\u0026#34;: \u0026#34;ce2cfae06b3f12b4\u0026#34; }, \u0026#34;origin\u0026#34;: \u0026#34;xx.xx.xx.xx\u0026#34;, \u0026#34;url\u0026#34;: \u0026#34;https://httpbin.org/get\u0026#34; } status: 200 { \u0026#34;args\u0026#34;: {}, \u0026#34;data\u0026#34;: \u0026#34;\u0026#34;, \u0026#34;files\u0026#34;: {}, \u0026#34;form\u0026#34;: {}, \u0026#34;headers\u0026#34;: { \u0026#34;Accept\u0026#34;: \u0026#34;*/*\u0026#34;, \u0026#34;Content-Length\u0026#34;: \u0026#34;0\u0026#34;, \u0026#34;Host\u0026#34;: \u0026#34;httpbin.org\u0026#34;, \u0026#34;User-Agent\u0026#34;: \u0026#34;cpp-httplib/0.9\u0026#34;, \u0026#34;X-Amzn-Trace-Id\u0026#34;: \u0026#34;Root=1-611dba9f-091d99a41e5b3c023550162f\u0026#34;, \u0026#34;X-Bluecoat-Via\u0026#34;: \u0026#34;ce2cfae06b3f12b4\u0026#34; }, \u0026#34;json\u0026#34;: null, \u0026#34;origin\u0026#34;: \u0026#34;xx.xx.xx.xx\u0026#34;, \u0026#34;url\u0026#34;: \u0026#34;https://httpbin.org/post\u0026#34; } User-Agent: \u0026#34;cpp-httplib/0.9\u0026#34; ","permalink":"https://cdecl.github.io/dev/cpp-httplib-sample/","summary":"\u003ch2 id=\"introduction\"\u003eIntroduction\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://github.com/yhirose/cpp-httplib\"\u003ehttps://github.com/yhirose/cpp-httplib\u003c/a\u003e{:target=\u0026quot;_blank\u0026quot;}\u003c/li\u003e\n\u003cli\u003eA C++11 single-file header-only cross platform HTTP/HTTPS library.\n\u003cul\u003e\n\u003cli\u003eThis is a multi-threaded \u0026lsquo;blocking\u0026rsquo; HTTP library\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003eheader-only 라이브러리로 Server와 Client Http 지원\u003c/li\u003e\n\u003cli\u003eSSL을 위한 OpenSSL 필요\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003ecpprestsdk\u003c/code\u003e비해 가볍고, 쉽게 사용 가능\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"httplib-package-install-w-vcpkg\"\u003eHttplib package install (w/ vcpkg)\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://github.com/microsoft/vcpkg\"\u003ehttps://github.com/microsoft/vcpkg\u003c/a\u003e{:target=\u0026quot;_blank\u0026quot;}\u003c/li\u003e\n\u003cli\u003evcpkg 통해서 패키지 설치\u003c/li\u003e\n\u003cli\u003eheader-only로 바로 사용가능하나 OpenSSL 필요시 패키지 설치가 용이\u003c/li\u003e\n\u003c/ul\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-sh\" data-lang=\"sh\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# --triplet=x64-windows-static\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ vcpkg.exe install cpp-httplib openssl --triplet\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003ex64-windows-static\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e...\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eThe package cpp-httplib:x64-windows-static is header only and can be used from CMake via:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    find_path\u003cspan style=\"color:#f92672\"\u003e(\u003c/span\u003eCPP_HTTPLIB_INCLUDE_DIRS \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;httplib.h\u0026#34;\u003c/span\u003e\u003cspan style=\"color:#f92672\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    target_include_directories\u003cspan style=\"color:#f92672\"\u003e(\u003c/span\u003emain PRIVATE \u003cspan style=\"color:#e6db74\"\u003e${\u003c/span\u003eCPP_HTTPLIB_INCLUDE_DIRS\u003cspan style=\"color:#e6db74\"\u003e}\u003c/span\u003e\u003cspan style=\"color:#f92672\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eThe package openssl is compatible with built-in CMake targets:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    find_package\u003cspan style=\"color:#f92672\"\u003e(\u003c/span\u003eOpenSSL REQUIRED\u003cspan style=\"color:#f92672\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    target_link_libraries\u003cspan style=\"color:#f92672\"\u003e(\u003c/span\u003emain PRIVATE OpenSSL::SSL OpenSSL::Crypto\u003cspan style=\"color:#f92672\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch4 id=\"json-test\"\u003eJson test\u003c/h4\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://github.com/nlohmann/json\"\u003ehttps://github.com/nlohmann/json\u003c/a\u003e{:target=\u0026quot;_blank\u0026quot;}\u003c/li\u003e\n\u003c/ul\u003e\n\u003cpre tabindex=\"0\"\u003e\u003ccode\u003e$ vcpkg.exe install nlohmann-json --triplet=x64-windows-static\nThe package nlohmann-json:x64-windows-static provides CMake targets:\n\n    find_package(nlohmann_json CONFIG REQUIRED)\n    target_link_libraries(main PRIVATE nlohmann_json nlohmann_json::nlohmann_json)\n\u003c/code\u003e\u003c/pre\u003e\u003ch3 id=\"sample-code\"\u003eSample code\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003eHTTPS 호출을 위해 \u003ccode\u003eCPPHTTPLIB_OPENSSL_SUPPORT\u003c/code\u003e 매크로가 정의 되어 있어야 함\n\u003cul\u003e\n\u003cli\u003e정의하지 않고 HTTPS 호출시 : \u003ccode\u003e'https' scheme is not supported.\u003c/code\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eusing namespace std;\u003c/code\u003e std namespace 노출시 byte 타입 정의 모호함으로 인한 에러 발생\n\u003cul\u003e\n\u003cli\u003e표준 라이브러리 보다 먼저 선언되던가 \u003ccode\u003eusing namespace std;\u003c/code\u003e를 피해야 함\u003c/li\u003e\n\u003cli\u003e\u0026lsquo;byte\u0026rsquo;: 모호한 기호입니다.\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-cpp\" data-lang=\"cpp\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e#define CPPHTTPLIB_OPENSSL_SUPPORT\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e#include\u003c/span\u003e \u003cspan style=\"color:#75715e\"\u003e\u0026lt;httplib.h\u0026gt;\u003c/span\u003e\u003cspan style=\"color:#75715e\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e#include\u003c/span\u003e \u003cspan style=\"color:#75715e\"\u003e\u0026lt;iostream\u0026gt;\u003c/span\u003e\u003cspan style=\"color:#75715e\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003eusing\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003enamespace\u003c/span\u003e std;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e#include\u003c/span\u003e \u003cspan style=\"color:#75715e\"\u003e\u0026lt;nlohmann/json.hpp\u0026gt;\u003c/span\u003e\u003cspan style=\"color:#75715e\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003eusing\u003c/span\u003e json \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e nlohmann\u003cspan style=\"color:#f92672\"\u003e::\u003c/span\u003ejson;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003evoid\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eHttpRequest\u003c/span\u003e()\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e{\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\thttplib\u003cspan style=\"color:#f92672\"\u003e::\u003c/span\u003eClient cli(\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;https://httpbin.org\u0026#34;\u003c/span\u003e);\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t{\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\t\u003cspan style=\"color:#66d9ef\"\u003eauto\u003c/span\u003e resp \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e cli.Get(\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;/get\u0026#34;\u003c/span\u003e);\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\tcout \u003cspan style=\"color:#f92672\"\u003e\u0026lt;\u0026lt;\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;status: \u0026#34;\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e\u0026lt;\u0026lt;\u003c/span\u003e resp\u003cspan style=\"color:#f92672\"\u003e-\u0026gt;\u003c/span\u003estatus \u003cspan style=\"color:#f92672\"\u003e\u0026lt;\u0026lt;\u003c/span\u003e endl;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\tcout \u003cspan style=\"color:#f92672\"\u003e\u0026lt;\u0026lt;\u003c/span\u003e resp\u003cspan style=\"color:#f92672\"\u003e-\u0026gt;\u003c/span\u003ebody \u003cspan style=\"color:#f92672\"\u003e\u0026lt;\u0026lt;\u003c/span\u003e endl;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t}\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t{\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\t\u003cspan style=\"color:#66d9ef\"\u003eauto\u003c/span\u003e resp \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e cli.Post(\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;/post\u0026#34;\u003c/span\u003e);\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\tcout \u003cspan style=\"color:#f92672\"\u003e\u0026lt;\u0026lt;\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;status: \u0026#34;\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e\u0026lt;\u0026lt;\u003c/span\u003e resp\u003cspan style=\"color:#f92672\"\u003e-\u0026gt;\u003c/span\u003estatus \u003cspan style=\"color:#f92672\"\u003e\u0026lt;\u0026lt;\u003c/span\u003e endl;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\tcout \u003cspan style=\"color:#f92672\"\u003e\u0026lt;\u0026lt;\u003c/span\u003e resp\u003cspan style=\"color:#f92672\"\u003e-\u0026gt;\u003c/span\u003ebody \u003cspan style=\"color:#f92672\"\u003e\u0026lt;\u0026lt;\u003c/span\u003e endl;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\t\u003cspan style=\"color:#66d9ef\"\u003eauto\u003c/span\u003e js \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e json\u003cspan style=\"color:#f92672\"\u003e::\u003c/span\u003eparse(resp\u003cspan style=\"color:#f92672\"\u003e-\u0026gt;\u003c/span\u003ebody);\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\tcout \u003cspan style=\"color:#f92672\"\u003e\u0026lt;\u0026lt;\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;User-Agent: \u0026#34;\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e\u0026lt;\u0026lt;\u003c/span\u003e js[\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;headers\u0026#34;\u003c/span\u003e][\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;User-Agent\u0026#34;\u003c/span\u003e] \u003cspan style=\"color:#f92672\"\u003e\u0026lt;\u0026lt;\u003c/span\u003e endl;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t}\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e}\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e \n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003eint\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003emain\u003c/span\u003e()\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e{\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#66d9ef\"\u003etry\u003c/span\u003e {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\tHttpRequest();\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t}\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#66d9ef\"\u003ecatch\u003c/span\u003e (exception \u003cspan style=\"color:#f92672\"\u003e\u0026amp;\u003c/span\u003ee) {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\tcerr \u003cspan style=\"color:#f92672\"\u003e\u0026lt;\u0026lt;\u003c/span\u003e e.what() \u003cspan style=\"color:#f92672\"\u003e\u0026lt;\u0026lt;\u003c/span\u003e endl;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t}\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#66d9ef\"\u003ecatch\u003c/span\u003e (...) {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\tcerr \u003cspan style=\"color:#f92672\"\u003e\u0026lt;\u0026lt;\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;catch ...\u0026#34;\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e\u0026lt;\u0026lt;\u003c/span\u003e endl;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t}\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e \n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#66d9ef\"\u003ereturn\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e0\u003c/span\u003e; \n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e}\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch3 id=\"cmakeliststxt\"\u003eCMakeLists.txt\u003c/h3\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-cmake\" data-lang=\"cmake\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ecmake_minimum_required(\u003cspan style=\"color:#e6db74\"\u003eVERSION\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e3.11\u003c/span\u003e)\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eproject(\u003cspan style=\"color:#e6db74\"\u003emain\u003c/span\u003e)\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eset(\u003cspan style=\"color:#e6db74\"\u003eCMAKE_CXX_STANDARD\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e17\u003c/span\u003e)\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eadd_executable(\u003cspan style=\"color:#e6db74\"\u003emain\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003emain.cpp\u003c/span\u003e)\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003etarget_compile_options(\u003cspan style=\"color:#e6db74\"\u003emain\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003ePRIVATE\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e/MT\u003c/span\u003e)\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003efind_package(\u003cspan style=\"color:#e6db74\"\u003eOpenSSL\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003eREQUIRED\u003c/span\u003e)\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003etarget_link_libraries(\u003cspan style=\"color:#e6db74\"\u003emain\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003ePRIVATE\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003eOpenSSL::SSL\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003eOpenSSL::Crypto\u003c/span\u003e)\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003efind_path(\u003cspan style=\"color:#e6db74\"\u003eCPP_HTTPLIB_INCLUDE_DIRS\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;httplib.h\u0026#34;\u003c/span\u003e)\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003etarget_include_directories(\u003cspan style=\"color:#e6db74\"\u003emain\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003ePRIVATE\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e${\u003c/span\u003eCPP_HTTPLIB_INCLUDE_DIRS\u003cspan style=\"color:#f92672\"\u003e}\u003c/span\u003e)\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003efind_package(\u003cspan style=\"color:#e6db74\"\u003enlohmann_json\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003eCONFIG\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003eREQUIRED\u003c/span\u003e)\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003etarget_link_libraries(\u003cspan style=\"color:#e6db74\"\u003emain\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003ePRIVATE\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003enlohmann_json\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003enlohmann_json::nlohmann_json\u003c/span\u003e)\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-sh\" data-lang=\"sh\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ mkdir build \u003cspan style=\"color:#f92672\"\u003e\u0026amp;\u0026amp;\u003c/span\u003e cd build\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# x64-windows-static\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ cmake -G \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;Visual Studio 16 2019\u0026#34;\u003c/span\u003e -A x64 .. -DCMAKE_TOOLCHAIN_FILE\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003eD:/Lib/vcpkg/scripts/buildsystems/vcpkg.cmake -DVCPKG_TARGET_TRIPLET\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003ex64-windows-static\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch3 id=\"build--run\"\u003eBuild \u0026amp; Run\u003c/h3\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-sh\" data-lang=\"sh\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# build \u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ echo cmake --build . --config Release \u0026gt; make.bat\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ make.bat\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# run\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ Release\u003cspan style=\"color:#ae81ff\"\u003e\\m\u003c/span\u003eain.exe\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003estatus: \u003cspan style=\"color:#ae81ff\"\u003e200\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003e{\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;args\u0026#34;\u003c/span\u003e: \u003cspan style=\"color:#f92672\"\u003e{}\u003c/span\u003e,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;headers\u0026#34;\u003c/span\u003e: \u003cspan style=\"color:#f92672\"\u003e{\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;Accept\u0026#34;\u003c/span\u003e: \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;*/*\u0026#34;\u003c/span\u003e,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;Cache-Control\u0026#34;\u003c/span\u003e: \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;max-stale=0\u0026#34;\u003c/span\u003e,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;Host\u0026#34;\u003c/span\u003e: \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;httpbin.org\u0026#34;\u003c/span\u003e,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;User-Agent\u0026#34;\u003c/span\u003e: \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;cpp-httplib/0.9\u0026#34;\u003c/span\u003e,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;X-Amzn-Trace-Id\u0026#34;\u003c/span\u003e: \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;Root=1-611dba9f-0bdb46bb04c05b410da75cf4\u0026#34;\u003c/span\u003e,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;X-Bluecoat-Via\u0026#34;\u003c/span\u003e: \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;ce2cfae06b3f12b4\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#f92672\"\u003e}\u003c/span\u003e,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;origin\u0026#34;\u003c/span\u003e: \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;xx.xx.xx.xx\u0026#34;\u003c/span\u003e,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;url\u0026#34;\u003c/span\u003e: \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;https://httpbin.org/get\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003e}\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003estatus: \u003cspan style=\"color:#ae81ff\"\u003e200\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003e{\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;args\u0026#34;\u003c/span\u003e: \u003cspan style=\"color:#f92672\"\u003e{}\u003c/span\u003e,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;data\u0026#34;\u003c/span\u003e: \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u0026#34;\u003c/span\u003e,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;files\u0026#34;\u003c/span\u003e: \u003cspan style=\"color:#f92672\"\u003e{}\u003c/span\u003e,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;form\u0026#34;\u003c/span\u003e: \u003cspan style=\"color:#f92672\"\u003e{}\u003c/span\u003e,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;headers\u0026#34;\u003c/span\u003e: \u003cspan style=\"color:#f92672\"\u003e{\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;Accept\u0026#34;\u003c/span\u003e: \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;*/*\u0026#34;\u003c/span\u003e,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;Content-Length\u0026#34;\u003c/span\u003e: \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;0\u0026#34;\u003c/span\u003e,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;Host\u0026#34;\u003c/span\u003e: \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;httpbin.org\u0026#34;\u003c/span\u003e,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;User-Agent\u0026#34;\u003c/span\u003e: \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;cpp-httplib/0.9\u0026#34;\u003c/span\u003e,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;X-Amzn-Trace-Id\u0026#34;\u003c/span\u003e: \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;Root=1-611dba9f-091d99a41e5b3c023550162f\u0026#34;\u003c/span\u003e,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;X-Bluecoat-Via\u0026#34;\u003c/span\u003e: \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;ce2cfae06b3f12b4\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#f92672\"\u003e}\u003c/span\u003e,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;json\u0026#34;\u003c/span\u003e: null,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;origin\u0026#34;\u003c/span\u003e: \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;xx.xx.xx.xx\u0026#34;\u003c/span\u003e,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;url\u0026#34;\u003c/span\u003e: \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;https://httpbin.org/post\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003e}\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eUser-Agent: \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;cpp-httplib/0.9\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e","title":"Httplib (cpp-httplib) Sample"},{"content":"https://vcpkg.io/{:target=\u0026quot;_blank\u0026quot;}\nVcpkg helps you manage C and C++ libraries on Windows, Linux and MacOS. This tool and ecosystem are constantly evolving, and we always appreciate contributions!\nIntroduction https://github.com/microsoft/vcpkg{:target=\u0026quot;_blank\u0026quot;} MS에서 만든 C++ Library Package 관리 (Cross Platform) Vcpkg install Git 이 필요하고, bootstrap-vcpkg 실행으로 필요한 툴을 다운로드(빌드)하는 작업을 수행 vcpkg.exe 생성 $ git clone https://github.com/microsoft/vcpkg $ cd vcpkg # windows $ bootstrap-vcpkg.bat # linux $ ./bootstrap-vcpkg.sh Package search \u0026amp; install triplet : Target configuration set 설치시 triplet 을 지정하지 않으면 설치되어 있는 기본 C++ Toolset 으로 지정 Windows의 경우 x86-windows default 주요 Triplet list vcpkg help triplet $ vcpkg help triplet Available architecture triplets VCPKG built-in triplets: ... x64-windows-static x64-windows x86-windows ... VCPKG community triplets: ... x64-windows-static-md x86-windows-static-md x86-windows-static x64-mingw-dynamic x64-mingw-static x86-mingw-dynamic x86-mingw-static x64-linux ... Search vcpkg search # Package search $ vcpkg search fmt fmt 7.1.3#5 Formatting library for C++. ... The search result may be outdated. Run `git pull` to get the latest results. Install vcpkg install vcpkg search 에서 찾은 패키지를 triplet 을 지정하여 설치 설치가 완료되면 프로젝트 CMakeLists.txt 넣을 find_package 문 표시 # Package 별로 triplet 지정 $ vcpkg.exe install fmt:x64-windows-static nlohmann-json:x64-windows-static # triplet 공통 지정 $ vcpkg.exe install fmt nlohmann-json --triplet=x64-windows-static ... The package fmt provides CMake targets: find_package(fmt CONFIG REQUIRED) target_link_libraries(main PRIVATE fmt::fmt) # Or use the header-only version find_package(fmt CONFIG REQUIRED) target_link_libraries(main PRIVATE fmt::fmt-header-only) The package nlohmann-json:x64-windows-static provides CMake targets: find_package(nlohmann_json CONFIG REQUIRED) target_link_libraries(main PRIVATE nlohmann_json nlohmann_json::nlohmann_json) 설치된 리스트 vcpkg list # Package installed list $ vcpkg list benchmark:x64-mingw-static 1.5.5 A library to support the benchmarking of functio... benchmark:x64-windows-static 1.5.5 A library to support the benchmarking of functio... cpp-httplib:x64-mingw-static 0.9.1 A single file C++11 header-only HTTP/HTTPS serve... cpp-httplib:x64-windows-static 0.9.1 A single file C++11 header-only HTTP/HTTPS serve... fmt:x64-windows 7.1.3#5 Formatting library for C++. It can be used as a ... fmt:x64-windows-static 7.1.3#5 Formatting library for C++. It can be used as a ... nlohmann-json:x64-mingw-static 3.9.1 JSON for Modern C++ nlohmann-json:x64-windows-static 3.9.1 JSON for Modern C++ openssl:x64-mingw-static 1.1.1k#8 OpenSSL is an open source project that provides ... openssl:x64-windows-static 1.1.1k#8 OpenSSL is an open source project that provides ... vcpkg-cmake-config:x64-windows 2021-05-22#1 vcpkg-cmake:x64-windows 2021-07-30 zlib:x64-mingw-static 1.2.11#11 A compression library zlib:x64-windows-static 1.2.11#11 A compression library Integrate install vcpkg integrate install Windows Visual Studio에서 vcpkg 라이브러리를 별도 설정 없이 바로 사용 $ vcpkg integrate install Applied user-wide integration for this vcpkg root. All MSBuild C++ projects can now #include any installed libraries. Linking will be handled automatically. Installing new libraries will make them instantly available. CMake projects should use: \u0026#34;-DCMAKE_TOOLCHAIN_FILE=D:/Lib/vcpkg/scripts/buildsystems/vcpkg.cmake\u0026#34; vcpkg 명령어 # Vcpkg package management program version 2021-08-12-85ab112d5ee102bc6eac8cdbbfdd173a71374e04 $ vcpkg help Commands: vcpkg search [pat] Search for packages available to be built vcpkg install \u0026lt;pkg\u0026gt;... Install a package vcpkg remove \u0026lt;pkg\u0026gt;... Uninstall a package vcpkg remove --outdated Uninstall all out-of-date packages vcpkg list List installed packages vcpkg update Display list of packages for updating vcpkg upgrade Rebuild all outdated packages vcpkg x-history \u0026lt;pkg\u0026gt; (Experimental) Shows the history of CONTROL versions of a package vcpkg hash \u0026lt;file\u0026gt; [alg] Hash a file by specific algorithm, default SHA512 vcpkg help topics Display the list of help topics vcpkg help \u0026lt;topic\u0026gt; Display help for a specific topic vcpkg integrate install Make installed packages available user-wide. Requires admin privileges on first use vcpkg integrate remove Remove user-wide integration vcpkg integrate project Generate a referencing nuget package for individual VS project use vcpkg integrate powershell Enable PowerShell tab-completion vcpkg export \u0026lt;pkg\u0026gt;... [opt]... Exports a package vcpkg edit \u0026lt;pkg\u0026gt; Open up a port for editing (uses %EDITOR%, default \u0026#39;code\u0026#39;) vcpkg create \u0026lt;pkg\u0026gt; \u0026lt;url\u0026gt; [archivename] Create a new package vcpkg x-init-registry \u0026lt;path\u0026gt; Initializes a registry in the directory \u0026lt;path\u0026gt; vcpkg owns \u0026lt;pat\u0026gt; Search for files in installed packages vcpkg depend-info \u0026lt;pkg\u0026gt;... Display a list of dependencies for packages vcpkg env Creates a clean shell environment for development or compiling vcpkg version Display version information vcpkg contact Display contact information to send feedback ... 1. 내 프로젝트에서 사용 (CMake, find_package) CMakeLists.txt 에 find_package 내용 추가 CMakeLists.txt cmake_minimum_required(VERSION 3.11) project(main) set(CMAKE_CXX_STANDARD 17) add_executable(main main.cpp) if(MSVC) target_compile_options(main PRIVATE /MT) else() target_compile_options(main PRIVATE -Wall -O2) endif() find_package(fmt CONFIG REQUIRED) target_link_libraries(main PRIVATE fmt::fmt) find_package(nlohmann_json CONFIG REQUIRED) target_link_libraries(main PRIVATE nlohmann_json nlohmann_json::nlohmann_json) CMake 초기화 CMAKE_TOOLCHAIN_FILE 과 VCPKG_TARGET_TRIPLET 을 지정하여 초기화 CMAKE_TOOLCHAIN_FILE : vcpkg/scripts/buildsystems/vcpkg.cmake $ mkdir build \u0026amp;\u0026amp; cd build # windows msvc $ cmake -G \u0026#34;Visual Studio 16 2019\u0026#34; -A x64 .. -DCMAKE_TOOLCHAIN_FILE=D:/Lib/vcpkg/scripts/buildsystems/vcpkg.cmake -DVCPKG_TARGET_TRIPLET=x64-windows-static # windows mingw $ cmake -G \u0026#34;MSYS Makefiles\u0026#34; .. -DCMAKE_TOOLCHAIN_FILE=D:/Lib/vcpkg/scripts/buildsystems/vcpkg.cmake -DVCPKG_TARGET_TRIPLET=x64-mingw-static # linux : VCPKG_TARGET_TRIPLET 지정안함, defualt 사용 $ cmake cmake .. -DCMAKE_TOOLCHAIN_FILE=~/lib/vcpkg/scripts/buildsystems/vcpkg.cmake Build # windows msvc : Release 모드 빌드 $ cmake --build . --config=Release # run $ Release\\main.exe # mingw, linux $ make $ ./main 2. 내 프로젝트에서 사용 (라이브러리 수동으로 설정) CMake 수동 지정 : target_include_directories, target_link_directories, target_link_libraries 별도 지정 Makefile 사용 : -I -l -L 등의 옵션 추가 vcpkg/installed/triplet 디렉토리 참고 수동으로 include, lib 등 지정 사용 triplet/include : header files triplet/lib : static library triplet/bin : shared library $ tree vcpkg/installed -L 3 vcpkg/installed ├── vcpkg ... ├── x64-mingw-static │ ├── debug │ │ └── lib │ ├── include │ │ ├── benchmark │ │ ├── httplib.h │ │ ├── nlohmann │ │ ├── openssl │ │ ├── zconf.h │ │ └── zlib.h │ ├── lib │ │ ├── libbenchmark.a │ │ ├── libbenchmark_main.a │ │ ├── libcrypto.a │ │ ├── libssl.a │ │ ├── libzlib.a │ │ └── pkgconfig │ └── share │ ├── benchmark │ ├── cpp-httplib │ ├── nlohmann-json │ ├── nlohmann_json │ ├── openssl │ └── zlib ├── x64-windows │ ├── bin │ │ ├── fmt.dll │ │ └── fmt.pdb │ ├── debug │ │ ├── bin │ │ └── lib │ ├── include │ │ └── fmt │ ├── lib │ │ ├── fmt.lib │ │ └── pkgconfig │ └── share │ ├── fmt │ ├── vcpkg-cmake │ └── vcpkg-cmake-config └── x64-windows-static ├── debug │ ├── lib │ └── misc ├── include │ ├── benchmark │ ├── fmt │ ├── httplib.h │ ├── nlohmann │ ├── openssl │ ├── zconf.h │ └── zlib.h ├── lib │ ├── benchmark.lib │ ├── benchmark_main.lib │ ├── fmt.lib │ ├── libcrypto.lib │ ├── libssl.lib │ ├── ossl_static.pdb │ ├── pkgconfig │ └── zlib.lib ├── misc │ ├── CA.pl │ └── tsget.pl ├── share │ ├── benchmark │ ├── cpp-httplib │ ├── fmt │ ├── nlohmann-json │ ├── nlohmann_json │ ├── openssl │ └── zlib └── tools └── openssl ","permalink":"https://cdecl.github.io/dev/vcpkg-basic/","summary":"\u003cp\u003e\u003ca href=\"https://vcpkg.io/\"\u003ehttps://vcpkg.io/\u003c/a\u003e{:target=\u0026quot;_blank\u0026quot;}\u003cbr\u003e\nVcpkg helps you manage C and C++ libraries on Windows, Linux and MacOS. This tool and ecosystem are constantly evolving, and we always appreciate contributions!\u003c/p\u003e\n\u003ch2 id=\"introduction\"\u003eIntroduction\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://github.com/microsoft/vcpkg\"\u003ehttps://github.com/microsoft/vcpkg\u003c/a\u003e{:target=\u0026quot;_blank\u0026quot;}\u003c/li\u003e\n\u003cli\u003eMS에서 만든 C++ Library Package 관리 (Cross Platform)\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"vcpkg-install\"\u003eVcpkg install\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003eGit 이 필요하고, bootstrap-vcpkg 실행으로 필요한 툴을 다운로드(빌드)하는 작업을 수행\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003evcpkg.exe\u003c/code\u003e 생성\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-sh\" data-lang=\"sh\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ git clone https://github.com/microsoft/vcpkg\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ cd vcpkg\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# windows\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ bootstrap-vcpkg.bat\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# linux \u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ ./bootstrap-vcpkg.sh\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch3 id=\"package-search--install\"\u003ePackage search \u0026amp; install\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003etriplet\u003c/code\u003e : Target configuration set\u003c/li\u003e\n\u003cli\u003e설치시 \u003ccode\u003etriplet\u003c/code\u003e 을 지정하지 않으면 설치되어 있는 기본 C++ Toolset 으로 지정\n\u003cul\u003e\n\u003cli\u003eWindows의 경우 \u003ccode\u003ex86-windows\u003c/code\u003e default\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch4 id=\"주요-triplet-list\"\u003e주요 Triplet list\u003c/h4\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003evcpkg help triplet\u003c/code\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-sh\" data-lang=\"sh\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ vcpkg help triplet\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eAvailable architecture triplets\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eVCPKG built-in triplets:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e...\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  x64-windows-static\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  x64-windows\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  x86-windows\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e...\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eVCPKG community triplets:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e...\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  x64-windows-static-md\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  x86-windows-static-md\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  x86-windows-static\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  x64-mingw-dynamic\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  x64-mingw-static\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  x86-mingw-dynamic\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  x86-mingw-static  \n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  x64-linux\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e...\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch4 id=\"search\"\u003eSearch\u003c/h4\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003evcpkg search\u003c/code\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-sh\" data-lang=\"sh\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# Package search \u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ vcpkg search fmt\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003efmt                      7.1.3#5          Formatting library \u003cspan style=\"color:#66d9ef\"\u003efor\u003c/span\u003e C++. ...\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eThe search result may be outdated. Run \u003cspan style=\"color:#e6db74\"\u003e`\u003c/span\u003egit pull\u003cspan style=\"color:#e6db74\"\u003e`\u003c/span\u003e to get the latest results. \n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch4 id=\"install\"\u003eInstall\u003c/h4\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003evcpkg install\u003c/code\u003e\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003evcpkg search\u003c/code\u003e 에서 찾은 패키지를 triplet 을 지정하여 설치\u003c/li\u003e\n\u003cli\u003e설치가 완료되면 프로젝트 CMakeLists.txt 넣을 find_package 문 표시\u003c/li\u003e\n\u003c/ul\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-sh\" data-lang=\"sh\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# Package 별로 triplet 지정 \u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ vcpkg.exe install fmt:x64-windows-static nlohmann-json:x64-windows-static\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# triplet 공통 지정 \u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ vcpkg.exe install fmt nlohmann-json --triplet\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003ex64-windows-static\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e...\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eThe package fmt provides CMake targets:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    find_package\u003cspan style=\"color:#f92672\"\u003e(\u003c/span\u003efmt CONFIG REQUIRED\u003cspan style=\"color:#f92672\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    target_link_libraries\u003cspan style=\"color:#f92672\"\u003e(\u003c/span\u003emain PRIVATE fmt::fmt\u003cspan style=\"color:#f92672\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#75715e\"\u003e# Or use the header-only version\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    find_package\u003cspan style=\"color:#f92672\"\u003e(\u003c/span\u003efmt CONFIG REQUIRED\u003cspan style=\"color:#f92672\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    target_link_libraries\u003cspan style=\"color:#f92672\"\u003e(\u003c/span\u003emain PRIVATE fmt::fmt-header-only\u003cspan style=\"color:#f92672\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eThe package nlohmann-json:x64-windows-static provides CMake targets:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    find_package\u003cspan style=\"color:#f92672\"\u003e(\u003c/span\u003enlohmann_json CONFIG REQUIRED\u003cspan style=\"color:#f92672\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    target_link_libraries\u003cspan style=\"color:#f92672\"\u003e(\u003c/span\u003emain PRIVATE nlohmann_json nlohmann_json::nlohmann_json\u003cspan style=\"color:#f92672\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch4 id=\"설치된-리스트\"\u003e설치된 리스트\u003c/h4\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003evcpkg list\u003c/code\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-sh\" data-lang=\"sh\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# Package installed list \u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ vcpkg list\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ebenchmark:x64-mingw-static                         1.5.5            A library to support the benchmarking of functio...\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ebenchmark:x64-windows-static                       1.5.5            A library to support the benchmarking of functio...\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ecpp-httplib:x64-mingw-static                       0.9.1            A single file C++11 header-only HTTP/HTTPS serve...\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ecpp-httplib:x64-windows-static                     0.9.1            A single file C++11 header-only HTTP/HTTPS serve...\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003efmt:x64-windows                                    7.1.3#5          Formatting library \u003cspan style=\"color:#66d9ef\"\u003efor\u003c/span\u003e C++. It can be used as a ...\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003efmt:x64-windows-static                             7.1.3#5          Formatting library \u003cspan style=\"color:#66d9ef\"\u003efor\u003c/span\u003e C++. It can be used as a ...\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003enlohmann-json:x64-mingw-static                     3.9.1            JSON \u003cspan style=\"color:#66d9ef\"\u003efor\u003c/span\u003e Modern C++\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003enlohmann-json:x64-windows-static                   3.9.1            JSON \u003cspan style=\"color:#66d9ef\"\u003efor\u003c/span\u003e Modern C++\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eopenssl:x64-mingw-static                           1.1.1k#8         OpenSSL is an open source project that provides ...\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eopenssl:x64-windows-static                         1.1.1k#8         OpenSSL is an open source project that provides ...\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003evcpkg-cmake-config:x64-windows                     2021-05-22#1\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003evcpkg-cmake:x64-windows                            2021-07-30\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ezlib:x64-mingw-static                              1.2.11#11        A compression library\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ezlib:x64-windows-static                            1.2.11#11        A compression library\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch3 id=\"integrate-install\"\u003eIntegrate install\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003evcpkg integrate install\u003c/code\u003e\u003c/li\u003e\n\u003cli\u003eWindows Visual Studio에서 vcpkg 라이브러리를 별도 설정 없이 바로 사용\u003c/li\u003e\n\u003c/ul\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-sh\" data-lang=\"sh\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ vcpkg integrate install\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eApplied user-wide integration \u003cspan style=\"color:#66d9ef\"\u003efor\u003c/span\u003e this vcpkg root.\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eAll MSBuild C++ projects can now \u003cspan style=\"color:#75715e\"\u003e#include any installed libraries.\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eLinking will be handled automatically.\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eInstalling new libraries will make them instantly available.\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eCMake projects should use: \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;-DCMAKE_TOOLCHAIN_FILE=D:/Lib/vcpkg/scripts/buildsystems/vcpkg.cmake\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch3 id=\"vcpkg-명령어\"\u003evcpkg 명령어\u003c/h3\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-sh\" data-lang=\"sh\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# Vcpkg package management program version 2021-08-12-85ab112d5ee102bc6eac8cdbbfdd173a71374e04\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ vcpkg help\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eCommands:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  vcpkg search \u003cspan style=\"color:#f92672\"\u003e[\u003c/span\u003epat\u003cspan style=\"color:#f92672\"\u003e]\u003c/span\u003e              Search \u003cspan style=\"color:#66d9ef\"\u003efor\u003c/span\u003e packages available to be built\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  vcpkg install \u0026lt;pkg\u0026gt;...          Install a package\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  vcpkg remove \u0026lt;pkg\u0026gt;...           Uninstall a package\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  vcpkg remove --outdated         Uninstall all out-of-date packages\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  vcpkg list                      List installed packages\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  vcpkg update                    Display list of packages \u003cspan style=\"color:#66d9ef\"\u003efor\u003c/span\u003e updating\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  vcpkg upgrade                   Rebuild all outdated packages\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  vcpkg x-history \u0026lt;pkg\u0026gt;           \u003cspan style=\"color:#f92672\"\u003e(\u003c/span\u003eExperimental\u003cspan style=\"color:#f92672\"\u003e)\u003c/span\u003e Shows the history of CONTROL versions of a package\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  vcpkg hash \u0026lt;file\u0026gt; \u003cspan style=\"color:#f92672\"\u003e[\u003c/span\u003ealg\u003cspan style=\"color:#f92672\"\u003e]\u003c/span\u003e         Hash a file by specific algorithm, default SHA512\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  vcpkg help topics               Display the list of help topics\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  vcpkg help \u0026lt;topic\u0026gt;              Display help \u003cspan style=\"color:#66d9ef\"\u003efor\u003c/span\u003e a specific topic\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  vcpkg integrate install         Make installed packages available user-wide. Requires admin\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e                                  privileges on first use\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  vcpkg integrate remove          Remove user-wide integration\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  vcpkg integrate project         Generate a referencing nuget package \u003cspan style=\"color:#66d9ef\"\u003efor\u003c/span\u003e individual VS project use\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  vcpkg integrate powershell      Enable PowerShell tab-completion\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  vcpkg export \u0026lt;pkg\u0026gt;... \u003cspan style=\"color:#f92672\"\u003e[\u003c/span\u003eopt\u003cspan style=\"color:#f92672\"\u003e]\u003c/span\u003e...  Exports a package\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  vcpkg edit \u0026lt;pkg\u0026gt;                Open up a port \u003cspan style=\"color:#66d9ef\"\u003efor\u003c/span\u003e editing \u003cspan style=\"color:#f92672\"\u003e(\u003c/span\u003euses %EDITOR%, default \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;code\u0026#39;\u003c/span\u003e\u003cspan style=\"color:#f92672\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  vcpkg create \u0026lt;pkg\u0026gt; \u0026lt;url\u0026gt; \u003cspan style=\"color:#f92672\"\u003e[\u003c/span\u003earchivename\u003cspan style=\"color:#f92672\"\u003e]\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e                                  Create a new package\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  vcpkg x-init-registry \u0026lt;path\u0026gt;    Initializes a registry in the directory \u0026lt;path\u0026gt;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  vcpkg owns \u0026lt;pat\u0026gt;                Search \u003cspan style=\"color:#66d9ef\"\u003efor\u003c/span\u003e files in installed packages\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  vcpkg depend-info \u0026lt;pkg\u0026gt;...      Display a list of dependencies \u003cspan style=\"color:#66d9ef\"\u003efor\u003c/span\u003e packages\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  vcpkg env                       Creates a clean shell environment \u003cspan style=\"color:#66d9ef\"\u003efor\u003c/span\u003e development or compiling\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  vcpkg version                   Display version information\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  vcpkg contact                   Display contact information to send feedback\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e...\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003chr\u003e\n\u003ch3 id=\"1-내-프로젝트에서-사용-cmake-find_package\"\u003e1. 내 프로젝트에서 사용 (CMake, find_package)\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003eCMakeLists.txt 에 find_package 내용 추가\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch4 id=\"cmakeliststxt\"\u003eCMakeLists.txt\u003c/h4\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-cmake\" data-lang=\"cmake\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ecmake_minimum_required(\u003cspan style=\"color:#e6db74\"\u003eVERSION\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e3.11\u003c/span\u003e)\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eproject(\u003cspan style=\"color:#e6db74\"\u003emain\u003c/span\u003e)\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eset(\u003cspan style=\"color:#e6db74\"\u003eCMAKE_CXX_STANDARD\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e17\u003c/span\u003e)\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eadd_executable(\u003cspan style=\"color:#e6db74\"\u003emain\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003emain.cpp\u003c/span\u003e)\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eif(\u003cspan style=\"color:#e6db74\"\u003eMSVC\u003c/span\u003e)\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\ttarget_compile_options(\u003cspan style=\"color:#e6db74\"\u003emain\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003ePRIVATE\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e/MT\u003c/span\u003e)\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eelse()\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\ttarget_compile_options(\u003cspan style=\"color:#e6db74\"\u003emain\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003ePRIVATE\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e-Wall\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e-O2\u003c/span\u003e)\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eendif()\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003efind_package(\u003cspan style=\"color:#e6db74\"\u003efmt\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003eCONFIG\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003eREQUIRED\u003c/span\u003e)\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003etarget_link_libraries(\u003cspan style=\"color:#e6db74\"\u003emain\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003ePRIVATE\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003efmt::fmt\u003c/span\u003e)\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003efind_package(\u003cspan style=\"color:#e6db74\"\u003enlohmann_json\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003eCONFIG\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003eREQUIRED\u003c/span\u003e)\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003etarget_link_libraries(\u003cspan style=\"color:#e6db74\"\u003emain\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003ePRIVATE\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003enlohmann_json\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003enlohmann_json::nlohmann_json\u003c/span\u003e)\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch4 id=\"cmake-초기화\"\u003eCMake 초기화\u003c/h4\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003eCMAKE_TOOLCHAIN_FILE\u003c/code\u003e 과 \u003ccode\u003eVCPKG_TARGET_TRIPLET\u003c/code\u003e 을 지정하여 초기화\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003eCMAKE_TOOLCHAIN_FILE\u003c/code\u003e : vcpkg/scripts/buildsystems/vcpkg.cmake\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-sh\" data-lang=\"sh\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ mkdir build \u003cspan style=\"color:#f92672\"\u003e\u0026amp;\u0026amp;\u003c/span\u003e cd build\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# windows msvc \u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ cmake -G \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;Visual Studio 16 2019\u0026#34;\u003c/span\u003e -A x64 .. -DCMAKE_TOOLCHAIN_FILE\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003eD:/Lib/vcpkg/scripts/buildsystems/vcpkg.cmake -DVCPKG_TARGET_TRIPLET\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003ex64-windows-static\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# windows mingw\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ cmake -G \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;MSYS Makefiles\u0026#34;\u003c/span\u003e .. -DCMAKE_TOOLCHAIN_FILE\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003eD:/Lib/vcpkg/scripts/buildsystems/vcpkg.cmake -DVCPKG_TARGET_TRIPLET\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003ex64-mingw-static\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# linux : VCPKG_TARGET_TRIPLET 지정안함, defualt 사용 \u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ cmake cmake .. -DCMAKE_TOOLCHAIN_FILE\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e~/lib/vcpkg/scripts/buildsystems/vcpkg.cmake\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch4 id=\"build\"\u003eBuild\u003c/h4\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-sh\" data-lang=\"sh\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# windows msvc : Release 모드 빌드 \u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ cmake --build . --config\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003eRelease\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# run \u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ Release\u003cspan style=\"color:#ae81ff\"\u003e\\m\u003c/span\u003eain.exe\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# mingw, linux \u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ make \n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ ./main\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch3 id=\"2-내-프로젝트에서-사용-라이브러리-수동으로-설정\"\u003e2. 내 프로젝트에서 사용 (라이브러리 수동으로 설정)\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003eCMake 수동 지정 : target_include_directories, target_link_directories, target_link_libraries 별도 지정\u003c/li\u003e\n\u003cli\u003eMakefile 사용 : \u003ccode\u003e-I\u003c/code\u003e \u003ccode\u003e-l\u003c/code\u003e \u003ccode\u003e-L\u003c/code\u003e 등의 옵션 추가\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch4 id=\"vcpkginstalledtriplet-디렉토리-참고\"\u003evcpkg/installed/\u003ccode\u003etriplet\u003c/code\u003e 디렉토리 참고\u003c/h4\u003e\n\u003cul\u003e\n\u003cli\u003e수동으로 include, lib 등 지정 사용\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003etriplet/include\u003c/code\u003e : header files\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003etriplet/lib\u003c/code\u003e : static library\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003etriplet/bin\u003c/code\u003e : shared library\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-sh\" data-lang=\"sh\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$  tree vcpkg/installed -L \u003cspan style=\"color:#ae81ff\"\u003e3\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003evcpkg/installed\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e├── vcpkg\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e...\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e├── x64-mingw-static\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e│   ├── debug\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e│   │   └── lib\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e│   ├── include\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e│   │   ├── benchmark\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e│   │   ├── httplib.h\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e│   │   ├── nlohmann\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e│   │   ├── openssl\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e│   │   ├── zconf.h\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e│   │   └── zlib.h\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e│   ├── lib\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e│   │   ├── libbenchmark.a\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e│   │   ├── libbenchmark_main.a\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e│   │   ├── libcrypto.a\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e│   │   ├── libssl.a\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e│   │   ├── libzlib.a\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e│   │   └── pkgconfig\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e│   └── share\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e│       ├── benchmark\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e│       ├── cpp-httplib\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e│       ├── nlohmann-json\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e│       ├── nlohmann_json\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e│       ├── openssl\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e│       └── zlib\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e├── x64-windows\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e│   ├── bin\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e│   │   ├── fmt.dll\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e│   │   └── fmt.pdb\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e│   ├── debug\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e│   │   ├── bin\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e│   │   └── lib\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e│   ├── include\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e│   │   └── fmt\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e│   ├── lib\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e│   │   ├── fmt.lib\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e│   │   └── pkgconfig\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e│   └── share\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e│       ├── fmt\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e│       ├── vcpkg-cmake\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e│       └── vcpkg-cmake-config\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e└── x64-windows-static\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    ├── debug\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    │   ├── lib\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    │   └── misc\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    ├── include\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    │   ├── benchmark\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    │   ├── fmt\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    │   ├── httplib.h\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    │   ├── nlohmann\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    │   ├── openssl\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    │   ├── zconf.h\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    │   └── zlib.h\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    ├── lib\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    │   ├── benchmark.lib\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    │   ├── benchmark_main.lib\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    │   ├── fmt.lib\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    │   ├── libcrypto.lib\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    │   ├── libssl.lib\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    │   ├── ossl_static.pdb\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    │   ├── pkgconfig\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    │   └── zlib.lib\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    ├── misc\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    │   ├── CA.pl\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    │   └── tsget.pl\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    ├── share\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    │   ├── benchmark\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    │   ├── cpp-httplib\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    │   ├── fmt\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    │   ├── nlohmann-json\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    │   ├── nlohmann_json\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    │   ├── openssl\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    │   └── zlib\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    └── tools\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        └── openssl\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e","title":"Vcpkg Basic"},{"content":"Introduction https://github.com/Microsoft/cpprestsdk{:target=\u0026quot;_blank\u0026quot;} Microsoft에서 만든 클라이언트, 서버용 C++ HTTP 통신 모듈이며, JSON URI, 비동기, 웹소켓, oAuth 등을 지원 C++11의 비동기, 병렬 프로그램 모델 지원 크로스 플랫폼 지원 등.. cpprestsdk package install (w/ vcpkg) https://github.com/microsoft/vcpkg{:target=\u0026quot;_blank\u0026quot;} vcpkg 통해서 패키지 설치 # --triplet=x64-windows-static $ vcpkg.exe install cpprestsdk:x64-windows-static ... The package cpprestsdk:x64-windows-static provides CMake targets: find_package(cpprestsdk CONFIG REQUIRED) target_link_libraries(main PRIVATE cpprestsdk::cpprest cpprestsdk::cpprestsdk_zlib_internal cpprestsdk::cpprestsdk_brotli_internal) Sample code U(\u0026quot;\u0026quot;) 는 _T(\u0026quot;\u0026quot;) 와 비슷한, UNICODE 및 MBCS 환경의 문자열 타입을 스위칭 해주는 매크로. 허나 U는 _T와는 다르게 _WIN32 환경이면 기본으로 _UTF16_STRINGS으로 정의되어 있어 프로젝트의 문자집합의 세팅과 관계 없이 UNICODE와 같은 환경으로 동작 리눅스 환경에서는 다른 설정을 해주지 않는 이상 char, std::string으로 정의 utility::string_t은 std::string과 std::wstring을 스위칭 해주는 타입 대체적인 패턴은, 동기는 .get(), 비동기는 then().wait() 조합으로 사용 #include \u0026lt;iostream\u0026gt; using namespace std; #include \u0026lt;cpprest/http_client.h\u0026gt; #include \u0026lt;cpprest/filestream.h\u0026gt; using namespace utility; using namespace web; using namespace web::http; using namespace web::http::client; using namespace concurrency::streams; void HttpRequest() { http_client client(U(\u0026#34;http://httpbin.org/get\u0026#34;)); http_request req(methods::GET); // sync request auto resp = client.request(req).get(); wcout \u0026lt;\u0026lt; resp.status_code() \u0026lt;\u0026lt; \u0026#34; : sync request\u0026#34; \u0026lt;\u0026lt; endl; wcout \u0026lt;\u0026lt; resp.extract_string(true).get() \u0026lt;\u0026lt; endl; // async request client.request(req).then([=](http_response r){ wcout \u0026lt;\u0026lt; r.status_code() \u0026lt;\u0026lt; \u0026#34; : async request\u0026#34; \u0026lt;\u0026lt; endl; wcout \u0026lt;\u0026lt; U(\u0026#34;content-type : \u0026#34;) \u0026lt;\u0026lt; r.headers().content_type() \u0026lt;\u0026lt; endl; r.extract_string(true).then([](string_t v) { wcout \u0026lt;\u0026lt; v \u0026lt;\u0026lt; endl; }).wait(); }).wait(); // async request json client.request(req).then([=](http_response r){ wcout \u0026lt;\u0026lt; r.status_code() \u0026lt;\u0026lt; \u0026#34; : async request json\u0026#34; \u0026lt;\u0026lt; endl; wcout \u0026lt;\u0026lt; U(\u0026#34;content-type : \u0026#34;) \u0026lt;\u0026lt; r.headers().content_type() \u0026lt;\u0026lt; endl; r.extract_json(true).then([](json::value v) { wcout \u0026lt;\u0026lt; v \u0026lt;\u0026lt; endl; }).wait(); }).wait(); } int main() { // wcout.imbue(locale(\u0026#34;kor\u0026#34;)); // windows only HttpRequest(); return 0; } CMakeLists.txt cmake_minimum_required(VERSION 3.11) project(main) add_executable(main main.cpp) target_compile_options(main PRIVATE /MT) find_package(cpprestsdk CONFIG REQUIRED) target_link_libraries(main PRIVATE cpprestsdk::cpprest cpprestsdk::cpprestsdk_zlib_internal cpprestsdk::cpprestsdk_brotli_internal) $ mkdir build \u0026amp;\u0026amp; cd build # x64-windows-static $ cmake -G \u0026#34;Visual Studio 16 2019\u0026#34; -A x64 .. -DCMAKE_TOOLCHAIN_FILE=D:/Lib/vcpkg/scripts/buildsystems/vcpkg.cmake -DVCPKG_TARGET_TRIPLET=x64-windows-static Build \u0026amp; Run # build $ cmake --build . --config Release # run $ Release\\main.exe 200 : sync request { \u0026#34;args\u0026#34;: {}, \u0026#34;headers\u0026#34;: { \u0026#34;Cache-Control\u0026#34;: \u0026#34;max-stale=0\u0026#34;, \u0026#34;Host\u0026#34;: \u0026#34;httpbin.org\u0026#34;, \u0026#34;User-Agent\u0026#34;: \u0026#34;cpprestsdk/2.10.18\u0026#34;, \u0026#34;X-Amzn-Trace-Id\u0026#34;: \u0026#34;Root=1-611cbc68-27731b2a1cd55cbd682c517e\u0026#34;, \u0026#34;X-Bluecoat-Via\u0026#34;: \u0026#34;ce2cfae06b3f12b4\u0026#34; }, \u0026#34;origin\u0026#34;: \u0026#34;xx.xx.xx.xx\u0026#34;, \u0026#34;url\u0026#34;: \u0026#34;http://httpbin.org/get\u0026#34; } 200 : async request content-type : application/json { \u0026#34;args\u0026#34;: {}, \u0026#34;headers\u0026#34;: { \u0026#34;Cache-Control\u0026#34;: \u0026#34;max-stale=0\u0026#34;, \u0026#34;Host\u0026#34;: \u0026#34;httpbin.org\u0026#34;, \u0026#34;User-Agent\u0026#34;: \u0026#34;cpprestsdk/2.10.18\u0026#34;, \u0026#34;X-Amzn-Trace-Id\u0026#34;: \u0026#34;Root=1-611cbc68-27731b2a1cd55cbd682c517e\u0026#34;, \u0026#34;X-Bluecoat-Via\u0026#34;: \u0026#34;ce2cfae06b3f12b4\u0026#34; }, \u0026#34;origin\u0026#34;: \u0026#34;xx.xx.xx.xx\u0026#34;, \u0026#34;url\u0026#34;: \u0026#34;http://httpbin.org/get\u0026#34; } 200 : async request json content-type : application/json {\u0026#34;args\u0026#34;:{},\u0026#34;headers\u0026#34;:{\u0026#34;Cache-Control\u0026#34;:\u0026#34;max-stale=0\u0026#34;,\u0026#34;Host\u0026#34;:\u0026#34;httpbin.org\u0026#34;,\u0026#34;User-Agent\u0026#34;:\u0026#34;cpprestsdk/2.10.18\u0026#34;,\u0026#34;X-Amzn-Trace-Id\u0026#34;:\u0026#34;Root=1-611cbc68-27731b2a1cd55cbd682c517e\u0026#34;,\u0026#34;X-Bluecoat-Via\u0026#34;:\u0026#34;ce2cfae06b3f12b4\u0026#34;},\u0026#34;origin\u0026#34;:\u0026#34;180.xx.xx.xx\u0026#34;,\u0026#34;url\u0026#34;:\u0026#34;http://httpbin.org/get\u0026#34;} ","permalink":"https://cdecl.github.io/dev/cpprestsdk-sample/","summary":"\u003ch2 id=\"introduction\"\u003eIntroduction\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://github.com/Microsoft/cpprestsdk\"\u003ehttps://github.com/Microsoft/cpprestsdk\u003c/a\u003e{:target=\u0026quot;_blank\u0026quot;}\u003c/li\u003e\n\u003cli\u003eMicrosoft에서 만든 클라이언트, 서버용 C++ HTTP 통신 모듈이며, JSON URI, 비동기, 웹소켓, oAuth 등을 지원\u003c/li\u003e\n\u003cli\u003eC++11의 비동기, 병렬 프로그램 모델 지원\u003c/li\u003e\n\u003cli\u003e크로스 플랫폼 지원 등..\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"cpprestsdk-package-install-w-vcpkg\"\u003ecpprestsdk package install (w/ vcpkg)\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://github.com/microsoft/vcpkg\"\u003ehttps://github.com/microsoft/vcpkg\u003c/a\u003e{:target=\u0026quot;_blank\u0026quot;}\u003c/li\u003e\n\u003cli\u003evcpkg 통해서 패키지 설치\u003c/li\u003e\n\u003c/ul\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-sh\" data-lang=\"sh\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# --triplet=x64-windows-static\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ vcpkg.exe install cpprestsdk:x64-windows-static\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e...\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eThe package cpprestsdk:x64-windows-static provides CMake targets:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    find_package\u003cspan style=\"color:#f92672\"\u003e(\u003c/span\u003ecpprestsdk CONFIG REQUIRED\u003cspan style=\"color:#f92672\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    target_link_libraries\u003cspan style=\"color:#f92672\"\u003e(\u003c/span\u003emain PRIVATE cpprestsdk::cpprest cpprestsdk::cpprestsdk_zlib_internal cpprestsdk::cpprestsdk_brotli_internal\u003cspan style=\"color:#f92672\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch3 id=\"sample-code\"\u003eSample code\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003eU(\u0026quot;\u0026quot;) 는 _T(\u0026quot;\u0026quot;) 와 비슷한, UNICODE 및 MBCS 환경의 문자열 타입을 스위칭 해주는 매크로.\n\u003cul\u003e\n\u003cli\u003e허나 U는 _T와는 다르게 _WIN32 환경이면 기본으로 _UTF16_STRINGS으로 정의되어 있어 프로젝트의 문자집합의 세팅과 관계 없이 UNICODE와 같은 환경으로 동작\u003c/li\u003e\n\u003cli\u003e리눅스 환경에서는 다른 설정을 해주지 않는 이상 char, std::string으로 정의\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003eutility::string_t은 std::string과 std::wstring을 스위칭 해주는 타입\u003c/li\u003e\n\u003cli\u003e대체적인 패턴은, 동기는 .get(), 비동기는 then().wait() 조합으로 사용\u003c/li\u003e\n\u003c/ul\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-cpp\" data-lang=\"cpp\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e#include\u003c/span\u003e \u003cspan style=\"color:#75715e\"\u003e\u0026lt;iostream\u0026gt;\u003c/span\u003e\u003cspan style=\"color:#75715e\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003eusing\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003enamespace\u003c/span\u003e std;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e#include\u003c/span\u003e \u003cspan style=\"color:#75715e\"\u003e\u0026lt;cpprest/http_client.h\u0026gt;\u003c/span\u003e\u003cspan style=\"color:#75715e\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e#include\u003c/span\u003e \u003cspan style=\"color:#75715e\"\u003e\u0026lt;cpprest/filestream.h\u0026gt;\u003c/span\u003e\u003cspan style=\"color:#75715e\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003eusing\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003enamespace\u003c/span\u003e utility;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003eusing\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003enamespace\u003c/span\u003e web;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003eusing\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003enamespace\u003c/span\u003e web\u003cspan style=\"color:#f92672\"\u003e::\u003c/span\u003ehttp;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003eusing\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003enamespace\u003c/span\u003e web\u003cspan style=\"color:#f92672\"\u003e::\u003c/span\u003ehttp\u003cspan style=\"color:#f92672\"\u003e::\u003c/span\u003eclient;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003eusing\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003enamespace\u003c/span\u003e concurrency\u003cspan style=\"color:#f92672\"\u003e::\u003c/span\u003estreams;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e \n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003evoid\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eHttpRequest\u003c/span\u003e()\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e{\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\thttp_client client(U(\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;http://httpbin.org/get\u0026#34;\u003c/span\u003e));\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\thttp_request req(methods\u003cspan style=\"color:#f92672\"\u003e::\u003c/span\u003eGET);\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#75715e\"\u003e// sync request\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#66d9ef\"\u003eauto\u003c/span\u003e resp \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e client.request(req).get();\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\twcout \u003cspan style=\"color:#f92672\"\u003e\u0026lt;\u0026lt;\u003c/span\u003e resp.status_code() \u003cspan style=\"color:#f92672\"\u003e\u0026lt;\u0026lt;\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#34; : sync request\u0026#34;\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e\u0026lt;\u0026lt;\u003c/span\u003e endl;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\twcout \u003cspan style=\"color:#f92672\"\u003e\u0026lt;\u0026lt;\u003c/span\u003e resp.extract_string(true).get() \u003cspan style=\"color:#f92672\"\u003e\u0026lt;\u0026lt;\u003c/span\u003e endl;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e \n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e \t\u003cspan style=\"color:#75715e\"\u003e// async request\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\tclient.request(req).then([\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e](http_response r){\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\twcout \u003cspan style=\"color:#f92672\"\u003e\u0026lt;\u0026lt;\u003c/span\u003e r.status_code() \u003cspan style=\"color:#f92672\"\u003e\u0026lt;\u0026lt;\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#34; : async request\u0026#34;\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e\u0026lt;\u0026lt;\u003c/span\u003e endl;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\twcout \u003cspan style=\"color:#f92672\"\u003e\u0026lt;\u0026lt;\u003c/span\u003e U(\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;content-type : \u0026#34;\u003c/span\u003e) \u003cspan style=\"color:#f92672\"\u003e\u0026lt;\u0026lt;\u003c/span\u003e r.headers().content_type() \u003cspan style=\"color:#f92672\"\u003e\u0026lt;\u0026lt;\u003c/span\u003e endl;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e \n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\tr.extract_string(true).then([](string_t v) {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\t\twcout \u003cspan style=\"color:#f92672\"\u003e\u0026lt;\u0026lt;\u003c/span\u003e v \u003cspan style=\"color:#f92672\"\u003e\u0026lt;\u0026lt;\u003c/span\u003e endl;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\t}).wait();\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t}).wait();\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#75715e\"\u003e// async request json\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\tclient.request(req).then([\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e](http_response r){\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\twcout \u003cspan style=\"color:#f92672\"\u003e\u0026lt;\u0026lt;\u003c/span\u003e r.status_code() \u003cspan style=\"color:#f92672\"\u003e\u0026lt;\u0026lt;\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#34; : async request json\u0026#34;\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e\u0026lt;\u0026lt;\u003c/span\u003e endl;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\twcout \u003cspan style=\"color:#f92672\"\u003e\u0026lt;\u0026lt;\u003c/span\u003e U(\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;content-type : \u0026#34;\u003c/span\u003e) \u003cspan style=\"color:#f92672\"\u003e\u0026lt;\u0026lt;\u003c/span\u003e r.headers().content_type() \u003cspan style=\"color:#f92672\"\u003e\u0026lt;\u0026lt;\u003c/span\u003e endl;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e \n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\tr.extract_json(true).then([](json\u003cspan style=\"color:#f92672\"\u003e::\u003c/span\u003evalue v) {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\t\twcout \u003cspan style=\"color:#f92672\"\u003e\u0026lt;\u0026lt;\u003c/span\u003e v \u003cspan style=\"color:#f92672\"\u003e\u0026lt;\u0026lt;\u003c/span\u003e endl;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\t}).wait();\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t}).wait();\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e}\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e \n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003eint\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003emain\u003c/span\u003e()\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e{\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#75715e\"\u003e// wcout.imbue(locale(\u0026#34;kor\u0026#34;));  // windows only\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\tHttpRequest();\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e \n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#66d9ef\"\u003ereturn\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e0\u003c/span\u003e; \n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e}\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch3 id=\"cmakeliststxt\"\u003eCMakeLists.txt\u003c/h3\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-cmake\" data-lang=\"cmake\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ecmake_minimum_required(\u003cspan style=\"color:#e6db74\"\u003eVERSION\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e3.11\u003c/span\u003e)\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eproject(\u003cspan style=\"color:#e6db74\"\u003emain\u003c/span\u003e)\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eadd_executable(\u003cspan style=\"color:#e6db74\"\u003emain\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003emain.cpp\u003c/span\u003e)\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003etarget_compile_options(\u003cspan style=\"color:#e6db74\"\u003emain\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003ePRIVATE\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e/MT\u003c/span\u003e)\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003efind_package(\u003cspan style=\"color:#e6db74\"\u003ecpprestsdk\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003eCONFIG\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003eREQUIRED\u003c/span\u003e)\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003etarget_link_libraries(\u003cspan style=\"color:#e6db74\"\u003emain\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003ePRIVATE\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003ecpprestsdk::cpprest\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003ecpprestsdk::cpprestsdk_zlib_internal\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003ecpprestsdk::cpprestsdk_brotli_internal\u003c/span\u003e)\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-sh\" data-lang=\"sh\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ mkdir build \u003cspan style=\"color:#f92672\"\u003e\u0026amp;\u0026amp;\u003c/span\u003e cd build\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# x64-windows-static\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ cmake -G \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;Visual Studio 16 2019\u0026#34;\u003c/span\u003e -A x64 .. -DCMAKE_TOOLCHAIN_FILE\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003eD:/Lib/vcpkg/scripts/buildsystems/vcpkg.cmake -DVCPKG_TARGET_TRIPLET\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003ex64-windows-static\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch3 id=\"build--run\"\u003eBuild \u0026amp; Run\u003c/h3\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-sh\" data-lang=\"sh\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# build \u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ cmake --build . --config Release\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# run\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ Release\u003cspan style=\"color:#ae81ff\"\u003e\\m\u003c/span\u003eain.exe\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#ae81ff\"\u003e200\u003c/span\u003e : sync request\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003e{\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;args\u0026#34;\u003c/span\u003e: \u003cspan style=\"color:#f92672\"\u003e{}\u003c/span\u003e,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;headers\u0026#34;\u003c/span\u003e: \u003cspan style=\"color:#f92672\"\u003e{\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;Cache-Control\u0026#34;\u003c/span\u003e: \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;max-stale=0\u0026#34;\u003c/span\u003e,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;Host\u0026#34;\u003c/span\u003e: \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;httpbin.org\u0026#34;\u003c/span\u003e,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;User-Agent\u0026#34;\u003c/span\u003e: \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;cpprestsdk/2.10.18\u0026#34;\u003c/span\u003e,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;X-Amzn-Trace-Id\u0026#34;\u003c/span\u003e: \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;Root=1-611cbc68-27731b2a1cd55cbd682c517e\u0026#34;\u003c/span\u003e,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;X-Bluecoat-Via\u0026#34;\u003c/span\u003e: \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;ce2cfae06b3f12b4\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#f92672\"\u003e}\u003c/span\u003e,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;origin\u0026#34;\u003c/span\u003e: \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;xx.xx.xx.xx\u0026#34;\u003c/span\u003e,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;url\u0026#34;\u003c/span\u003e: \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;http://httpbin.org/get\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003e}\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#ae81ff\"\u003e200\u003c/span\u003e : async request\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003econtent-type : application/json\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003e{\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;args\u0026#34;\u003c/span\u003e: \u003cspan style=\"color:#f92672\"\u003e{}\u003c/span\u003e,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;headers\u0026#34;\u003c/span\u003e: \u003cspan style=\"color:#f92672\"\u003e{\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;Cache-Control\u0026#34;\u003c/span\u003e: \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;max-stale=0\u0026#34;\u003c/span\u003e,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;Host\u0026#34;\u003c/span\u003e: \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;httpbin.org\u0026#34;\u003c/span\u003e,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;User-Agent\u0026#34;\u003c/span\u003e: \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;cpprestsdk/2.10.18\u0026#34;\u003c/span\u003e,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;X-Amzn-Trace-Id\u0026#34;\u003c/span\u003e: \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;Root=1-611cbc68-27731b2a1cd55cbd682c517e\u0026#34;\u003c/span\u003e,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;X-Bluecoat-Via\u0026#34;\u003c/span\u003e: \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;ce2cfae06b3f12b4\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#f92672\"\u003e}\u003c/span\u003e,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;origin\u0026#34;\u003c/span\u003e: \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;xx.xx.xx.xx\u0026#34;\u003c/span\u003e,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;url\u0026#34;\u003c/span\u003e: \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;http://httpbin.org/get\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003e}\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#ae81ff\"\u003e200\u003c/span\u003e : async request json\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003econtent-type : application/json\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003e{\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;args\u0026#34;\u003c/span\u003e:\u003cspan style=\"color:#f92672\"\u003e{}\u003c/span\u003e,\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;headers\u0026#34;\u003c/span\u003e:\u003cspan style=\"color:#f92672\"\u003e{\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;Cache-Control\u0026#34;\u003c/span\u003e:\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;max-stale=0\u0026#34;\u003c/span\u003e,\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;Host\u0026#34;\u003c/span\u003e:\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;httpbin.org\u0026#34;\u003c/span\u003e,\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;User-Agent\u0026#34;\u003c/span\u003e:\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;cpprestsdk/2.10.18\u0026#34;\u003c/span\u003e,\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;X-Amzn-Trace-Id\u0026#34;\u003c/span\u003e:\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;Root=1-611cbc68-27731b2a1cd55cbd682c517e\u0026#34;\u003c/span\u003e,\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;X-Bluecoat-Via\u0026#34;\u003c/span\u003e:\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;ce2cfae06b3f12b4\u0026#34;\u003c/span\u003e\u003cspan style=\"color:#f92672\"\u003e}\u003c/span\u003e,\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;origin\u0026#34;\u003c/span\u003e:\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;180.xx.xx.xx\u0026#34;\u003c/span\u003e,\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;url\u0026#34;\u003c/span\u003e:\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;http://httpbin.org/get\u0026#34;\u003c/span\u003e\u003cspan style=\"color:#f92672\"\u003e}\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e","title":"C++ REST SDK(cpprestsdk) Sample"},{"content":"Docker default bridge 네트워크 대역 변경 내부 사설 IP와의 출동 등의 이슈\ndaemon.json /etc/docker/daemon.json { \u0026#34;default-address-pools\u0026#34;: [ { \u0026#34;base\u0026#34;: \u0026#34;10.1.0.0/16\u0026#34;, \u0026#34;size\u0026#34;: 24 } ] } Docker restart $ sudo systemctl restart docker 반영 전 $ ip a ... 4: docker0: \u0026lt;NO-CARRIER,BROADCAST,MULTICAST,UP\u0026gt; mtu 1500 qdisc noqueue state DOWN group default link/ether 02:42:82:58:25:33 brd ff:ff:ff:ff:ff:ff inet 172.17.0.1/16 brd 172.17.255.255 scope global docker0 valid_lft forever preferred_lft forever ... 반영 후 $ ip a ... 1519: docker0: \u0026lt;NO-CARRIER,BROADCAST,MULTICAST,UP\u0026gt; mtu 1500 qdisc noqueue state DOWN group default link/ether 02:42:c0:d9:e2:56 brd ff:ff:ff:ff:ff:ff inet 10.1.0.1/24 brd 10.1.0.255 scope global docker0 valid_lft forever preferred_lft forever ... Data root directory 경로 변경 기본 경로 : /var/lib/docker daemon.json /etc/docker/daemon.json { \u0026#34;data-root\u0026#34;: \u0026#34;/docker\u0026#34;, \u0026#34;default-address-pools\u0026#34;: [ { \u0026#34;base\u0026#34;: \u0026#34;10.1.0.0/16\u0026#34;, \u0026#34;size\u0026#34;: 24 } ] } $ sudo systemctl restart docker $ sudo ls -l /docker 합계 0 drwx--x--x 4 root root 120 8월 18 11:51 buildkit drwx------ 2 root root 6 8월 18 11:51 containers drwx------ 3 root root 22 8월 18 11:51 image drwxr-x--- 3 root root 19 8월 18 11:51 network drwx------ 4 root root 112 8월 18 11:51 overlay2 drwx------ 4 root root 32 8월 18 11:51 plugins drwx------ 2 root root 6 8월 18 11:51 runtimes drwx------ 2 root root 6 8월 18 11:51 swarm drwx------ 2 root root 6 8월 18 11:51 tmp drwx------ 2 root root 6 8월 18 11:51 trust drwx------ 2 root root 50 8월 18 11:51 volumes Docker log 용량 관리 https://docs.docker.com/config/containers/logging/json-file/{:target=\u0026quot;_blank\u0026quot;} /containers/ daemon.json /etc/docker/daemon.json { \u0026#34;data-root\u0026#34;: \u0026#34;/docker\u0026#34;, \u0026#34;log-opts\u0026#34;: { \u0026#34;max-size\u0026#34;: \u0026#34;100m\u0026#34; }, \u0026#34;default-address-pools\u0026#34;: [ { \u0026#34;base\u0026#34;: \u0026#34;10.1.0.0/16\u0026#34;, \u0026#34;size\u0026#34;: 24 } ] } ","permalink":"https://cdecl.github.io/devops/change-docker-default-subnet-ip/","summary":"\u003ch2 id=\"docker-default-bridge-네트워크-대역-변경\"\u003eDocker default bridge 네트워크 대역 변경\u003c/h2\u003e\n\u003cblockquote\u003e\n\u003cp\u003e내부 사설 IP와의 출동 등의 이슈\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003ch3 id=\"daemonjson\"\u003edaemon.json\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003e/etc/docker/daemon.json\u003c/code\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-json\" data-lang=\"json\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e{\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#f92672\"\u003e\u0026#34;default-address-pools\u0026#34;\u003c/span\u003e: [\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      \u003cspan style=\"color:#f92672\"\u003e\u0026#34;base\u0026#34;\u003c/span\u003e: \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;10.1.0.0/16\u0026#34;\u003c/span\u003e,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      \u003cspan style=\"color:#f92672\"\u003e\u0026#34;size\u0026#34;\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003e24\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    }\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  ]\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e}\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cul\u003e\n\u003cli\u003eDocker restart\u003c/li\u003e\n\u003c/ul\u003e\n\u003cpre tabindex=\"0\"\u003e\u003ccode\u003e$ sudo systemctl restart docker\n\u003c/code\u003e\u003c/pre\u003e\u003ch4 id=\"반영-전\"\u003e반영 전\u003c/h4\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-sh\" data-lang=\"sh\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ ip a\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e...\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e4: docker0: \u0026lt;NO-CARRIER,BROADCAST,MULTICAST,UP\u0026gt; mtu \u003cspan style=\"color:#ae81ff\"\u003e1500\u003c/span\u003e qdisc noqueue state DOWN group default\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    link/ether 02:42:82:58:25:33 brd ff:ff:ff:ff:ff:ff\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    inet 172.17.0.1/16 brd 172.17.255.255 scope global docker0\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e       valid_lft forever preferred_lft forever\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e...\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch4 id=\"반영-후\"\u003e반영 후\u003c/h4\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-sh\" data-lang=\"sh\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ ip a\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e...\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e1519: docker0: \u0026lt;NO-CARRIER,BROADCAST,MULTICAST,UP\u0026gt; mtu \u003cspan style=\"color:#ae81ff\"\u003e1500\u003c/span\u003e qdisc noqueue state DOWN group default\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    link/ether 02:42:c0:d9:e2:56 brd ff:ff:ff:ff:ff:ff\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    inet 10.1.0.1/24 brd 10.1.0.255 scope global docker0\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e       valid_lft forever preferred_lft forever\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e...\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch2 id=\"data-root-directory-경로-변경\"\u003eData root directory 경로 변경\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003e기본 경로 : \u003ccode\u003e/var/lib/docker\u003c/code\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"daemonjson-1\"\u003edaemon.json\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003e/etc/docker/daemon.json\u003c/code\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-json\" data-lang=\"json\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e{\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#f92672\"\u003e\u0026#34;data-root\u0026#34;\u003c/span\u003e: \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;/docker\u0026#34;\u003c/span\u003e,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#f92672\"\u003e\u0026#34;default-address-pools\u0026#34;\u003c/span\u003e: [\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      \u003cspan style=\"color:#f92672\"\u003e\u0026#34;base\u0026#34;\u003c/span\u003e: \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;10.1.0.0/16\u0026#34;\u003c/span\u003e,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      \u003cspan style=\"color:#f92672\"\u003e\u0026#34;size\u0026#34;\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003e24\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    }\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  ]\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e}\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cpre tabindex=\"0\"\u003e\u003ccode\u003e$ sudo systemctl restart docker\n\n$ sudo ls -l /docker\n합계 0\ndrwx--x--x 4 root root 120  8월 18 11:51 buildkit\ndrwx------ 2 root root   6  8월 18 11:51 containers\ndrwx------ 3 root root  22  8월 18 11:51 image\ndrwxr-x--- 3 root root  19  8월 18 11:51 network\ndrwx------ 4 root root 112  8월 18 11:51 overlay2\ndrwx------ 4 root root  32  8월 18 11:51 plugins\ndrwx------ 2 root root   6  8월 18 11:51 runtimes\ndrwx------ 2 root root   6  8월 18 11:51 swarm\ndrwx------ 2 root root   6  8월 18 11:51 tmp\ndrwx------ 2 root root   6  8월 18 11:51 trust\ndrwx------ 2 root root  50  8월 18 11:51 volumes\n\u003c/code\u003e\u003c/pre\u003e\u003ch2 id=\"docker-log-용량-관리\"\u003eDocker log 용량 관리\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://docs.docker.com/config/containers/logging/json-file/\"\u003ehttps://docs.docker.com/config/containers/logging/json-file/\u003c/a\u003e{:target=\u0026quot;_blank\u0026quot;}\u003c/li\u003e\n\u003cli\u003e\u003cdata-root\u003e/containers/\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"daemonjson-2\"\u003edaemon.json\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003e/etc/docker/daemon.json\u003c/code\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-json\" data-lang=\"json\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e{\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#f92672\"\u003e\u0026#34;data-root\u0026#34;\u003c/span\u003e: \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;/docker\u0026#34;\u003c/span\u003e,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#f92672\"\u003e\u0026#34;log-opts\u0026#34;\u003c/span\u003e: {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003e\u0026#34;max-size\u0026#34;\u003c/span\u003e: \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;100m\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  },\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#f92672\"\u003e\u0026#34;default-address-pools\u0026#34;\u003c/span\u003e: [\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      \u003cspan style=\"color:#f92672\"\u003e\u0026#34;base\u0026#34;\u003c/span\u003e: \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;10.1.0.0/16\u0026#34;\u003c/span\u003e,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      \u003cspan style=\"color:#f92672\"\u003e\u0026#34;size\u0026#34;\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003e24\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    }\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  ]\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e}\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e","title":"Docker 운영 Tip (daemon.json)"},{"content":"Lightweight Kubernetes : The certified Kubernetes distribution built for IoT \u0026amp; Edge computing\n특징 https://k3s.io/{:target=\u0026quot;_blank\u0026quot;} Kubernetes의 경량화 버전으로 아래와 같은 특징 기본 설치만으로 바로 배포 테스트 가능 Overlay Netowrk(Flannel), Load balancer, Ingress(Traefik), CoreDNS 등이 기본 설치 됨 https://rancher.com/docs/k3s/latest/en/networking/{:target=\u0026quot;_blank\u0026quot;} etcd 대신 sqlite 운영 High Availability with an External DB High Availability with Embedded DB (Experimental) Master node schedulable uncordon 제외 가능 Worker node 필요 없음 (필요시 추가 가능) 사용 목적 Edge Computing 개발 테스트 및 스테이징 서버 구성 기타 어플리케이션 테스트 용 Master 설치 설치 curl -sfL https://get.k3s.io | sh - 실행으로 끝 systemd 관리 kubectl 설치 및 심볼릭 링크 설정 해줌 이미 kubectl 가 설치 되어 있는 경우는 심볼릭 링크 실패 # alias 필요시 아래 참고 $ alias kubectl=\u0026#39;sudo k3s kubectl\u0026#39; # Install $ curl -sfL https://get.k3s.io | sh - # master node $ kubectl get node NAME STATUS ROLES AGE VERSION centos1 Ready control-plane,master 37s v1.21.3+k3s1 $ kubectl get pod -A NAMESPACE NAME READY STATUS RESTARTS AGE kube-system local-path-provisioner-5ff76fc89d-wh9cg 1/1 Running 0 2m35s kube-system coredns-7448499f4d-2d7pb 1/1 Running 0 2m35s kube-system metrics-server-86cbb8457f-x9l6n 1/1 Running 0 2m35s kube-system helm-install-traefik-crd-w27q7 0/1 Completed 0 2m35s kube-system helm-install-traefik-2zllj 0/1 Completed 1 2m35s kube-system svclb-traefik-55qfd 2/2 Running 0 113s kube-system traefik-97b44b794-smzl9 1/1 Running 0 114s K8S 서비스 테스트 서비스 타입 : NodePort https://kubernetes.github.io/ingress-nginx/deploy/baremetal/{:target=\u0026quot;_blank\u0026quot;} apiVersion: apps/v1 kind: Deployment metadata: name: mvcapp spec: selector: matchLabels: app: mvcapp replicas: 2 # --replicas=2 옵션과 동일 template: metadata: labels: app: mvcapp spec: containers: - name: mvcapp image: cdecl/mvcapp:0.6 ports: - containerPort: 80 --- apiVersion: v1 kind: Service metadata: name: mvcapp spec: type: NodePort selector: app: mvcapp ports: - port: 80 targetPort: 80 $ kubectl apply -f mvcapp-deploy-service.yaml deployment.apps/mvcapp created service/mvcapp created $ kubectl get pod -A NAMESPACE NAME READY STATUS RESTARTS AGE kube-system local-path-provisioner-5ff76fc89d-wh9cg 1/1 Running 0 9m29s kube-system coredns-7448499f4d-2d7pb 1/1 Running 0 9m29s kube-system metrics-server-86cbb8457f-x9l6n 1/1 Running 0 9m29s kube-system helm-install-traefik-crd-w27q7 0/1 Completed 0 9m29s kube-system helm-install-traefik-2zllj 0/1 Completed 1 9m29s kube-system svclb-traefik-55qfd 2/2 Running 0 8m47s kube-system traefik-97b44b794-smzl9 1/1 Running 0 8m48s default mvcapp-79874d888c-6htvq 1/1 Running 0 62s default mvcapp-79874d888c-clslc 1/1 Running 0 62s $ kubectl get svc NAME TYPE CLUSTER-IP EXTERNAL-IP PORT(S) AGE kubernetes ClusterIP 10.43.0.1 \u0026lt;none\u0026gt; 443/TCP 10m mvcapp NodePort 10.43.36.139 \u0026lt;none\u0026gt; 80:32105/TCP 106s # Nodeport IP $ curl 10.43.36.139:80 * Project : Mvcapp * Version : 0.5 / net5.0 * Hostname : mvcapp-79874d888c-6htvq * RemoteAddr : 10.42.0.1 * X-Forwarded-For : * Request Count : 1 * User-Agent : curl/7.29.0 $ curl localhost:32105 * Project : Mvcapp * Version : 0.5 / net5.0 * Hostname : mvcapp-79874d888c-clslc * RemoteAddr : 10.42.0.1 * X-Forwarded-For : * Request Count : 1 * User-Agent : curl/7.29.0 Agent 추가 Master Node만으로도 테스트 가능하나 Scale 테스트시 Agent(Worker Node) 추가 가능 환경변수 세팅 : 필요시 참고 $ sudo cat /var/lib/rancher/k3s/server/node-token\t\u0026gt; ~/.node-token $ K3S_TOKEN=$(\u0026lt; ~/.node-token) $ HOST_IP=$(ip a | sed -rn \u0026#39;s/.*inet ([0-9\\.]+).*eth0/\\1/p\u0026#39;) Agent 등록 : 원격실행 OR Agent 머신에서 실행 HostIP, Token 정보 필요 (위 환경변수 세팅 참고) # Agent 머신에서 실행 $ curl -sfL https://get.k3s.io | K3S_URL=https://$HOST_IP:6443 K3S_TOKEN=$K3S_TOKEN sh - # Agent 추가 다른방법 $ ansible node01 -m shell -a \u0026#34;curl -sfL https://get.k3s.io | sh -s - agent --server https://$HOST_IP:6443 --token $K3S_TOKEN\u0026#34; -v K3S 삭제 ls /usr/local/bin/k3s-* | xargs -n1 sh - ","permalink":"https://cdecl.github.io/devops/k3s-overview/","summary":"\u003cp\u003eLightweight Kubernetes : The certified Kubernetes distribution built for IoT \u0026amp; Edge computing\u003c/p\u003e\n\u003ch3 id=\"특징\"\u003e특징\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://k3s.io/\"\u003ehttps://k3s.io/\u003c/a\u003e{:target=\u0026quot;_blank\u0026quot;}\u003c/li\u003e\n\u003cli\u003eKubernetes의 경량화 버전으로 아래와 같은 특징\n\u003cul\u003e\n\u003cli\u003e기본 설치만으로 바로 배포 테스트 가능\u003c/li\u003e\n\u003cli\u003eOverlay Netowrk(Flannel), Load balancer, Ingress(Traefik), CoreDNS 등이 기본 설치 됨\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://rancher.com/docs/k3s/latest/en/networking/\"\u003ehttps://rancher.com/docs/k3s/latest/en/networking/\u003c/a\u003e{:target=\u0026quot;_blank\u0026quot;}\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003eetcd 대신 sqlite 운영\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://rancher.com/docs/k3s/latest/en/installation/ha/\"\u003eHigh Availability with an External DB\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://rancher.com/docs/k3s/latest/en/installation/ha-embedded/\"\u003eHigh Availability with Embedded DB (Experimental)\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003eMaster node schedulable\n\u003cul\u003e\n\u003cli\u003euncordon 제외 가능\u003c/li\u003e\n\u003cli\u003eWorker node 필요 없음 (필요시 추가 가능)\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch4 id=\"사용-목적\"\u003e사용 목적\u003c/h4\u003e\n\u003cul\u003e\n\u003cli\u003eEdge Computing\u003c/li\u003e\n\u003cli\u003e개발 테스트 및 스테이징 서버 구성\u003c/li\u003e\n\u003cli\u003e기타 어플리케이션 테스트 용\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"master-설치\"\u003eMaster 설치\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e설치 \u003ccode\u003ecurl -sfL https://get.k3s.io | sh -\u003c/code\u003e 실행으로 끝\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003esystemd 관리 \u003c/code\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003ekubectl 설치 및 심볼릭 링크 설정 해줌\n\u003cul\u003e\n\u003cli\u003e이미 kubectl 가 설치 되어 있는 경우는 심볼릭 링크 실패\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-sh\" data-lang=\"sh\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# alias 필요시 아래 참고 \u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ alias kubectl\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;sudo k3s kubectl\u0026#39;\u003c/span\u003e \n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-sh\" data-lang=\"sh\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# Install\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ curl -sfL https://get.k3s.io | sh -\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# master node\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ kubectl get node\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eNAME      STATUS   ROLES                  AGE   VERSION\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ecentos1   Ready    control-plane,master   37s   v1.21.3+k3s1\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ kubectl get pod -A\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eNAMESPACE     NAME                                      READY   STATUS      RESTARTS   AGE\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ekube-system   local-path-provisioner-5ff76fc89d-wh9cg   1/1     Running     \u003cspan style=\"color:#ae81ff\"\u003e0\u003c/span\u003e          2m35s\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ekube-system   coredns-7448499f4d-2d7pb                  1/1     Running     \u003cspan style=\"color:#ae81ff\"\u003e0\u003c/span\u003e          2m35s\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ekube-system   metrics-server-86cbb8457f-x9l6n           1/1     Running     \u003cspan style=\"color:#ae81ff\"\u003e0\u003c/span\u003e          2m35s\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ekube-system   helm-install-traefik-crd-w27q7            0/1     Completed   \u003cspan style=\"color:#ae81ff\"\u003e0\u003c/span\u003e          2m35s\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ekube-system   helm-install-traefik-2zllj                0/1     Completed   \u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e          2m35s\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ekube-system   svclb-traefik-55qfd                       2/2     Running     \u003cspan style=\"color:#ae81ff\"\u003e0\u003c/span\u003e          113s\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ekube-system   traefik-97b44b794-smzl9                   1/1     Running     \u003cspan style=\"color:#ae81ff\"\u003e0\u003c/span\u003e          114s\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch3 id=\"k8s-서비스-테스트\"\u003eK8S 서비스 테스트\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e서비스 타입 : \u003ccode\u003eNodePort\u003c/code\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://kubernetes.github.io/ingress-nginx/deploy/baremetal/\"\u003ehttps://kubernetes.github.io/ingress-nginx/deploy/baremetal/\u003c/a\u003e{:target=\u0026quot;_blank\u0026quot;}\u003c/li\u003e\n\u003c/ul\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-yaml\" data-lang=\"yaml\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003eapiVersion\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003eapps/v1\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003ekind\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003eDeployment\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003emetadata\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#f92672\"\u003ename\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003emvcapp\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003espec\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#f92672\"\u003eselector\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003ematchLabels\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      \u003cspan style=\"color:#f92672\"\u003eapp\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003emvcapp\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#f92672\"\u003ereplicas\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003e2\u003c/span\u003e \u003cspan style=\"color:#75715e\"\u003e# --replicas=2 옵션과 동일 \u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#f92672\"\u003etemplate\u003c/span\u003e: \n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003emetadata\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      \u003cspan style=\"color:#f92672\"\u003elabels\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#f92672\"\u003eapp\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003emvcapp\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003espec\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      \u003cspan style=\"color:#f92672\"\u003econtainers\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      - \u003cspan style=\"color:#f92672\"\u003ename\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003emvcapp\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#f92672\"\u003eimage\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003ecdecl/mvcapp:0.6\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#f92672\"\u003eports\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        - \u003cspan style=\"color:#f92672\"\u003econtainerPort\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003e80\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e---\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003eapiVersion\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003ev1\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003ekind\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003eService\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003emetadata\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#f92672\"\u003ename\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003emvcapp\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003espec\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#f92672\"\u003etype\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003eNodePort\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#f92672\"\u003eselector\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003eapp\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003emvcapp\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#f92672\"\u003eports\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  - \u003cspan style=\"color:#f92672\"\u003eport\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003e80\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003etargetPort\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003e80\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-sh\" data-lang=\"sh\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ kubectl apply -f mvcapp-deploy-service.yaml\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003edeployment.apps/mvcapp created\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eservice/mvcapp created\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ kubectl get pod -A\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eNAMESPACE     NAME                                      READY   STATUS      RESTARTS   AGE\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ekube-system   local-path-provisioner-5ff76fc89d-wh9cg   1/1     Running     \u003cspan style=\"color:#ae81ff\"\u003e0\u003c/span\u003e          9m29s\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ekube-system   coredns-7448499f4d-2d7pb                  1/1     Running     \u003cspan style=\"color:#ae81ff\"\u003e0\u003c/span\u003e          9m29s\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ekube-system   metrics-server-86cbb8457f-x9l6n           1/1     Running     \u003cspan style=\"color:#ae81ff\"\u003e0\u003c/span\u003e          9m29s\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ekube-system   helm-install-traefik-crd-w27q7            0/1     Completed   \u003cspan style=\"color:#ae81ff\"\u003e0\u003c/span\u003e          9m29s\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ekube-system   helm-install-traefik-2zllj                0/1     Completed   \u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e          9m29s\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ekube-system   svclb-traefik-55qfd                       2/2     Running     \u003cspan style=\"color:#ae81ff\"\u003e0\u003c/span\u003e          8m47s\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ekube-system   traefik-97b44b794-smzl9                   1/1     Running     \u003cspan style=\"color:#ae81ff\"\u003e0\u003c/span\u003e          8m48s\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003edefault       mvcapp-79874d888c-6htvq                   1/1     Running     \u003cspan style=\"color:#ae81ff\"\u003e0\u003c/span\u003e          62s\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003edefault       mvcapp-79874d888c-clslc                   1/1     Running     \u003cspan style=\"color:#ae81ff\"\u003e0\u003c/span\u003e          62s\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ kubectl get svc\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eNAME         TYPE        CLUSTER-IP     EXTERNAL-IP   PORT\u003cspan style=\"color:#f92672\"\u003e(\u003c/span\u003eS\u003cspan style=\"color:#f92672\"\u003e)\u003c/span\u003e        AGE\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ekubernetes   ClusterIP   10.43.0.1      \u0026lt;none\u0026gt;        443/TCP        10m\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003emvcapp       NodePort    10.43.36.139   \u0026lt;none\u0026gt;        80:32105/TCP   106s\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# Nodeport IP\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ curl 10.43.36.139:80\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    * Project           : Mvcapp\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    * Version           : 0.5 / net5.0\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    * Hostname          : mvcapp-79874d888c-6htvq\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    * RemoteAddr        : 10.42.0.1\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    * X-Forwarded-For   :\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    * Request Count     : \u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    * User-Agent        : curl/7.29.0\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ curl localhost:32105\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    * Project           : Mvcapp\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    * Version           : 0.5 / net5.0\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    * Hostname          : mvcapp-79874d888c-clslc\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    * RemoteAddr        : 10.42.0.1\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    * X-Forwarded-For   :\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    * Request Count     : \u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    * User-Agent        : curl/7.29.0\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch3 id=\"agent-추가\"\u003eAgent 추가\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003eMaster Node만으로도 테스트 가능하나 Scale 테스트시 Agent(Worker Node) 추가 가능\u003c/li\u003e\n\u003cli\u003e환경변수 세팅 : 필요시 참고\u003c/li\u003e\n\u003c/ul\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-sh\" data-lang=\"sh\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ sudo cat /var/lib/rancher/k3s/server/node-token\t \u0026gt; ~/.node-token\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ K3S_TOKEN\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#66d9ef\"\u003e$(\u003c/span\u003e\u0026lt; ~/.node-token\u003cspan style=\"color:#66d9ef\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ HOST_IP\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#66d9ef\"\u003e$(\u003c/span\u003eip a | sed -rn \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;s/.*inet ([0-9\\.]+).*eth0/\\1/p\u0026#39;\u003c/span\u003e\u003cspan style=\"color:#66d9ef\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch4 id=\"agent-등록--원격실행-or-agent-머신에서-실행\"\u003eAgent 등록 : 원격실행 OR Agent 머신에서 실행\u003c/h4\u003e\n\u003cul\u003e\n\u003cli\u003eHostIP, Token 정보 필요 (위 환경변수 세팅 참고)\u003c/li\u003e\n\u003c/ul\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-sh\" data-lang=\"sh\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# Agent 머신에서 실행 \u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ curl -sfL https://get.k3s.io | K3S_URL\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003ehttps://$HOST_IP:6443 K3S_TOKEN\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e$K3S_TOKEN sh -\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# Agent 추가 다른방법 \u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ ansible node01 -m shell -a \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;curl -sfL https://get.k3s.io | sh -s - agent --server https://\u003c/span\u003e$HOST_IP\u003cspan style=\"color:#e6db74\"\u003e:6443 --token \u003c/span\u003e$K3S_TOKEN\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u003c/span\u003e -v\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003chr\u003e\n\u003ch3 id=\"k3s-삭제\"\u003eK3S 삭제\u003c/h3\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-sh\" data-lang=\"sh\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003els /usr/local/bin/k3s-* | xargs -n1 sh -\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e","title":"K3S Overview"},{"content":"MinIO 101\nIntroduction https://docs.min.io/{:target=\u0026quot;_blank\u0026quot;} Open Source, S3 Compatible, Enterprise Hardened and Really, Really Fast S3 Compatible : Client(mc), SDK (Java, Javascript, Python, Golang, .Net ..) high performance, distributed object storage system Private cloud object storage Getting Started MinID 는 Golang으로 제작되어 의존성 없는 단일 파일로 운영 가능 Docker의 경우 Alpine linux 로 배포 Downloads : https://min.io/download{:target=\u0026quot;_blank\u0026quot;} Quickstart Server https://docs.min.io/docs/minio-quickstart-guide.html{:target=\u0026quot;_blank\u0026quot;} # linux - server run $ wget https://dl.min.io/server/minio/release/linux-amd64/minio $ chmod +x minio $ export MINIO_ROOT_USER=minio $ export MINIO_ROOT_PASSWORD=miniopass # ./minio server --address 0.0.0.0:9000 /data $ ./minio server /data Status: 1 Online, 0 Offline. Endpoint: http://192.168.144.5:9000 http://127.0.0.1:9000 Browser Access: http://192.168.144.5:9000 http://127.0.0.1:9000 Object API (Amazon S3 compatible): Go: https://docs.min.io/docs/golang-client-quickstart-guide Java: https://docs.min.io/docs/java-client-quickstart-guide Python: https://docs.min.io/docs/python-client-quickstart-guide JavaScript: https://docs.min.io/docs/javascript-client-quickstart-guide .NET: https://docs.min.io/docs/dotnet-client-quickstart-guide docker-compose 9000 : 데이터 I/F 포트 9001 : Web Console Port ./data:/data : 데이터 영역 version: \u0026#39;3\u0026#39; services: minio: image: minio/minio command: server /data --console-address \u0026#34;:9001\u0026#34; container_name: minio environment: MINIO_ROOT_USER: minio MINIO_ROOT_PASSWORD: miniopass restart: always ports: - \u0026#34;9000:9000\u0026#34; - \u0026#34;9001:9001\u0026#34; volumes: - ./data:/data $ docker-compose up -d Creating network \u0026#34;minio_default\u0026#34; with the default driver Pulling minio (minio/minio:)... latest: Pulling from minio/minio c2c17d84f25a: Pull complete 46cdcde062b2: Pull complete c88923a3df19: Pull complete 1afaaeffed49: Pull complete 6c066ed8931e: Pull complete b889e4f29831: Pull complete 51b722521628: Pull complete Digest: sha256:ff4892c4248ad0ef73981d9f2e7b8a721dae45c55bdd25d7a23e1670540f36e1 Status: Downloaded newer image for minio/minio:latest Creating minio ... done Quickstart Client https://docs.min.io/docs/minio-client-quickstart-guide.html{:target=\u0026quot;_blank\u0026quot;} # linux # wget https://dl.min.io/client/mc/release/linux-amd64/mc $ curl -O https://dl.min.io/client/mc/release/linux-amd64/mc $ chmod +x mc $ mv ./mc /usr/bin/ $ mc --help # add server config $ mc alias set local http://localhost:9000 minio miniopass Added `local` successfully. # creates a new bucket $ minio mc mb local/backup Bucket created successfully `local/backup`. # copy $ mc cp docker-compose.yml local/backup docker-compose.yml: 322 B / 322 B ┃▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓┃ 30.39 KiB/s 0s # list $ mc ls local/backup [2021-08-18 11:01:50 KST] 322B docker-compose.yml # remove $ mc rm --recursive --force local/backup/ Removing `local/backup/docker-compose.yml`. MinIO Erasure Code https://docs.min.io/docs/minio-erasure-code-quickstart-guide.html{:target=\u0026quot;_blank\u0026quot;} Erasure Code 누락되거나 손상된 데이터를 재구성하는 수학적 알고리즘 Erasure code와 Checksums 사용하여 하드웨어 오류 및 자동 데이터 손상으로부터 데이터를 보호 중복 수준이 높으면 전체 드라이브의 최대 절반 (N/2)이 손실 되어도 데이터를 복구 가능 드라이브를 4, 6, 8, 10, 12, 14 또는 16 개의 erasure-coding sets 구성 (최소 4개) Run MinIO Server with Erasure Code 4 drives setup Drives를 물리적인 디스크로 구성하면 별도의 Raid 구성이 필요 없음 $ minio server /data1 /data2 /data3 /data4 docker-compose docker-compose.yml version: \u0026#39;3\u0026#39; services: minio1: image: minio/minio command: server /data1 /data2 /data3 /data4 --console-address \u0026#34;:9001\u0026#34; container_name: minio1 environment: MINIO_ROOT_USER: minio MINIO_ROOT_PASSWORD: miniopass restart: always ports: - \u0026#34;9000:9000\u0026#34; - \u0026#34;9001:9001\u0026#34; volumes: - ./data1:/data1 - ./data2:/data2 - ./data3:/data3 - ./data4:/data4 Distributed MinIO https://docs.min.io/docs/distributed-minio-quickstart-guide.html{:target=\u0026quot;_blank\u0026quot;} MinIO in distributed mode lets you pool multiple drives (even on different machines) into a single object storage server. 서버를 분리하여 다중 Drives를 지원 Data protection High availability Consistency Guarantees Run distributed MinIO MINIO_ROOT_USER and MINIO_ROOT_PASSWORD 같은 키로 구성 Erasure Code와 동일한 Drivers 정책으로 분산 Distributed MinIO 와 서버별로 Erasure Code 같이 적용 가능 docker-compose : docker로 4대 서버 시뮬레이션 version: \u0026#39;3\u0026#39; services: minio1: image: minio/minio command: server http://minio{1...4}:9000/data --console-address \u0026#34;:9001\u0026#34; container_name: minio1 environment: MINIO_ROOT_USER: minio MINIO_ROOT_PASSWORD: miniopass restart: always ports: - \u0026#34;9101:9000\u0026#34; - \u0026#34;9001:9001\u0026#34; volumes: - ./minio1:/data minio2: image: minio/minio command: server http://minio{1...4}:9000/data --console-address \u0026#34;:9001\u0026#34; container_name: minio2 environment: MINIO_ROOT_USER: minio MINIO_ROOT_PASSWORD: miniopass restart: always ports: - \u0026#34;9102:9000\u0026#34; volumes: - ./minio2:/data minio3: image: minio/minio command: server http://minio{1...4}:9000/data --console-address \u0026#34;:9001\u0026#34; container_name: minio3 environment: MINIO_ROOT_USER: minio MINIO_ROOT_PASSWORD: miniopass restart: always ports: - \u0026#34;9103:9000\u0026#34; volumes: - ./minio3:/data minio4: image: minio/minio command: server http://minio{1...4}:9000/data --console-address \u0026#34;:9001\u0026#34; container_name: minio4 environment: MINIO_ROOT_USER: minio MINIO_ROOT_PASSWORD: miniopass restart: always ports: - \u0026#34;9104:9000\u0026#34; volumes: - ./minio4:/data MinIO Admin Guide mc 명령어를 통해 Admin 기능을 수행 https://docs.min.io/docs/minio-admin-complete-guide.html{:target=\u0026quot;_blank\u0026quot;} service restart and stop all MinIO servers update update all MinIO servers info display MinIO server information user manage users group manage groups policy manage policies defined in the MinIO server config manage MinIO server configuration heal heal disks, buckets and objects on MinIO server profile generate profile data for debugging purposes top provide top like statistics for MinIO trace show http trace for MinIO server console show console logs for MinIO server prometheus manages prometheus config kms perform KMS management operations user - Manage users User 생성 및 삭제 ## create User $ mc admin user add myinfo cdecl cdeclpass ## remove User # mc admin user remove myinfo cdecl $ mc admin user info myinfo cdecl AccessKey: cdecl Status: enabled PolicyName: MemberOf: Policy $ mc admin policy set myinfo readonly user=cdecl Policy readonly is set on user `cdecl` $ mc admin policy set myinfo writeonly user=cdecl Policy writeonly is set on user `cdecl` $ mc admin policy set myinfo readwrite user=cdecl Policy readwrite is set on user `cdecl` heal - Heal disks, buckets and objects on MinIO server This command is only applicable for MinIO erasure coded setup (standalone and distributed). Erasure Code 상태에서 특정 디스크의 데이터가 문제가 있을 경우, 균등하게 데이터를 복구 해줌 $ mc admin heal -r myinfo - data1 2/2 objects; 403 MiB in 1s ┌────────┬───┬─────────────────────┐ │ Green │ 5 │ 100.0% ████████████ │ │ Yellow │ 0 │ 0.0% │ │ Red │ 0 │ 0.0% │ │ Grey │ 0 │ 0.0% │ └────────┴───┴─────────────────────┘ ","permalink":"https://cdecl.github.io/devops/minio-101/","summary":"\u003cp\u003eMinIO 101\u003c/p\u003e\n\u003ch2 id=\"introduction\"\u003eIntroduction\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://docs.min.io/\"\u003ehttps://docs.min.io/\u003c/a\u003e{:target=\u0026quot;_blank\u0026quot;}\u003c/li\u003e\n\u003cli\u003eOpen Source, S3 Compatible, Enterprise Hardened and Really, Really Fast\n\u003cul\u003e\n\u003cli\u003eS3 Compatible : Client(mc), SDK (Java, Javascript, Python, Golang, .Net ..)\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003ehigh performance, distributed object storage system\u003c/li\u003e\n\u003cli\u003ePrivate cloud object storage\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"getting-started\"\u003eGetting Started\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003eMinID 는 Golang으로 제작되어 의존성 없는 단일 파일로 운영 가능\u003c/li\u003e\n\u003cli\u003eDocker의 경우 Alpine linux 로 배포\u003c/li\u003e\n\u003cli\u003eDownloads : \u003ca href=\"https://min.io/download\"\u003ehttps://min.io/download\u003c/a\u003e{:target=\u0026quot;_blank\u0026quot;}\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"quickstart-server\"\u003eQuickstart Server\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://docs.min.io/docs/minio-quickstart-guide.html\"\u003ehttps://docs.min.io/docs/minio-quickstart-guide.html\u003c/a\u003e{:target=\u0026quot;_blank\u0026quot;}\u003c/li\u003e\n\u003c/ul\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-sh\" data-lang=\"sh\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# linux - server run\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ wget https://dl.min.io/server/minio/release/linux-amd64/minio\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ chmod +x minio\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ export MINIO_ROOT_USER\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003eminio\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ export MINIO_ROOT_PASSWORD\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003eminiopass\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# ./minio server --address 0.0.0.0:9000 /data\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ ./minio server /data\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eStatus:         \u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e Online, \u003cspan style=\"color:#ae81ff\"\u003e0\u003c/span\u003e Offline.\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eEndpoint:  http://192.168.144.5:9000  http://127.0.0.1:9000\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eBrowser Access:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e   http://192.168.144.5:9000  http://127.0.0.1:9000\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eObject API \u003cspan style=\"color:#f92672\"\u003e(\u003c/span\u003eAmazon S3 compatible\u003cspan style=\"color:#f92672\"\u003e)\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e   Go:         https://docs.min.io/docs/golang-client-quickstart-guide\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e   Java:       https://docs.min.io/docs/java-client-quickstart-guide\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e   Python:     https://docs.min.io/docs/python-client-quickstart-guide\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e   JavaScript: https://docs.min.io/docs/javascript-client-quickstart-guide\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e   .NET:       https://docs.min.io/docs/dotnet-client-quickstart-guide\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cul\u003e\n\u003cli\u003edocker-compose\n\u003cul\u003e\n\u003cli\u003e9000 : 데이터 I/F 포트\u003c/li\u003e\n\u003cli\u003e9001 : Web Console Port\u003c/li\u003e\n\u003cli\u003e./data:/data : 데이터 영역\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-yml\" data-lang=\"yml\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003eversion\u003c/span\u003e: \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;3\u0026#39;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003eservices\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#f92672\"\u003eminio\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003eimage\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003eminio/minio\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003ecommand\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003eserver /data --console-address \u0026#34;:9001\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003econtainer_name\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003eminio\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003eenvironment\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      \u003cspan style=\"color:#f92672\"\u003eMINIO_ROOT_USER\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003eminio\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      \u003cspan style=\"color:#f92672\"\u003eMINIO_ROOT_PASSWORD\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003eminiopass\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003erestart\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003ealways\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003eports\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      - \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;9000:9000\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      - \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;9001:9001\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003evolumes\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      - \u003cspan style=\"color:#ae81ff\"\u003e./data:/data\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-sh\" data-lang=\"sh\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ docker-compose up -d \n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eCreating network \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;minio_default\u0026#34;\u003c/span\u003e with the default driver\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ePulling minio \u003cspan style=\"color:#f92672\"\u003e(\u003c/span\u003eminio/minio:\u003cspan style=\"color:#f92672\"\u003e)\u003c/span\u003e...\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003elatest: Pulling from minio/minio\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ec2c17d84f25a: Pull complete\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e46cdcde062b2: Pull complete\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ec88923a3df19: Pull complete\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e1afaaeffed49: Pull complete\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e6c066ed8931e: Pull complete\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eb889e4f29831: Pull complete\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e51b722521628: Pull complete\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eDigest: sha256:ff4892c4248ad0ef73981d9f2e7b8a721dae45c55bdd25d7a23e1670540f36e1\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eStatus: Downloaded newer image \u003cspan style=\"color:#66d9ef\"\u003efor\u003c/span\u003e minio/minio:latest\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eCreating minio ... \u003cspan style=\"color:#66d9ef\"\u003edone\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch3 id=\"quickstart-client\"\u003eQuickstart Client\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://docs.min.io/docs/minio-client-quickstart-guide.html\"\u003ehttps://docs.min.io/docs/minio-client-quickstart-guide.html\u003c/a\u003e{:target=\u0026quot;_blank\u0026quot;}\u003c/li\u003e\n\u003c/ul\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-sh\" data-lang=\"sh\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# linux \u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# wget https://dl.min.io/client/mc/release/linux-amd64/mc\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ curl -O https://dl.min.io/client/mc/release/linux-amd64/mc\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ chmod +x mc\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ mv ./mc /usr/bin/ \n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ mc --help\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# add server config \u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ mc alias set local http://localhost:9000 minio miniopass\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eAdded \u003cspan style=\"color:#e6db74\"\u003e`\u003c/span\u003elocal\u003cspan style=\"color:#e6db74\"\u003e`\u003c/span\u003e successfully.\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# creates a new bucket\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ minio mc mb local/backup\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eBucket created successfully \u003cspan style=\"color:#e6db74\"\u003e`\u003c/span\u003elocal/backup\u003cspan style=\"color:#e6db74\"\u003e`\u003c/span\u003e.\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# copy\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ mc cp docker-compose.yml local/backup\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003edocker-compose.yml:   \u003cspan style=\"color:#ae81ff\"\u003e322\u003c/span\u003e B / \u003cspan style=\"color:#ae81ff\"\u003e322\u003c/span\u003e B ┃▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓┃ 30.39 KiB/s 0s\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# list \u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ mc ls local/backup\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003e[\u003c/span\u003e2021-08-18 11:01:50 KST\u003cspan style=\"color:#f92672\"\u003e]\u003c/span\u003e   322B docker-compose.yml\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# remove \u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ mc rm --recursive --force local/backup/\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eRemoving \u003cspan style=\"color:#e6db74\"\u003e`\u003c/span\u003elocal/backup/docker-compose.yml\u003cspan style=\"color:#e6db74\"\u003e`\u003c/span\u003e.\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003chr\u003e\n\u003ch2 id=\"minio-erasure-code\"\u003eMinIO Erasure Code\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://docs.min.io/docs/minio-erasure-code-quickstart-guide.html\"\u003ehttps://docs.min.io/docs/minio-erasure-code-quickstart-guide.html\u003c/a\u003e{:target=\u0026quot;_blank\u0026quot;}\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"erasure-code\"\u003eErasure Code\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e누락되거나 손상된 데이터를 재구성하는 수학적 알고리즘\u003c/li\u003e\n\u003cli\u003eErasure code와 Checksums 사용하여 하드웨어 오류 및 자동 데이터 손상으로부터 데이터를 보호\u003c/li\u003e\n\u003cli\u003e중복 수준이 높으면 전체 드라이브의 최대 절반 (N/2)이 손실 되어도 데이터를 복구 가능\u003c/li\u003e\n\u003cli\u003e드라이브를 4, 6, 8, 10, 12, 14 또는 16 개의 erasure-coding sets 구성 (최소 4개)\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"run-minio-server-with-erasure-code\"\u003eRun MinIO Server with Erasure Code\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e4 drives setup\u003c/li\u003e\n\u003cli\u003eDrives를 물리적인 디스크로 구성하면 별도의 Raid 구성이 필요 없음\u003c/li\u003e\n\u003c/ul\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-sh\" data-lang=\"sh\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ minio server /data1 /data2 /data3 /data4\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch4 id=\"docker-compose\"\u003edocker-compose\u003c/h4\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"docker-compose/erasure-code/docker-compose.yml\"\u003edocker-compose.yml\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-yml\" data-lang=\"yml\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003eversion\u003c/span\u003e: \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;3\u0026#39;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003eservices\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#f92672\"\u003eminio1\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003eimage\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003eminio/minio\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003ecommand\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003eserver /data1 /data2 /data3 /data4 --console-address \u0026#34;:9001\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003econtainer_name\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003eminio1\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003eenvironment\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      \u003cspan style=\"color:#f92672\"\u003eMINIO_ROOT_USER\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003eminio\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      \u003cspan style=\"color:#f92672\"\u003eMINIO_ROOT_PASSWORD\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003eminiopass\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003erestart\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003ealways\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003eports\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      - \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;9000:9000\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      - \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;9001:9001\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003evolumes\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      - \u003cspan style=\"color:#ae81ff\"\u003e./data1:/data1\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      - \u003cspan style=\"color:#ae81ff\"\u003e./data2:/data2\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      - \u003cspan style=\"color:#ae81ff\"\u003e./data3:/data3\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      - \u003cspan style=\"color:#ae81ff\"\u003e./data4:/data4\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch2 id=\"distributed-minio\"\u003eDistributed MinIO\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://docs.min.io/docs/distributed-minio-quickstart-guide.html\"\u003ehttps://docs.min.io/docs/distributed-minio-quickstart-guide.html\u003c/a\u003e{:target=\u0026quot;_blank\u0026quot;}\u003c/li\u003e\n\u003cli\u003eMinIO in distributed mode lets you pool multiple drives (even on different machines) into a single object storage server.\u003c/li\u003e\n\u003cli\u003e서버를 분리하여 다중 Drives를 지원\n\u003cul\u003e\n\u003cli\u003eData protection\u003c/li\u003e\n\u003cli\u003eHigh availability\u003c/li\u003e\n\u003cli\u003eConsistency Guarantees\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"run-distributed-minio\"\u003eRun distributed MinIO\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003eMINIO_ROOT_USER and MINIO_ROOT_PASSWORD 같은 키로 구성\u003c/li\u003e\n\u003cli\u003eErasure Code와 동일한 Drivers 정책으로 분산\u003c/li\u003e\n\u003cli\u003eDistributed MinIO 와 서버별로 Erasure Code 같이 적용 가능\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch4 id=\"docker-compose--docker로-4대-서버-시뮬레이션\"\u003edocker-compose : docker로 4대 서버 시뮬레이션\u003c/h4\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-yml\" data-lang=\"yml\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003eversion\u003c/span\u003e: \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;3\u0026#39;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003eservices\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#f92672\"\u003eminio1\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003eimage\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003eminio/minio\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003ecommand\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003eserver http://minio{1...4}:9000/data --console-address \u0026#34;:9001\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003econtainer_name\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003eminio1\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003eenvironment\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      \u003cspan style=\"color:#f92672\"\u003eMINIO_ROOT_USER\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003eminio\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      \u003cspan style=\"color:#f92672\"\u003eMINIO_ROOT_PASSWORD\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003eminiopass\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003erestart\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003ealways\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003eports\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      - \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;9101:9000\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      - \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;9001:9001\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003evolumes\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      - \u003cspan style=\"color:#ae81ff\"\u003e./minio1:/data\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#f92672\"\u003eminio2\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003eimage\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003eminio/minio\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003ecommand\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003eserver http://minio{1...4}:9000/data --console-address \u0026#34;:9001\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003econtainer_name\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003eminio2\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003eenvironment\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      \u003cspan style=\"color:#f92672\"\u003eMINIO_ROOT_USER\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003eminio\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      \u003cspan style=\"color:#f92672\"\u003eMINIO_ROOT_PASSWORD\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003eminiopass\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003erestart\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003ealways\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003eports\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      - \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;9102:9000\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003evolumes\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      - \u003cspan style=\"color:#ae81ff\"\u003e./minio2:/data\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#f92672\"\u003eminio3\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003eimage\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003eminio/minio\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003ecommand\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003eserver http://minio{1...4}:9000/data --console-address \u0026#34;:9001\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003econtainer_name\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003eminio3\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003eenvironment\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      \u003cspan style=\"color:#f92672\"\u003eMINIO_ROOT_USER\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003eminio\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      \u003cspan style=\"color:#f92672\"\u003eMINIO_ROOT_PASSWORD\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003eminiopass\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003erestart\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003ealways\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003eports\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      - \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;9103:9000\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003evolumes\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      - \u003cspan style=\"color:#ae81ff\"\u003e./minio3:/data\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#f92672\"\u003eminio4\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003eimage\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003eminio/minio\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003ecommand\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003eserver http://minio{1...4}:9000/data --console-address \u0026#34;:9001\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003econtainer_name\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003eminio4\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003eenvironment\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      \u003cspan style=\"color:#f92672\"\u003eMINIO_ROOT_USER\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003eminio\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      \u003cspan style=\"color:#f92672\"\u003eMINIO_ROOT_PASSWORD\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003eminiopass\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003erestart\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003ealways\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003eports\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      - \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;9104:9000\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003evolumes\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      - \u003cspan style=\"color:#ae81ff\"\u003e./minio4:/data\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch2 id=\"minio-admin-guide\"\u003eMinIO Admin Guide\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003emc 명령어를 통해 Admin 기능을 수행\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://docs.min.io/docs/minio-admin-complete-guide.html\"\u003ehttps://docs.min.io/docs/minio-admin-complete-guide.html\u003c/a\u003e{:target=\u0026quot;_blank\u0026quot;}\u003c/li\u003e\n\u003c/ul\u003e\n\u003cpre tabindex=\"0\"\u003e\u003ccode\u003eservice     restart and stop all MinIO servers\nupdate      update all MinIO servers\ninfo        display MinIO server information\nuser        manage users\ngroup       manage groups\npolicy      manage policies defined in the MinIO server\nconfig      manage MinIO server configuration\nheal        heal disks, buckets and objects on MinIO server\nprofile     generate profile data for debugging purposes\ntop         provide top like statistics for MinIO\ntrace       show http trace for MinIO server\nconsole     show console logs for MinIO server\nprometheus  manages prometheus config\nkms         perform KMS management operations\n\u003c/code\u003e\u003c/pre\u003e\u003ch3 id=\"user---manage-users\"\u003euser - Manage users\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003eUser 생성 및 삭제\u003c/li\u003e\n\u003c/ul\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-sh\" data-lang=\"sh\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e## create User\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ mc admin user add myinfo cdecl cdeclpass\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e## remove User\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# mc admin user remove myinfo cdecl\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ mc admin user info myinfo cdecl             \n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eAccessKey: cdecl                              \n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eStatus: enabled                               \n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ePolicyName:                                   \n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eMemberOf:                                     \n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cul\u003e\n\u003cli\u003ePolicy\u003c/li\u003e\n\u003c/ul\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-sh\" data-lang=\"sh\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ mc admin policy set myinfo readonly user\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003ecdecl\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ePolicy readonly is set on user \u003cspan style=\"color:#e6db74\"\u003e`\u003c/span\u003ecdecl\u003cspan style=\"color:#e6db74\"\u003e`\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ mc admin policy set myinfo writeonly user\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003ecdecl\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ePolicy writeonly is set on user \u003cspan style=\"color:#e6db74\"\u003e`\u003c/span\u003ecdecl\u003cspan style=\"color:#e6db74\"\u003e`\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ mc admin policy set myinfo readwrite user\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003ecdecl\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ePolicy readwrite is set on user \u003cspan style=\"color:#e6db74\"\u003e`\u003c/span\u003ecdecl\u003cspan style=\"color:#e6db74\"\u003e`\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch3 id=\"heal---heal-disks-buckets-and-objects-on-minio-server\"\u003eheal - Heal disks, buckets and objects on MinIO server\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003eThis command is only applicable for MinIO erasure coded setup (standalone and distributed).\u003c/li\u003e\n\u003cli\u003eErasure Code 상태에서 특정 디스크의 데이터가 문제가 있을 경우, 균등하게 데이터를 복구 해줌\u003c/li\u003e\n\u003c/ul\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-sh\" data-lang=\"sh\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ mc admin heal -r myinfo\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e -  data1\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    2/2 objects; \u003cspan style=\"color:#ae81ff\"\u003e403\u003c/span\u003e MiB in 1s\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    ┌────────┬───┬─────────────────────┐\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    │ Green  │ \u003cspan style=\"color:#ae81ff\"\u003e5\u003c/span\u003e │ 100.0% ████████████ │\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    │ Yellow │ \u003cspan style=\"color:#ae81ff\"\u003e0\u003c/span\u003e │   0.0%              │\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    │ Red    │ \u003cspan style=\"color:#ae81ff\"\u003e0\u003c/span\u003e │   0.0%              │\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    │ Grey   │ \u003cspan style=\"color:#ae81ff\"\u003e0\u003c/span\u003e │   0.0%              │\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    └────────┴───┴─────────────────────┘\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e","title":"MinIO 101"},{"content":"MySQL 8 Docker 실행 및 백업, 복원\nMySQL Docker 실행 docker-compose data:/var/lib/mysql : Data 파일 conf.d:/etc/mysql/conf.d : my.cnf 등의 설정파일 root:/root : login-path 사용시 ports : \u0026ldquo;3380:3306\u0026rdquo; : mysql port \u0026ldquo;33800:33060\u0026rdquo; : mysql-shell port version: \u0026#39;3\u0026#39; services: db: image: mysql:8 container_name: mysql8 command: --default-authentication-plugin=mysql_native_password restart: always environment: MYSQL_ROOT_PASSWORD: passwd TZ: Asia/Seoul ports: - \u0026#34;3380:3306\u0026#34; - \u0026#34;33800:33060\u0026#34; volumes: - data:/var/lib/mysql - conf.d:/etc/mysql/conf.d - root:/root volumes: data: conf.d: root: $ docker-compose up -d Creating network \u0026#34;mysql_default\u0026#34; with the default driver Creating volume \u0026#34;mysql_data\u0026#34; with default driver Creating volume \u0026#34;mysql_conf.d\u0026#34; with default driver Creating volume \u0026#34;mysql_root\u0026#34; with default driver Pulling db (mysql:8)... 8: Pulling from library/mysql e1acddbe380c: Pull complete bed879327370: Pull complete 03285f80bafd: Pull complete ccc17412a00a: Pull complete 1f556ecc09d1: Pull complete adc5528e468d: Pull complete 1afc286d5d53: Pull complete 6c724a59adff: Pull complete 0f2345f8b0a3: Pull complete c8461a25b23b: Pull complete 3adb49279bed: Pull complete 77f22cd6c363: Pull complete Digest: sha256:d45561a65aba6edac77be36e0a53f0c1fba67b951cb728348522b671ad63f926 Status: Downloaded newer image for mysql:8 Creating mysql8 ... done 연결 테스트 docker -t 옵션 제외 : the input device is not a TTY # echo \u0026#39;select host, user from mysql.user\u0026#39; | docker exec -i mysql8 mysql -uroot -ppasswd $ docker exec -i mysql8 mysql -uroot -ppasswd \u0026lt;\u0026lt;\u0026lt; \u0026#39;select host, user from mysql.user\u0026#39; mysql: [Warning] Using a password on the command line interface can be insecure. host user % root localhost mysql.infoschema localhost mysql.session localhost mysql.sys localhost root mysql: [Warning] Using a password on the command line interface can be insecure.\nlogin-path 설정 password를 노출 안하고 batch 등의 실행시 유용 # mysql_config_editor 사용 $ docker exec -it mysql8 mysql_config_editor set --login-path=local --host=localhost --user=root -p Enter password: xxxxxxxx # login 정보 저장 $ docker exec mysql8 ls -la /root/.mylogin.cnf -rw------- 1 root root 136 Aug 18 09:19 /root/.mylogin.cnf # docker exec -i mysql8 mysql -uroot -ppasswd \u0026lt;\u0026lt;\u0026lt; \u0026#39;select host, user from mysql.user\u0026#39; $ docker exec -i mysql8 mysql --login-path=local \u0026lt; \u0026lt;(echo \u0026#39;select host, user from mysql.user\u0026#39;) host user % root localhost mysql.infoschema localhost mysql.session localhost mysql.sys localhost root MySQL Docker Restore $ docker exec -i mysql8 mysql --login-path=local \u0026lt; backup.sql MySQL Docker Backup $ docker exec -i mysql8 mysqldump --login-path=local --column-statistics=0 \\ --single-transaction --routines --all-databases \u0026gt; backup_to.sql MySQL 8, Json Type 지원 Document DB 로서의 활용 가능 Json Type 지원 MySQL 5.7.8 버전부터 Json 타입을 지원\nhttps://mysqlserverteam.com/indexing-json-documents-via-virtual-columns/{:target=\u0026quot;_blank\u0026quot;} https://dev.mysql.com/doc/refman/8.0/en/json-function-reference.html{:target=\u0026quot;_blank\u0026quot;} Json 지원 함수\nJSON_EXTRACT 함수 : Json 항목에서 Column 값을 평가 (operator -\u0026gt; 매핑) JSON_UNQUOTE 함수 : Json 항목에서 \u0026quot;\u0026quot; (QUOTE)를 제거 Json 지원 함수 매핑 Operator\nJSON_EXTRACT(doc, \u0026ldquo;$.key\u0026rdquo;) : doc-\u0026gt;\u0026quot;$.key\u0026quot; JSON_UNQUOTE(JSON_EXTRACT(doc, \u0026ldquo;$.key\u0026rdquo;)) : doc-\u0026raquo;\u0026quot;$.key\u0026quot; doc ------ {\u0026#34;id\u0026#34;: \u0026#34;20180601-001\u0026#34;, \u0026#34;CPU\u0026#34;: \u0026#34;Power7 3.808Ghz (11core)\u0026#34;, \u0026#34;UNIT\u0026#34;: \u0026#34;12\u0026#34;, ...} SELECT -- 같음 \u0026#34;Power7 3.808Ghz (11core)\u0026#34; JSON_EXTRACT(doc, \u0026#39;$.CPU\u0026#39;), doc-\u0026gt;\u0026#39;$.CPU\u0026#39; -- 같음 Power7 3.808Ghz (11core) JSON_UNQUOTE(JSON_EXTRACT(doc, \u0026#39;$.CPU\u0026#39;)), doc-\u0026gt;\u0026gt;\u0026#39;$.CPU\u0026#39; from asset i; MySQL Shell MySQL 8 MySQL Shell 추가 기존 MySQL CLI 기능을 포함하면서 별도로 Javascript 나 Python 을 통해서 Scripting 을 할 수 있고, 기본 포트 3306 에 33060 가 추가되서 확장된 \u0026ndash;mysqlx 프로토콜로 접속하여 더 많은 기능 활용 가능 https://dev.mysql.com/doc/mysql-shell/8.0/en/{:target=\u0026quot;_blank\u0026quot;} # centos $ sudo yum install mysql-shell $ mysqlsh --version mysqlsh Ver 8.0.19 for Linux on x86_64 - for MySQL 8.0.19 (MySQL Community Server (GPL)) Json Import 지원 MySQL Shell 을 통해서 Json(ndjson) 파일을 Import 할수 있는 기능이 추가 ES의 Bulk Insert 와 유사 기능 # x pro # glass database 에 itasset 이라는 Table 을 만들고 해당 내용을 Import $ mysqlsh --mysqlx cdecl@localhost:33060/glass --import asset.json # collection (table) 명을 지정 가능 $ mysqlsh --mysqlx cdecl@localhost:33060/glass --import asset.json --collection=asset_db 아래와 같은 스키마로 테이블이 생성 됩니다. +--------------+---------------+------+-----+---------+-------------------+ | Field | Type | Null | Key | Default | Extra | +--------------+---------------+------+-----+---------+-------------------+ | doc | json | YES | | NULL | | | _id | varbinary(32) | NO | PRI | NULL | STORED GENERATED | | _json_schema | json | YES | | NULL | VIRTUAL GENERATED | +--------------+---------------+------+-----+---------+-------------------+ Json Type Indexing 필드를 추가후 해당 필드를 Json 데이터의 특정 필드에 매핑(이라기 보다 트리거 같음) 할수 있음 -- 필드를 추가하고 id_index 와 \u0026#34;$.id\u0026#34; 값을 매핑 ALTER TABLE asset ADD id_index VARCHAR(30) AS (doc-\u0026gt;\u0026gt;\u0026#34;$.id\u0026#34;); -- id_index 에 index 추가 ALTER TABLE asset ADD INDEX (id_index); ","permalink":"https://cdecl.github.io/devops/mysql8-docker/","summary":"\u003cp\u003eMySQL 8 Docker 실행 및 백업, 복원\u003c/p\u003e\n\u003ch2 id=\"mysql-docker-실행\"\u003eMySQL Docker 실행\u003c/h2\u003e\n\u003ch3 id=\"docker-compose\"\u003edocker-compose\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003edata:/var/lib/mysql : Data 파일\u003c/li\u003e\n\u003cli\u003econf.d:/etc/mysql/conf.d : my.cnf 등의 설정파일\u003c/li\u003e\n\u003cli\u003eroot:/root : login-path 사용시\u003c/li\u003e\n\u003cli\u003eports :\n\u003cul\u003e\n\u003cli\u003e\u0026ldquo;3380:3306\u0026rdquo; : mysql port\u003c/li\u003e\n\u003cli\u003e\u0026ldquo;33800:33060\u0026rdquo; : mysql-shell port\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-yaml\" data-lang=\"yaml\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003eversion\u003c/span\u003e: \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;3\u0026#39;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003eservices\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#f92672\"\u003edb\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003eimage\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003emysql:8\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003econtainer_name\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003emysql8\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003ecommand\u003c/span\u003e: --\u003cspan style=\"color:#ae81ff\"\u003edefault-authentication-plugin=mysql_native_password \u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003erestart\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003ealways\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003eenvironment\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      \u003cspan style=\"color:#f92672\"\u003eMYSQL_ROOT_PASSWORD\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003epasswd\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      \u003cspan style=\"color:#f92672\"\u003eTZ\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003eAsia/Seoul\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003eports\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      - \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;3380:3306\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      - \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;33800:33060\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003evolumes\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      - \u003cspan style=\"color:#ae81ff\"\u003edata:/var/lib/mysql\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      - \u003cspan style=\"color:#ae81ff\"\u003econf.d:/etc/mysql/conf.d\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      - \u003cspan style=\"color:#ae81ff\"\u003eroot:/root\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003evolumes\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#f92672\"\u003edata\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#f92672\"\u003econf.d\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#f92672\"\u003eroot\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-sh\" data-lang=\"sh\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$  docker-compose up -d\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eCreating network \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;mysql_default\u0026#34;\u003c/span\u003e with the default driver\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eCreating volume \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;mysql_data\u0026#34;\u003c/span\u003e with default driver\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eCreating volume \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;mysql_conf.d\u0026#34;\u003c/span\u003e with default driver\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eCreating volume \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;mysql_root\u0026#34;\u003c/span\u003e with default driver\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ePulling db \u003cspan style=\"color:#f92672\"\u003e(\u003c/span\u003emysql:8\u003cspan style=\"color:#f92672\"\u003e)\u003c/span\u003e...\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e8: Pulling from library/mysql\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ee1acddbe380c: Pull complete\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ebed879327370: Pull complete\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e03285f80bafd: Pull complete\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eccc17412a00a: Pull complete\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e1f556ecc09d1: Pull complete\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eadc5528e468d: Pull complete\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e1afc286d5d53: Pull complete\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e6c724a59adff: Pull complete\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e0f2345f8b0a3: Pull complete\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ec8461a25b23b: Pull complete\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e3adb49279bed: Pull complete\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e77f22cd6c363: Pull complete\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eDigest: sha256:d45561a65aba6edac77be36e0a53f0c1fba67b951cb728348522b671ad63f926\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eStatus: Downloaded newer image \u003cspan style=\"color:#66d9ef\"\u003efor\u003c/span\u003e mysql:8\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eCreating mysql8 ... \u003cspan style=\"color:#66d9ef\"\u003edone\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch3 id=\"연결-테스트\"\u003e연결 테스트\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003edocker \u003ccode\u003e-t\u003c/code\u003e 옵션 제외 : the input device is not a TTY\u003c/li\u003e\n\u003c/ul\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-sh\" data-lang=\"sh\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e#  echo \u0026#39;select host, user from mysql.user\u0026#39; | docker exec -i mysql8 mysql -uroot -ppasswd\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ docker exec -i mysql8 mysql -uroot -ppasswd \u003cspan style=\"color:#f92672\"\u003e\u0026lt;\u0026lt;\u0026lt;\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;select host, user from mysql.user\u0026#39;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003emysql: \u003cspan style=\"color:#f92672\"\u003e[\u003c/span\u003eWarning\u003cspan style=\"color:#f92672\"\u003e]\u003c/span\u003e Using a password on the command line interface can be insecure.\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ehost    user\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e%       root\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003elocalhost       mysql.infoschema\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003elocalhost       mysql.session\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003elocalhost       mysql.sys\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003elocalhost       root\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cblockquote\u003e\n\u003cp\u003emysql: [Warning] Using a password on the command line interface can be insecure.\u003c/p\u003e","title":"MySQL 8 Docker Basic, Json Type 지원"},{"content":"ElasticSearch to MySQL ETL\n준비 curl : Http 기반 ElasticSearch Query (SQL) jq : ElasticSearch 결과 JSON 변환 (NDJSON) mysql-shell : MySQL 데이터 Bulk Insert (Json 타입의 Table) ElasticSearch Query curl 쿼리 후, 해당 내용 JSON 저장 $ curl -s -XPOST -H \u0026#39;content-type: application/json\u0026#39; \\ -d \u0026#39;{\u0026#34;query\u0026#34; : \u0026#34;select timestamp, activesession, loadavg, processor from \\\u0026#34;mysql-perf-*\\\u0026#34; limit 100\u0026#34;}\u0026#39; \\ \u0026#39;http://elasticsearch-server:7200/_sql\u0026#39; \u0026gt; result.json $ cat result.json | jq . { \u0026#34;columns\u0026#34;: [ { \u0026#34;name\u0026#34;: \u0026#34;timestamp\u0026#34;, \u0026#34;type\u0026#34;: \u0026#34;datetime\u0026#34; }, { \u0026#34;name\u0026#34;: \u0026#34;activesession\u0026#34;, \u0026#34;type\u0026#34;: \u0026#34;long\u0026#34; }, { \u0026#34;name\u0026#34;: \u0026#34;loadavg\u0026#34;, \u0026#34;type\u0026#34;: \u0026#34;float\u0026#34; }, { \u0026#34;name\u0026#34;: \u0026#34;processor\u0026#34;, \u0026#34;type\u0026#34;: \u0026#34;float\u0026#34; } ], \u0026#34;rows\u0026#34;: [ [ \u0026#34;2021-05-02T03:40:47.000Z\u0026#34;, 2, 0.019999999552965164, 0 ], [ \u0026#34;2021-06-01T00:04:24.000Z\u0026#34;, 4, 2.0399999618530273, 14.579999923706055 ], ... NDJSON 형태로 변환 jq -c : compact instead of pretty-printed output $ cat result.json | \\ jq -c \u0026#39; { \u0026#34;col\u0026#34;: [.columns[] | .name], \u0026#34;row\u0026#34; : .rows[] } | [.col, .row] | transpose | map({ (.[0]): .[1] }) | add \u0026#39; \u0026gt; result_t.json $ cat result_t.json | jq . { \u0026#34;timestamp\u0026#34;: \u0026#34;2021-05-02T03:40:47.000Z\u0026#34;, \u0026#34;activesession\u0026#34;: 2, \u0026#34;loadavg\u0026#34;: 0.019999999552965164, \u0026#34;processor\u0026#34;: 0 } { \u0026#34;timestamp\u0026#34;: \u0026#34;2021-06-22T05:25:24.000Z\u0026#34;, \u0026#34;activesession\u0026#34;: 3, \u0026#34;loadavg\u0026#34;: 1.809999942779541, \u0026#34;processor\u0026#34;: 4.599999904632568 } { \u0026#34;timestamp\u0026#34;: \u0026#34;2021-07-01T00:04:21.000Z\u0026#34;, \u0026#34;activesession\u0026#34;: 1, \u0026#34;loadavg\u0026#34;: 0.2800000011920929, \u0026#34;processor\u0026#34;: 0.41999998688697815 MySQL JSON Import mysql-shell 테이블내 doc json 필드 생성 및 JSON 데이터 Row 단위 적재 # truncate table $ mysqlsh --sql user@mysql-server:3360/dbname -p\u0026lt;PASSWD\u0026gt; \\ --execute \u0026#39;truncate table data_table ;\u0026#39; # import $ mysqlsh --mysqlx user@mysql-server:3360/dbname -p\u0026lt;PASSWD\u0026gt; \\ --import result_t.json --collection=data_table ","permalink":"https://cdecl.github.io/devops/elasticsearch-to-mysql/","summary":"\u003cp\u003eElasticSearch to MySQL ETL\u003c/p\u003e\n\u003ch2 id=\"준비\"\u003e준비\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003ecurl\u003c/code\u003e : Http 기반 ElasticSearch Query (SQL)\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003ejq\u003c/code\u003e : ElasticSearch 결과 JSON 변환 (NDJSON)\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003emysql-shell\u003c/code\u003e : MySQL 데이터 Bulk Insert (Json 타입의 Table)\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"elasticsearch-query--curl\"\u003eElasticSearch Query  \u003ccode\u003ecurl\u003c/code\u003e\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e쿼리 후, 해당 내용 JSON 저장\u003c/li\u003e\n\u003c/ul\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ curl -s -XPOST -H \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;content-type: application/json\u0026#39;\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e\\\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t-d \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;{\u0026#34;query\u0026#34; : \u0026#34;select timestamp, activesession, loadavg, processor from \\\u0026#34;mysql-perf-*\\\u0026#34; limit 100\u0026#34;}\u0026#39;\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e\\\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;http://elasticsearch-server:7200/_sql\u0026#39;\u003c/span\u003e \u0026gt; result.json\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ cat result.json | jq .\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003e{\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;columns\u0026#34;\u003c/span\u003e: \u003cspan style=\"color:#f92672\"\u003e[\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003e{\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;name\u0026#34;\u003c/span\u003e: \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;timestamp\u0026#34;\u003c/span\u003e,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;type\u0026#34;\u003c/span\u003e: \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;datetime\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003e}\u003c/span\u003e,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003e{\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;name\u0026#34;\u003c/span\u003e: \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;activesession\u0026#34;\u003c/span\u003e,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;type\u0026#34;\u003c/span\u003e: \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;long\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003e}\u003c/span\u003e,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003e{\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;name\u0026#34;\u003c/span\u003e: \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;loadavg\u0026#34;\u003c/span\u003e,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;type\u0026#34;\u003c/span\u003e: \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;float\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003e}\u003c/span\u003e,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003e{\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;name\u0026#34;\u003c/span\u003e: \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;processor\u0026#34;\u003c/span\u003e,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;type\u0026#34;\u003c/span\u003e: \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;float\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003e}\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#f92672\"\u003e]\u003c/span\u003e,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;rows\u0026#34;\u003c/span\u003e: \u003cspan style=\"color:#f92672\"\u003e[\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003e[\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;2021-05-02T03:40:47.000Z\u0026#34;\u003c/span\u003e,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      2,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      0.019999999552965164,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      \u003cspan style=\"color:#ae81ff\"\u003e0\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003e]\u003c/span\u003e,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003e[\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;2021-06-01T00:04:24.000Z\u0026#34;\u003c/span\u003e,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      4,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      2.0399999618530273,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      14.579999923706055\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003e]\u003c/span\u003e,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t...\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch3 id=\"ndjson-형태로-변환-jq\"\u003eNDJSON 형태로 변환 \u003ccode\u003ejq\u003c/code\u003e\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003e-c\u003c/code\u003e : compact instead of pretty-printed output\u003c/li\u003e\n\u003c/ul\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ cat result.json | \u003cspan style=\"color:#ae81ff\"\u003e\\\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        jq -c \u003cspan style=\"color:#e6db74\"\u003e\u0026#39; { \u0026#34;col\u0026#34;: [.columns[] | .name], \u0026#34;row\u0026#34; : .rows[] }\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003e        | [.col, .row]\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003e        | transpose\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003e        | map({ (.[0]): .[1] })\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003e        | add \u0026#39;\u003c/span\u003e \u0026gt; result_t.json\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ cat result_t.json | jq .\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003e{\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;timestamp\u0026#34;\u003c/span\u003e: \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;2021-05-02T03:40:47.000Z\u0026#34;\u003c/span\u003e,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;activesession\u0026#34;\u003c/span\u003e: 2,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;loadavg\u0026#34;\u003c/span\u003e: 0.019999999552965164,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;processor\u0026#34;\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003e0\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003e}\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003e{\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;timestamp\u0026#34;\u003c/span\u003e: \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;2021-06-22T05:25:24.000Z\u0026#34;\u003c/span\u003e,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;activesession\u0026#34;\u003c/span\u003e: 3,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;loadavg\u0026#34;\u003c/span\u003e: 1.809999942779541,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;processor\u0026#34;\u003c/span\u003e: 4.599999904632568\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003e}\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003e{\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;timestamp\u0026#34;\u003c/span\u003e: \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;2021-07-01T00:04:21.000Z\u0026#34;\u003c/span\u003e,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;activesession\u0026#34;\u003c/span\u003e: 1,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;loadavg\u0026#34;\u003c/span\u003e: 0.2800000011920929,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;processor\u0026#34;\u003c/span\u003e: 0.41999998688697815\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch3 id=\"mysql-json-import-mysql-shell\"\u003eMySQL JSON Import \u003ccode\u003emysql-shell\u003c/code\u003e\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e테이블내 \u003ccode\u003edoc json\u003c/code\u003e 필드 생성 및 JSON 데이터 Row 단위 적재\u003c/li\u003e\n\u003c/ul\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-sh\" data-lang=\"sh\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# truncate table\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ mysqlsh --sql user@mysql-server:3360/dbname -p\u0026lt;PASSWD\u0026gt; \u003cspan style=\"color:#ae81ff\"\u003e\\\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t--execute \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;truncate table data_table ;\u0026#39;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# import \u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ mysqlsh --mysqlx user@mysql-server:3360/dbname -p\u0026lt;PASSWD\u0026gt; \u003cspan style=\"color:#ae81ff\"\u003e\\\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t--import result_t.json --collection\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003edata_table \n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003e\u003cimg loading=\"lazy\" src=\"/images/2021-08-17-09-42-43.png\"\u003e\u003c/p\u003e","title":"ElasticSearch to MySQL ETL"},{"content":"Makefile 간단한 범용 버전\nMakefile 현재 디렉토리 모든 .cpp 파일 빌드 CC = g++ CC_FLAGS = -std=c++11 -pedantic -Wall -O2 LD_LIBS = EXEC = main SOURCES = $(wildcard *.cpp) OBJECTS = $(SOURCES:.cpp=.o) # Main target $(EXEC): $(OBJECTS) $(CC) $(OBJECTS) -o $(EXEC) $(LD_LIBS) %.o: %.cpp $(CC) -c $(CC_FLAGS) $\u0026lt; -o $@ clean: rm -f $(EXEC) $(OBJECTS) ","permalink":"https://cdecl.github.io/dev/makefile-simple-template/","summary":"\u003cp\u003eMakefile 간단한 범용 버전\u003c/p\u003e\n\u003ch2 id=\"makefile\"\u003eMakefile\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003e현재 디렉토리 모든 .cpp 파일 빌드\u003c/li\u003e\n\u003c/ul\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-makefile\" data-lang=\"makefile\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eCC \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e g++\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eCC_FLAGS \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e -std\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003ec++11 -pedantic -Wall -O2 \n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eLD_LIBS \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eEXEC \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e main\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eSOURCES \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003e$(\u003c/span\u003ewildcard *.cpp\u003cspan style=\"color:#66d9ef\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eOBJECTS \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003e$(\u003c/span\u003eSOURCES:.cpp\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e.o\u003cspan style=\"color:#66d9ef\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# Main target\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#a6e22e\"\u003e$(EXEC)\u003c/span\u003e\u003cspan style=\"color:#f92672\"\u003e:\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003e$(\u003c/span\u003eOBJECTS\u003cspan style=\"color:#66d9ef\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#66d9ef\"\u003e$(\u003c/span\u003eCC\u003cspan style=\"color:#66d9ef\"\u003e)\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003e$(\u003c/span\u003eOBJECTS\u003cspan style=\"color:#66d9ef\"\u003e)\u003c/span\u003e -o \u003cspan style=\"color:#66d9ef\"\u003e$(\u003c/span\u003eEXEC\u003cspan style=\"color:#66d9ef\"\u003e)\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003e$(\u003c/span\u003eLD_LIBS\u003cspan style=\"color:#66d9ef\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#a6e22e\"\u003e%.o\u003c/span\u003e\u003cspan style=\"color:#f92672\"\u003e:\u003c/span\u003e %.cpp\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#66d9ef\"\u003e$(\u003c/span\u003eCC\u003cspan style=\"color:#66d9ef\"\u003e)\u003c/span\u003e -c \u003cspan style=\"color:#66d9ef\"\u003e$(\u003c/span\u003eCC_FLAGS\u003cspan style=\"color:#66d9ef\"\u003e)\u003c/span\u003e $\u0026lt; -o $@\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#a6e22e\"\u003eclean\u003c/span\u003e\u003cspan style=\"color:#f92672\"\u003e:\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\trm -f \u003cspan style=\"color:#66d9ef\"\u003e$(\u003c/span\u003eEXEC\u003cspan style=\"color:#66d9ef\"\u003e)\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003e$(\u003c/span\u003eOBJECTS\u003cspan style=\"color:#66d9ef\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e","title":"Makefile Simple Template"},{"content":"현대 소프트웨어 개발에서 암호화는 필수적인 보안 요소입니다. 이 글에서는 개발자가 알아야 할 핵심 암호화 개념과 실제 구현 시 고려사항을 다룹니다.\n암호화 알고리즘 선택 시 고려사항 암호화 구현 시 다음 요소들을 신중히 고려해야 합니다:\n대칭형 vs 비대칭형 암호화 알고리즘 종류와 보안 강도 운영 모드의 특성과 용도 패딩 방식 키 관리 전략 성능과 보안의 균형 대칭형 vs 비대칭형 암호화 대칭형 암호화 정의: 동일한 키로 암호화와 복호화를 수행 장점: 빠른 처리 속도 적은 컴퓨팅 리소스 요구 대용량 데이터 처리에 적합 단점: 키 공유의 어려움 많은 통신 상대와의 키 관리 복잡성 비대칭형 암호화 정의: 공개키와 개인키를 사용하는 방식 장점: 안전한 키 교환 디지털 서명 가능 부인 방지 기능 단점: 느린 처리 속도 높은 컴퓨팅 리소스 요구 주요 대칭형 블록 알고리즘 DES (Data Encryption Standard) 블록 크기: 64비트 키 길이: 56비트 특징: 역사적으로 중요한 알고리즘 현재는 보안 강도 부족으로 새로운 시스템에는 권장되지 않음 레거시 시스템 호환성을 위해 알아둘 필요 있음 3-DES (Triple DES) 키 길이: 2-키 3-DES: 112비트 3-키 3-DES: 168비트 특징: DES를 3회 적용하여 보안성 향상 DES 대비 약 3배 느린 처리 속도 여전히 안전하나 점차 AES로 대체 중 AES (Advanced Encryption Standard) 블록 크기: 128비트 키 길이: 128/192/256비트 특징: 현대 암호화의 표준 뛰어난 성능과 보안성 하드웨어 가속 지원으로 고성능 권장 사용 사례: 새로운 시스템 개발 시 기본 선택 클라우드 서비스의 데이터 암호화 금융 거래 보안 SEED 블록 크기: 128비트 키 길이: 128비트 특징: 한국 표준 암호화 알고리즘 국제 표준 인증 국내 공공기관 시스템에서 널리 사용 주요 비대칭형(공개키) 알고리즘 RSA (Rivest-Shamir-Adleman) 키 길이: 2048/3072/4096비트 권장 특징: 가장 널리 사용되는 비대칭 암호화 알고리즘 소인수분해의 어려움을 기반으로 한 보안성 디지털 서명과 암호화 모두 지원 장점: 구현이 상대적으로 단순 높은 보안성 폭넓은 라이브러리 지원 단점: 긴 키 길이 필요 느린 처리 속도 주요 용도: SSL/TLS 인증서 디지털 서명 키 교환 ECC (Elliptic Curve Cryptography) 키 길이: 256/384/521비트 특징: 타원곡선의 이산대수 문제를 기반 RSA 대비 짧은 키 길이로 동등한 보안성 제공 장점: 짧은 키 길이 빠른 처리 속도 낮은 리소스 요구사항 단점: 구현의 복잡성 특허 문제 (일부 알고리즘) 주요 용도: 모바일 기기의 암호화 IoT 디바이스 블록체인/암호화폐 DSA (Digital Signature Algorithm) 키 길이: 2048/3072비트 권장 특징: 디지털 서명 전용 알고리즘 NIST FIPS 186 표준 장점: 서명 생성이 RSA보다 빠름 미국 정부 표준 단점: 서명 검증이 RSA보다 느림 암호화 기능 없음 주요 용도: 전자서명 인증서 서명 ElGamal 특징: 이산대수의 어려움을 기반 DSA의 기반이 되는 알고리즘 장점: 학술적 검증이 잘된 알고리즘 확률적 암호화로 높은 보안성 단점: 암호문 크기가 평문의 2배 처리 속도가 느림 주요 용도: PGP 등의 암호화 시스템 하이브리드 암호 시스템 블록 암호화 운영 모드 ECB (Electronic Codebook) 동작 방식: 각 블록을 독립적으로 암호화 장점: 단순한 구현 병렬 처리 가능 단점: 패턴이 그대로 노출될 수 있음 데이터 무결성 보장 없음 사용 권장 사례: 매우 짧은 데이터 (단일 블록) 암호화 키 자체의 암호화 CBC (Cipher Block Chaining) 동작 방식: 이전 블록의 암호문과 현재 평문을 XOR 특징: IV(Initial Vector) 필요 순차적 처리 필요 장점: 높은 보안성 오류 전파 제한적 사용 권장 사례: 일반적인 데이터 암호화 메시지 인증이 필요한 경우 기타 운영 모드 CFB (Cipher Feedback) 스트림 암호처럼 동작 실시간 암호화에 적합 OFB (Output Feedback) 미리 키스트림 생성 가능 노이즈가 많은 채널에 적합 CTR (Counter) 병렬 처리 가능 랜덤 액세스 가능 패딩 (Padding) 방식 NO_PADDING 패딩 없음 데이터가 블록 크기의 배수일 때만 사용 가능 ZEROS_PADDING 남는 공간을 0으로 채움 구현이 단순하나 특정 상황에서 모호성 발생 가능 PKCS7_PADDING (DEFAULT_PADDING) 가장 널리 사용되는 표준 패딩 방식 패딩 바이트 값이 패딩 길이와 동일 예시: 블록 크기: 8바이트 데이터: \u0026#34;HELLO\u0026#34; 패딩 후: \u0026#34;HELLO\\x03\\x03\\x03\u0026#34; ONE_AND_ZEROS_PADDING 첫 바이트는 0x80, 나머지는 0x00 패딩의 시작과 끝이 명확함 하이브리드 암호 시스템 실제 응용에서는 대칭형과 비대칭형 암호화를 결합하여 사용하는 경우가 많습니다.\n동작 방식 임의의 대칭키(세션키) 생성 공개키로 세션키를 암호화하여 전송 실제 데이터는 세션키로 대칭 암호화 장점 비대칭 암호화의 안전한 키 교환 대칭 암호화의 빠른 처리 속도 높은 확장성 대표적인 사용 예 SSL/TLS 프로토콜 PGP 암호화 보안 메시징 시스템 구현 시 주의사항 키 관리 안전한 키 생성 (충분한 엔트로피 확보) 키 순환 정책 수립 안전한 키 저장소 사용 비대칭 암호화 관련 RSA: 최소 2048비트 키 길이 사용 ECC: 검증된 곡선 사용 (예: P-256, P-384) 개인키 보호 강화 OAEP 패딩 사용 (RSA) 대칭 암호화 관련 검증된 라이브러리 사용 적절한 IV 생성 (암호학적 난수 생성기 사용) 에러 처리 시 민감 정보 노출 방지 성능 최적화 하드웨어 가속 활용 적절한 키 캐싱 대용량 데이터의 경우 스트리밍 고려 알고리즘 선택 가이드 일반적인 데이터 암호화 추천: AES-256-GCM (대칭형) 대체: ChaCha20-Poly1305 키 교환 추천: ECDH with P-256/P-384 대체: RSA-2048/3072 디지털 서명 추천: ECDSA with P-256/P-384 대체: RSA-PSS 2048/3072 IoT/제한된 환경 추천: ECC 기반 알고리즘 대체: 경량 대칭형 암호 결론 암호화 구현 시에는 보안성, 성능, 호환성을 종합적으로 고려해야 합니다. 현대 시스템에서는 대칭형 암호화의 경우 AES-256-GCM이, 비대칭형의 경우 RSA-2048 이상 또는 ECC가 일반적인 선택이지만, 특수한 요구사항이 있다면 다른 알고리즘이나 운영 모드를 고려할 수 있습니다. 항상 최신 보안 권고사항을 참고하고, 정기적인 보안 감사를 통해 시스템의 안전성을 확인하는 것이 중요합니다.\n","permalink":"https://cdecl.github.io/dev/crypto-for-develop/","summary":"\u003cp\u003e현대 소프트웨어 개발에서 암호화는 필수적인 보안 요소입니다. 이 글에서는 개발자가 알아야 할 핵심 암호화 개념과 실제 구현 시 고려사항을 다룹니다.\u003c/p\u003e\n\u003ch2 id=\"암호화-알고리즘-선택-시-고려사항\"\u003e암호화 알고리즘 선택 시 고려사항\u003c/h2\u003e\n\u003cp\u003e암호화 구현 시 다음 요소들을 신중히 고려해야 합니다:\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003e대칭형 vs 비대칭형 암호화\u003c/li\u003e\n\u003cli\u003e알고리즘 종류와 보안 강도\u003c/li\u003e\n\u003cli\u003e운영 모드의 특성과 용도\u003c/li\u003e\n\u003cli\u003e패딩 방식\u003c/li\u003e\n\u003cli\u003e키 관리 전략\u003c/li\u003e\n\u003cli\u003e성능과 보안의 균형\u003c/li\u003e\n\u003c/ol\u003e\n\u003ch2 id=\"대칭형-vs-비대칭형-암호화\"\u003e대칭형 vs 비대칭형 암호화\u003c/h2\u003e\n\u003ch3 id=\"대칭형-암호화\"\u003e대칭형 암호화\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003e정의\u003c/strong\u003e: 동일한 키로 암호화와 복호화를 수행\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e장점\u003c/strong\u003e:\n\u003cul\u003e\n\u003cli\u003e빠른 처리 속도\u003c/li\u003e\n\u003cli\u003e적은 컴퓨팅 리소스 요구\u003c/li\u003e\n\u003cli\u003e대용량 데이터 처리에 적합\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e단점\u003c/strong\u003e:\n\u003cul\u003e\n\u003cli\u003e키 공유의 어려움\u003c/li\u003e\n\u003cli\u003e많은 통신 상대와의 키 관리 복잡성\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"비대칭형-암호화\"\u003e비대칭형 암호화\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003e정의\u003c/strong\u003e: 공개키와 개인키를 사용하는 방식\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e장점\u003c/strong\u003e:\n\u003cul\u003e\n\u003cli\u003e안전한 키 교환\u003c/li\u003e\n\u003cli\u003e디지털 서명 가능\u003c/li\u003e\n\u003cli\u003e부인 방지 기능\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e단점\u003c/strong\u003e:\n\u003cul\u003e\n\u003cli\u003e느린 처리 속도\u003c/li\u003e\n\u003cli\u003e높은 컴퓨팅 리소스 요구\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"주요-대칭형-블록-알고리즘\"\u003e주요 대칭형 블록 알고리즘\u003c/h2\u003e\n\u003ch3 id=\"des-data-encryption-standard\"\u003eDES (Data Encryption Standard)\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003e블록 크기\u003c/strong\u003e: 64비트\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e키 길이\u003c/strong\u003e: 56비트\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e특징\u003c/strong\u003e:\n\u003cul\u003e\n\u003cli\u003e역사적으로 중요한 알고리즘\u003c/li\u003e\n\u003cli\u003e현재는 보안 강도 부족으로 새로운 시스템에는 권장되지 않음\u003c/li\u003e\n\u003cli\u003e레거시 시스템 호환성을 위해 알아둘 필요 있음\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"3-des-triple-des\"\u003e3-DES (Triple DES)\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003e키 길이\u003c/strong\u003e:\n\u003cul\u003e\n\u003cli\u003e2-키 3-DES: 112비트\u003c/li\u003e\n\u003cli\u003e3-키 3-DES: 168비트\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e특징\u003c/strong\u003e:\n\u003cul\u003e\n\u003cli\u003eDES를 3회 적용하여 보안성 향상\u003c/li\u003e\n\u003cli\u003eDES 대비 약 3배 느린 처리 속도\u003c/li\u003e\n\u003cli\u003e여전히 안전하나 점차 AES로 대체 중\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"aes-advanced-encryption-standard\"\u003eAES (Advanced Encryption Standard)\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003e블록 크기\u003c/strong\u003e: 128비트\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e키 길이\u003c/strong\u003e: 128/192/256비트\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e특징\u003c/strong\u003e:\n\u003cul\u003e\n\u003cli\u003e현대 암호화의 표준\u003c/li\u003e\n\u003cli\u003e뛰어난 성능과 보안성\u003c/li\u003e\n\u003cli\u003e하드웨어 가속 지원으로 고성능\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e권장 사용 사례\u003c/strong\u003e:\n\u003cul\u003e\n\u003cli\u003e새로운 시스템 개발 시 기본 선택\u003c/li\u003e\n\u003cli\u003e클라우드 서비스의 데이터 암호화\u003c/li\u003e\n\u003cli\u003e금융 거래 보안\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"seed\"\u003eSEED\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003e블록 크기\u003c/strong\u003e: 128비트\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e키 길이\u003c/strong\u003e: 128비트\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e특징\u003c/strong\u003e:\n\u003cul\u003e\n\u003cli\u003e한국 표준 암호화 알고리즘\u003c/li\u003e\n\u003cli\u003e국제 표준 인증\u003c/li\u003e\n\u003cli\u003e국내 공공기관 시스템에서 널리 사용\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"주요-비대칭형공개키-알고리즘\"\u003e주요 비대칭형(공개키) 알고리즘\u003c/h2\u003e\n\u003ch3 id=\"rsa-rivest-shamir-adleman\"\u003eRSA (Rivest-Shamir-Adleman)\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003e키 길이\u003c/strong\u003e: 2048/3072/4096비트 권장\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e특징\u003c/strong\u003e:\n\u003cul\u003e\n\u003cli\u003e가장 널리 사용되는 비대칭 암호화 알고리즘\u003c/li\u003e\n\u003cli\u003e소인수분해의 어려움을 기반으로 한 보안성\u003c/li\u003e\n\u003cli\u003e디지털 서명과 암호화 모두 지원\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e장점\u003c/strong\u003e:\n\u003cul\u003e\n\u003cli\u003e구현이 상대적으로 단순\u003c/li\u003e\n\u003cli\u003e높은 보안성\u003c/li\u003e\n\u003cli\u003e폭넓은 라이브러리 지원\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e단점\u003c/strong\u003e:\n\u003cul\u003e\n\u003cli\u003e긴 키 길이 필요\u003c/li\u003e\n\u003cli\u003e느린 처리 속도\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e주요 용도\u003c/strong\u003e:\n\u003cul\u003e\n\u003cli\u003eSSL/TLS 인증서\u003c/li\u003e\n\u003cli\u003e디지털 서명\u003c/li\u003e\n\u003cli\u003e키 교환\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"ecc-elliptic-curve-cryptography\"\u003eECC (Elliptic Curve Cryptography)\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003e키 길이\u003c/strong\u003e: 256/384/521비트\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e특징\u003c/strong\u003e:\n\u003cul\u003e\n\u003cli\u003e타원곡선의 이산대수 문제를 기반\u003c/li\u003e\n\u003cli\u003eRSA 대비 짧은 키 길이로 동등한 보안성 제공\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e장점\u003c/strong\u003e:\n\u003cul\u003e\n\u003cli\u003e짧은 키 길이\u003c/li\u003e\n\u003cli\u003e빠른 처리 속도\u003c/li\u003e\n\u003cli\u003e낮은 리소스 요구사항\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e단점\u003c/strong\u003e:\n\u003cul\u003e\n\u003cli\u003e구현의 복잡성\u003c/li\u003e\n\u003cli\u003e특허 문제 (일부 알고리즘)\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e주요 용도\u003c/strong\u003e:\n\u003cul\u003e\n\u003cli\u003e모바일 기기의 암호화\u003c/li\u003e\n\u003cli\u003eIoT 디바이스\u003c/li\u003e\n\u003cli\u003e블록체인/암호화폐\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"dsa-digital-signature-algorithm\"\u003eDSA (Digital Signature Algorithm)\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003e키 길이\u003c/strong\u003e: 2048/3072비트 권장\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e특징\u003c/strong\u003e:\n\u003cul\u003e\n\u003cli\u003e디지털 서명 전용 알고리즘\u003c/li\u003e\n\u003cli\u003eNIST FIPS 186 표준\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e장점\u003c/strong\u003e:\n\u003cul\u003e\n\u003cli\u003e서명 생성이 RSA보다 빠름\u003c/li\u003e\n\u003cli\u003e미국 정부 표준\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e단점\u003c/strong\u003e:\n\u003cul\u003e\n\u003cli\u003e서명 검증이 RSA보다 느림\u003c/li\u003e\n\u003cli\u003e암호화 기능 없음\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e주요 용도\u003c/strong\u003e:\n\u003cul\u003e\n\u003cli\u003e전자서명\u003c/li\u003e\n\u003cli\u003e인증서 서명\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"elgamal\"\u003eElGamal\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003e특징\u003c/strong\u003e:\n\u003cul\u003e\n\u003cli\u003e이산대수의 어려움을 기반\u003c/li\u003e\n\u003cli\u003eDSA의 기반이 되는 알고리즘\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e장점\u003c/strong\u003e:\n\u003cul\u003e\n\u003cli\u003e학술적 검증이 잘된 알고리즘\u003c/li\u003e\n\u003cli\u003e확률적 암호화로 높은 보안성\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e단점\u003c/strong\u003e:\n\u003cul\u003e\n\u003cli\u003e암호문 크기가 평문의 2배\u003c/li\u003e\n\u003cli\u003e처리 속도가 느림\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e주요 용도\u003c/strong\u003e:\n\u003cul\u003e\n\u003cli\u003ePGP 등의 암호화 시스템\u003c/li\u003e\n\u003cli\u003e하이브리드 암호 시스템\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"블록-암호화-운영-모드\"\u003e블록 암호화 운영 모드\u003c/h2\u003e\n\u003ch3 id=\"ecb-electronic-codebook\"\u003eECB (Electronic Codebook)\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003e동작 방식\u003c/strong\u003e: 각 블록을 독립적으로 암호화\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e장점\u003c/strong\u003e:\n\u003cul\u003e\n\u003cli\u003e단순한 구현\u003c/li\u003e\n\u003cli\u003e병렬 처리 가능\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e단점\u003c/strong\u003e:\n\u003cul\u003e\n\u003cli\u003e패턴이 그대로 노출될 수 있음\u003c/li\u003e\n\u003cli\u003e데이터 무결성 보장 없음\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e사용 권장 사례\u003c/strong\u003e:\n\u003cul\u003e\n\u003cli\u003e매우 짧은 데이터 (단일 블록)\u003c/li\u003e\n\u003cli\u003e암호화 키 자체의 암호화\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"cbc-cipher-block-chaining\"\u003eCBC (Cipher Block Chaining)\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003e동작 방식\u003c/strong\u003e: 이전 블록의 암호문과 현재 평문을 XOR\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e특징\u003c/strong\u003e:\n\u003cul\u003e\n\u003cli\u003eIV(Initial Vector) 필요\u003c/li\u003e\n\u003cli\u003e순차적 처리 필요\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e장점\u003c/strong\u003e:\n\u003cul\u003e\n\u003cli\u003e높은 보안성\u003c/li\u003e\n\u003cli\u003e오류 전파 제한적\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e사용 권장 사례\u003c/strong\u003e:\n\u003cul\u003e\n\u003cli\u003e일반적인 데이터 암호화\u003c/li\u003e\n\u003cli\u003e메시지 인증이 필요한 경우\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"기타-운영-모드\"\u003e기타 운영 모드\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003eCFB (Cipher Feedback)\u003c/strong\u003e\n\u003cul\u003e\n\u003cli\u003e스트림 암호처럼 동작\u003c/li\u003e\n\u003cli\u003e실시간 암호화에 적합\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eOFB (Output Feedback)\u003c/strong\u003e\n\u003cul\u003e\n\u003cli\u003e미리 키스트림 생성 가능\u003c/li\u003e\n\u003cli\u003e노이즈가 많은 채널에 적합\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eCTR (Counter)\u003c/strong\u003e\n\u003cul\u003e\n\u003cli\u003e병렬 처리 가능\u003c/li\u003e\n\u003cli\u003e랜덤 액세스 가능\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"패딩-padding-방식\"\u003e패딩 (Padding) 방식\u003c/h2\u003e\n\u003ch3 id=\"no_padding\"\u003eNO_PADDING\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e패딩 없음\u003c/li\u003e\n\u003cli\u003e데이터가 블록 크기의 배수일 때만 사용 가능\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"zeros_padding\"\u003eZEROS_PADDING\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e남는 공간을 0으로 채움\u003c/li\u003e\n\u003cli\u003e구현이 단순하나 특정 상황에서 모호성 발생 가능\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"pkcs7_padding-default_padding\"\u003ePKCS7_PADDING (DEFAULT_PADDING)\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e가장 널리 사용되는 표준 패딩 방식\u003c/li\u003e\n\u003cli\u003e패딩 바이트 값이 패딩 길이와 동일\u003c/li\u003e\n\u003cli\u003e예시:\n\u003cpre tabindex=\"0\"\u003e\u003ccode\u003e블록 크기: 8바이트\n데이터: \u0026#34;HELLO\u0026#34;\n패딩 후: \u0026#34;HELLO\\x03\\x03\\x03\u0026#34;\n\u003c/code\u003e\u003c/pre\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"one_and_zeros_padding\"\u003eONE_AND_ZEROS_PADDING\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e첫 바이트는 0x80, 나머지는 0x00\u003c/li\u003e\n\u003cli\u003e패딩의 시작과 끝이 명확함\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"하이브리드-암호-시스템\"\u003e하이브리드 암호 시스템\u003c/h2\u003e\n\u003cp\u003e실제 응용에서는 대칭형과 비대칭형 암호화를 결합하여 사용하는 경우가 많습니다.\u003c/p\u003e","title":"암호화 지식 (개발자를 위한 가이드)"},{"content":"Effective Modern CMake Effective Modern CMake : https://gist.github.com/mbinna/c61dbb39bca0e4fb7d1f73b0d66a4fd1{:target=\u0026quot;_blank\u0026quot;}\nCMakeLists.txt : Basic Template cmake_minimum_required(VERSION 3.11) project(main) set(CMAKE_CXX_STANDARD 17) add_executable(main main.cpp) target_compile_options(main PRIVATE -Wall -O2) # target_include_directories(main PRIVATE ) # target_link_directories(main PRIVATE ) # target_link_libraries(main PRIVATE -pthread) CMake Generate, Build Windows $ mkdir build \u0026amp;\u0026amp; cd build # Generate $ cmake -G \u0026#34;Visual Studio 16 2019\u0026#34; -A x64 .. # Build $ cmake --build . --config Release MinGW choco install winlibs -y mingw 패키지에 비해 버전 및 안정성 좋음 $ mkdir build \u0026amp;\u0026amp; cd build # Generate $ cmake -G \u0026#34;MSYS Makefiles\u0026#34; .. # Build 1 $ cmake --build . # Build 2 $ make Linux $ mkdir build \u0026amp;\u0026amp; cd build # Generate $ cmake .. # Build $ make Generators $ cmake -G CMake Error: No generator specified for -G Generators Visual Studio 17 2022 = Generates Visual Studio 2022 project files. Use -A option to specify architecture. * Visual Studio 16 2019 = Generates Visual Studio 2019 project files. Use -A option to specify architecture. Visual Studio 15 2017 [arch] = Generates Visual Studio 2017 project files. Optional [arch] can be \u0026#34;Win64\u0026#34; or \u0026#34;ARM\u0026#34;. Visual Studio 14 2015 [arch] = Generates Visual Studio 2015 project files. Optional [arch] can be \u0026#34;Win64\u0026#34; or \u0026#34;ARM\u0026#34;. Visual Studio 12 2013 [arch] = Generates Visual Studio 2013 project files. Optional [arch] can be \u0026#34;Win64\u0026#34; or \u0026#34;ARM\u0026#34;. Visual Studio 11 2012 [arch] = Generates Visual Studio 2012 project files. Optional [arch] can be \u0026#34;Win64\u0026#34; or \u0026#34;ARM\u0026#34;. Visual Studio 10 2010 [arch] = Generates Visual Studio 2010 project files. Optional [arch] can be \u0026#34;Win64\u0026#34; or \u0026#34;IA64\u0026#34;. Visual Studio 9 2008 [arch] = Generates Visual Studio 2008 project files. Optional [arch] can be \u0026#34;Win64\u0026#34; or \u0026#34;IA64\u0026#34;. Borland Makefiles = Generates Borland makefiles. NMake Makefiles = Generates NMake makefiles. NMake Makefiles JOM = Generates JOM makefiles. MSYS Makefiles = Generates MSYS makefiles. MinGW Makefiles = Generates a make file for use with mingw32-make. Green Hills MULTI = Generates Green Hills MULTI files (experimental, work-in-progress). Unix Makefiles = Generates standard UNIX makefiles. Ninja = Generates build.ninja files. Ninja Multi-Config = Generates build-\u0026lt;Config\u0026gt;.ninja files. Watcom WMake = Generates Watcom WMake makefiles. CodeBlocks - MinGW Makefiles = Generates CodeBlocks project files. CodeBlocks - NMake Makefiles = Generates CodeBlocks project files. CodeBlocks - NMake Makefiles JOM = Generates CodeBlocks project files. CodeBlocks - Ninja = Generates CodeBlocks project files. CodeBlocks - Unix Makefiles = Generates CodeBlocks project files. CodeLite - MinGW Makefiles = Generates CodeLite project files. CodeLite - NMake Makefiles = Generates CodeLite project files. CodeLite - Ninja = Generates CodeLite project files. CodeLite - Unix Makefiles = Generates CodeLite project files. Eclipse CDT4 - NMake Makefiles = Generates Eclipse CDT 4.0 project files. Eclipse CDT4 - MinGW Makefiles = Generates Eclipse CDT 4.0 project files. Eclipse CDT4 - Ninja = Generates Eclipse CDT 4.0 project files. Eclipse CDT4 - Unix Makefiles= Generates Eclipse CDT 4.0 project files. Kate - MinGW Makefiles = Generates Kate project files. Kate - NMake Makefiles = Generates Kate project files. Kate - Ninja = Generates Kate project files. Kate - Unix Makefiles = Generates Kate project files. Sublime Text 2 - MinGW Makefiles = Generates Sublime Text 2 project files. Sublime Text 2 - NMake Makefiles = Generates Sublime Text 2 project files. Sublime Text 2 - Ninja = Generates Sublime Text 2 project files. Sublime Text 2 - Unix Makefiles = Generates Sublime Text 2 project files. ","permalink":"https://cdecl.github.io/dev/cmake-basic/","summary":"\u003ch2 id=\"effective-modern-cmake\"\u003eEffective Modern CMake\u003c/h2\u003e\n\u003cp\u003eEffective Modern CMake : \u003ca href=\"https://gist.github.com/mbinna/c61dbb39bca0e4fb7d1f73b0d66a4fd1\"\u003ehttps://gist.github.com/mbinna/c61dbb39bca0e4fb7d1f73b0d66a4fd1\u003c/a\u003e{:target=\u0026quot;_blank\u0026quot;}\u003c/p\u003e\n\u003ch3 id=\"cmakeliststxt--basic-template\"\u003eCMakeLists.txt : Basic Template\u003c/h3\u003e\n\u003cpre tabindex=\"0\"\u003e\u003ccode\u003ecmake_minimum_required(VERSION 3.11)\n\nproject(main)\n\nset(CMAKE_CXX_STANDARD 17)\n\nadd_executable(main main.cpp)\n\ntarget_compile_options(main PRIVATE -Wall -O2)\n# target_include_directories(main PRIVATE )\n# target_link_directories(main PRIVATE )\n# target_link_libraries(main PRIVATE -pthread)\n\u003c/code\u003e\u003c/pre\u003e\u003ch2 id=\"cmake-generate-build\"\u003eCMake Generate, Build\u003c/h2\u003e\n\u003ch3 id=\"windows\"\u003eWindows\u003c/h3\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-sh\" data-lang=\"sh\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ mkdir build \u003cspan style=\"color:#f92672\"\u003e\u0026amp;\u0026amp;\u003c/span\u003e cd build \n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# Generate\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ cmake -G \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;Visual Studio 16 2019\u0026#34;\u003c/span\u003e -A x64 ..\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# Build \u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ cmake --build . --config Release\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch3 id=\"mingw\"\u003eMinGW\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003echoco install winlibs -y\u003c/code\u003e\n\u003cul\u003e\n\u003cli\u003emingw 패키지에 비해 버전 및 안정성 좋음\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-sh\" data-lang=\"sh\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ mkdir build \u003cspan style=\"color:#f92672\"\u003e\u0026amp;\u0026amp;\u003c/span\u003e cd build \n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# Generate\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ cmake -G \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;MSYS Makefiles\u0026#34;\u003c/span\u003e ..\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# Build  1\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ cmake --build .\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# Build  2\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ make\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch3 id=\"linux\"\u003eLinux\u003c/h3\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-sh\" data-lang=\"sh\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ mkdir build \u003cspan style=\"color:#f92672\"\u003e\u0026amp;\u0026amp;\u003c/span\u003e cd build \n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# Generate\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ cmake ..\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# Build \u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ make\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch2 id=\"generators\"\u003eGenerators\u003c/h2\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-sh\" data-lang=\"sh\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ cmake -G\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eCMake Error: No generator specified \u003cspan style=\"color:#66d9ef\"\u003efor\u003c/span\u003e -G\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eGenerators\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  Visual Studio \u003cspan style=\"color:#ae81ff\"\u003e17\u003c/span\u003e 2022        \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e Generates Visual Studio \u003cspan style=\"color:#ae81ff\"\u003e2022\u003c/span\u003e project files.\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e                                 Use -A option to specify architecture.\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e* Visual Studio \u003cspan style=\"color:#ae81ff\"\u003e16\u003c/span\u003e 2019        \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e Generates Visual Studio \u003cspan style=\"color:#ae81ff\"\u003e2019\u003c/span\u003e project files.\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e                                 Use -A option to specify architecture.\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  Visual Studio \u003cspan style=\"color:#ae81ff\"\u003e15\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e2017\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e[\u003c/span\u003earch\u003cspan style=\"color:#f92672\"\u003e]\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e Generates Visual Studio \u003cspan style=\"color:#ae81ff\"\u003e2017\u003c/span\u003e project files.\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e                                 Optional \u003cspan style=\"color:#f92672\"\u003e[\u003c/span\u003earch\u003cspan style=\"color:#f92672\"\u003e]\u003c/span\u003e can be \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;Win64\u0026#34;\u003c/span\u003e or \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;ARM\u0026#34;\u003c/span\u003e.\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  Visual Studio \u003cspan style=\"color:#ae81ff\"\u003e14\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e2015\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e[\u003c/span\u003earch\u003cspan style=\"color:#f92672\"\u003e]\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e Generates Visual Studio \u003cspan style=\"color:#ae81ff\"\u003e2015\u003c/span\u003e project files.\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e                                 Optional \u003cspan style=\"color:#f92672\"\u003e[\u003c/span\u003earch\u003cspan style=\"color:#f92672\"\u003e]\u003c/span\u003e can be \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;Win64\u0026#34;\u003c/span\u003e or \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;ARM\u0026#34;\u003c/span\u003e.\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  Visual Studio \u003cspan style=\"color:#ae81ff\"\u003e12\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e2013\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e[\u003c/span\u003earch\u003cspan style=\"color:#f92672\"\u003e]\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e Generates Visual Studio \u003cspan style=\"color:#ae81ff\"\u003e2013\u003c/span\u003e project files.\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e                                 Optional \u003cspan style=\"color:#f92672\"\u003e[\u003c/span\u003earch\u003cspan style=\"color:#f92672\"\u003e]\u003c/span\u003e can be \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;Win64\u0026#34;\u003c/span\u003e or \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;ARM\u0026#34;\u003c/span\u003e.\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  Visual Studio \u003cspan style=\"color:#ae81ff\"\u003e11\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e2012\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e[\u003c/span\u003earch\u003cspan style=\"color:#f92672\"\u003e]\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e Generates Visual Studio \u003cspan style=\"color:#ae81ff\"\u003e2012\u003c/span\u003e project files.\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e                                 Optional \u003cspan style=\"color:#f92672\"\u003e[\u003c/span\u003earch\u003cspan style=\"color:#f92672\"\u003e]\u003c/span\u003e can be \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;Win64\u0026#34;\u003c/span\u003e or \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;ARM\u0026#34;\u003c/span\u003e.\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  Visual Studio \u003cspan style=\"color:#ae81ff\"\u003e10\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e2010\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e[\u003c/span\u003earch\u003cspan style=\"color:#f92672\"\u003e]\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e Generates Visual Studio \u003cspan style=\"color:#ae81ff\"\u003e2010\u003c/span\u003e project files.\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e                                 Optional \u003cspan style=\"color:#f92672\"\u003e[\u003c/span\u003earch\u003cspan style=\"color:#f92672\"\u003e]\u003c/span\u003e can be \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;Win64\u0026#34;\u003c/span\u003e or \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;IA64\u0026#34;\u003c/span\u003e.\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  Visual Studio \u003cspan style=\"color:#ae81ff\"\u003e9\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e2008\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e[\u003c/span\u003earch\u003cspan style=\"color:#f92672\"\u003e]\u003c/span\u003e  \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e Generates Visual Studio \u003cspan style=\"color:#ae81ff\"\u003e2008\u003c/span\u003e project files.\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e                                 Optional \u003cspan style=\"color:#f92672\"\u003e[\u003c/span\u003earch\u003cspan style=\"color:#f92672\"\u003e]\u003c/span\u003e can be \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;Win64\u0026#34;\u003c/span\u003e or \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;IA64\u0026#34;\u003c/span\u003e.\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  Borland Makefiles            \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e Generates Borland makefiles.\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  NMake Makefiles              \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e Generates NMake makefiles.\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  NMake Makefiles JOM          \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e Generates JOM makefiles.\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  MSYS Makefiles               \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e Generates MSYS makefiles.\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  MinGW Makefiles              \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e Generates a make file \u003cspan style=\"color:#66d9ef\"\u003efor\u003c/span\u003e use with\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e                                 mingw32-make.\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  Green Hills MULTI            \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e Generates Green Hills MULTI files\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e                                 \u003cspan style=\"color:#f92672\"\u003e(\u003c/span\u003eexperimental, work-in-progress\u003cspan style=\"color:#f92672\"\u003e)\u003c/span\u003e.\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  Unix Makefiles               \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e Generates standard UNIX makefiles.\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  Ninja                        \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e Generates build.ninja files.\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  Ninja Multi-Config           \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e Generates build-\u0026lt;Config\u0026gt;.ninja files.\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  Watcom WMake                 \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e Generates Watcom WMake makefiles.\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  CodeBlocks - MinGW Makefiles \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e Generates CodeBlocks project files.\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  CodeBlocks - NMake Makefiles \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e Generates CodeBlocks project files.\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  CodeBlocks - NMake Makefiles JOM\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e                               \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e Generates CodeBlocks project files.\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  CodeBlocks - Ninja           \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e Generates CodeBlocks project files.\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  CodeBlocks - Unix Makefiles  \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e Generates CodeBlocks project files.\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  CodeLite - MinGW Makefiles   \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e Generates CodeLite project files.\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  CodeLite - NMake Makefiles   \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e Generates CodeLite project files.\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  CodeLite - Ninja             \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e Generates CodeLite project files.\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  CodeLite - Unix Makefiles    \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e Generates CodeLite project files.\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  Eclipse CDT4 - NMake Makefiles\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e                               \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e Generates Eclipse CDT 4.0 project files.\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  Eclipse CDT4 - MinGW Makefiles\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e                               \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e Generates Eclipse CDT 4.0 project files.\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  Eclipse CDT4 - Ninja         \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e Generates Eclipse CDT 4.0 project files.\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  Eclipse CDT4 - Unix Makefiles\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e Generates Eclipse CDT 4.0 project files.\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  Kate - MinGW Makefiles       \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e Generates Kate project files.\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  Kate - NMake Makefiles       \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e Generates Kate project files.\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  Kate - Ninja                 \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e Generates Kate project files.\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  Kate - Unix Makefiles        \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e Generates Kate project files.\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  Sublime Text \u003cspan style=\"color:#ae81ff\"\u003e2\u003c/span\u003e - MinGW Makefiles\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e                               \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e Generates Sublime Text \u003cspan style=\"color:#ae81ff\"\u003e2\u003c/span\u003e project files.\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  Sublime Text \u003cspan style=\"color:#ae81ff\"\u003e2\u003c/span\u003e - NMake Makefiles\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e                               \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e Generates Sublime Text \u003cspan style=\"color:#ae81ff\"\u003e2\u003c/span\u003e project files.\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  Sublime Text \u003cspan style=\"color:#ae81ff\"\u003e2\u003c/span\u003e - Ninja       \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e Generates Sublime Text \u003cspan style=\"color:#ae81ff\"\u003e2\u003c/span\u003e project files.\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  Sublime Text \u003cspan style=\"color:#ae81ff\"\u003e2\u003c/span\u003e - Unix Makefiles\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e                               \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e Generates Sublime Text \u003cspan style=\"color:#ae81ff\"\u003e2\u003c/span\u003e project files.\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e","title":"CMake Basic"},{"content":"https://docs.docker.com/engine/swarm/\nDocker Swarm Node Manager Node 초기화 https://docs.docker.com/engine/reference/commandline/swarm_init/\n초기화 Initialize a swarm docker swarm init $ docker swarm init Swarm initialized: current node (bvz81updecsj6wjz393c09vti) is now a manager. To add a worker to this swarm, run the following command: docker swarm join \\ --token SWMTKN-1-3pu6hszjas19xyp7ghgosyx9k8atbfcr8p2is99znpy26u2lkl-1awxwuwd3z9j1z3puu7rcgdbx \\ 172.17.0.2:2377 To add a manager to this swarm, run \u0026#39;docker swarm join-token manager\u0026#39; and follow the instructions. Initialize a swarm with advertised address docker swarm init --advertise-addr \u0026lt;ip|interface\u0026gt;[:port] $ docker swarm init --advertise-addr 192.168.99.121 Swarm initialized: current node (bvz81updecsj6wjz393c09vti) is now a manager. To add a worker to this swarm, run the following command: docker swarm join \\ --token SWMTKN-1-3pu6hszjas19xyp7ghgosyx9k8atbfcr8p2is99znpy26u2lkl-1awxwuwd3z9j1z3puu7rcgdbx \\ 172.17.0.2:2377 To add a manager to this swarm, run \u0026#39;docker swarm join-token manager\u0026#39; and follow the instructions. 노드 추가 Join Node Join a swarm as a node and/or manager\nhttps://docs.docker.com/engine/reference/commandline/swarm_join/\n$ docker swarm join --token SWMTKN-1-3pu6hszjas19xyp7ghgosyx9k8atbfcr8p2is99znpy26u2lkl-7p73s1dx5in4tatdymyhg9hu2 192.168.99.121:2377 This node joined a swarm as a manager. $ docker node ls ID HOSTNAME STATUS AVAILABILITY MANAGER STATUS dkp8vy1dq1kxleu9g4u78tlag * manager2 Ready Active Reachable dvfxp4zseq4s0rih1selh0d20 manager1 Ready Active Leader Docker swarm join-token Worker or Manager join-token 확인\nhttps://docs.docker.com/engine/reference/commandline/swarm_join-token/\n$ docker swarm join-token worker To add a worker to this swarm, run the following command: docker swarm join \\ --token SWMTKN-1-3pu6hszjas19xyp7ghgosyx9k8atbfcr8p2is99znpy26u2lkl-1awxwuwd3z9j1z3puu7rcgdbx \\ 172.17.0.2:2377 $ docker swarm join-token manager To add a manager to this swarm, run the following command: docker swarm join \\ --token SWMTKN-1-3pu6hszjas19xyp7ghgosyx9k8atbfcr8p2is99znpy26u2lkl-7p73s1dx5in4tatdymyhg9hu2 \\ 172.17.0.2:2377 Docker Swarm 노드관리 https://docs.docker.com/engine/swarm/manage-nodes/\ndocker node promote : 관리자노드로 승격 docker node promote NODE [NODE...] Promote one or more nodes to manager in the swarm $ docker node promote node-3 node-2 Node node-3 promoted to a manager in the swarm. Node node-2 promoted to a manager in the swarm. docker node demote : 워크노드로 강등\ndocker node demote NODE [NODE...] Demote one or more nodes from manager in the swarm docker node rm : 노드 삭제\ndocker node rm [OPTIONS] NODE [NODE...] docker node update : 노드 속성 변경\ndocker node update [OPTIONS] NODE docker node update --availability \u0026quot;active\u0026quot;|\u0026quot;pause\u0026quot;|\u0026quot;drain\u0026quot; NODE active : 활성 Options: --availability string Availability of the node (\u0026#34;active\u0026#34;|\u0026#34;pause\u0026#34;|\u0026#34;drain\u0026#34;) --label-add list Add or update a node label (key=value) --label-rm list Remove a node label if exists --role string Role of the node (\u0026#34;worker\u0026#34;|\u0026#34;manager\u0026#34;) # active : 활성 / pause : 일시중지 # drain : Manager Node에서 Worcker Node 사용하지 못하게 빼냄(drain) $ docker node update --availability \u0026#34;active\u0026#34;|\u0026#34;pause\u0026#34;|\u0026#34;drain\u0026#34; NODE Deploy services to a swarm https://docs.docker.com/engine/swarm/services/ https://docs.docker.com/engine/reference/commandline/service_create/\nCreate a service docker service create [OPTIONS] IMAGE [COMMAND] [ARG...] $ docker service create --name mvcapp cdecl/mvcapp:0.1 tv39xae6cwxosh5e5ydaznfwu overall progress: 1 out of 1 tasks 1/1: running [==================================================\u0026gt;] verify: Service converged $ docker service ls ID NAME MODE REPLICAS IMAGE PORTS t7199mqnj0r9 mvcapp replicated 1/1 cdecl/mvcapp:0.1 *:80-\u0026gt;80/tcp Create a service with 4 replica tasks $ docker service create --name mvcapp --replicas=4 cdecl/mvcapp:0.1 7vu2ihz8gqxager66ernevyyb overall progress: 4 out of 4 tasks 1/4: running [==================================================\u0026gt;] 2/4: running [==================================================\u0026gt;] 3/4: running [==================================================\u0026gt;] 4/4: running [==================================================\u0026gt;] verify: Service converged $ docker service ls ID NAME MODE REPLICAS IMAGE PORTS 7vu2ihz8gqxa mvcapp replicated 4/4 cdecl/mvcapp:0.1 Docker Update Service https://docs.docker.com/engine/reference/commandline/service_update/\ndocker service update [OPTIONS] SERVICE # replicas $ docker service update --replicas=2 mvcapp \\mvcapp overall progress: 2 out of 2 tasks 1/2: running [==================================================\u0026gt;] 2/2: running [==================================================\u0026gt;] verify: Service converged # rollback $ docker service update --rollback mvcapp mvcapp rollback: manually requested rollback overall progress: rolling back up 1/4: running [\u0026gt; ] 2/4: new [============================================\u0026gt; ] 3/4: running [\u0026gt; ] 4/4: new [============================================\u0026gt; ] service rolled back: rollback completed # update deploy $ docker service update --image=cdecl/mvcapp:0.2 mvcapp mvcapp overall progress: 4 out of 4 tasks 1/4: running [==================================================\u0026gt;] 2/4: running [==================================================\u0026gt;] 3/4: running [==================================================\u0026gt;] 4/4: running [==================================================\u0026gt;] ","permalink":"https://cdecl.github.io/devops/docker-swarm/","summary":"\u003cp\u003e\u003ca href=\"https://docs.docker.com/engine/swarm/\"\u003ehttps://docs.docker.com/engine/swarm/\u003c/a\u003e\u003c/p\u003e\n\u003ch3 id=\"docker-swarm-node\"\u003eDocker Swarm Node\u003c/h3\u003e\n\u003ch4 id=\"manager-node-초기화\"\u003eManager Node 초기화\u003c/h4\u003e\n\u003cp\u003e\u003ca href=\"https://docs.docker.com/engine/reference/commandline/swarm_init/\"\u003ehttps://docs.docker.com/engine/reference/commandline/swarm_init/\u003c/a\u003e\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e초기화 Initialize a swarm\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003edocker swarm init\u003c/code\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-sh\" data-lang=\"sh\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ docker swarm init\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eSwarm initialized: current node \u003cspan style=\"color:#f92672\"\u003e(\u003c/span\u003ebvz81updecsj6wjz393c09vti\u003cspan style=\"color:#f92672\"\u003e)\u003c/span\u003e is now a manager.\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eTo add a worker to this swarm, run the following command:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    docker swarm join \u003cspan style=\"color:#ae81ff\"\u003e\\\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    --token SWMTKN-1-3pu6hszjas19xyp7ghgosyx9k8atbfcr8p2is99znpy26u2lkl-1awxwuwd3z9j1z3puu7rcgdbx \u003cspan style=\"color:#ae81ff\"\u003e\\\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    172.17.0.2:2377\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eTo add a manager to this swarm, run \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;docker swarm join-token manager\u0026#39;\u003c/span\u003e and follow the instructions.\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cul\u003e\n\u003cli\u003eInitialize a swarm with advertised address\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003edocker swarm init --advertise-addr \u0026lt;ip|interface\u0026gt;[:port]\u003c/code\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-sh\" data-lang=\"sh\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ docker swarm init --advertise-addr 192.168.99.121\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eSwarm initialized: current node \u003cspan style=\"color:#f92672\"\u003e(\u003c/span\u003ebvz81updecsj6wjz393c09vti\u003cspan style=\"color:#f92672\"\u003e)\u003c/span\u003e is now a manager.\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eTo add a worker to this swarm, run the following command:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    docker swarm join \u003cspan style=\"color:#ae81ff\"\u003e\\\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    --token SWMTKN-1-3pu6hszjas19xyp7ghgosyx9k8atbfcr8p2is99znpy26u2lkl-1awxwuwd3z9j1z3puu7rcgdbx \u003cspan style=\"color:#ae81ff\"\u003e\\\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    172.17.0.2:2377\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eTo add a manager to this swarm, run \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;docker swarm join-token manager\u0026#39;\u003c/span\u003e and follow the instructions.\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch4 id=\"노드-추가-join-node\"\u003e노드 추가 Join Node\u003c/h4\u003e\n\u003cp\u003eJoin a swarm as a node and/or manager\u003cbr\u003e\n\u003ca href=\"https://docs.docker.com/engine/reference/commandline/swarm_join/\"\u003ehttps://docs.docker.com/engine/reference/commandline/swarm_join/\u003c/a\u003e\u003c/p\u003e","title":"Docker Swarm 101"},{"content":"Github Actions 101 Github 에서 제공하는 Workflow 툴 GitHub-hosted Runner or Self-Hosted Runner 에서 실행 Actions 탭을 통해서 Template을 선택하고 Yaml 파일로 Task 내용을 기술 .github/workflows 디렉토리 밑에 위치 Runner 종류 GitHub-hosted Runner : MS Azure 가상머신에서 실행 Public Repository : 무료 Private Repository : 2000분/월 무료 Self-Hosted Runner : 자체 머신을 통해 Runner Hosting https://help.github.com/en/actions/hosting-your-own-runners/adding-self-hosted-runners{:target=\u0026quot;_blank\u0026quot;} Actions Basic Actions Tab Workflow syntax for GitHub Actions https://help.github.com/en/actions/reference/workflow-syntax-for-github-actions{:target=\u0026quot;_blank\u0026quot;} awesome-actions https://github.com/sdras/awesome-actions{:target=\u0026quot;_blank\u0026quot;} Workflow runs-on: Virtual machine ubuntu, macos, windows server 제공 기본 Package or apps 가 등록되어 있음 : https://github.com/actions/virtual-environments{:target=\u0026quot;_blank\u0026quot;} Ubuntu : https://github.com/actions/virtual-environments/blob/master/images/linux/Ubuntu1804-README.md{:target=\u0026quot;_blank\u0026quot;} Windows Server : https://github.com/actions/virtual-environments/blob/master/images/win/Windows2019-Readme.md{:target=\u0026quot;_blank\u0026quot;} steps : uses: 예약된 Actions 실행이나 Apps 통합을 통해 Apps 사용 환경 구성 ex\u0026gt; uses: actions/checkout@v2 : git checkout 실행 ex\u0026gt; uses: nuget/setup-nuget@v1 : nuget apps setup ex\u0026gt; uses: microsoft/setup-msbuild@v1 : msbuild setup run: run command 지정 name: CI # workflow 이름 on: # Triggers Event push: branches: [ master ] pull_request: branches: [ master ] jobs: build: # Single job name runs-on: ubuntu-latest # virtual machine steps: - uses: actions/checkout@v2 - name: Run a one-line script run: echo Hello, world! - name: Run a multi-line script run: | echo Add other actions to build, echo test, and deploy your project. Actions 예제 Docker Build \u0026amp; Registry Push ubuntu-latest 이미지에는 Docker Daemon 활성화됨 secrets 변수 : [Settings] - [Secrets] 에서 변수 세팅 (DOCKERHUB_PASS) ${{ secrets.DOCKERHUB_PASS }} name: Docker Image CI on: push: branches: [ master ] jobs: build: runs-on: ubuntu-latest steps: - uses: actions/checkout@v2 - name: Build the Docker image run: docker build . --tag cdecl/gcc-boost - name: docker login run: echo \u0026#39;${{ secrets.DOCKERHUB_PASS }}\u0026#39; | docker login -u cdecl --password-stdin - name: docker push run: docker push cdecl/gcc-boost MSBuild \u0026amp; Nuget Windows 서버 이미지 MSBuild 기반 빌드 msbuild 및 nuget setup uses: nuget/setup-nuget@v1 uses: microsoft/setup-msbuild@v1 name 단위의 run task시 current direcotry reset name: C/C++ CI on: push: branches: [ master ] jobs: build: runs-on: windows-2019 steps: - uses: actions/checkout@v2 - uses: nuget/setup-nuget@v1 - uses: microsoft/setup-msbuild@v1 - name: nuget restore run: | cd src nuget restore asb.sln - name: build run: | cd src msbuild asb.vcxproj /p:configuration=release /p:platform=x64 Container Image 활용 docker container (cdecl/gcc-boost)를 활용 Task 실행 container: cdecl/gcc-boost name: C/C++ CI on: push: branches: [ master ] jobs: build: runs-on: ubuntu-latest container: cdecl/gcc-boost steps: - uses: actions/checkout@v2 - name: check run: | g++ --version - name: make run: | cd src make Go build 및 Docker image registry Tag push only : push tags : \u0026lsquo;.\u0026rsquo; CGO_ENABLED=0 : libc dynamic linked binary 비활성화를 위해 name: Go on: push: tags: \u0026#39;*.*\u0026#39; jobs: build: name: Build runs-on: ubuntu-latest steps: - name: Set up Go 1.x uses: actions/setup-go@v2 with: go-version: ^1.13 id: go - name: Check out code into the Go module directory uses: actions/checkout@v2 - name: Get dependencies run: | go get -v -t -d ./... - name: Build run: CGO_ENABLED=0 go build -v . - name: Build the Docker image run: docker build . --tag cdecl/go-sitecheck - name: docker login \u0026amp; push run: | echo \u0026#39;${{ secrets.DOCKERHUB_PASS }}\u0026#39; | docker login -u cdecl --password-stdin docker push cdecl/go-sitecheck Persisting workflow data using artifacts Artifacts 활용 지속적인 workflow 데이터 관리 actions/upload-artifact@v1 / actions/download-artifact@v1 순서보장을 위해 needs 사용 : 병렬수행 name: artifact test on: push: branches: [ master ] jobs: build-stage: runs-on: ubuntu-latest container: gcc steps: - uses: actions/checkout@v2 - name: check run: | mkdir output cat /etc/*-release \u0026gt; output/release.txt - name: upload artifact uses: actions/upload-artifact@v1 with: name: output path: output test-stage: needs: build-stage runs-on: windows-latest steps: - uses: actions/checkout@v2 - name: download artifact uses: actions/download-artifact@v1 with: name: output - name: check run: | dir type output\\release.txt Manual trigger Events that trigger workflows https://docs.github.com/en/actions/learn-github-actions/events-that-trigger-workflows{:target=\u0026quot;_blank\u0026quot;} 특정 이벤트에 의한 실행이 아닌 매뉴얼로 버튼을 눌러 수행 workflow_dispatch on: workflow_dispatch: inputs: name: description: \u0026#39;workflow start\u0026#39; Create release, upload asset file path 파일이 변경되면 trigger : .github/workflows/ccpp.yml create release : actions/create-release@v1 upload asset : actions/upload-release-asset@v1 참고 : https://github.com/cdecl/asb/blob/master/.github/workflows/ccpp.yml{:target=\u0026quot;_blank\u0026quot;} name: C/C++ CI on: push: paths: - \u0026#39;.github/workflows/ccpp.yml\u0026#39; jobs: build: runs-on: ubuntu-latest steps: - uses: actions/checkout@v2 - name: file run: | mkdir release cat \u0026#39;data \u0026#39; \u0026gt; release/data.txt - name: upload artifact uses: actions/upload-artifact@v1 with: name: release-linux path: release build-release: needs: - build runs-on: ubuntu-latest steps: - name: download artifact uses: actions/download-artifact@v1 with: name: release-linux - name: zip run: | zip -r release.zip release - name: create release id: create_release env: GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }} uses: actions/create-release@v1 with: tag_name: \u0026#39;v1.0\u0026#39; release_name: Release v1.0 draft: false prerelease: false - name: upload release asset uses: actions/upload-release-asset@v1 env: GITHUB_TOKEN: ${{ secrets.TOKEN }} with: upload_url: ${{ steps.create_release.outputs.upload_url }} # create_release 의 결과 asset_path: ./release.zip asset_name: release.zip asset_content_type: application/zip ","permalink":"https://cdecl.github.io/devops/github-actions/","summary":"\u003ch1 id=\"github-actions-101\"\u003eGithub Actions 101\u003c/h1\u003e\n\u003cul\u003e\n\u003cli\u003eGithub 에서 제공하는 Workflow 툴\u003c/li\u003e\n\u003cli\u003eGitHub-hosted Runner or Self-Hosted Runner 에서 실행\u003c/li\u003e\n\u003cli\u003eActions 탭을 통해서 Template을 선택하고 Yaml 파일로 Task 내용을 기술\n\u003cul\u003e\n\u003cli\u003e.github/workflows 디렉토리 밑에 위치\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"runner-종류\"\u003eRunner 종류\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003eGitHub-hosted Runner : MS Azure 가상머신에서 실행\n\u003cul\u003e\n\u003cli\u003ePublic Repository : 무료\u003c/li\u003e\n\u003cli\u003ePrivate Repository : 2000분/월 무료\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003eSelf-Hosted Runner : 자체 머신을 통해 Runner Hosting\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://help.github.com/en/actions/hosting-your-own-runners/adding-self-hosted-runners\"\u003ehttps://help.github.com/en/actions/hosting-your-own-runners/adding-self-hosted-runners\u003c/a\u003e{:target=\u0026quot;_blank\u0026quot;}\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"actions-basic\"\u003eActions Basic\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003eActions Tab\u003c/li\u003e\n\u003cli\u003eWorkflow syntax for GitHub Actions\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://help.github.com/en/actions/reference/workflow-syntax-for-github-actions\"\u003ehttps://help.github.com/en/actions/reference/workflow-syntax-for-github-actions\u003c/a\u003e{:target=\u0026quot;_blank\u0026quot;}\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003eawesome-actions\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://github.com/sdras/awesome-actions\"\u003ehttps://github.com/sdras/awesome-actions\u003c/a\u003e{:target=\u0026quot;_blank\u0026quot;}\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e\u003cimg loading=\"lazy\" src=\"/images/2020-05-18-16-31-11.png\"\u003e\u003c/p\u003e\n\u003ch3 id=\"workflow\"\u003eWorkflow\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003eruns-on: Virtual machine\n\u003cul\u003e\n\u003cli\u003eubuntu, macos, windows server 제공\u003c/li\u003e\n\u003cli\u003e기본 Package or apps 가 등록되어 있음 : \u003ca href=\"https://github.com/actions/virtual-environments\"\u003ehttps://github.com/actions/virtual-environments\u003c/a\u003e{:target=\u0026quot;_blank\u0026quot;}\n\u003cul\u003e\n\u003cli\u003eUbuntu : \u003ca href=\"https://github.com/actions/virtual-environments/blob/master/images/linux/Ubuntu1804-README.md\"\u003ehttps://github.com/actions/virtual-environments/blob/master/images/linux/Ubuntu1804-README.md\u003c/a\u003e{:target=\u0026quot;_blank\u0026quot;}\u003c/li\u003e\n\u003cli\u003eWindows Server : \u003ca href=\"https://github.com/actions/virtual-environments/blob/master/images/win/Windows2019-Readme.md\"\u003ehttps://github.com/actions/virtual-environments/blob/master/images/win/Windows2019-Readme.md\u003c/a\u003e{:target=\u0026quot;_blank\u0026quot;}\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003esteps :\n\u003cul\u003e\n\u003cli\u003euses: 예약된 Actions 실행이나 Apps 통합을 통해 Apps 사용 환경 구성\n\u003cul\u003e\n\u003cli\u003eex\u0026gt; uses: actions/checkout@v2 : git checkout 실행\u003c/li\u003e\n\u003cli\u003eex\u0026gt; uses: nuget/setup-nuget@v1 : nuget apps setup\u003c/li\u003e\n\u003cli\u003eex\u0026gt; uses: microsoft/setup-msbuild@v1 : msbuild setup\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003erun: run command 지정\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-yaml\" data-lang=\"yaml\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003ename\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003eCI                           \u003c/span\u003e \u003cspan style=\"color:#75715e\"\u003e# workflow 이름 \u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003eon\u003c/span\u003e:                                 \u003cspan style=\"color:#75715e\"\u003e# Triggers Event \u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#f92672\"\u003epush\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003ebranches\u003c/span\u003e: [ \u003cspan style=\"color:#ae81ff\"\u003emaster ]\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#f92672\"\u003epull_request\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003ebranches\u003c/span\u003e: [ \u003cspan style=\"color:#ae81ff\"\u003emaster ]\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003ejobs\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#f92672\"\u003ebuild\u003c/span\u003e:                            \u003cspan style=\"color:#75715e\"\u003e# Single job name\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003eruns-on\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003eubuntu-latest         \u003c/span\u003e \u003cspan style=\"color:#75715e\"\u003e# virtual machine\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003esteps\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    - \u003cspan style=\"color:#f92672\"\u003euses\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003eactions/checkout@v2\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    - \u003cspan style=\"color:#f92672\"\u003ename\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003eRun a one-line script\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      \u003cspan style=\"color:#f92672\"\u003erun\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003eecho Hello, world!\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    - \u003cspan style=\"color:#f92672\"\u003ename\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003eRun a multi-line script\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      \u003cspan style=\"color:#f92672\"\u003erun\u003c/span\u003e: |\u003cspan style=\"color:#e6db74\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003e        echo Add other actions to build,\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003e        echo test, and deploy your project.\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch2 id=\"actions-예제\"\u003eActions 예제\u003c/h2\u003e\n\u003ch3 id=\"docker-build--registry-push\"\u003eDocker Build \u0026amp; Registry Push\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003eubuntu-latest 이미지에는 Docker Daemon 활성화됨\u003c/li\u003e\n\u003cli\u003esecrets 변수 : [Settings] - [Secrets] 에서 변수 세팅 (DOCKERHUB_PASS)\n\u003cul\u003e\n\u003cli\u003e${{ secrets.DOCKERHUB_PASS }}\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-yaml\" data-lang=\"yaml\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003ename\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003eDocker Image CI\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003eon\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#f92672\"\u003epush\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003ebranches\u003c/span\u003e: [ \u003cspan style=\"color:#ae81ff\"\u003emaster ]\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003ejobs\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#f92672\"\u003ebuild\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003eruns-on\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003eubuntu-latest\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003esteps\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    - \u003cspan style=\"color:#f92672\"\u003euses\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003eactions/checkout@v2\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    - \u003cspan style=\"color:#f92672\"\u003ename\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003eBuild the Docker image\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      \u003cspan style=\"color:#f92672\"\u003erun\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003edocker build . --tag cdecl/gcc-boost\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    - \u003cspan style=\"color:#f92672\"\u003ename\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003edocker login\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      \u003cspan style=\"color:#f92672\"\u003erun\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003eecho \u0026#39;${{ secrets.DOCKERHUB_PASS }}\u0026#39; | docker login -u cdecl --password-stdin\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    - \u003cspan style=\"color:#f92672\"\u003ename\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003edocker push\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      \u003cspan style=\"color:#f92672\"\u003erun\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003edocker push cdecl/gcc-boost\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003e\u003cimg loading=\"lazy\" src=\"/images/2020-05-18-14-40-10.png\"\u003e\u003c/p\u003e","title":"Github Actions 101"},{"content":"Gitlab CI/CD 101 Gitlab 에서 제공하는 CI/CD 목적의 Workflow 툴 Auto DevOps or gitlab-runner 에서 실행 Setup CI/CD 를 통해 세팅 .gitlab-ci.yml 파일에 기술 Gitlab-Runner gitlab-runner : .gitlab-ci.yml 기반 파이프 라인 구성 Shared Runners : gitlab.com 에서 hosting 해주는 Runner Self hosting Runners : 별도 머신을 통해 Runner 설치 Gitlab-Runner 세팅 (Self hosting) Installing the Runner https://docs.gitlab.com/runner/install/linux-repository.html{:target=\u0026quot;_blank\u0026quot;} Registering Runners https://docs.gitlab.com/runner/register/index.html{:target=\u0026quot;_blank\u0026quot;} Interactive register runner $ sudo gitlab-runner register Runtime platform arch=amd64 os=linux pid=120146 revision=c5874a4b version=12.10.2 Running in system-mode. Please enter the gitlab-ci coordinator URL (e.g. https://gitlab.com/): http://hqgit.inpark.kr/ Please enter the gitlab-ci token for this runner: xxxxxxxxxxxxxxxxxxxxxxxxxxx Please enter the gitlab-ci description for this runner: ci-test runner Please enter the gitlab-ci tags for this runner (comma separated): centos24,ci-test,cdecl Registering runner... succeeded runner=WpQDakzK Please enter the executor: shell, kubernetes, parallels, docker, docker-ssh, ssh, virtualbox, docker+machine, docker-ssh+machine, custom: shell Runner registered successfully. Feel free to start it, but if it\u0026#39;s running already the config should be automatically reloaded! # inline sudo gitlab-runner register \\ --non-interactive \\ --url \u0026#34;https://gitlab.com/\u0026#34; \\ --registration-token \u0026#34;PROJECT_REGISTRATION_TOKEN\u0026#34; \\ --executor \u0026#34;docker\u0026#34; \\ --docker-image alpine:latest \\ --description \u0026#34;docker-runner\u0026#34; \\ --tag-list \u0026#34;docker\u0026#34; \\ sudo gitlab-runner register \\ --non-interactive \\ --url \u0026#34;http://centos.cdecl.net/\u0026#34; \\ --registration-token \u0026#34;PROJECT_REGISTRATION_TOKEN\u0026#34; \\ --executor \u0026#34;docker\u0026#34; \\ --docker-image alpine \\ --description \u0026#34;docker-runner\u0026#34; \\ --tag-list \u0026#34;docker\u0026#34; \\ --env \u0026#34;DOCKER_TLS_CERTDIR=\u0026#34; \\ --docker-privileged=true \\ --docker-volumes \u0026#34;/ansible:/ansible\u0026#34; \\ --docker-extra-hosts \u0026#34;centos.cdecl.net:192.168.0.20\u0026#34; Pipeline Configuration Basic GitLab CI/CD Pipeline Configuration Reference https://docs.gitlab.com/ee/ci/yaml/{:target=\u0026quot;_blank\u0026quot;} Pipeline 기본적으로 git checkout 실행 Github Action 과 다르게 매뉴얼 실행 버튼 존재 image: ubuntu stages: # statge 정의 - build - test - deploy before_script: # - echo \u0026#34;Before script section\u0026#34; - echo \u0026#34;For example you might run an update here or install a build dependency\u0026#34; - echo \u0026#34;Or perhaps you might print out some debugging details\u0026#34; after_script: - echo \u0026#34;After script section\u0026#34; - echo \u0026#34;For example you might do some cleanup here\u0026#34; build_stage: stage: build script: - echo \u0026#34;Do your build here\u0026#34; test_stage1: stage: test script: - echo \u0026#34;Do a test here\u0026#34; - echo \u0026#34;For example run a test suite\u0026#34; test_stage2: stage: test script: - echo \u0026#34;Do another parallel test here\u0026#34; - echo \u0026#34;For example run a lint test\u0026#34; deploy_stage: stage: deploy script: - echo \u0026#34;Do your deploy here\u0026#34; Pipeline 예제 Docker Build \u0026amp; Registry Push 변수 등록 : [Settings] - [CI / CD] - [Variables] ${DOCKERHUB_PASS} image: docker # docker client services: - docker:dind # docker deamon #services: # - name: docker:dind # command: [\u0026#34;--insecure-registry=registry.bucker.net\u0026#34;] stages: - build build_stage: stage: build script: - docker build . --tag cdecl/gcc-boost-test - echo ${DOCKERHUB_PASS} | docker login -u cdecl --password-stdin - docker push cdecl/gcc-boost-test Custome Image 사용 cdecl/gcc-boost 활용 tags를 통해 runner 선택 gitlab.com 의 경우 tags 가 없으면 Shared Runners로 실행 image: cdecl/gcc-boost stages: - build build_stage: stage: build script: - cd src - make - ./asb -test http://httpbin.org/get tags: - centos24-docker # custome runner, docker executor Go build 및 Docker image registry (artifacts) golang 이미지에서 소스 빌드 후, docker build-push artifacts 를 활용, stage간 디렉토리 공유 https://docs.gitlab.com/ee/ci/pipelines/job_artifacts.html{:target=\u0026quot;_blank\u0026quot;} image: docker services: - docker:dind stages: - build - deploy build_stage: image: golang stage: build script: - go build - mkdir ./output - cp go-sitecheck ./output/ artifacts: paths: - ./output deploy_stage: stage: deploy script: - cp ./output/go-sitecheck . - docker build . --tag cdecl/go-sitecheck-test - echo ${DOCKERHUB_PASS} | docker login -u cdecl --password-stdin - docker push cdecl/go-sitecheck-test Runner 정보 Git Commit/Push 계정 Token 생성후, 인증으로 사용 git push 형식 git push origin HEAD:master # OK\ngit push origin master # Error\nstages: # statge 정의 - build - test - deploy build_stage: image: cdecl/alpine-ansible stage: build only: changes: - .gitlab-ci.yml script: - git version - git config --global user.email \u0026#34;-\u0026#34; - git config --global user.name \u0026#34;${GITLAB_USER_LOGIN}\u0026#34; - echo $CI_COMMIT_REF_NAME # master - echo $GITLAB_USER_LOGIN # loginID - date \u0026gt; date.txt - git add -u - git commit -m \u0026#34;update\u0026#34; - git push https://${GITLAB_USER_ID}:${TOKEN}@gitlab.com/cdeclare/ci-test.git HEAD:$CI_COMMIT_REF_NAME ","permalink":"https://cdecl.github.io/devops/gitlab-cicd/","summary":"\u003ch1 id=\"gitlab-cicd-101\"\u003eGitlab CI/CD 101\u003c/h1\u003e\n\u003cul\u003e\n\u003cli\u003eGitlab 에서 제공하는 CI/CD 목적의 Workflow 툴\u003c/li\u003e\n\u003cli\u003eAuto DevOps or gitlab-runner 에서 실행\u003c/li\u003e\n\u003cli\u003eSetup CI/CD 를 통해 세팅\n\u003cul\u003e\n\u003cli\u003e.gitlab-ci.yml 파일에 기술\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"gitlab-runner\"\u003eGitlab-Runner\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003egitlab-runner : .gitlab-ci.yml 기반 파이프 라인 구성\n\u003cul\u003e\n\u003cli\u003eShared Runners : gitlab.com 에서 hosting 해주는 Runner\u003c/li\u003e\n\u003cli\u003eSelf hosting Runners : 별도 머신을 통해 Runner 설치\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"gitlab-runner-세팅-self-hosting\"\u003eGitlab-Runner 세팅 (Self hosting)\u003c/h2\u003e\n\u003ch3 id=\"installing-the-runner\"\u003eInstalling the Runner\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://docs.gitlab.com/runner/install/linux-repository.html\"\u003ehttps://docs.gitlab.com/runner/install/linux-repository.html\u003c/a\u003e{:target=\u0026quot;_blank\u0026quot;}\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"registering-runners\"\u003eRegistering Runners\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://docs.gitlab.com/runner/register/index.html\"\u003ehttps://docs.gitlab.com/runner/register/index.html\u003c/a\u003e{:target=\u0026quot;_blank\u0026quot;}\u003c/li\u003e\n\u003cli\u003eInteractive register runner\u003c/li\u003e\n\u003c/ul\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-sh\" data-lang=\"sh\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ sudo gitlab-runner register \n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eRuntime platform arch\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003eamd64 os\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003elinux pid\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#ae81ff\"\u003e120146\u003c/span\u003e revision\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003ec5874a4b version\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e12.10.2\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eRunning in system-mode.                            \n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e                                                   \n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ePlease enter the gitlab-ci coordinator URL \u003cspan style=\"color:#f92672\"\u003e(\u003c/span\u003ee.g. https://gitlab.com/\u003cspan style=\"color:#f92672\"\u003e)\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ehttp://hqgit.inpark.kr/\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ePlease enter the gitlab-ci token \u003cspan style=\"color:#66d9ef\"\u003efor\u003c/span\u003e this runner:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003exxxxxxxxxxxxxxxxxxxxxxxxxxx\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ePlease enter the gitlab-ci description \u003cspan style=\"color:#66d9ef\"\u003efor\u003c/span\u003e this runner:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eci-test runner\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ePlease enter the gitlab-ci tags \u003cspan style=\"color:#66d9ef\"\u003efor\u003c/span\u003e this runner \u003cspan style=\"color:#f92672\"\u003e(\u003c/span\u003ecomma separated\u003cspan style=\"color:#f92672\"\u003e)\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ecentos24,ci-test,cdecl\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eRegistering runner... succeeded                     runner\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003eWpQDakzK\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ePlease enter the executor: shell, kubernetes, parallels, docker, docker-ssh, ssh, virtualbox, docker+machine, docker-ssh+machine, custom:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eshell\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eRunner registered successfully. Feel free to start it, but \u003cspan style=\"color:#66d9ef\"\u003eif\u003c/span\u003e it\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e\u0026#39;\u003c/span\u003es running already the config should be automatically reloaded! \n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-sh\" data-lang=\"sh\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# inline \u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003esudo gitlab-runner register \u003cspan style=\"color:#ae81ff\"\u003e\\\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  --non-interactive \u003cspan style=\"color:#ae81ff\"\u003e\\\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  --url \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;https://gitlab.com/\u0026#34;\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e\\\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  --registration-token \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;PROJECT_REGISTRATION_TOKEN\u0026#34;\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e\\\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  --executor \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;docker\u0026#34;\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e\\\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  --docker-image alpine:latest \u003cspan style=\"color:#ae81ff\"\u003e\\\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  --description \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;docker-runner\u0026#34;\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e\\\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  --tag-list \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;docker\u0026#34;\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e\\\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003esudo gitlab-runner register \u003cspan style=\"color:#ae81ff\"\u003e\\\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  --non-interactive \u003cspan style=\"color:#ae81ff\"\u003e\\\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  --url \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;http://centos.cdecl.net/\u0026#34;\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e\\\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  --registration-token \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;PROJECT_REGISTRATION_TOKEN\u0026#34;\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e\\\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  --executor \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;docker\u0026#34;\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e\\\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  --docker-image alpine \u003cspan style=\"color:#ae81ff\"\u003e\\\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  --description \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;docker-runner\u0026#34;\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e\\\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  --tag-list \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;docker\u0026#34;\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e\\\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  --env \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;DOCKER_TLS_CERTDIR=\u0026#34;\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e\\\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  --docker-privileged\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003etrue \u003cspan style=\"color:#ae81ff\"\u003e\\\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  --docker-volumes \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;/ansible:/ansible\u0026#34;\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e\\\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  --docker-extra-hosts \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;centos.cdecl.net:192.168.0.20\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch2 id=\"pipeline-configuration-basic\"\u003ePipeline Configuration Basic\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003eGitLab CI/CD Pipeline Configuration Reference\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://docs.gitlab.com/ee/ci/yaml/\"\u003ehttps://docs.gitlab.com/ee/ci/yaml/\u003c/a\u003e{:target=\u0026quot;_blank\u0026quot;}\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003ePipeline\n\u003cul\u003e\n\u003cli\u003e기본적으로 git checkout 실행\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003eGithub Action 과 다르게 매뉴얼 실행 버튼 존재\u003c/li\u003e\n\u003c/ul\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-yaml\" data-lang=\"yaml\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003eimage\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003eubuntu\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003estages\u003c/span\u003e:                   \u003cspan style=\"color:#75715e\"\u003e# statge 정의 \u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  - \u003cspan style=\"color:#ae81ff\"\u003ebuild\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  - \u003cspan style=\"color:#ae81ff\"\u003etest\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  - \u003cspan style=\"color:#ae81ff\"\u003edeploy\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003ebefore_script\u003c/span\u003e:            \u003cspan style=\"color:#75715e\"\u003e# \u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  - \u003cspan style=\"color:#ae81ff\"\u003eecho \u0026#34;Before script section\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  - \u003cspan style=\"color:#ae81ff\"\u003eecho \u0026#34;For example you might run an update here or install a build dependency\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  - \u003cspan style=\"color:#ae81ff\"\u003eecho \u0026#34;Or perhaps you might print out some debugging details\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003eafter_script\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  - \u003cspan style=\"color:#ae81ff\"\u003eecho \u0026#34;After script section\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  - \u003cspan style=\"color:#ae81ff\"\u003eecho \u0026#34;For example you might do some cleanup here\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003ebuild_stage\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#f92672\"\u003estage\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003ebuild\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#f92672\"\u003escript\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    - \u003cspan style=\"color:#ae81ff\"\u003eecho \u0026#34;Do your build here\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003etest_stage1\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#f92672\"\u003estage\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003etest\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#f92672\"\u003escript\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    - \u003cspan style=\"color:#ae81ff\"\u003eecho \u0026#34;Do a test here\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    - \u003cspan style=\"color:#ae81ff\"\u003eecho \u0026#34;For example run a test suite\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003etest_stage2\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#f92672\"\u003estage\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003etest\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#f92672\"\u003escript\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    - \u003cspan style=\"color:#ae81ff\"\u003eecho \u0026#34;Do another parallel test here\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    - \u003cspan style=\"color:#ae81ff\"\u003eecho \u0026#34;For example run a lint test\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003edeploy_stage\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#f92672\"\u003estage\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003edeploy\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#f92672\"\u003escript\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    - \u003cspan style=\"color:#ae81ff\"\u003eecho \u0026#34;Do your deploy here\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003e\u003cimg loading=\"lazy\" src=\"/images/2020-05-18-17-50-34.png\"\u003e\u003c/p\u003e","title":"Gitlab CI/CD"},{"content":"Kubernetes 설치 및 운영 101\n사전 준비 Kubernetes 설치 전 서버 구성 변경 참고 : https://www.mirantis.com/blog/how-install-kubernetes-kubeadm/{:target=\u0026quot;_blank\u0026quot;} Swap 영역을 비활성화 # 일시적인 설정 $ sudo swapoff -a # 영구적인 설정, 아래 swap 파일 시스템을 주석처리 $ sudo vi /etc/fstab ... # /dev/mapper/kube--master--vg-swap_1 none swap sw 0 0 SELinux Disable # 임시 $ sudo setenforce 0 # 영구 $ sudo vi /etc/sysconfig/selinux ... SELinux=disabled 방화벽 Disable $ sudo systemctl disable firewalld $ sudo systemctl stop firewalld 브릿지 네트워크 할성화 # Centos $ sudo vim /etc/sysctl.d/k8s.conf net.bridge.bridge-nf-call-ip6tables = 1 net.bridge.bridge-nf-call-iptables = 1 # Ubuntu $ sudo vim /etc/ufw/sysctl.conf net/bridge/bridge-nf-call-ip6tables = 1 net/bridge/bridge-nf-call-iptables = 1 net/bridge/bridge-nf-call-arptables = 1 Docker Install Centos Install : https://docs.docker.com/engine/install/centos/{:target=\u0026quot;_blank\u0026quot;} Cgroup 드라이버 이슈 최신 Kubernetes는 docker cgroup driver를 cgroupfs → systemd 변경 필요 Master Init 및 Worker Join 시 WARNING 발생 https://kubernetes.io/ko/docs/setup/production-environment/container-runtimes/{:target=\u0026quot;_blank\u0026quot;} kubeadm init --pod-network-cidr 10.244.0.0/16 ... [init] Using Kubernetes version: v1.19.3 [preflight] Running pre-flight checks [WARNING IsDockerSystemdCheck]: detected \u0026#34;cgroupfs\u0026#34; as the Docker cgroup driver. The recommended driver is \u0026#34;systemd\u0026#34;. ... ... 드라이버 변경 작업 /etc/docker/daemon.json 파일 작성 $ cat \u0026lt;\u0026lt;EOF | sudo tee /etc/docker/daemon.json { \u0026#34;exec-opts\u0026#34;: [\u0026#34;native.cgroupdriver=systemd\u0026#34;], \u0026#34;log-driver\u0026#34;: \u0026#34;json-file\u0026#34;, \u0026#34;log-opts\u0026#34;: { \u0026#34;max-size\u0026#34;: \u0026#34;100m\u0026#34; }, \u0026#34;storage-driver\u0026#34;: \u0026#34;overlay2\u0026#34;, \u0026#34;storage-opts\u0026#34;: [ \u0026#34;overlay2.override_kernel_check=true\u0026#34; ] } EOF # 도커 재시작 $ sudo systemctl restart docker # 확인 $ sudo docker info | grep -i cgroup Cgroup Driver: systemd Kubernetes (kubeadm, kubelet, kubectl) 설치 참고 : https://kubernetes.io/docs/setup/independent/install-kubeadm/{:target=\u0026quot;_blank\u0026quot;} Kubernetes 설치 : Centos7 기준 Docker 설치 sudo yum install -y docker sudo systemctl enable docker \u0026amp;\u0026amp; systemctl start docker sudo usermod -aG docker $USER kubeadm, kubelet, kubectl : Repo 추가 및 패키지 설치 $ cat \u0026lt;\u0026lt;EOF \u0026gt; /etc/yum.repos.d/kubernetes.repo [kubernetes] name=Kubernetes baseurl=https://packages.cloud.google.com/yum/repos/kubernetes-el7-x86_64 enabled=1 gpgcheck=1 repo_gpgcheck=1 gpgkey=https://packages.cloud.google.com/yum/doc/yum-key.gpg https://packages.cloud.google.com/yum/doc/rpm-package-key.gpg EOF $ sudo yum install -y kubelet kubeadm kubectl $ sudo systemctl enable kubelet \u0026amp;\u0026amp; systemctl start kubelet # 버전이 안맞을 경우 지정 # sudo yum install kubelet-[version] kubeadm-[version] kubectl-[version] kubectl 자동완성 # sh source \u0026lt;(kubectl completion sh) echo \u0026#34;source \u0026lt;(kubectl completion sh)\u0026#34; \u0026gt;\u0026gt; ~/.shrc # zsh source \u0026lt;(kubectl completion zsh) echo \u0026#34;if [ $commands[kubectl] ]; then source \u0026lt;(kubectl completion zsh); fi\u0026#34; \u0026gt;\u0026gt; ~/.zshrc Master Node Init 및 Worker Node Join Master Node 설정 Master 초기화 네트워크 클래스 대역을 설정 필요 : --pod-network-cidr 10.244.0.0/16 sudo kubeadm init --pod-network-cidr 10.244.0.0/16 Kubectl 사용 : To start using your cluster.. 아래 항목 3줄 실행 [init] Using Kubernetes version: v1.10.5 ... To start using your cluster, you need to run the following as a regular user: mkdir -p $HOME/.kube sudo cp -i /etc/kubernetes/admin.conf $HOME/.kube/config sudo chown $(id -u):$(id -g) $HOME/.kube/config ... You can now join any number of machines by running the following on each node as root: kubeadm join 192.168.28.15:6443 --token 1ovd36.ft4mefr909iotg0a --discovery-token-ca-cert-hash sha256:82953a3ed178aa8c511792d0e21d9d3283e7575f3d3350a00bea3e34c2b87d29 Pod 상태 확인 coredns STATUS → Pending (∵ Overlay network 미설치) $ kubectl get po -A NAMESPACE NAME READY STATUS RESTARTS AGE kube-system coredns-66bff467f8-ktvsz 0/1 Pending 0 19s kube-system coredns-66bff467f8-nvvjz 0/1 Pending 0 19s kube-system etcd-node1 1/1 Running 0 29s kube-system kube-apiserver-node1 1/1 Running 0 29s kube-system kube-controller-manager-node1 1/1 Running 0 29s kube-system kube-proxy-s582x 1/1 Running 0 19s kube-system kube-scheduler-node1 1/1 Running 0 29s Overlay network : Calico 설치 Overlay network 종류 https://kubernetes.io/docs/concepts/cluster-administration/networking/{:target=\u0026quot;_blank\u0026quot;} Install Calico for on-premises deployments https://docs.projectcalico.org/getting-started/kubernetes/self-managed-onprem/onpremises{:target=\u0026quot;_blank\u0026quot;} # Install Calico for on-premises deployments $ kubectl apply -f https://docs.projectcalico.org/manifests/calico-typha.yaml coredns 서비스가 정상적으로 Running $ kubectl get po -A NAMESPACE NAME READY STATUS RESTARTS AGE kube-system calico-kube-controllers-799fb94867-bcntz 0/1 CrashLoopBackOff 3 2m6s kube-system calico-node-jtcmt 0/1 Running 1 2m7s kube-system calico-typha-6bc9dd6468-x2hjj 0/1 Pending 0 2m6s kube-system coredns-66bff467f8-ktvsz 0/1 Running 0 3m23s kube-system coredns-66bff467f8-nvvjz 0/1 Running 0 3m23s kube-system etcd-node1 1/1 Running 0 3m33s kube-system kube-apiserver-node1 1/1 Running 0 3m33s kube-system kube-controller-manager-node1 1/1 Running 0 3m33s kube-system kube-proxy-s582x 1/1 Running 0 3m23s kube-system kube-scheduler-node1 1/1 Running 0 3m33s Worker Node 추가 (Join) Worker Node 실행 # Join 명령 가져오기 $ kubeadm token create --print-join-command kubeadm join 192.168.28.15:6443 --token 1ovd36.ft4mefr909iotg0a --discovery-token-ca-cert-hash sha256:82953a3ed178aa8c511792d0e21d9d3283e7575f3d3350a00bea3e34c2b87d29 # Worker node 에서 실행 $ kubeadm join 192.168.28.15:6443 --token 1ovd36.ft4mefr909iotg0a --discovery-token-ca-cert-hash sha256:82953a3ed178aa8c511792d0e21d9d3283e7575f3d3350a00bea3e34c2b87d29 노드 상태 확인 \u0026gt; kubectl get node NAME STATUS ROLES AGE VERSION node1 Ready master 8m50s v1.18.6 node2 Ready \u0026lt;none\u0026gt; 16s v1.18.6 node3 Ready \u0026lt;none\u0026gt; 16s v1.18.6 서비스 배포 : 명령어(CLI) 기반 배포 / 서비스 추가 (Deployment/ReplicaSet) Docker 이미지를 빌드하여 Docker Hub에 업로드 : 서비스에는 Private Hub 구성 필요 kubectl create deployment 명령으로 Pod, Deployment 생성 kubectl expose 명령으로 Deployment 기준으로 서비스 생성 Kubernetes NodePort vs LoadBalancer vs Ingress? When should I use what? # pod 및 배포(deployment) 생성 $ kubectl create deployment mvcapp --image=cdecl/mvcapp:0.3 deployment.apps/mvcapp created # 서비스 생성 $ kubectl expose deploy/mvcapp --type=NodePort --port=80 --name=mvcapp --target-port=80 service/mvcapp exposed $ kubectl get deploy NAME READY UP-TO-DATE AVAILABLE AGE mvcapp 1/1 1 1 24s $ kubectl get po NAME READY STATUS RESTARTS AGE mvcapp-7b6b66bd55-g26wg 1/1 Running 0 34s $ kubectl get svc NAME TYPE CLUSTER-IP EXTERNAL-IP PORT(S) AGE mvcapp NodePort 10.107.145.24 \u0026lt;none\u0026gt; 80:31521/TCP 20s # 서비스 확인 - Nodeport $ curl localhost:31521 ... \u0026lt;div\u0026gt;Project: Mvcapp\u0026lt;/div\u0026gt; \u0026lt;div\u0026gt;Hostname: mvcapp-7b6b66bd55-g26wg\u0026lt;/div\u0026gt; \u0026lt;div\u0026gt;Request Count : 1\u0026lt;/div\u0026gt; \u0026lt;div\u0026gt;Version: 0.3\u0026lt;/div\u0026gt; ... Scale / 이미지 변경(배포) Scale(노드개수) 조정 $ kubectl scale deployment/mvcapp --replicas=4 deployment.apps/mvcapp scaled $ kubectl get pod -o wide NAME READY STATUS RESTARTS AGE IP NODE NOMINATED NODE READINESS GATES mvcapp-7b6b66bd55-4gppf 1/1 Running 0 78s 10.244.135.3 node3 \u0026lt;none\u0026gt; \u0026lt;none\u0026gt; mvcapp-7b6b66bd55-4gssq 1/1 Running 0 78s 10.244.104.4 node2 \u0026lt;none\u0026gt; \u0026lt;none\u0026gt; mvcapp-7b6b66bd55-4lqrt 1/1 Running 0 78s 10.244.135.2 node3 \u0026lt;none\u0026gt; \u0026lt;none\u0026gt; mvcapp-7b6b66bd55-g26wg 1/1 Running 0 7m14s 10.244.104.3 node2 \u0026lt;none\u0026gt; \u0026lt;none\u0026gt; 이미지 변경 (버전업 배포) : 0.3 → 0.4 $ kubectl set image deployment/mvcapp mvcapp=cdecl/mvcapp:0.4 deployment.apps/mvcapp image updated $ curl localhost:31521 ... \u0026lt;div\u0026gt;Project: Mvcapp\u0026lt;/div\u0026gt; \u0026lt;div\u0026gt;Hostname: mvcapp-78bbf7db4b-5fkdz\u0026lt;/div\u0026gt; \u0026lt;div\u0026gt;RemoteAddr: 10.244.166.128\u0026lt;/div\u0026gt; \u0026lt;div\u0026gt;X-Forwarded-For: \u0026lt;/div\u0026gt; \u0026lt;div\u0026gt;Request Count : 1\u0026lt;/div\u0026gt; \u0026lt;div\u0026gt;Version: 0.4\u0026lt;/div\u0026gt; ... $ kubectl rollout history deployment/mvcapp deployment.apps/mvcapp REVISION CHANGE-CAUSE 1 \u0026lt;none\u0026gt; 2 \u0026lt;none\u0026gt; 이전 버전으로 롤백 $ kubectl rollout undo deployment/mvcapp deployment.apps/mvcapp rolled back 서비스 배포 : YAML 파일 기반 배포 / 서비스 추가 정책을 정의한 yaml 기반 정의 NodePort 기반의 Deployment 및 서비스 정의 # mvcapp-deploy-service.yaml apiVersion: apps/v1 kind: Deployment metadata: name: mvcapp spec: selector: matchLabels: app: mvcapp replicas: 2 # --replicas=2 옵션과 동일 template: # create pods using pod definition metadata: labels: app: mvcapp spec: containers: - name: mvcapp image: cdecl/mvcapp:0.3 ports: - containerPort: 80 --- apiVersion: v1 kind: Service metadata: name: mvcapp spec: type: NodePort selector: app: mvcapp ports: - port: 80 targetPort: 80 yaml 파일 적용 # yaml 파일 적용 $ kubectl apply -f mvcapp-deploy-service.yaml deployment.apps \u0026#34;mvcapp\u0026#34; created service \u0026#34;mvcapp\u0026#34; created $ kubectl get deploy -o wide NAME READY UP-TO-DATE AVAILABLE AGE CONTAINERS IMAGES SELECTOR mvcapp 2/2 2 2 4h47m mvcapp cdecl/mvcapp:0.3 app=mvcapp $ kubectl get po -o wide NAME READY STATUS RESTARTS AGE IP NODE NOMINATED NODE READINESS GATES mvcapp-6b98dfc657-27zfr 1/1 Running 0 48m 10.244.135.18 node3 \u0026lt;none\u0026gt; \u0026lt;none\u0026gt; mvcapp-6b98dfc657-p8hh4 1/1 Running 0 48m 10.244.104.27 node2 \u0026lt;none\u0026gt; \u0026lt;none\u0026gt; $ kubectl k get svc -o wide NAME TYPE CLUSTER-IP EXTERNAL-IP PORT(S) AGE SELECTOR mvcapp NodePort 10.106.102.27 \u0026lt;none\u0026gt; 80:30010/TCP 4h47m app=mvcapp 서비스 유형 : ClusterIP vs NodePort vs LoadBalancer https://medium.com/google-cloud/kubernetes-nodeport-vs-loadbalancer-vs-ingress-when-should-i-use-what-922f010849e0{:target=\u0026quot;_blank\u0026quot;} ClusterIP A ClusterIP service is the default Kubernetes service 클러스터내에서의 유효한 주소 및 Access 가능 외부 노출을 위해 별도의 Proxy 가 필요 $ kubectl get svc NAME TYPE CLUSTER-IP EXTERNAL-IP PORT(S) AGE kubernetes ClusterIP 10.43.0.1 \u0026lt;none\u0026gt; 443/TCP 2d18h NodePort ClusterIP 기능 이외에 추가 기능이 있는 서비스 형태 노드 머신의 kube-proxy 통해 별도 30000-32767 사이의 포트로 서비스 노출 nodePort 를 통해 지정가능 하며, 지정하지 않으면 랜덤 할당 $ kubectl get svc NAME TYPE CLUSTER-IP EXTERNAL-IP PORT(S) AGE mvcapp NodePort 10.43.37.45 \u0026lt;none\u0026gt; 80:30010/TCP 2d18h LoadBalancer LoadBalancer (L4/L7) 서비스를 통해 Worker Node 를 자동 등록하고 NodePort 를 통해 서비스 연결 Cloud 서비스 등에서만 지원하며 서비스 노출하는 표준적인 방법 Bare Metal 환경에서는 metallb NAME TYPE CLUSTER-IP EXTERNAL-IP PORT(S) AGE mvcapp LoadBalancer 172.20.43.194 xxxxx-885321513.ap-northeast-2.elb.amazonaws.com 80:30291/TCP 10d Ingress 서비스 유형은 아니며, L7 프로토콜을 통한 \u0026ldquo;스마트 라우터\u0026rdquo; 또는 진입점 역할하는 특별한 서비스 일반적인 L7 Layer Proxy 담당하는 kubernetes 서비스 $ kubectl get po -A NAMESPACE NAME READY STATUS RESTARTS AGE ... ingress-nginx default-http-backend-65dd5949d9-mlr9f 1/1 Running 0 2d19h ingress-nginx nginx-ingress-controller-q4j6b 1/1 Running 0 2d19h ingress-nginx nginx-ingress-controller-rngt9 1/1 Running 0 2d19h ... $ kubectl get ing NAME CLASS HOSTS ADDRESS PORTS AGE eks-ingress \u0026lt;none\u0026gt; * xxxxx-1951376961.ap-northeast-2.elb.amazonaws.com 80 9d Kubernetes DNS 클러스터내에 유효한 이름 규칙 및 DNS 서비스 조회를 담당 CoreDNS Kubernetes 1.15 클러스터 지원되며 Kubernetes 이하 버전의 클러스터는 kube-dns를 기본 DNS 공급자로 사용 $ kubectl get po -A NAMESPACE NAME READY STATUS RESTARTS AGE ... kube-system coredns-6f85d5fb88-njg26 1/1 Running 0 2d19h kube-system coredns-6f85d5fb88-ns99n 1/1 Running 0 2d18h kube-system coredns-autoscaler-79599b9dc6-gtpzq 1/1 Running 0 2d19h $ kubectl get svc -A NAMESPACE NAME TYPE CLUSTER-IP EXTERNAL-IP PORT(S) AGE kube-system kube-dns ClusterIP 10.43.0.10 \u0026lt;none\u0026gt; 53/UDP,53/TCP,9153/TCP 2d19h Lookup 규칙 https://kubernetes.io/ko/docs/concepts/services-networking/dns-pod-service/{:target=\u0026quot;_blank\u0026quot;} Service: [service-name].[namespace].svc.cluster.local $ nslookup \u0026gt; lserver 10.43.0.10 Default server: 10.43.0.10 Address: 10.43.0.10#53 \u0026gt; mvcapp.default.svc.cluster.local Server:\t10.43.0.10 Address:\t10.43.0.10#53 Name:\tmvcapp.default.svc.cluster.local Address: 10.43.37.45 Pod 내부 세팅 : /etc/resolv.conf 해당 Pod 에 해당하는 이름 규칙의 질의 내용 표시 default.svc.cluster.local svc.cluster.local cluster.local $ kubectl exec -it mvcapp-6cc9667f94-ljvjx -- /bin/bash root@mvcapp-6cc9667f94-ljvjx:/app$ cat /etc/resolv.conf nameserver 10.43.0.10 search default.svc.cluster.local svc.cluster.local cluster.local options ndots:5 서비스 노출 (AWS) AWS type: LoadBalancer : 서비스 타입을 LoadBalancer 지정하면 EXTERNAL-IP 자동으로 할당 Ingress 활용 : annotations 을 통해 alb 할당 EKS 클러스터 생성 및 Ingress apiVersion: v1 kind: Service metadata: name: mvcapp spec: type: LoadBalancer # ← selector: app: mvcapp ports: - port: 80 targetPort: 80 $ kubectl get svc -o wide NAME TYPE CLUSTER-IP EXTERNAL-IP PORT(S) AGE SELECTOR mvcapp LoadBalancer 172.20.9.13 xx-651061089.ap-northeast-2.elb.amazonaws.com 80:30731/TCP 30d app=mvcapp AWS Ingress apiVersion: networking.k8s.io/v1beta1 kind: Ingress metadata: name: eks-ingress annotations: kubernetes.io/ingress.class: alb #alb.ingress.kubernetes.io/target-type: ip # ip, instance alb.ingress.kubernetes.io/scheme: internet-facing # internal, internet-facing spec: rules: - host: mvcapp.cdecl.net http: paths: - backend: serviceName: mvcapp servicePort: 80 $ kubectl get ing -o wide NAME HOSTS ADDRESS PORTS AGE eks-ingress * xx-default-eksingres-ea83.ap-northeast-2.elb.amazonaws.com 80 30d 서비스 노출 (Bare Metal) Bare-metal considerations : https://kubernetes.github.io/ingress-nginx/deploy/baremetal/{:target=\u0026quot;_blank\u0026quot;} 쿠버네티스 네트워킹 이해하기 : https://coffeewhale.com/k8s/network/2019/05/30/k8s-network-03/{:target=\u0026quot;_blank\u0026quot;} MetalLB 활용 memberlist 기반 ARP(IPv4)/NDP(IPv6) 활용 LB 리더 역할 관리 metallb vs keepalibed : https://metallb.universe.tf/concepts/layer2/#comparison-to-keepalived{:target=\u0026quot;_blank\u0026quot;} Keepalived uses the Virtual Router Redundancy Pro MetalLB on the other hand relies on memberlist to know when a Node in the cluster is no longer reachable and the service IPs from that node should be moved elsewhere. 설치 : https://metallb.universe.tf/installation/#installation-by-manifest{:target=\u0026quot;_blank\u0026quot;} # On first install only $ kubectl create secret generic -n metallb-system memberlist --from-literal=secretkey=\u0026#34;$(openssl rand -base64 128)\u0026#34; ConfigMap apiVersion: v1 kind: ConfigMap metadata: namespace: metallb-system name: config data: config: | address-pools: - name: default pro addresses: - 192.168.28.100-192.168.28.103 서비스의 type: LoadBalancer 지정하면 addresses 범위 내 할당 (지정가능: loadBalancerIP) apiVersion: v1 kind: Service metadata: name: mvcapp spec: type: LoadBalancer #loadBalancerIP: 192.168.28.100 selector: app: mvcapp ports: - port: 80 targetPort: 80 $ curl 192.168.28.100 NodePort : Over a NodePort Service Nodeport 자동(수동)으로 할당한 30000-32767 over port 활용 apiVersion: v1 kind: Service metadata: name: mvcapp spec: type: NodePort selector: app: mvcapp ports: - port: 80 targetPort: 80 # nodePort: 30010 # 포트 임의지정 # PORT(S) 확인 $ kubectl get svc NAME TYPE CLUSTER-IP EXTERNAL-IP PORT(S) AGE mvcapp NodePort 10.106.102.27 \u0026lt;none\u0026gt; 80:30010/TCP 128m # Master 및 Worker IP $ curl localhost:30010 $ curl 192.168.28.16:30010 External IPs 일반적으로 권고하지 않음 서비스에 externalIPs 를 설정하여 서비스 노출 spec: externalIPs: - 192.168.28.15 - 192.168.28.16 - 192.168.28.17 $ netstat -an | grep \u0026#39;LISTEN \u0026#39; tcp 0 0 192.168.28.15:80 0.0.0.0:* LISTEN $ ansible all -m shell -a \u0026#34;netstat -an | grep \u0026#39;LISTEN \u0026#39; | grep \u0026#39;:80\u0026#39; \u0026#34; node3 | CHANGED | rc=0 \u0026gt;\u0026gt; tcp 0 0 192.168.28.17:80 0.0.0.0:* LISTEN node1 | CHANGED | rc=0 \u0026gt;\u0026gt; tcp 0 0 192.168.28.15:80 0.0.0.0:* LISTEN node2 | CHANGED | rc=0 \u0026gt;\u0026gt; tcp 0 0 192.168.28.16:80 0.0.0.0:* LISTEN Ingress controller 외부 서비스 접속을 위한 도메인, URL 기반 서비스 분기 역할 L7 레이어 기능 RBAC 기반 설치 : 역할 기반 접근 제어(role-based access control) 그중 가장 많이 활성화 된 nginx 기반 Ingress 컨트롤러 이용 ingress-nginx repository : https://github.com/kubernetes/ingress-nginx{:target=\u0026quot;_blank\u0026quot;} Installation Guide : https://github.com/kubernetes/ingress-nginx/blob/master/docs/deploy/index.md{:target=\u0026quot;_blank\u0026quot;} # Bare-metal Using NodePort: namespace/ingress-nginx created serviceaccount/ingress-nginx created configmap/ingress-nginx-controller created clusterrole.rbac.authorization.k8s.io/ingress-nginx created clusterrolebinding.rbac.authorization.k8s.io/ingress-nginx created role.rbac.authorization.k8s.io/ingress-nginx created rolebinding.rbac.authorization.k8s.io/ingress-nginx created service/ingress-nginx-controller-admission created service/ingress-nginx-controller created deployment.apps/ingress-nginx-controller created validatingwebhookconfiguration.admissionregistration.k8s.io/ingress-nginx-admission created serviceaccount/ingress-nginx-admission created clusterrole.rbac.authorization.k8s.io/ingress-nginx-admission created clusterrolebinding.rbac.authorization.k8s.io/ingress-nginx-admission created role.rbac.authorization.k8s.io/ingress-nginx-admission created rolebinding.rbac.authorization.k8s.io/ingress-nginx-admission created job.batch/ingress-nginx-admission-create created job.batch/ingress-nginx-admission-patch created Ingress Rule 적용 apiVersion: networking.k8s.io/v1beta1 kind: Ingress metadata: name: main-ingress annotations: nginx.ingress.kubernetes.io/rewrite-target: / spec: rules: # - host: mvcapp.cdecl.net - http: paths: - backend: serviceName: mvcapp servicePort: 80 Ingress 확인 $ kubectl get ing NAME CLASS HOSTS ADDRESS PORTS AGE main-ingress \u0026lt;none\u0026gt; * 192.168.28.16 80 25s 기타 Network 분석 Route Route table 기반으로 Pod 이 존재하는 Gateway로 보내는 구조 ① 접속하는 Node에 존재하는 Pod 은 Gateway를 0.0.0.0 해당 Node 처리 ② 다른 Node에 존재하는 Pod 은 해당 대역대의 서버(Gateway) 보내어 ①과 같은 과정으로 처리 후 리턴 AWS EKS LoadBalancer ALB/NLB Target Group의 NodePort I/F 를 통해 서비스 접속 고가용성 토폴로지 (HA) 구성 https://kubernetes.io/ko/docs/setup/production-environment/tools/kubeadm/ha-topology/{:target=\u0026quot;_blank\u0026quot;} 중첩된 etcd 토플로지 (Stacked etcd) 컨트롤 플레인(\u0026ndash;control-plane) 구성 요소를 실행하는 kubeadm 관리되는 노드 추가 Master Node 설정 Single Master 구성에서 옵션 추가 필요 kube-apiserver 를 위한 load balancer 구성 필요 --control-plane-endpoint \u0026quot;LOAD_BALANCER_IP:PORT\u0026quot; --upload-certs : 인증서를 업로드 (자동배포) # kube01 $ kubeadm init --pod-network-cidr 10.244.0.0/16 --control-plane-endpoint \u0026#34;10.239.36.184:6443\u0026#34; --upload-certs ... mkdir -p $HOME/.kube sudo cp -i /etc/kubernetes/admin.conf $HOME/.kube/config sudo chown $(id -u):$(id -g) $HOME/.kube/config ... You can now join any number of the control-plane node running the following command on each as root: kubeadm join 10.239.36.184:6443 --token 62f4ot.y6c026tnpxmanqrk \\ --discovery-token-ca-cert-hash sha256:5c7b19f57085d582d216681924a869a3fa66dd042f55fdfd3c7ac32115f01c18 \\ --control-plane --certificate-key 11f38363a6f08d6d89e8b37a00599a0ffbd9a5210d86b9709ffed7249af23716 ... kubeadm join 10.239.36.184:6443 --token 62f4ot.y6c026tnpxmanqrk \\ --discovery-token-ca-cert-hash sha256:5c7b19f57085d582d216681924a869a3fa66dd042f55fdfd3c7ac32115f01c18 control-plane join 명렁어 추가됨 # kube04 $ kubeadm join 10.239.36.184:6443 --token 62f4ot.y6c026tnpxmanqrk \\ --discovery-token-ca-cert-hash sha256:5c7b19f57085d582d216681924a869a3fa66dd042f55fdfd3c7ac32115f01c18 \\ --control-plane --certificate-key 11f38363a6f08d6d89e8b37a00599a0ffbd9a5210d86b9709ffed7249af23716 $ kubectl get node NAME STATUS ROLES AGE VERSION kube01 Ready master 8m58s v1.19.3 kube02 Ready \u0026lt;none\u0026gt; 5m v1.19.3 kube03 Ready \u0026lt;none\u0026gt; 4m50s v1.19.3 kube04 Ready master 2m7s v1.19.3 HA에서 control plane 노드 제거 제거 할 노드에서 reset 명령 실행 # kube04 $ sudo kubeadm reset kubectl delete node로 control plane노드 를 제거하지 않도록 한다. 만약 kubectl delete node로 삭제하는 경우 이후 추가 되는 control plane 노드들은 HA에 추가 될수 없다. 그 이유는 kubeadm reset은 HA내 다른 control plane 노드의 etcd에서 etcd endpoint 정보를 지우지만 kubectl delete node는 HA 내의 다른 controle plane 노드에서 etcd endpoint 정보를 지우지 못하기 때문이다. 이로 인해 이후 HA에 추가되는 control plane 노드는 삭제된 노드의 etcd endpoint 접속이 되지 않기 때문에 etcd 유효성 검사 과정에서 오류가 발생하게 된다. 참고 : https://fliedcat.tistory.com/170{:target=\u0026quot;_blank\u0026quot;} Nginx 정보 (참고) Load balancer 구성을 위한 reverse proxy 세팅 # /etc/nginx/nginx.conf stream { upstream kube { server kube01:6443; server kube04:6443; } server { listen 6443; proxy_pass kube; } } 외부 etcd 토플로지 (External etcd) 별도의 서버를 통해 etcd 서비스를 분산하는 방법 이 토플로지는 중첩된 토플로지에 비해 호스트 개수가 두배나 필요하다. 이 토플로지로 HA 클러스터를 구성하기 위해서는 최소한 3개의 컨트롤 플레인과 3개의 etcd 노드가 필요하다. Kubernetes 초기화 $ sudo kubeadm reset -f ","permalink":"https://cdecl.github.io/devops/kubernetes-101/","summary":"\u003cp\u003eKubernetes 설치 및 운영 101\u003c/p\u003e\n\u003ch2 id=\"사전-준비\"\u003e사전 준비\u003c/h2\u003e\n\u003ch3 id=\"kubernetes-설치-전-서버-구성-변경\"\u003eKubernetes 설치 전 서버 구성 변경\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e참고 : \u003ca href=\"https://www.mirantis.com/blog/how-install-kubernetes-kubeadm/\"\u003ehttps://www.mirantis.com/blog/how-install-kubernetes-kubeadm/\u003c/a\u003e{:target=\u0026quot;_blank\u0026quot;}\u003c/li\u003e\n\u003cli\u003eSwap 영역을 비활성화\u003c/li\u003e\n\u003c/ul\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-sh\" data-lang=\"sh\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# 일시적인 설정 \u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ sudo swapoff -a\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# 영구적인 설정, 아래 swap 파일 시스템을 주석처리 \u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ sudo vi /etc/fstab\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e...\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# /dev/mapper/kube--master--vg-swap_1 none            swap    sw              0       0\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cul\u003e\n\u003cli\u003eSELinux Disable\u003c/li\u003e\n\u003c/ul\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-sh\" data-lang=\"sh\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# 임시 \u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ sudo setenforce \u003cspan style=\"color:#ae81ff\"\u003e0\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# 영구\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ sudo vi /etc/sysconfig/selinux\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e...\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eSELinux\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003edisabled  \n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cul\u003e\n\u003cli\u003e방화벽 Disable\u003c/li\u003e\n\u003c/ul\u003e\n\u003cpre tabindex=\"0\"\u003e\u003ccode\u003e$ sudo systemctl disable firewalld\n$ sudo systemctl stop firewalld\n\u003c/code\u003e\u003c/pre\u003e\u003cul\u003e\n\u003cli\u003e브릿지 네트워크 할성화\u003c/li\u003e\n\u003c/ul\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-sh\" data-lang=\"sh\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# Centos\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ sudo vim /etc/sysctl.d/k8s.conf\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003enet.bridge.bridge-nf-call-ip6tables \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003enet.bridge.bridge-nf-call-iptables \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-sh\" data-lang=\"sh\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# Ubuntu\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ sudo vim /etc/ufw/sysctl.conf\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003enet/bridge/bridge-nf-call-ip6tables \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003enet/bridge/bridge-nf-call-iptables \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003enet/bridge/bridge-nf-call-arptables \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch3 id=\"docker-install\"\u003eDocker Install\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003eCentos Install : \u003ca href=\"https://docs.docker.com/engine/install/centos/\"\u003ehttps://docs.docker.com/engine/install/centos/\u003c/a\u003e{:target=\u0026quot;_blank\u0026quot;}\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"cgroup-드라이버-이슈\"\u003eCgroup 드라이버 이슈\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e최신 Kubernetes는 docker cgroup driver를 cgroupfs → systemd 변경 필요\n\u003cul\u003e\n\u003cli\u003eMaster Init 및 Worker Join 시 WARNING 발생\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://kubernetes.io/ko/docs/setup/production-environment/container-runtimes/\"\u003ehttps://kubernetes.io/ko/docs/setup/production-environment/container-runtimes/\u003c/a\u003e{:target=\u0026quot;_blank\u0026quot;}\u003c/li\u003e\n\u003c/ul\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-sh\" data-lang=\"sh\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ekubeadm init --pod-network-cidr 10.244.0.0/16\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e...\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003e[\u003c/span\u003einit\u003cspan style=\"color:#f92672\"\u003e]\u003c/span\u003e Using Kubernetes version: v1.19.3\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003e[\u003c/span\u003epreflight\u003cspan style=\"color:#f92672\"\u003e]\u003c/span\u003e Running pre-flight checks\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#f92672\"\u003e[\u003c/span\u003eWARNING IsDockerSystemdCheck\u003cspan style=\"color:#f92672\"\u003e]\u003c/span\u003e: detected \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;cgroupfs\u0026#34;\u003c/span\u003e as the Docker cgroup driver. \n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  The recommended driver is \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;systemd\u0026#34;\u003c/span\u003e. ...\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e...\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cul\u003e\n\u003cli\u003e드라이버 변경 작업\n\u003cul\u003e\n\u003cli\u003e/etc/docker/daemon.json 파일 작성\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-sh\" data-lang=\"sh\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ cat \u003cspan style=\"color:#e6db74\"\u003e\u0026lt;\u0026lt;EOF | sudo tee /etc/docker/daemon.json\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003e{\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003e  \u0026#34;exec-opts\u0026#34;: [\u0026#34;native.cgroupdriver=systemd\u0026#34;],\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003e  \u0026#34;log-driver\u0026#34;: \u0026#34;json-file\u0026#34;,\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003e  \u0026#34;log-opts\u0026#34;: {\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003e    \u0026#34;max-size\u0026#34;: \u0026#34;100m\u0026#34;\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003e  },\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003e  \u0026#34;storage-driver\u0026#34;: \u0026#34;overlay2\u0026#34;,\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003e  \u0026#34;storage-opts\u0026#34;: [\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003e    \u0026#34;overlay2.override_kernel_check=true\u0026#34;\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003e  ]\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003e}\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003eEOF\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# 도커 재시작 \u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ sudo systemctl restart docker\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# 확인 \u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ sudo docker info | grep -i cgroup\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e Cgroup Driver: systemd\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003chr\u003e\n\u003ch2 id=\"kubernetes-kubeadm-kubelet-kubectl-설치\"\u003eKubernetes (kubeadm, kubelet, kubectl) 설치\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003e참고 : \u003ca href=\"https://kubernetes.io/docs/setup/independent/install-kubeadm/\"\u003ehttps://kubernetes.io/docs/setup/independent/install-kubeadm/\u003c/a\u003e{:target=\u0026quot;_blank\u0026quot;}\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"kubernetes-설치--centos7-기준\"\u003eKubernetes 설치 : Centos7 기준\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003eDocker 설치\u003c/li\u003e\n\u003c/ul\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-sh\" data-lang=\"sh\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003esudo yum install -y docker\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003esudo systemctl enable docker \u003cspan style=\"color:#f92672\"\u003e\u0026amp;\u0026amp;\u003c/span\u003e systemctl start docker\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003esudo usermod -aG docker $USER\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cul\u003e\n\u003cli\u003ekubeadm, kubelet, kubectl : Repo 추가 및 패키지 설치\u003c/li\u003e\n\u003c/ul\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-sh\" data-lang=\"sh\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ cat \u003cspan style=\"color:#e6db74\"\u003e\u0026lt;\u0026lt;EOF \u0026gt; /etc/yum.repos.d/kubernetes.repo\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003e[kubernetes]\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003ename=Kubernetes\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003ebaseurl=https://packages.cloud.google.com/yum/repos/kubernetes-el7-x86_64\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003eenabled=1\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003egpgcheck=1\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003erepo_gpgcheck=1\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003egpgkey=https://packages.cloud.google.com/yum/doc/yum-key.gpg https://packages.cloud.google.com/yum/doc/rpm-package-key.gpg\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003eEOF\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ sudo yum install -y kubelet kubeadm kubectl\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ sudo systemctl enable kubelet \u003cspan style=\"color:#f92672\"\u003e\u0026amp;\u0026amp;\u003c/span\u003e systemctl start kubelet\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# 버전이 안맞을 경우 지정 \u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# sudo yum install kubelet-[version] kubeadm-[version] kubectl-[version]\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cul\u003e\n\u003cli\u003ekubectl 자동완성\u003c/li\u003e\n\u003c/ul\u003e\n\u003cpre tabindex=\"0\"\u003e\u003ccode\u003e# sh\nsource \u0026lt;(kubectl completion sh)\necho \u0026#34;source \u0026lt;(kubectl completion sh)\u0026#34; \u0026gt;\u0026gt; ~/.shrc \n\n# zsh\nsource \u0026lt;(kubectl completion zsh) \necho \u0026#34;if [ $commands[kubectl] ]; then source \u0026lt;(kubectl completion zsh); fi\u0026#34; \u0026gt;\u0026gt; ~/.zshrc \n\u003c/code\u003e\u003c/pre\u003e\u003ch2 id=\"master-node-init-및-worker-node-join\"\u003eMaster Node Init 및 Worker Node Join\u003c/h2\u003e\n\u003ch3 id=\"master-node-설정\"\u003eMaster Node 설정\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003eMaster 초기화\n\u003cul\u003e\n\u003cli\u003e네트워크 클래스 대역을 설정 필요 : \u003ccode\u003e--pod-network-cidr 10.244.0.0/16\u003c/code\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-sh\" data-lang=\"sh\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003esudo kubeadm init --pod-network-cidr 10.244.0.0/16\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cul\u003e\n\u003cli\u003eKubectl 사용 : To start using your cluster.. 아래 항목 3줄 실행\u003c/li\u003e\n\u003c/ul\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-sh\" data-lang=\"sh\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003e[\u003c/span\u003einit\u003cspan style=\"color:#f92672\"\u003e]\u003c/span\u003e Using Kubernetes version: v1.10.5\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e...\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eTo start using your cluster, you need to run the following as a regular user:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  mkdir -p $HOME/.kube\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  sudo cp -i /etc/kubernetes/admin.conf $HOME/.kube/config\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  sudo chown \u003cspan style=\"color:#66d9ef\"\u003e$(\u003c/span\u003eid -u\u003cspan style=\"color:#66d9ef\"\u003e)\u003c/span\u003e:\u003cspan style=\"color:#66d9ef\"\u003e$(\u003c/span\u003eid -g\u003cspan style=\"color:#66d9ef\"\u003e)\u003c/span\u003e $HOME/.kube/config\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e...\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eYou can now join any number of machines by running the following on each node\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eas root:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  kubeadm join 192.168.28.15:6443 --token 1ovd36.ft4mefr909iotg0a --discovery-token-ca-cert-hash sha256:82953a3ed178aa8c511792d0e21d9d3283e7575f3d3350a00bea3e34c2b87d29 \n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cul\u003e\n\u003cli\u003ePod 상태 확인\n\u003cul\u003e\n\u003cli\u003ecoredns STATUS → Pending  (∵  Overlay network 미설치)\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-sh\" data-lang=\"sh\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ kubectl get po -A\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eNAMESPACE     NAME                            READY   STATUS    RESTARTS   AGE\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ekube-system   coredns-66bff467f8-ktvsz        0/1     Pending   \u003cspan style=\"color:#ae81ff\"\u003e0\u003c/span\u003e          19s\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ekube-system   coredns-66bff467f8-nvvjz        0/1     Pending   \u003cspan style=\"color:#ae81ff\"\u003e0\u003c/span\u003e          19s\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ekube-system   etcd-node1                      1/1     Running   \u003cspan style=\"color:#ae81ff\"\u003e0\u003c/span\u003e          29s\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ekube-system   kube-apiserver-node1            1/1     Running   \u003cspan style=\"color:#ae81ff\"\u003e0\u003c/span\u003e          29s\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ekube-system   kube-controller-manager-node1   1/1     Running   \u003cspan style=\"color:#ae81ff\"\u003e0\u003c/span\u003e          29s\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ekube-system   kube-proxy-s582x                1/1     Running   \u003cspan style=\"color:#ae81ff\"\u003e0\u003c/span\u003e          19s\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ekube-system   kube-scheduler-node1            1/1     Running   \u003cspan style=\"color:#ae81ff\"\u003e0\u003c/span\u003e          29s\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch3 id=\"overlay-network--calico-설치\"\u003eOverlay network : Calico 설치\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003eOverlay network 종류\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://kubernetes.io/docs/concepts/cluster-administration/networking/\"\u003ehttps://kubernetes.io/docs/concepts/cluster-administration/networking/\u003c/a\u003e{:target=\u0026quot;_blank\u0026quot;}\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003eInstall Calico for on-premises deployments\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://docs.projectcalico.org/getting-started/kubernetes/self-managed-onprem/onpremises\"\u003ehttps://docs.projectcalico.org/getting-started/kubernetes/self-managed-onprem/onpremises\u003c/a\u003e{:target=\u0026quot;_blank\u0026quot;}\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-sh\" data-lang=\"sh\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# Install Calico for on-premises deployments\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ kubectl apply -f https://docs.projectcalico.org/manifests/calico-typha.yaml\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cul\u003e\n\u003cli\u003ecoredns 서비스가 정상적으로 Running\u003c/li\u003e\n\u003c/ul\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-sh\" data-lang=\"sh\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ kubectl get po -A\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eNAMESPACE     NAME                                       READY   STATUS             RESTARTS   AGE\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ekube-system   calico-kube-controllers-799fb94867-bcntz   0/1     CrashLoopBackOff   \u003cspan style=\"color:#ae81ff\"\u003e3\u003c/span\u003e          2m6s\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ekube-system   calico-node-jtcmt                          0/1     Running            \u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e          2m7s\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ekube-system   calico-typha-6bc9dd6468-x2hjj              0/1     Pending            \u003cspan style=\"color:#ae81ff\"\u003e0\u003c/span\u003e          2m6s\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ekube-system   coredns-66bff467f8-ktvsz                   0/1     Running            \u003cspan style=\"color:#ae81ff\"\u003e0\u003c/span\u003e          3m23s\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ekube-system   coredns-66bff467f8-nvvjz                   0/1     Running            \u003cspan style=\"color:#ae81ff\"\u003e0\u003c/span\u003e          3m23s\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ekube-system   etcd-node1                                 1/1     Running            \u003cspan style=\"color:#ae81ff\"\u003e0\u003c/span\u003e          3m33s\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ekube-system   kube-apiserver-node1                       1/1     Running            \u003cspan style=\"color:#ae81ff\"\u003e0\u003c/span\u003e          3m33s\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ekube-system   kube-controller-manager-node1              1/1     Running            \u003cspan style=\"color:#ae81ff\"\u003e0\u003c/span\u003e          3m33s\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ekube-system   kube-proxy-s582x                           1/1     Running            \u003cspan style=\"color:#ae81ff\"\u003e0\u003c/span\u003e          3m23s\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ekube-system   kube-scheduler-node1                       1/1     Running            \u003cspan style=\"color:#ae81ff\"\u003e0\u003c/span\u003e          3m33s\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch3 id=\"worker-node-추가-join\"\u003eWorker Node 추가 (Join)\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003eWorker Node 실행\u003c/li\u003e\n\u003c/ul\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-sh\" data-lang=\"sh\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# Join 명령 가져오기 \u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ kubeadm token create --print-join-command\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ekubeadm join 192.168.28.15:6443 --token 1ovd36.ft4mefr909iotg0a     --discovery-token-ca-cert-hash sha256:82953a3ed178aa8c511792d0e21d9d3283e7575f3d3350a00bea3e34c2b87d29 \n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# Worker node 에서 실행 \u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ kubeadm join 192.168.28.15:6443 --token 1ovd36.ft4mefr909iotg0a --discovery-token-ca-cert-hash sha256:82953a3ed178aa8c511792d0e21d9d3283e7575f3d3350a00bea3e34c2b87d29 \n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cul\u003e\n\u003cli\u003e노드 상태 확인\u003c/li\u003e\n\u003c/ul\u003e\n\u003cpre tabindex=\"0\"\u003e\u003ccode\u003e\u0026gt; kubectl get node\nNAME    STATUS   ROLES    AGE     VERSION\nnode1   Ready    master   8m50s   v1.18.6\nnode2   Ready    \u0026lt;none\u0026gt;   16s     v1.18.6\nnode3   Ready    \u0026lt;none\u0026gt;   16s     v1.18.6\n\u003c/code\u003e\u003c/pre\u003e\u003chr\u003e\n\u003ch2 id=\"서비스-배포--명령어cli-기반\"\u003e서비스 배포 : 명령어(CLI) 기반\u003c/h2\u003e\n\u003cp\u003e\u003cimg loading=\"lazy\" src=\"https://subicura.com/assets/article_images/2019-05-19-kubernetes-basic-1/workload.png\"\u003e\u003c/p\u003e","title":"Kubernetes 101"},{"content":"Flask 에서 SQLAlchemy 사용시 Query 팁\n설정 Connection 기본 DBMS 연결 정보\n# MySQL app.config[\u0026#39;SQLALCHEMY_DATABASE_URI\u0026#39;] = r\u0026#39;mysql+pymysql://user:passwd@address:3306/db_name?charset=UTF8MB4\u0026#39; db = SQLAlchemy() db.init_app(app) Bind 추가 기본 DBMS 이외, 추가적인 DB 정보 추가\napp.config[\u0026#39;SQLALCHEMY_BINDS\u0026#39;] = { \u0026#39;dbms1\u0026#39;: r\u0026#39;mysql+pymysql://user:passwd@address1:3306/db_name?charset=UTF8MB4\u0026#39;, \u0026#39;dbms2\u0026#39;: r\u0026#39;mysql+pymysql://user:passwd@address2:3306/db_name?charset=UTF8MB4\u0026#39; } # Model Example class Network(db.Model): __tablename__ = \u0026#39;network\u0026#39; __bind_key__ = \u0026#39;dbms1\u0026#39; ip = db.Column(db.String(128), primary_key=True) switch = db.Column(db.String(128)) doc = db.Column(db.JSON) AlchemyEncoder SQLAlchemy JSON Encoder\nclass AlchemyEncoder(json.JSONEncoder): def default(self, obj): if isinstance(obj.__class__, DeclarativeMeta): # an SQLAlchemy class fields = {} for field in [x for x in dir(obj) if not x.startswith(\u0026#39;_\u0026#39;) and x != \u0026#39;metadata\u0026#39;]: data = obj.__getattribute__(field) try: json.dumps(data) # this will fail on non-encodable values, like other classes fields[field] = data except TypeError: if isinstance(data, datetime): fields[field] = data.strftime(\u0026#39;%Y-%m-%d %H:%M:%S\u0026#39;) elif isinstance(data, date): fields[field] = data.strftime(\u0026#39;%Y-%m-%d\u0026#39;) else: fields[field] = None return fields return json.JSONEncoder.default(self, obj) Flask Basic Route @app.route(\u0026#39;/api/network/\u0026#39;) def api_network(): cur = db.session.query(Network) return json.dumps({ \u0026#39;data\u0026#39;: cur.all() }, cls=AlchemyEncoder) DB Model Generate # 해당 DB 전체 Table 대상 $ ./venv/bin/flask-sqlacodegen \u0026#39;mysql+pymysql://user:passwd@address2:3306/db_name\u0026#39; --flask # 해당 DB 테이블 지정 $ ./venv/bin/flask-sqlacodegen \u0026#39;mysql+pymysql://user:passwd@address2:3306/db_name\u0026#39; --flask --table network,other_table Query Sample Select All cur = db.session.query(Network) Select Filter, Sort # Filter cur = db.session.query(network).filter(network.switch == switch_name) cur = db.session.query(network).filter(network.ip.like(\u0026#39;{}%\u0026#39;.format(ip))) cur = db.session.query(network).filter(network.switch.in_((\u0026#39;AA\u0026#39;, \u0026#39;BB\u0026#39;))) # Text filter, json cur = db.session.query(network).filter(text(r\u0026#39;\u0026#39;\u0026#39;doc-\u0026gt;\u0026gt;\u0026#34;$.name\u0026#34; \u0026lt;\u0026gt; \u0026#39;\u0026#39; \u0026#39;\u0026#39;\u0026#39;)) # OR cur = db.session.query(network).filter(or_(network.ip == ip, network.switch == switch_name)) # AND cur = db.session.query(network).filter(and_(network.ip == ip, network.switch == switch_name)) # SORT cur = db.session.query(network).filter(network.switch == switch_name) \\ .order_by(network.ip.desc()) Join # Join cur = db.session.query(Network, NetworkSwitch) \\ .filter(Network.ip == NetworkSwitch.ip, Network.switch == NetworkSwitch.switch) # Outer Join cur = db.session.query(Network) \\ .outerjoin(NetworkSwitch, and_(Network.ip == NetworkSwitch.ip, Network.switch == NetworkSwitch.switch)) # Self Join, Table Alias NetworkAlias = aliased(Network) cur = db.session.query(Network, NetworkAlias) \\ .filter(Network.ip == NetworkAlias.ip, Network.switch == NetworkAlias.switch) ","permalink":"https://cdecl.github.io/dev/sqlalchemy-query-simple/","summary":"\u003cp\u003eFlask 에서 SQLAlchemy 사용시 Query 팁\u003c/p\u003e\n\u003ch2 id=\"설정\"\u003e설정\u003c/h2\u003e\n\u003ch3 id=\"connection\"\u003eConnection\u003c/h3\u003e\n\u003cp\u003e기본 DBMS 연결 정보\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-py\" data-lang=\"py\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# MySQL\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eapp\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003econfig[\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;SQLALCHEMY_DATABASE_URI\u0026#39;\u003c/span\u003e] \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003er\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;mysql+pymysql://user:passwd@address:3306/db_name?charset=UTF8MB4\u0026#39;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003edb \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e SQLAlchemy()\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003edb\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003einit_app(app)\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch3 id=\"bind-추가\"\u003eBind 추가\u003c/h3\u003e\n\u003cp\u003e기본 DBMS 이외, 추가적인 DB 정보 추가\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-py\" data-lang=\"py\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eapp\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003econfig[\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;SQLALCHEMY_BINDS\u0026#39;\u003c/span\u003e] \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e { \n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;dbms1\u0026#39;\u003c/span\u003e: \u003cspan style=\"color:#e6db74\"\u003er\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;mysql+pymysql://user:passwd@address1:3306/db_name?charset=UTF8MB4\u0026#39;\u003c/span\u003e,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;dbms2\u0026#39;\u003c/span\u003e: \u003cspan style=\"color:#e6db74\"\u003er\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;mysql+pymysql://user:passwd@address2:3306/db_name?charset=UTF8MB4\u0026#39;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e}\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# Model Example\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003eclass\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eNetwork\u003c/span\u003e(db\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003eModel):\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    __tablename__ \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;network\u0026#39;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    __bind_key__ \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;dbms1\u0026#39;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    ip \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e db\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003eColumn(db\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003eString(\u003cspan style=\"color:#ae81ff\"\u003e128\u003c/span\u003e), primary_key\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#66d9ef\"\u003eTrue\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    switch \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e db\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003eColumn(db\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003eString(\u003cspan style=\"color:#ae81ff\"\u003e128\u003c/span\u003e))\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    doc \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e db\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003eColumn(db\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003eJSON)\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch3 id=\"alchemyencoder\"\u003eAlchemyEncoder\u003c/h3\u003e\n\u003cp\u003eSQLAlchemy JSON Encoder\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-py\" data-lang=\"py\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003eclass\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eAlchemyEncoder\u003c/span\u003e(json\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003eJSONEncoder):\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#66d9ef\"\u003edef\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003edefault\u003c/span\u003e(self, obj):\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#66d9ef\"\u003eif\u003c/span\u003e isinstance(obj\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003e__class__, DeclarativeMeta):\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e            \u003cspan style=\"color:#75715e\"\u003e# an SQLAlchemy class\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e            fields \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e {}\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e            \u003cspan style=\"color:#66d9ef\"\u003efor\u003c/span\u003e field \u003cspan style=\"color:#f92672\"\u003ein\u003c/span\u003e [x \u003cspan style=\"color:#66d9ef\"\u003efor\u003c/span\u003e x \u003cspan style=\"color:#f92672\"\u003ein\u003c/span\u003e dir(obj) \u003cspan style=\"color:#66d9ef\"\u003eif\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003enot\u003c/span\u003e x\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003estartswith(\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;_\u0026#39;\u003c/span\u003e) \u003cspan style=\"color:#f92672\"\u003eand\u003c/span\u003e x \u003cspan style=\"color:#f92672\"\u003e!=\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;metadata\u0026#39;\u003c/span\u003e]:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e                data \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e obj\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#a6e22e\"\u003e__getattribute__\u003c/span\u003e(field)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e                \u003cspan style=\"color:#66d9ef\"\u003etry\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e                    json\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003edumps(data) \u003cspan style=\"color:#75715e\"\u003e# this will fail on non-encodable values, like other classes\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e                    fields[field] \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e data\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e                \u003cspan style=\"color:#66d9ef\"\u003eexcept\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eTypeError\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e                    \u003cspan style=\"color:#66d9ef\"\u003eif\u003c/span\u003e isinstance(data, datetime):\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e                        fields[field] \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e data\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003estrftime(\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;%Y-%m-\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e%d\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e %H:%M:%S\u0026#39;\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e                    \u003cspan style=\"color:#66d9ef\"\u003eelif\u003c/span\u003e isinstance(data, date):\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e                        fields[field] \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e data\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003estrftime(\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;%Y-%m-\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e%d\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e                    \u003cspan style=\"color:#66d9ef\"\u003eelse\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e                        fields[field] \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003eNone\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e            \u003cspan style=\"color:#66d9ef\"\u003ereturn\u003c/span\u003e fields\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#66d9ef\"\u003ereturn\u003c/span\u003e json\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003eJSONEncoder\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003edefault(self, obj)\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch3 id=\"flask-basic-route\"\u003eFlask Basic Route\u003c/h3\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-py\" data-lang=\"py\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#a6e22e\"\u003e@app.route\u003c/span\u003e(\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;/api/network/\u0026#39;\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003edef\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eapi_network\u003c/span\u003e():\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    cur \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e db\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003esession\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003equery(Network)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#66d9ef\"\u003ereturn\u003c/span\u003e json\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003edumps({ \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;data\u0026#39;\u003c/span\u003e: cur\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003eall() }, cls\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003eAlchemyEncoder)\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch3 id=\"db-model-generate\"\u003eDB Model Generate\u003c/h3\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-sh\" data-lang=\"sh\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# 해당 DB 전체 Table 대상 \u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ ./venv/bin/flask-sqlacodegen \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;mysql+pymysql://user:passwd@address2:3306/db_name\u0026#39;\u003c/span\u003e --flask\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# 해당 DB 테이블 지정\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ ./venv/bin/flask-sqlacodegen \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;mysql+pymysql://user:passwd@address2:3306/db_name\u0026#39;\u003c/span\u003e --flask --table network,other_table\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch2 id=\"query-sample\"\u003eQuery Sample\u003c/h2\u003e\n\u003ch3 id=\"select-all\"\u003eSelect All\u003c/h3\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-py\" data-lang=\"py\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ecur \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e db\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003esession\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003equery(Network)\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch3 id=\"select-filter-sort\"\u003eSelect Filter, Sort\u003c/h3\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-py\" data-lang=\"py\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# Filter \u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ecur \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e db\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003esession\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003equery(network)\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003efilter(network\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003eswitch \u003cspan style=\"color:#f92672\"\u003e==\u003c/span\u003e switch_name)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ecur \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e db\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003esession\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003equery(network)\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003efilter(network\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003eip\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003elike(\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e{}\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e%\u0026#39;\u003c/span\u003e\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003eformat(ip)))\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ecur \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e db\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003esession\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003equery(network)\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003efilter(network\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003eswitch\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003ein_((\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;AA\u0026#39;\u003c/span\u003e, \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;BB\u0026#39;\u003c/span\u003e)))\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# Text filter, json\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ecur \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e db\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003esession\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003equery(network)\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003efilter(text(\u003cspan style=\"color:#e6db74\"\u003er\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;\u0026#39;\u0026#39;doc-\u0026gt;\u0026gt;\u0026#34;$.name\u0026#34; \u0026lt;\u0026gt; \u0026#39;\u0026#39; \u0026#39;\u0026#39;\u0026#39;\u003c/span\u003e))\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# OR\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ecur \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e db\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003esession\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003equery(network)\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003efilter(or_(network\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003eip \u003cspan style=\"color:#f92672\"\u003e==\u003c/span\u003e ip, network\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003eswitch \u003cspan style=\"color:#f92672\"\u003e==\u003c/span\u003e switch_name))\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# AND\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ecur \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e db\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003esession\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003equery(network)\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003efilter(and_(network\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003eip \u003cspan style=\"color:#f92672\"\u003e==\u003c/span\u003e ip, network\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003eswitch \u003cspan style=\"color:#f92672\"\u003e==\u003c/span\u003e switch_name))\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# SORT\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ecur \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e db\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003esession\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003equery(network)\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003efilter(network\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003eswitch \u003cspan style=\"color:#f92672\"\u003e==\u003c/span\u003e switch_name) \\\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003eorder_by(network\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003eip\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003edesc())\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch3 id=\"join\"\u003eJoin\u003c/h3\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-py\" data-lang=\"py\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# Join \u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ecur \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e db\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003esession\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003equery(Network, NetworkSwitch) \\\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003efilter(Network\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003eip \u003cspan style=\"color:#f92672\"\u003e==\u003c/span\u003e NetworkSwitch\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003eip, Network\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003eswitch \u003cspan style=\"color:#f92672\"\u003e==\u003c/span\u003e NetworkSwitch\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003eswitch)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# Outer Join\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ecur \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e db\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003esession\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003equery(Network) \\\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003eouterjoin(NetworkSwitch, and_(Network\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003eip \u003cspan style=\"color:#f92672\"\u003e==\u003c/span\u003e NetworkSwitch\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003eip, Network\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003eswitch \u003cspan style=\"color:#f92672\"\u003e==\u003c/span\u003e NetworkSwitch\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003eswitch)) \n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# Self Join, Table Alias  \u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eNetworkAlias \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e aliased(Network)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ecur \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e db\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003esession\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003equery(Network, NetworkAlias) \\\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003efilter(Network\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003eip \u003cspan style=\"color:#f92672\"\u003e==\u003c/span\u003e NetworkAlias\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003eip, Network\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003eswitch \u003cspan style=\"color:#f92672\"\u003e==\u003c/span\u003e NetworkAlias\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003eswitch)\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e","title":"SQLAlchemy Query Basic (w/Flask)"},{"content":"Ansible-101\nAnsible Install Centos 7 기본적으로 Python 2.7 기반으로 설치 됨 추후 pywinrm 패키지가 필요할때, python2-pip 패키지 추가 설치 필요 sudo yum install ansible 대안으로 pip 으로 설치 하는 방법 (user) pip install ansible # --user 용어 정의 Inventory : 관리하는 원격 서버 목록 지정하지 않으면 Default Path 의 hosts 파일을 참조 /etc/ansible/hosts Module : Task 를 실행하는 방법 (모듈) https://docs.ansible.com/ansible/latest/modules/modules_by_category.html{:target=\u0026quot;_blank\u0026quot;} e.g. - command, shell, copy, service Playbook : Task 실행 프로세스 정의서 Yaml 파일로 작성 멱등성(idempotence) : 연산을 여러 번 적용하더라도 결과가 달라지지 않는 성질을 의미한다. Ansbile Config Path : /etc/ansible/ansible.cfg Ignore ansible ssh authenticity : ssh 최초 접속시 인증을 host key 체크 생략 https://stackoverflow.com/questions/32297456/how-to-ignore-ansible-ssh-authenticity-checking{:target=\u0026quot;_blank\u0026quot;} [defaults] host_key_checking = False Callback plugins minimal stdout [defaults] stdout_callback = minimal 참고 : How to disable strict host key checking in ssh? https://askubuntu.com/questions/87449/how-to-disable-strict-host-key-checking-in-ssh{:target=\u0026quot;_blank\u0026quot;} Inventory 구성 Public key 등록 사용 방법 : 키를 생성하고 public 키를 관리되는 서버에 등록 후 사용 # Key 생성 ssh-keygen # Public key 등록 ssh-copy-id [server-ip] Inventory 서버 등록 : /etc/ansible/hosts 기본디렉토리의 Host 파일을 사용하지 않는다면 -i 옵션으로 Inventory 파일 지정 https://docs.ansible.com/ansible/latest/user_guide/intro_inventory.html#list-of-behavioral-inventory-parameters{:target=\u0026quot;_blank\u0026quot;} # ansible host 파일 예제 192.168.1.5 [db] 192.168.1.10 [webservers] 192.168.1.100 192.168.1.110 # hosts 파일에 등록된 경우 [apiserver] apiserver1 apiserver2 # host명으로 등록 server1\tansible_host=192.168.1.50 server2\tansible_host=192.168.1.51 Host 지정 방법 all : 해당 Inventory의 모든 서버 webservers : webservers 라고 정의된 서버 목록 192.168.1.100 : 192.168.1.100 서버 Ad-hook Execute ansible 명령을 통한 inline 실행 주요 인수 Usage: ansible \u0026lt;host-pattern\u0026gt; [options] -a MODULE_ARGS, --args=MODULE_ARGS module arguments -e EXTRA_VARS, --extra-vars=EXTRA_VARS set additional variables as key=value or YAML/JSON, if filename prepend with @ -f FORKS, --forks=FORKS specify number of parallel processes to use (default=5) -h, --help show this help message and exit -i INVENTORY, --inventory=INVENTORY, --inventory-file=INVENTORY specify inventory host path or comma separated host list. --inventory-file is deprecated -m MODULE_NAME, --module-name=MODULE_NAME module name to execute (default=command) -v, --verbose verbose mode (-vvv for more, -vvvv to enable connection debugging) --version show program\u0026#39;s version number, config file location, configured module search path, module location, executable location and exit -b, --become run operations with become (does not imply password prompting) - Example hostname 확인 # webservers 목록 실행 # command 모듈, \u0026#34;hostname\u0026#34; 인수 ansible webservers -m command -a \u0026#34;hostname\u0026#34; # default module (생략가능) : -m command ansible webservers -a \u0026#34;hostname\u0026#34; # 모든 서버 ansible all -a \u0026#34;hostname\u0026#34; 기타 모듈 사용 # ping 모듈 ansible webservers -m ping # copy 모듈 : local → host ansible webservers -m copy -a \u0026#34;src=file.txt dest=/home/cdecl/web/\u0026#34; # service 모듈 : kubelet 서비스를 시작 ansible webservers -m service -a \u0026#34;name=kubelet state=started\u0026#34; Playbook 사용 일련의 Task(작업)를 기술하여, 프로세스를 실행하는 방법\n간략한 설명 name : 작업을 설명하는 식별자 (주석, 생략가능) 모듈 내에서의 name 은 다른 의미 gather_facts : (yes | no ) Gathering Facts 작업 실행 및 생략 Facts : 작업 시작전 Host 의 Name, CPU, Memory 등을 수집하는 Setup 모듈 hosts : Inventory 내의 hosts 지정 tasks : 작업 목록들 (배열) register : 작업을 해당 이름으로 등록, debug 항목에서 표준 출력을 받아오기 위해 사용 debug : debug 용 작업들 (msg, stdout 출력) become : root 권한으로 실행 become_user : sudo 를 통해 실행할 계정 변수값 평가 : \u0026quot; {{ 변수 }} \u0026quot; -e 파라미터를 통해 전달 가능 - Example Ping 모듈 테스트 - name: ping test hosts: webservers gather_facts: no tasks: - ping: ansible-playbook ping.yml Shell 모듈 : out 이란 이름으로 작업을 등록 - name: get hostname hosts: localhost tasks: - shell: \u0026#34;hostname\u0026#34; register: out # out 이란 이름으로 작업을 등록 - debug: \u0026#34;var=out.stdout_lines\u0026#34; # out 의 stdout 을 모두 출력 \u0026gt; ansible-playbook hostname.yml localhost | CHANGED | rc=0 \u0026gt;\u0026gt; centos24 localhost | SUCCESS =\u0026gt; { \u0026#34;out.stdout_lines\u0026#34;: [ \u0026#34;centos24\u0026#34; ] } Service 모듈 - name: nginx service start hosts: localhost # gather_facts: no tasks: - service: # nginx 서비스를 시작 name: nginx state: started # - service: \u0026#34;name=nginx state=started\u0026#34; # inline 으로 표현 가능 become: yes # root 권한 실행 \u0026gt; # changed=1 : 상태 변화 있음 \u0026gt; ansible-playbook nginx.yml PLAY [nginx service start] TASK [service] ************changed: [localhost] PLAY RECAP ****************localhost : ok=1 changed=1 unreachable=0 failed=0 \u0026gt; # changed=0 : 상태 변화 없음 → 이미 started 상태 \u0026gt; ansible-playbook nginx.yml PLAY [nginx service start] TASK [service] ************changed: [localhost] PLAY RECAP ****************localhost : ok=1 changed=0 unreachable=0 failed=0 Loop (with_items) 및 변수 (vars) 활용 - name: test hosts: localhost gather_facts: no vars: SERVER_IP: 10.20.10.20 tasks: - name: test shell: | echo docker run -d --name={{item.name}} -p {{item.port}}:80 \\ -e SERVER_IP={{SERVER_IP}} with_items: - { name: \u0026#34;tomcat01\u0026#34;, port: \u0026#34;8001\u0026#34; } - { name: \u0026#34;tomcat02\u0026#34;, port: \u0026#34;8002\u0026#34; } - { name: \u0026#34;tomcat03\u0026#34;, port: \u0026#34;8003\u0026#34; } - { name: \u0026#34;tomcat04\u0026#34;, port: \u0026#34;8004\u0026#34; } register: out - debug: msg: \u0026#34;{{ item.stdout_lines }}\u0026#34; with_items: \u0026#34;{{ out.results }}\u0026#34; Tags 활용 - name: tags test hosts: localhost tasks: - shell : echo step 1 register: out tags: - step1 - debug : var=out.stdout_lines tags: - step1 - shell : echo step 2 register: out tags: - step2 - debug : var=out.stdout_lines tags: - step2 - shell : echo step 3 register: out tags: - step3 - debug : var=out.stdout_lines tags: - step3 # Setp2 tags 만 실행 \u0026gt; ansible-playbook test.yml --tags \u0026#34;step2\u0026#34; ok: [localhost] =\u0026gt; { \u0026#34;out.stdout_lines\u0026#34;: [ \u0026#34;step 2\u0026#34; ] } Windows Host 사용 Windows Host로 사용하는 방법 ssh winrm : https://github.com/cdecl/winrm-101{:target=\u0026quot;_blank\u0026quot;} # host 설정 : Service Enable winrm qc # 인증 및 AllowUnencrypted 설정 winrm set winrm/config/service/Auth \u0026#39;@{Basic=\u0026#34;true\u0026#34;}\u0026#39; winrm set winrm/config/service \u0026#39;@{AllowUnencrypted=\u0026#34;true\u0026#34;}\u0026#39; winrm set winrm/config/winrs \u0026#39;@{MaxMemoryPerShellMB=\u0026#34;1024\u0026#34;}\u0026#39; # winrm 을 사용하기 위한 python 모듈 설치 pip install pywinrm # --user Inventory 구성 [win] 192.168.28.25 [win:vars] ansible_user=rundeck ansible_password=\u0026lt;passowrd\u0026gt; ansible_connection=winrm ansible_port=5985 # ansible_winrm_server_cert_validation=ignore Windows 모듈 https://docs.ansible.com/ansible/latest/modules/list_of_windows_modules.html{:target=\u0026quot;_blank\u0026quot;} win_command – Executes a command on a remote Windows node win_copy – Copies files to remote locations on windows hosts win_shell – Execute shell commands on target hosts (powershell) win_chocolatey – Manage packages using chocolatey - name: ping test hosts: win gather_facts: no tasks: - win_ping: - name: Install git from a pre configured source (win_chocolatey_source) hosts: win tasks: - win_chocolatey: name: git Ansible Facts Facts : 원격서버(Node)로 부터 수집한 정보를 담고 있는 변수 # 원격서버 Facts 확인 \u0026gt; ansible hostname -m setup kubem | SUCCESS =\u0026gt; { \u0026#34;ansible_facts\u0026#34;: { \u0026#34;ansible_all_ipv4_addresses\u0026#34;: [ \u0026#34;10.244.0.0\u0026#34;, \u0026#34;10.244.0.1\u0026#34;, \u0026#34;192.168.137.108\u0026#34;, \u0026#34;172.17.0.1\u0026#34; ], \u0026#34;ansible_all_ipv6_addresses\u0026#34;: [ \u0026#34;fe80::e04c:baff:fe78:2e93\u0026#34;, \u0026#34;fe80::b8f6:d7ff:fecc:4c91\u0026#34;, \u0026#34;fe80::f8e5:7ff:fe0f:6b60\u0026#34;, \u0026#34;fe80::48b8:90ff:fede:71cf\u0026#34;, \u0026#34;fe80::8aa8:d266:54e5:1608\u0026#34;, \u0026#34;fe80::2918:237b:3860:3272\u0026#34; ], \u0026#34;ansible_apparmor\u0026#34;: { \u0026#34;status\u0026#34;: \u0026#34;disabled\u0026#34; }, \u0026#34;ansible_architecture\u0026#34;: \u0026#34;x86_64\u0026#34;, \u0026#34;ansible_bios_date\u0026#34;: \u0026#34;11/26/2012\u0026#34;, \u0026#34;ansible_bios_version\u0026#34;: \u0026#34;Hyper-V UEFI Release v1.0\u0026#34;, \u0026#34;ansible_cmdline\u0026#34;: { \u0026#34;BOOT_IMAGE\u0026#34;: \u0026#34;/vmlinuz-3.10.0-957.1.3.el7.x86_64\u0026#34;, \u0026#34;LANG\u0026#34;: \u0026#34;ko_KR.UTF-8\u0026#34;, \u0026#34;crashkernel\u0026#34;: \u0026#34;auto\u0026#34;, \u0026#34;quiet\u0026#34;: true, \u0026#34;rd.lvm.lv\u0026#34;: \u0026#34;centos/swap\u0026#34;, \u0026#34;rhgb\u0026#34;: true, \u0026#34;ro\u0026#34;: true, \u0026#34;root\u0026#34;: \u0026#34;/dev/mapper/centos-root\u0026#34; }, ... ansible_distribution 필터링 OS 구분시 유효 \u0026gt; ansible win -m setup -a \u0026#34;filter=ansible_distribution*\u0026#34; kube02 | SUCCESS =\u0026gt; { \u0026#34;ansible_facts\u0026#34;: { \u0026#34;ansible_distribution\u0026#34;: \u0026#34;CentOS\u0026#34;, \u0026#34;ansible_distribution_file_parsed\u0026#34;: true, \u0026#34;ansible_distribution_file_path\u0026#34;: \u0026#34;/etc/redhat-release\u0026#34;, \u0026#34;ansible_distribution_file_variety\u0026#34;: \u0026#34;RedHat\u0026#34;, \u0026#34;ansible_distribution_major_version\u0026#34;: \u0026#34;7\u0026#34;, \u0026#34;ansible_distribution_release\u0026#34;: \u0026#34;Core\u0026#34;, \u0026#34;ansible_distribution_version\u0026#34;: \u0026#34;7.6.1810\u0026#34; }, \u0026#34;changed\u0026#34;: false } kube01 | SUCCESS =\u0026gt; { \u0026#34;ansible_facts\u0026#34;: { \u0026#34;ansible_distribution\u0026#34;: \u0026#34;CentOS\u0026#34;, \u0026#34;ansible_distribution_file_parsed\u0026#34;: true, \u0026#34;ansible_distribution_file_path\u0026#34;: \u0026#34;/etc/redhat-release\u0026#34;, \u0026#34;ansible_distribution_file_variety\u0026#34;: \u0026#34;RedHat\u0026#34;, \u0026#34;ansible_distribution_major_version\u0026#34;: \u0026#34;7\u0026#34;, \u0026#34;ansible_distribution_release\u0026#34;: \u0026#34;Core\u0026#34;, \u0026#34;ansible_distribution_version\u0026#34;: \u0026#34;7.6.1810\u0026#34; }, \u0026#34;changed\u0026#34;: false } kubem | SUCCESS =\u0026gt; { \u0026#34;ansible_facts\u0026#34;: { \u0026#34;ansible_distribution\u0026#34;: \u0026#34;CentOS\u0026#34;, \u0026#34;ansible_distribution_file_parsed\u0026#34;: true, \u0026#34;ansible_distribution_file_path\u0026#34;: \u0026#34;/etc/redhat-release\u0026#34;, \u0026#34;ansible_distribution_file_variety\u0026#34;: \u0026#34;RedHat\u0026#34;, \u0026#34;ansible_distribution_major_version\u0026#34;: \u0026#34;7\u0026#34;, \u0026#34;ansible_distribution_release\u0026#34;: \u0026#34;Core\u0026#34;, \u0026#34;ansible_distribution_version\u0026#34;: \u0026#34;7.6.1810\u0026#34; }, \u0026#34;changed\u0026#34;: false } 192.168.28.25 | SUCCESS =\u0026gt; { \u0026#34;ansible_facts\u0026#34;: { \u0026#34;ansible_architecture\u0026#34;: \u0026#34;64비트\u0026#34;, \u0026#34;ansible_bios_date\u0026#34;: \u0026#34;11-10-2015\u0026#34;, \u0026#34;ansible_bios_version\u0026#34;: \u0026#34;P89\u0026#34;, \u0026#34;ansible_date_time\u0026#34;: { .... }, \u0026#34;ansible_distribution\u0026#34;: \u0026#34;Microsoft Windows Server 2016 Standard\u0026#34;, \u0026#34;ansible_distribution_major_version\u0026#34;: \u0026#34;10\u0026#34;, \u0026#34;ansible_distribution_version\u0026#34;: \u0026#34;10.0.14393.0\u0026#34;, ... Ansible Facts OS 구분에 따른 필터링 when 구문 사용 - name: nginx hosts: localhost tasks: - service: name: nginx state: started become: yes when: ansible_distribution == \u0026#39;CentOS\u0026#39; and ansible_distribution_major_version == \u0026#39;6\u0026#39; - systemd: name: nginx enabled: yes state: started become: yes when: ansible_distribution == \u0026#39;CentOS\u0026#39; and ansible_distribution_major_version == \u0026#39;7\u0026#39; 참고 Awesome Ansible : https://github.com/jdauphant/awesome-ansible{:target=\u0026quot;_blank\u0026quot;} Ansible tutorial : https://github.com/leucos/ansible-tuto{:target=\u0026quot;_blank\u0026quot;} Ansible examples : https://github.com/ansible/ansible-examples{:target=\u0026quot;_blank\u0026quot;} ","permalink":"https://cdecl.github.io/devops/ansible-101/","summary":"\u003cp\u003eAnsible-101\u003c/p\u003e\n\u003ch3 id=\"ansible-install\"\u003eAnsible Install\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003eCentos 7\n\u003cul\u003e\n\u003cli\u003e기본적으로 Python 2.7 기반으로 설치 됨\u003c/li\u003e\n\u003cli\u003e추후 pywinrm 패키지가 필요할때, python2-pip 패키지 추가 설치 필요\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003esudo yum install ansible\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cul\u003e\n\u003cli\u003e대안으로 pip 으로 설치 하는 방법 (user)\u003c/li\u003e\n\u003c/ul\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003epip install ansible \u003cspan style=\"color:#75715e\"\u003e# --user \u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch3 id=\"용어-정의\"\u003e용어 정의\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003eInventory : 관리하는 원격 서버 목록\n\u003cul\u003e\n\u003cli\u003e지정하지 않으면 Default Path 의 hosts 파일을 참조\n\u003cul\u003e\n\u003cli\u003e/etc/ansible/hosts\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003eModule : Task 를 실행하는 방법 (모듈)\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://docs.ansible.com/ansible/latest/modules/modules_by_category.html\"\u003ehttps://docs.ansible.com/ansible/latest/modules/modules_by_category.html\u003c/a\u003e{:target=\u0026quot;_blank\u0026quot;}\u003c/li\u003e\n\u003cli\u003ee.g. - command, shell, copy, service\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003ePlaybook : Task 실행 프로세스 정의서\n\u003cul\u003e\n\u003cli\u003eYaml 파일로 작성\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e멱등성(idempotence) : 연산을 여러 번 적용하더라도 결과가 달라지지 않는 성질을 의미한다.\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"ansbile-config\"\u003eAnsbile Config\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003ePath : /etc/ansible/ansible.cfg\u003c/li\u003e\n\u003cli\u003eIgnore ansible ssh authenticity : ssh 최초 접속시 인증을 host key 체크 생략\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://stackoverflow.com/questions/32297456/how-to-ignore-ansible-ssh-authenticity-checking\"\u003ehttps://stackoverflow.com/questions/32297456/how-to-ignore-ansible-ssh-authenticity-checking\u003c/a\u003e{:target=\u0026quot;_blank\u0026quot;}\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003e[\u003c/span\u003edefaults\u003cspan style=\"color:#f92672\"\u003e]\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ehost_key_checking \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e False\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cul\u003e\n\u003cli\u003eCallback plugins\n\u003cul\u003e\n\u003cli\u003eminimal stdout\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003cpre tabindex=\"0\"\u003e\u003ccode\u003e[defaults]\nstdout_callback = minimal\n\u003c/code\u003e\u003c/pre\u003e\u003cul\u003e\n\u003cli\u003e참고 : How to disable strict host key checking in ssh?\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://askubuntu.com/questions/87449/how-to-disable-strict-host-key-checking-in-ssh\"\u003ehttps://askubuntu.com/questions/87449/how-to-disable-strict-host-key-checking-in-ssh\u003c/a\u003e{:target=\u0026quot;_blank\u0026quot;}\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"inventory-구성\"\u003eInventory 구성\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003ePublic key 등록 사용 방법 : 키를 생성하고 public 키를 관리되는 서버에 등록 후 사용\u003c/li\u003e\n\u003c/ul\u003e\n\u003cpre tabindex=\"0\"\u003e\u003ccode\u003e# Key 생성 \nssh-keygen\n\n# Public key 등록\nssh-copy-id [server-ip] \n\u003c/code\u003e\u003c/pre\u003e\u003cul\u003e\n\u003cli\u003eInventory 서버 등록 : /etc/ansible/hosts\n\u003cul\u003e\n\u003cli\u003e기본디렉토리의 Host 파일을 사용하지 않는다면 -i 옵션으로 Inventory 파일 지정\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://docs.ansible.com/ansible/latest/user_guide/intro_inventory.html#list-of-behavioral-inventory-parameters\"\u003ehttps://docs.ansible.com/ansible/latest/user_guide/intro_inventory.html#list-of-behavioral-inventory-parameters\u003c/a\u003e{:target=\u0026quot;_blank\u0026quot;}\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003cpre tabindex=\"0\"\u003e\u003ccode\u003e# ansible host 파일 예제\n\n192.168.1.5\n\n[db]\n192.168.1.10\n\n[webservers]\n192.168.1.100\n192.168.1.110\n\n# hosts 파일에 등록된 경우 \n[apiserver]\napiserver1\napiserver2\n\n# host명으로 등록\nserver1\t\tansible_host=192.168.1.50\nserver2\t\tansible_host=192.168.1.51\n\u003c/code\u003e\u003c/pre\u003e\u003cul\u003e\n\u003cli\u003eHost 지정 방법\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003eall\u003c/code\u003e : 해당 Inventory의 모든 서버\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003ewebservers\u003c/code\u003e : webservers 라고 정의된 서버 목록\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003e192.168.1.100\u003c/code\u003e : 192.168.1.100 서버\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"ad-hook-execute\"\u003eAd-hook Execute\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003eansible 명령을 통한 inline 실행\u003c/li\u003e\n\u003cli\u003e주요 인수\u003c/li\u003e\n\u003c/ul\u003e\n\u003cpre tabindex=\"0\"\u003e\u003ccode\u003eUsage: ansible \u0026lt;host-pattern\u0026gt; [options]\n  -a MODULE_ARGS, --args=MODULE_ARGS   module arguments                                                                   \n  -e EXTRA_VARS, --extra-vars=EXTRA_VARS\n    set additional variables as key=value or YAML/JSON, if filename prepend with @  \n  -f FORKS, --forks=FORKS \n      specify number of parallel processes to use (default=5)                                                                        \n  -h, --help            show this help message and exit                                                     \n  -i INVENTORY, --inventory=INVENTORY, --inventory-file=INVENTORY                                           \n      specify inventory host path or comma separated host                                \n      list. --inventory-file is deprecated                                               \n  -m MODULE_NAME, --module-name=MODULE_NAME                                                                 \n      module name to execute (default=command)                                           \n  -v, --verbose         verbose mode (-vvv for more, -vvvv to enable connection debugging)                                                              \n  --version             show program\u0026#39;s version number, config file location,                                \n      configured module search path, module location,                                    \n      executable location and exit                                                       \n  -b, --become        run operations with become (does not imply password prompting)                                                                         \n\u003c/code\u003e\u003c/pre\u003e\u003ch4 id=\"--example\"\u003e- Example\u003c/h4\u003e\n\u003cul\u003e\n\u003cli\u003ehostname 확인\u003c/li\u003e\n\u003c/ul\u003e\n\u003cpre tabindex=\"0\"\u003e\u003ccode\u003e# webservers 목록 실행 \n# command 모듈, \u0026#34;hostname\u0026#34; 인수\nansible webservers -m command -a \u0026#34;hostname\u0026#34; \n\n# default module (생략가능) : -m command   \nansible webservers -a \u0026#34;hostname\u0026#34; \n\n# 모든 서버\nansible all -a \u0026#34;hostname\u0026#34; \n\u003c/code\u003e\u003c/pre\u003e\u003cul\u003e\n\u003cli\u003e기타 모듈 사용\u003c/li\u003e\n\u003c/ul\u003e\n\u003cpre tabindex=\"0\"\u003e\u003ccode\u003e# ping 모듈 \nansible webservers -m ping\n\n# copy 모듈 : local → host \nansible webservers -m copy -a \u0026#34;src=file.txt dest=/home/cdecl/web/\u0026#34;\n\n# service 모듈 : kubelet 서비스를 시작 \nansible webservers -m service -a \u0026#34;name=kubelet state=started\u0026#34;\n\u003c/code\u003e\u003c/pre\u003e\u003ch3 id=\"playbook-사용\"\u003ePlaybook 사용\u003c/h3\u003e\n\u003cp\u003e일련의 Task(작업)를 기술하여, 프로세스를 실행하는 방법\u003c/p\u003e","title":"Ansible-101"}]